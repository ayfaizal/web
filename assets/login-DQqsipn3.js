import{r as b,e as j}from"./validators-BTYlBg-y.js";import{r as d,i as B,j as M,a as N,o as P,c as S,b as e,e as t,d as r,m as a,H as V,v as y,t as u,aO as $,a3 as A,am as E,F as U,aT as g,aM as O}from"./index-VU0dmoHZ.js";import{_ as z}from"./AuthProvider-CO8oAyia.js";import{a as G,b as H,c as W,d as J}from"./auth-v2-login-illustration-light-0ewtVcUK.js";import{a as K,b as Q}from"./auth-v2-login-mask-light-Dw0cwDG7.js";import{V as X}from"./VNodeRenderer-BelNBPWP.js";import{u as v}from"./useGenerateImageVariant-D0_fMyU0.js";import{u as Y}from"./useAbility-7tf4iFcu.js";import{$ as Z}from"./api-Cp89FJ6x.js";import{a as i,V as k}from"./VRow-5iodEM2E.js";import{V as ee}from"./VImg-BNqJuZG0.js";import{V as ae}from"./VCard-DttbPEhw.js";import{V as w}from"./VCardText-uyCvIofY.js";import{V as te}from"./VForm-Dkf4DVK-.js";import{V as x}from"./VTextField-CRe8TF0Y.js";import{V as oe}from"./VCheckbox-DXvPyzAP.js";import{V as L}from"./VDivider-BdZVMXth.js";import"./helpers-DK5QwNv0.js";import"./index-Bbh44Qwm.js";/* empty css              */import"./VAvatar-B0yljh3k.js";import"./form-D37_K2HO.js";import"./forwardRefs-C-GTDzx5.js";/* empty css                   */import"./VCounter-BnJ4X-op.js";import"./VField-TfdV7Sv1.js";import"./easing-CjukEv2V.js";import"./VInput-DUnqEF-j.js";import"./VCheckboxBtn-DGugApLE.js";import"./VSelectionControl-Dht4FwVx.js";const se={class:"auth-logo app-logo"},re={class:"app-logo-title"},le={class:"d-flex align-center justify-center pa-10"},ie=["src"],ne={class:"text-h4 mb-1"},me={class:"text-capitalize"},de=r("p",{class:"mb-0"}," Please sign-in to your account and start the adventure ",-1),ue={class:"d-flex align-center flex-wrap justify-space-between my-6 gap-x-2"},pe=r("span",{class:"d-inline-block"}," New on our platform? ",-1),ce=r("span",{class:"mx-4 text-high-emphasis"},"or",-1),Ge={__name:"login",setup(fe){const R=v(J,W,H,G,!0),C=v(Q,K),p=d(!1),h=B(),T=M(),I=Y(),c=d({email:void 0,password:void 0}),_=d(),n=d({email:"admin@demo.com",password:"admin"}),f=d(!1),q=async()=>{try{const o=await Z("/auth/login",{method:"POST",body:{email:n.value.email,password:n.value.password},onResponseError({response:F}){c.value=F._data.errors}}),{accessToken:s,userData:m,userAbilityRules:l}=o;g("userAbilityRules").value=l,I.update(l),g("userData").value=m,g("accessToken").value=s,await O(()=>{T.replace(h.query.to?String(h.query.to):"/")})}catch(o){console.error(o)}},D=()=>{var o;(o=_.value)==null||o.validate().then(({valid:s})=>{s&&q()})};return(o,s)=>{const m=N("RouterLink");return P(),S(U,null,[e(m,{to:"/"},{default:t(()=>[r("div",se,[e(a(X),{nodes:a(V).app.logo},null,8,["nodes"]),r("h1",re,y(a(V).app.title)+"* ",1)])]),_:1}),e(k,{"no-gutters":"",class:"auth-wrapper"},{default:t(()=>[e(i,{md:"8",class:"d-none d-md-flex align-center justify-center position-relative"},{default:t(()=>[r("div",le,[r("img",{src:a(R),class:"auth-illustration w-100",alt:"auth-illustration"},null,8,ie)]),e(ee,{src:a(C),class:"d-none d-md-flex auth-footer-mask",alt:"auth-mask"},null,8,["src"])]),_:1}),e(i,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:t(()=>[e(ae,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-5 pa-lg-7"},{default:t(()=>[e(w,null,{default:t(()=>[r("h4",ne,[u(" Welcome to "),r("span",me,y(a(V).app.title)+"!",1),u("  ")]),de]),_:1}),e(w,null,{default:t(()=>[e(a(te),{ref_key:"refVForm",ref:_,onSubmit:$(D,["prevent"])},{default:t(()=>[e(k,null,{default:t(()=>[e(i,{cols:"12"},{default:t(()=>[e(x,{modelValue:a(n).email,"onUpdate:modelValue":s[0]||(s[0]=l=>a(n).email=l),label:"Email",placeholder:"johndoe@email.com",type:"email",autofocus:"",rules:["requiredValidator"in o?o.requiredValidator:a(b),"emailValidator"in o?o.emailValidator:a(j)],"error-messages":a(c).email},null,8,["modelValue","rules","error-messages"])]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(x,{modelValue:a(n).password,"onUpdate:modelValue":s[1]||(s[1]=l=>a(n).password=l),label:"Password",placeholder:"路路路路路路路路路路路路",rules:["requiredValidator"in o?o.requiredValidator:a(b)],type:a(p)?"text":"password","error-messages":a(c).password,"append-inner-icon":a(p)?"ri-eye-off-line":"ri-eye-line","onClick:appendInner":s[2]||(s[2]=l=>p.value=!a(p))},null,8,["modelValue","rules","type","error-messages","append-inner-icon"]),r("div",ue,[e(oe,{modelValue:a(f),"onUpdate:modelValue":s[3]||(s[3]=l=>A(f)?f.value=l:null),label:"Remember me"},null,8,["modelValue"]),e(m,{class:"text-primary",to:{name:"forgot-password"}},{default:t(()=>[u(" Forgot Password? ")]),_:1})]),e(E,{block:"",type:"submit"},{default:t(()=>[u(" Login ")]),_:1})]),_:1}),e(i,{cols:"12",class:"text-body-1 text-center"},{default:t(()=>[pe,e(m,{class:"text-primary ms-1 d-inline-block text-body-1",to:{name:"register"}},{default:t(()=>[u(" Create an account ")]),_:1})]),_:1}),e(i,{cols:"12",class:"d-flex align-center"},{default:t(()=>[e(L),ce,e(L)]),_:1}),e(i,{cols:"12",class:"text-center"},{default:t(()=>[e(z)]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})],64)}}};export{Ge as default};
