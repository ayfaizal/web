import{_ as de}from"./DialogCloseBtn-DNzPt0rr.js";import{V as W}from"./VCard-DttbPEhw.js";import{V as I}from"./VCardText-uyCvIofY.js";import{V as ue}from"./VForm-Dkf4DVK-.js";import{V as re}from"./VTextField-CRe8TF0Y.js";import{V as me}from"./VTable-BZlPi4DS.js";import{V as N}from"./VCheckbox-DXvPyzAP.js";import{r as _,a9 as Z,w as q,o as g,f as R,e as t,b as e,d as a,v as V,m as l,a3 as w,c as C,F,h as X,am as z,t as U,aZ as B,a_ as S,a$ as j,aP as L,aQ as O,b9 as J,b8 as te,di as ce,dj as pe,dk as fe,a as Y,y as K,a2 as M,aW as _e}from"./index-VU0dmoHZ.js";import{V as ve}from"./VDialog-bGaStrcf.js";import{a as D,V as ee}from"./VRow-5iodEM2E.js";import{V as ge}from"./VSpacer-DIW3Gp5e.js";import{V as Q}from"./VAvatar-B0yljh3k.js";import{a as he}from"./formatters-zPA0pF4b.js";import{p as Ve}from"./paginationMeta-BbY5dJ0C.js";import{u as xe}from"./useApi-DHFWqMSv.js";import{c as ye}from"./createUrl-BhvyS9BG.js";import{$ as be}from"./api-Cp89FJ6x.js";import{V as ae}from"./VSelect-CxzQIejo.js";import{V as we}from"./VDataTableServer-BlU4se88.js";import{V as $e}from"./VImg-BNqJuZG0.js";import{V as ke}from"./VChip-ClWrs_JY.js";import{V as Ue}from"./VMenu-DngO4Bzq.js";import{V as Ce,a as se,b as le}from"./VList-DhXfVcoA.js";import{V as Pe}from"./VDivider-BdZVMXth.js";import"./form-D37_K2HO.js";import"./forwardRefs-C-GTDzx5.js";/* empty css                   */import"./VCounter-BnJ4X-op.js";import"./VField-TfdV7Sv1.js";import"./easing-CjukEv2V.js";import"./VInput-DUnqEF-j.js";import"./VCheckboxBtn-DGugApLE.js";import"./VSelectionControl-Dht4FwVx.js";import"./VOverlay-BZO4hDjN.js";import"./lazy-CTD-MLkl.js";import"./scopeId-DwszM4ys.js";import"./dialog-transition-ClMl6VK0.js";/* empty css              */import"./helpers-DK5QwNv0.js";import"./index-Bbh44Qwm.js";import"./VDataTable-B5tPfkax.js";import"./VPagination-BLh6BNxV.js";import"./filter-J5RtAc8v.js";import"./VSlideGroup-CNt9oOkj.js";import"./ssrBoot-Cx7lQdW-.js";const Me={class:"text-center mb-10"},Re={class:"text-h4 mb-2"},De={class:"text-body-1"},Ae=a("h5",{class:"text-h5 my-6"}," Role Permissions ",-1),ze=a("td",{class:"text-h6"}," Administrator Access ",-1),Ee={colspan:"3"},Be={class:"d-flex justify-end"},Se={class:"text-h6"},je={style:{"inline-size":"5.75rem"}},Le={class:"d-flex justify-end"},Fe={style:{"inline-size":"5.75rem"}},Ie={class:"d-flex justify-end"},Te={style:{"inline-size":"5.75rem"}},Ne={class:"d-flex justify-end"},qe={class:"d-flex align-center justify-center gap-3 mt-6"},Oe={__name:"AddEditRoleDialog",props:{rolePermissions:{type:Object,required:!1,default:()=>({name:"",permissions:[]})},isDialogVisible:{type:Boolean,required:!0}},emits:["update:isDialogVisible","update:rolePermissions"],setup(T,{emit:$}){const p=T,h=$,n=_([{name:"User Management",read:!1,write:!1,create:!1},{name:"Content Management",read:!1,write:!1,create:!1},{name:"Disputes Management",read:!1,write:!1,create:!1},{name:"Database Management",read:!1,write:!1,create:!1},{name:"Financial Management",read:!1,write:!1,create:!1},{name:"Reporting",read:!1,write:!1,create:!1},{name:"API Control",read:!1,write:!1,create:!1},{name:"Repository Management",read:!1,write:!1,create:!1},{name:"Payroll",read:!1,write:!1,create:!1}]),x=_(!1),y=_(""),m=_(),f=Z(()=>{let i=0;return n.value.forEach(c=>{Object.entries(c).forEach(([k,u])=>{k!=="name"&&u&&i++})}),i}),d=Z(()=>f.value>0&&f.value<n.value.length*3);q(x,i=>{n.value=n.value.map(c=>({...c,read:i,write:i,create:i}))}),q(d,()=>{d.value||(x.value=!1)}),q(n,()=>{f.value===n.value.length*3&&(x.value=!0)},{deep:!0}),q(()=>p,()=>{p.rolePermissions&&p.rolePermissions.permissions.length&&(y.value=p.rolePermissions.name,n.value=n.value.map(i=>{var k;const c=(k=p.rolePermissions)==null?void 0:k.permissions.find(u=>u.name===i.name);return c?{...i,...c}:i}))});const o=()=>{var c;const i={name:y.value,permissions:n.value};h("update:rolePermissions",i),h("update:isDialogVisible",!1),x.value=!1,(c=m.value)==null||c.reset()},b=()=>{var i;h("update:isDialogVisible",!1),x.value=!1,(i=m.value)==null||i.reset()};return(i,c)=>{const k=de;return g(),R(ve,{width:i.$vuetify.display.smAndDown?"auto":900,"model-value":p.isDialogVisible,"onUpdate:modelValue":b},{default:t(()=>[e(W,{class:"pa-sm-11 pa-3"},{default:t(()=>[e(k,{variant:"text",size:"default",onClick:b}),e(I,null,{default:t(()=>[a("div",Me,[a("h4",Re,V(p.rolePermissions.name?"Edit":"Add")+" Role ",1),a("p",De,V(p.rolePermissions.name?"Edit":"Add")+" Role ",1)]),e(l(ue),{ref_key:"refPermissionForm",ref:m},{default:t(()=>[e(re,{modelValue:l(y),"onUpdate:modelValue":c[0]||(c[0]=u=>w(y)?y.value=u:null),label:"Role Name",placeholder:"Enter Role Name"},null,8,["modelValue"]),Ae,e(me,{class:"permission-table text-no-wrap"},{default:t(()=>[a("tr",null,[ze,a("td",Ee,[a("div",Be,[e(N,{modelValue:l(x),"onUpdate:modelValue":c[1]||(c[1]=u=>w(x)?x.value=u:null),indeterminate:l(d),"onUpdate:indeterminate":c[2]||(c[2]=u=>w(d)?d.value=u:null),label:"Select All"},null,8,["modelValue","indeterminate"])])])]),(g(!0),C(F,null,X(l(n),u=>(g(),C("tr",{key:u.name},[a("td",Se,V(u.name),1),a("td",je,[a("div",Le,[e(N,{modelValue:u.read,"onUpdate:modelValue":P=>u.read=P,label:"Read"},null,8,["modelValue","onUpdate:modelValue"])])]),a("td",Fe,[a("div",Ie,[e(N,{modelValue:u.write,"onUpdate:modelValue":P=>u.write=P,label:"Write"},null,8,["modelValue","onUpdate:modelValue"])])]),a("td",Te,[a("div",Ne,[e(N,{modelValue:u.create,"onUpdate:modelValue":P=>u.create=P,label:"Create"},null,8,["modelValue","onUpdate:modelValue"])])])]))),128))]),_:1}),a("div",qe,[e(z,{onClick:o},{default:t(()=>[U(" Submit ")]),_:1}),e(z,{color:"secondary",variant:"outlined",onClick:b},{default:t(()=>[U(" Cancel ")]),_:1})])]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},Qe="https://github.com/ayfaizal/js/assets/pose_m1-CZvEC2-y.png",We={class:"v-avatar-group"},Ze={class:"text-high-emphasis"},Ge={class:"d-flex justify-space-between align-end"},He={class:"text-h5 mb-1"},Je=["onClick"],Ke=["src"],Xe=a("span",{class:"text-end"},"Add new role, if it doesn't exist.",-1),Ye={__name:"RoleCards",setup(T){const $=_([{role:"Administrator",users:[B,S,j,L],details:{name:"Administrator",permissions:[{name:"User Management",read:!0,write:!0,create:!0},{name:"Disputes Management",read:!0,write:!0,create:!0},{name:"API Control",read:!0,write:!0,create:!0}]}},{role:"Manager",users:[B,S,j,L,O,J,te],details:{name:"Manager",permissions:[{name:"Reporting",read:!0,write:!0,create:!1},{name:"Payroll",read:!0,write:!0,create:!0},{name:"User Management",read:!0,write:!0,create:!0}]}},{role:"Users",users:[B,S,j,L,O],details:{name:"Users",permissions:[{name:"User Management",read:!0,write:!1,create:!1},{name:"Content Management",read:!0,write:!1,create:!1},{name:"Disputes Management",read:!0,write:!1,create:!1},{name:"Database Management",read:!0,write:!1,create:!1}]}},{role:"Support",users:[B,S,j,L,O,J],details:{name:"Support",permissions:[{name:"Repository Management",read:!0,write:!0,create:!1},{name:"Content Management",read:!0,write:!0,create:!1},{name:"Database Management",read:!0,write:!0,create:!1}]}},{role:"Restricted User",users:[B,S,j,L,O,J,te,ce,pe,fe],details:{name:"Restricted User",permissions:[{name:"User Management",read:!0,write:!1,create:!1},{name:"Content Management",read:!0,write:!1,create:!1},{name:"Disputes Management",read:!0,write:!1,create:!1},{name:"Database Management",read:!0,write:!1,create:!1}]}}]),p=_(!1),h=_(),n=_(!1),x=y=>{p.value=!0,h.value=y};return(y,m)=>{const f=Y("IconBtn"),d=Oe;return g(),C(F,null,[e(ee,null,{default:t(()=>[(g(!0),C(F,null,X(l($),o=>(g(),R(D,{key:o.role,cols:"12",sm:"6",lg:"4"},{default:t(()=>[e(W,null,{default:t(()=>[e(I,{class:"d-flex align-center pb-4"},{default:t(()=>[a("span",null,"Total "+V(o.users.length)+" users",1),e(ge),a("div",We,[(g(!0),C(F,null,X(o.users,(b,i)=>(g(),C(F,{key:b},[o.users.length>4&&o.users.length!==4&&i<3?(g(),R(Q,{key:0,size:"40",image:b},null,8,["image"])):K("",!0),o.users.length===4?(g(),R(Q,{key:1,size:"40",image:b},null,8,["image"])):K("",!0)],64))),128)),o.users.length>4?(g(),R(Q,{key:0,color:y.$vuetify.theme.current.dark?"#383B55":"#F0EFF0"},{default:t(()=>[a("span",Ze," +"+V(o.users.length-3),1)]),_:2},1032,["color"])):K("",!0)])]),_:2},1024),e(I,null,{default:t(()=>[a("div",Ge,[a("div",null,[a("h5",He,V(o.role),1),a("a",{href:"javascript:void(0)",onClick:b=>x(o.details)}," Edit Role ",8,Je)]),e(f,{color:"secondary",class:"mt-n2"},{default:t(()=>[e(M,{icon:"ri-file-copy-line"})]),_:1})])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(D,{cols:"12",sm:"6",lg:"4"},{default:t(()=>[e(W,{class:"h-100",ripple:!1},{default:t(()=>[e(ee,{"no-gutters":"",class:"h-100"},{default:t(()=>[e(D,{cols:"5",class:"d-flex flex-column justify-end align-center"},{default:t(()=>[a("img",{width:"69",src:l(Qe)},null,8,Ke)]),_:1}),e(D,{cols:"7"},{default:t(()=>[e(I,{class:"d-flex flex-column align-end justify-end gap-4"},{default:t(()=>[e(z,{size:"small",onClick:m[0]||(m[0]=o=>n.value=!0)},{default:t(()=>[U(" Add Role ")]),_:1}),Xe]),_:1})]),_:1})]),_:1})]),_:1}),e(d,{"is-dialog-visible":l(n),"onUpdate:isDialogVisible":m[1]||(m[1]=o=>w(n)?n.value=o:null)},null,8,["is-dialog-visible"])]),_:1})]),_:1}),e(d,{"is-dialog-visible":l(p),"onUpdate:isDialogVisible":m[2]||(m[2]=o=>w(p)?p.value=o:null),"role-permissions":l(h),"onUpdate:rolePermissions":m[3]||(m[3]=o=>w(h)?h.value=o:null)},null,8,["is-dialog-visible","role-permissions"])],64)}}},et={class:"d-flex flex-wrap gap-4"},tt={style:{"inline-size":"15.625rem"}},at={style:{"inline-size":"9.25rem"}},st={class:"d-flex"},lt={key:1},rt={class:"d-flex flex-column"},ot={class:"text-sm"},it={class:"d-flex gap-2"},nt={class:"text-h6 text-capitalize font-weight-regular"},dt={class:"text-h6 font-weight-regular text-capitalize"},ut={class:"d-flex justify-end flex-wrap gap-x-6 px-2 py-1"},mt={class:"d-flex align-center gap-x-2 text-medium-emphasis text-base"},ct={class:"d-flex align-center text-base text-high-emphasis me-2 mb-0"},pt={class:"d-flex gap-x-2 align-center me-2"},ft={__name:"UserList",async setup(T){let $,p;const h=_(""),n=_(),x=_(),y=_(),m=_([]),f=_(10),d=_(1),o=_(),b=_(),i=v=>{var r,A;d.value=v.page,o.value=(r=v.sortBy[0])==null?void 0:r.key,b.value=(A=v.sortBy[0])==null?void 0:A.order},c=[{title:"User",key:"user"},{title:"Email",key:"email"},{title:"Role",key:"role"},{title:"Plan",key:"plan"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],{data:k,execute:u}=([$,p]=_e(()=>xe(ye("/apps/users",{query:{q:h,status:y,plan:x,role:n,itemsPerPage:f,page:d,sortBy:o,orderBy:b}}))),$=await $,p(),$),P=Z(()=>k.value.users),E=Z(()=>k.value.totalUsers),oe=[{title:"Admin",value:"admin"},{title:"Author",value:"author"},{title:"Editor",value:"editor"},{title:"Maintainer",value:"maintainer"},{title:"Subscriber",value:"subscriber"}],G=v=>{const r=v.toLowerCase();return r==="subscriber"?{color:"success",icon:"ri-user-line"}:r==="author"?{color:"error",icon:"ri-computer-line"}:r==="maintainer"?{color:"info",icon:"ri-pie-chart-line"}:r==="editor"?{color:"warning",icon:"ri-edit-box-line"}:r==="admin"?{color:"primary",icon:"ri-vip-crown-line"}:{color:"primary",icon:"ri-user-line"}},ie=v=>{const r=v.toLowerCase();return r==="pending"?"warning":r==="active"?"success":r==="inactive"?"secondary":"primary"},ne=async v=>{await be(`/apps/users/${v}`,{method:"DELETE"});const r=m.value.findIndex(A=>Number(A)===v);r!==-1&&m.value.splice(r,1),u()};return(v,r)=>{const A=Y("RouterLink"),H=Y("IconBtn");return g(),C("section",null,[e(W,null,{default:t(()=>[e(I,{class:"d-flex justify-space-between flex-wrap gap-5"},{default:t(()=>[e(z,{variant:"outlined",color:"secondary","prepend-icon":"ri-share-box-line"},{default:t(()=>[U(" Export ")]),_:1}),a("div",et,[a("div",tt,[e(re,{modelValue:l(h),"onUpdate:modelValue":r[0]||(r[0]=s=>w(h)?h.value=s:null),placeholder:"Search User",density:"compact"},null,8,["modelValue"])]),a("div",at,[e(ae,{modelValue:l(n),"onUpdate:modelValue":r[1]||(r[1]=s=>w(n)?n.value=s:null),placeholder:"Select Role",items:oe,density:"compact",clearable:"","clear-icon":"ri-close-line"},null,8,["modelValue"])])])]),_:1}),e(we,{"model-value":l(m),"onUpdate:modelValue":r[5]||(r[5]=s=>w(m)?m.value=s:null),"items-per-page":l(f),"onUpdate:itemsPerPage":r[6]||(r[6]=s=>w(f)?f.value=s:null),"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],items:l(P),"item-value":"id","items-length":l(E),headers:c,"show-select":"",class:"text-no-wrap rounded-0","onUpdate:options":i},{"item.user":t(({item:s})=>[a("div",st,[e(Q,{size:"34",variant:s.avatar?void 0:"tonal",color:s.avatar?void 0:G(s.role).color,class:"me-3"},{default:t(()=>[s.avatar?(g(),R($e,{key:0,src:s.avatar},null,8,["src"])):(g(),C("span",lt,V(("avatarText"in v?v.avatarText:l(he))(s.fullName)),1))]),_:2},1032,["variant","color"]),a("div",rt,[e(A,{to:{name:"apps-user-view-id",params:{id:s.id}},class:"text-link font-weight-medium text-base"},{default:t(()=>[U(V(s.fullName),1)]),_:2},1032,["to"]),a("span",ot,"@"+V(s.username),1)])])]),"item.role":t(({item:s})=>[a("div",it,[e(M,{size:"22",icon:G(s.role).icon,color:G(s.role).color},null,8,["icon","color"]),a("h6",nt,V(s.role),1)])]),"item.plan":t(({item:s})=>[a("h6",dt,V(s.currentPlan),1)]),"item.status":t(({item:s})=>[e(ke,{color:ie(s.status),size:"small",class:"text-capitalize"},{default:t(()=>[U(V(s.status),1)]),_:2},1032,["color"])]),"item.actions":t(({item:s})=>[e(H,{size:"small",onClick:Vt=>ne(s.id)},{default:t(()=>[e(M,{icon:"ri-delete-bin-7-line"})]),_:2},1032,["onClick"]),e(H,{size:"small",to:{name:"apps-user-view-id",params:{id:s.id}}},{default:t(()=>[e(M,{icon:"ri-eye-line"})]),_:2},1032,["to"]),e(H,{size:"small"},{default:t(()=>[e(M,{icon:"ri-more-2-line"}),e(Ue,{activator:"parent"},{default:t(()=>[e(Ce,null,{default:t(()=>[e(se,{link:""},{prepend:t(()=>[e(M,{size:"20",icon:"ri-edit-box-line"})]),default:t(()=>[e(le,null,{default:t(()=>[U("Edit")]),_:1})]),_:1}),e(se,{link:""},{prepend:t(()=>[e(M,{size:"20",icon:"ri-download-line"})]),default:t(()=>[e(le,null,{default:t(()=>[U("Download")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),bottom:t(()=>[e(Pe),a("div",ut,[a("div",mt,[U(" Rows Per Page: "),e(ae,{modelValue:l(f),"onUpdate:modelValue":r[2]||(r[2]=s=>w(f)?f.value=s:null),class:"per-page-select",variant:"plain",items:[10,20,25,50,100]},null,8,["modelValue"])]),a("p",ct,V(("paginationMeta"in v?v.paginationMeta:l(Ve))({page:l(d),itemsPerPage:l(f)},l(E))),1),a("div",pt,[e(z,{class:"flip-in-rtl",icon:"ri-arrow-left-s-line",variant:"text",density:"comfortable",color:"high-emphasis",disabled:l(d)<=1,onClick:r[3]||(r[3]=s=>l(d)<=1?d.value=1:d.value--)},null,8,["disabled"]),e(z,{class:"flip-in-rtl",icon:"ri-arrow-right-s-line",density:"comfortable",variant:"text",color:"high-emphasis",disabled:l(d)>=Math.ceil(l(E)/l(f)),onClick:r[4]||(r[4]=s=>l(d)>=Math.ceil(l(E)/l(f))?d.value=Math.ceil(l(E)/l(f)):d.value++)},null,8,["disabled"])])])]),_:1},8,["model-value","items-per-page","items-per-page-options","items","items-length"])]),_:1})])}}},_t=a("h4",{class:"text-h4 mb-1"}," Roles List ",-1),vt=a("p",{class:"text-body-1 mb-0"}," A role provided access to predefined menus and features so that depending on assigned role an administrator can have access to what he need ",-1),gt=a("h4",{class:"text-h4 mt-6 mb-1"}," Total users with their roles ",-1),ht=a("p",{class:"text-body-1 mb-6"}," Find all of your company's administrator accounts and their associate roles. ",-1),ma={__name:"index",setup(T){return($,p)=>(g(),R(ee,null,{default:t(()=>[e(D,{cols:"12"},{default:t(()=>[_t,vt]),_:1}),e(D,{cols:"12"},{default:t(()=>[e(Ye)]),_:1}),e(D,{cols:"12"},{default:t(()=>[gt,ht,e(ft)]),_:1})]),_:1}))}};export{ma as default};
