import{_ as HC}from"./CallingDialog-PhUfSprV.js";import{_ as BC,a as qC}from"./I18n-DkMXtjmk.js";import{_ as WC}from"./AppLoadingIndicator-Ca5f2MIO.js";import{L as jv,M as vn,T as ld,r as Kt,N as jC,O as VC,P as Vv,k as Sl,i as Gv,w as ti,a as xh,o as ze,f as ft,e as st,d as qi,z as bu,b as rt,m as ae,p as ct,J as kr,v as Us,K as Pr,g as Nt,q as mn,c as Ms,F as ad,h as zv,x as ud,Q as GC,R as zC,j as KC,U as YC,l as eg,V as xi,W as JC,n as XC,s as cl,t as Fs,y as Wi,X as Kv,Y as QC,Z as ZC,_ as eA,$ as tA,A as Yv,B as nA,C as rA,a0 as iA,a1 as sA,a2 as th,H as nh,S as oA,a3 as lA}from"./index-VU0dmoHZ.js";import aA from"./Footer-C0eU44Y5.js";import uA from"./NavBarNotifications-BmT3n4KA.js";import cA from"./NavSearchBar-CZrEO9X1.js";import fA from"./NavbarShortcuts-Bd6I3R1W.js";import hA from"./NavbarThemeSwitcher-E0o0vS1Q.js";import dA from"./UserProfile-MTIxbte4.js";import{P as pA}from"./vue3-perfect-scrollbar.esm-CKkShybS.js";import{V as _A}from"./VNodeRenderer-BelNBPWP.js";import{_ as Jv}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as We,a as Xv,g as gA}from"./_commonjsHelpers-BosuxZz1.js";import{V as vA}from"./VSpacer-DIW3Gp5e.js";import{V as mA}from"./VChip-ClWrs_JY.js";import"./VCard-DttbPEhw.js";import"./VAvatar-B0yljh3k.js";import"./VImg-BNqJuZG0.js";import"./VCardText-uyCvIofY.js";import"./VDialog-bGaStrcf.js";import"./VOverlay-BZO4hDjN.js";import"./easing-CjukEv2V.js";import"./lazy-CTD-MLkl.js";import"./scopeId-DwszM4ys.js";import"./forwardRefs-C-GTDzx5.js";import"./dialog-transition-ClMl6VK0.js";import"./VDivider-BdZVMXth.js";import"./CustomRadiosWithImage-BIF1mRPd.js";import"./VRow-5iodEM2E.js";/* empty css              */import"./form-D37_K2HO.js";import"./VRadioGroup-HAO1i3rD.js";import"./VSelectionControl-Dht4FwVx.js";import"./VInput-DUnqEF-j.js";import"./useGenerateImageVariant-D0_fMyU0.js";import"./VBadge-gIlJ6WRl.js";import"./VMenu-DngO4Bzq.js";import"./VList-DhXfVcoA.js";import"./ssrBoot-Cx7lQdW-.js";import"./VSlider-DpdiF8p2.js";import"./VSliderTrack-BgmqDDUS.js";import"./VSheet-vF1htD-c.js";import"./VSwitch-CXB4wKMc.js";import"./VNavigationDrawer-Dm7lBkUR.js";import"./formatters-zPA0pF4b.js";import"./helpers-DK5QwNv0.js";import"./VTooltip-B61Kcv-O.js";import"./shepherd.esm-ByKGJf9j.js";import"./index-Bbh44Qwm.js";import"./useApi-DHFWqMSv.js";import"./useAbility-7tf4iFcu.js";import"./VSlideGroup-CNt9oOkj.js";const yA=jv({name:"TransitionExpand",setup(s,{slots:r}){const n=f=>{const e=getComputedStyle(f).width;f.style.width=e,f.style.position="absolute",f.style.visibility="hidden",f.style.height="auto";const _=getComputedStyle(f).height;f.style.width="",f.style.position="",f.style.visibility="",f.style.height="0px",getComputedStyle(f).height,requestAnimationFrame(()=>{f.style.height=_})},i=f=>{f.style.height="auto"},l=f=>{const e=getComputedStyle(f).height;f.style.height=e,getComputedStyle(f).height,requestAnimationFrame(()=>{f.style.height="0px"})};return()=>vn(vn(ld),{name:"expand",onEnter:n,onAfterEnter:i,onLeave:l},()=>{var f;return(f=r.default)==null?void 0:f.call(r)})}}),TA=Jv(yA,[["__scopeId","data-v-e5b9cc91"]]),bA=s=>(GC("data-v-51fd3f1e"),s=s(),zC(),s),SA={class:"nav-header"},wA=bA(()=>qi("div",{class:"vertical-nav-items-shadow"},null,-1)),EA={__name:"VerticalNav",props:{tag:{type:null,required:!1,default:"aside"},navItems:{type:null,required:!0},isOverlayNavActive:{type:Boolean,required:!0},toggleIsOverlayNavActive:{type:Function,required:!0}},setup(s){const r=s,n=Kt(),i=jC(n);VC(Vv,i);const l=Sl(),f=m=>"heading"in m?PA:"children"in m?RA:Qv,e=Gv();ti(()=>e.name,()=>{r.toggleIsOverlayNavActive(!1)});const _=Kt(!1),T=m=>_.value=m,h=m=>{_.value=m.target.scrollTop>0},g=l.isVerticalNavMini(i);return(m,b)=>{const E=xh("RouterLink");return ze(),ft(Nt(r.tag),{ref_key:"refNav",ref:n,class:ud(["layout-vertical-nav",[{"overlay-nav":ae(l).isLessThanOverlayNavBreakpoint,hovered:ae(i),visible:s.isOverlayNavActive,scrolled:ae(_)}]])},{default:st(()=>[qi("div",SA,[bu(m.$slots,"nav-header",{},()=>[rt(E,{to:"/",class:"app-logo app-title-wrapper"},{default:st(()=>[rt(ae(_A),{nodes:ae(ct).app.logo},null,8,["nodes"]),rt(ld,{name:"vertical-nav-app-title"},{default:st(()=>[kr(qi("h1",{class:"app-logo-title leading-normal"},Us(ae(ct).app.title),513),[[Pr,!ae(g)]])]),_:1})]),_:1}),kr((ze(),ft(Nt(ae(ct).app.iconRenderer||"div"),mn({class:["header-action d-none nav-unpin",ae(l).isVerticalNavCollapsed&&"d-lg-block"]},ae(ct).icons.verticalNavUnPinned,{onClick:b[0]||(b[0]=C=>ae(l).isVerticalNavCollapsed=!ae(l).isVerticalNavCollapsed)}),null,16,["class"])),[[Pr,ae(l).isVerticalNavCollapsed]]),kr((ze(),ft(Nt(ae(ct).app.iconRenderer||"div"),mn({class:["header-action d-none nav-pin",!ae(l).isVerticalNavCollapsed&&"d-lg-block"]},ae(ct).icons.verticalNavPinned,{onClick:b[1]||(b[1]=C=>ae(l).isVerticalNavCollapsed=!ae(l).isVerticalNavCollapsed)}),null,16,["class"])),[[Pr,!ae(l).isVerticalNavCollapsed]]),(ze(),ft(Nt(ae(ct).app.iconRenderer||"div"),mn({class:"header-action d-lg-none"},ae(ct).icons.close,{onClick:b[2]||(b[2]=C=>s.toggleIsOverlayNavActive(!1))}),null,16))],!0)]),bu(m.$slots,"before-nav-items",{},()=>[wA],!0),bu(m.$slots,"nav-items",{updateIsVerticalNavScrolled:T},()=>[(ze(),ft(ae(pA),{key:ae(l).isAppRTL,tag:"ul",class:"nav-items",options:{wheelPropagation:!1},onPsScrollY:h},{default:st(()=>[(ze(!0),Ms(ad,null,zv(s.navItems,(C,N)=>(ze(),ft(Nt(f(C)),{key:N,item:C},null,8,["item"]))),128))]),_:1}))],!0),bu(m.$slots,"after-nav-items",{},void 0,!0)]),_:3},8,["class"])}}},CA=Jv(EA,[["__scopeId","data-v-51fd3f1e"]]),AA={class:"nav-group-children"},RA=Object.assign({name:"VerticalNavGroup"},{__name:"VerticalNavGroup",props:{item:{type:null,required:!0}},setup(s){const r=s,n=Gv(),i=KC(),l=Sl(),f=l.isVerticalNavMini(),e=YC(Vv,Kt(!1)),_=Kt(!1),T=Kt(!1),h=b=>b.some(E=>{let C=xi.value.includes(E.title);return"children"in E&&(C=h(E.children)||C),C}),g=b=>{b.forEach(E=>{"children"in E&&g(E.children),xi.value=xi.value.filter(C=>C!==E.title)})};ti(()=>n.path,()=>{const b=eg(r.item.children,i);T.value=b&&!l.isVerticalNavMini(e).value,_.value=b},{immediate:!0}),ti(T,b=>{const E=xi.value.indexOf(r.item.title);b&&E===-1?xi.value.push(r.item.title):!b&&E!==-1&&(xi.value.splice(E,1),g(r.item.children))},{immediate:!0}),ti(xi,b=>{if(b.at(-1)===r.item.title)return;const C=eg(r.item.children,i);C||h(r.item.children)||(T.value=C,_.value=C)},{deep:!0}),ti(l.isVerticalNavMini(e),b=>{T.value=b?!1:_.value});const m=JC();return(b,E)=>ae(XC)(s.item)?(ze(),Ms("li",{key:0,class:ud(["nav-group",[{active:ae(_),open:ae(T),disabled:s.item.disable}]])},[qi("div",{class:"nav-group-label",onClick:E[0]||(E[0]=C=>T.value=!ae(T))},[(ze(),ft(Nt(ae(ct).app.iconRenderer||"div"),mn(s.item.icon||ae(ct).verticalNav.defaultNavItemIconProps,{class:"nav-item-icon"}),null,16)),(ze(),ft(Nt(ae(m)?Kv:"div"),mn({name:"transition-slide-x"},ae(m)?void 0:{class:"d-flex align-center flex-grow-1"}),{default:st(()=>[kr((ze(),ft(Nt(ae(ct).app.i18n.enable?"i18n-t":"span"),mn(ae(cl)(s.item.title,"span"),{key:"title",class:"nav-item-title"}),{default:st(()=>[Fs(Us(s.item.title),1)]),_:1},16)),[[Pr,!ae(f)]]),s.item.badgeContent?kr((ze(),ft(Nt(ae(ct).app.i18n.enable?"i18n-t":"span"),mn({key:0},ae(cl)(s.item.badgeContent,"span"),{key:"badge",class:["nav-item-badge",s.item.badgeClass]}),{default:st(()=>[Fs(Us(s.item.badgeContent),1)]),_:1},16,["class"])),[[Pr,!ae(f)]]):Wi("",!0),kr((ze(),ft(Nt(ae(ct).app.iconRenderer||"div"),mn(ae(ct).icons.chevronRight,{key:"arrow",class:"nav-group-arrow"}),null,16)),[[Pr,!ae(f)]])]),_:1},16))]),rt(ae(TA),null,{default:st(()=>[kr(qi("ul",AA,[(ze(!0),Ms(ad,null,zv(s.item.children,C=>(ze(),ft(Nt("children"in C?"VerticalNavGroup":ae(Qv)),{key:C.title,item:C},null,8,["item"]))),128))],512),[[Pr,ae(T)]])]),_:1})],2)):Wi("",!0)}}),OA=jv({props:{navItems:{type:Array,required:!0},verticalNavAttrs:{type:Object,default:()=>({})}},setup(s,{slots:r}){const{width:n}=QC(),i=Sl(),l=Kt(!1),f=Kt(!1),e=ZC(l);return eA(l,f),ti(n,()=>{!i.isLessThanOverlayNavBreakpoint&&f.value&&(f.value=!1)}),()=>{var I,P,x;const _=tA(s,"verticalNavAttrs"),{wrapper:T,wrapperProps:h,...g}=_.value,m=vn(CA,{isOverlayNavActive:l.value,toggleIsOverlayNavActive:e,navItems:s.navItems,...g},{"nav-header":()=>{var U;return(U=r["vertical-nav-header"])==null?void 0:U.call(r)},"before-nav-items":()=>{var U;return(U=r["before-vertical-nav-items"])==null?void 0:U.call(r)}}),b=vn("header",{class:["layout-navbar",{"navbar-blur":i.isNavbarBlurEnabled}]},[vn("div",{class:"navbar-content-container"},(I=r.navbar)==null?void 0:I.call(r,{toggleVerticalOverlayNavActive:e}))]),E=vn("main",{class:"layout-page-content"},vn("div",{class:"page-content-container"},(P=r.default)==null?void 0:P.call(r))),C=vn("footer",{class:"layout-footer"},[vn("div",{class:"footer-content-container"},(x=r.footer)==null?void 0:x.call(r))]),N=vn("div",{class:["layout-overlay",{visible:f.value}],onClick:()=>{f.value=!f.value}});return vn("div",{class:["layout-wrapper",...i._layoutClasses]},[T?vn(T,h,{default:()=>m}):m,vn("div",{class:"layout-content-wrapper"},[b,E,C]),N])}}}),Qv={__name:"VerticalNavLink",props:{item:{type:null,required:!0}},setup(s){const n=Sl().isVerticalNavMini();return(i,l)=>ae(Yv)(s.item.action,s.item.subject)?(ze(),Ms("li",{key:0,class:ud(["nav-link",{disabled:s.item.disable}])},[(ze(),ft(Nt(s.item.to?"RouterLink":"a"),mn(ae(rA)(s.item),{class:{"router-link-active router-link-exact-active":ae(nA)(s.item,i.$router)}}),{default:st(()=>[(ze(),ft(Nt(ae(ct).app.iconRenderer||"div"),mn(s.item.icon||ae(ct).verticalNav.defaultNavItemIconProps,{class:"nav-item-icon"}),null,16)),rt(Kv,{name:"transition-slide-x"},{default:st(()=>[kr((ze(),ft(Nt(ae(ct).app.i18n.enable?"i18n-t":"span"),mn({key:"title",class:"nav-item-title"},ae(cl)(s.item.title,"span")),{default:st(()=>[Fs(Us(s.item.title),1)]),_:1},16)),[[Pr,!ae(n)]]),s.item.badgeContent?kr((ze(),ft(Nt(ae(ct).app.i18n.enable?"i18n-t":"span"),mn({key:"badge",class:["nav-item-badge",s.item.badgeClass]},ae(cl)(s.item.badgeContent,"span")),{default:st(()=>[Fs(Us(s.item.badgeContent),1)]),_:1},16,["class"])),[[Pr,!ae(n)]]):Wi("",!0)]),_:1})]),_:1},16,["class"]))],2)):Wi("",!0)}},IA={key:0,class:"nav-section-title"},kA={class:"title-wrapper"},PA={__name:"VerticalNavSectionTitle",props:{item:{type:null,required:!0}},setup(s){const n=Sl().isVerticalNavMini();return(i,l)=>ae(Yv)(s.item.action,s.item.subject)?(ze(),Ms("li",IA,[qi("div",kA,[rt(ld,{name:"vertical-nav-section-title",mode:"out-in"},{default:st(()=>[(ze(),ft(Nt(ae(n)?ae(ct).app.iconRenderer:ae(ct).app.i18n.enable?"i18n-t":"span"),mn({key:ae(n),class:ae(n)?"placeholder-icon":"title-text"},{...ae(ct).icons.sectionTitlePlaceholder,...ae(cl)(s.item.heading,"span")}),{default:st(()=>[Fs(Us(ae(n)?null:s.item.heading),1)]),_:1},16,["class"]))]),_:1})])])):Wi("",!0)}},NA=[{heading:"Apps & Pages"},{title:"Ecommerce",icon:{icon:"ri-shopping-bag-3-line"},children:[{title:"Dashboard",to:"apps-ecommerce-dashboard"},{title:"Product",children:[{title:"List",to:"apps-ecommerce-product-list"},{title:"Add",to:"apps-ecommerce-product-add"},{title:"Category",to:"apps-ecommerce-product-category-list"}]},{title:"Order",children:[{title:"List",to:"apps-ecommerce-order-list"},{title:"Details",to:{name:"apps-ecommerce-order-details-id",params:{id:"9042"}}}]},{title:"Customer",children:[{title:"List",to:"apps-ecommerce-customer-list"},{title:"Details",to:{name:"apps-ecommerce-customer-details-id",params:{id:478426}}}]},{title:"Manage Review",to:"apps-ecommerce-manage-review"},{title:"Referrals",to:"apps-ecommerce-referrals"},{title:"Settings",to:"apps-ecommerce-settings"}]},{title:"Academy",icon:{icon:"ri-graduation-cap-line"},children:[{title:"Dashboard",to:"apps-academy-dashboard"},{title:"My Course",to:"apps-academy-my-course"},{title:"Course Details",to:"apps-academy-course-details"}]},{title:"Logistics",icon:{icon:"ri-car-line"},children:[{title:"Dashboard",to:"apps-logistics-dashboard"},{title:"Fleet",to:"apps-logistics-fleet"}]},{title:"Email",icon:{icon:"ri-mail-open-line"},to:"apps-email"},{title:"Chat",icon:{icon:"ri-wechat-line"},to:"apps-chat"},{title:"Calendar",icon:{icon:"ri-calendar-line"},to:"apps-calendar"},{title:"Kanban",icon:{icon:"ri-drag-drop-line"},to:"apps-kanban"},{title:"Invoice",icon:{icon:"ri-bill-line"},children:[{title:"List",to:"apps-invoice-list"},{title:"Preview",to:{name:"apps-invoice-preview-id",params:{id:"5036"}}},{title:"Edit",to:{name:"apps-invoice-edit-id",params:{id:"5036"}}},{title:"Add",to:"apps-invoice-add"}]},{title:"User",icon:{icon:"ri-user-line"},children:[{title:"List",to:"apps-user-list"},{title:"View",to:{name:"apps-user-view-id",params:{id:21}}}]},{title:"Roles & Permissions",icon:{icon:"ri-lock-2-line"},children:[{title:"Roles",to:"apps-roles"},{title:"Permissions",to:"apps-permissions"}]},{title:"Pages",icon:{icon:"ri-layout-left-line"},children:[{title:"User Profile",to:{name:"pages-user-profile-tab",params:{tab:"profile"}}},{title:"Account Settings",to:{name:"pages-account-settings-tab",params:{tab:"account"}}},{title:"Pricing",to:"pages-pricing"},{title:"FAQ",to:"pages-faq"},{title:"Miscellaneous",children:[{title:"Coming Soon",to:"pages-misc-coming-soon",target:"_blank"},{title:"Under Maintenance",to:"pages-misc-under-maintenance",target:"_blank"},{title:"Page Not Found - 404",to:{path:"/pages/misc/not-found"},target:"_blank"},{title:"Not Authorized - 401",to:{path:"/pages/misc/not-authorized"},target:"_blank"}]}]},{title:"Authentication",icon:{icon:"ri-shield-keyhole-line"},children:[{title:"Login",children:[{title:"Login v1",to:"pages-authentication-login-v1",target:"_blank"},{title:"Login v2",to:"pages-authentication-login-v2",target:"_blank"}]},{title:"Register",children:[{title:"Register v1",to:"pages-authentication-register-v1",target:"_blank"},{title:"Register v2",to:"pages-authentication-register-v2",target:"_blank"},{title:"Register Multi-Steps",to:"pages-authentication-register-multi-steps",target:"_blank"}]},{title:"Verify Email",children:[{title:"Verify Email v1",to:"pages-authentication-verify-email-v1",target:"_blank"},{title:"Verify Email v2",to:"pages-authentication-verify-email-v2",target:"_blank"}]},{title:"Forgot Password",children:[{title:"Forgot Password v1",to:"pages-authentication-forgot-password-v1",target:"_blank"},{title:"Forgot Password v2",to:"pages-authentication-forgot-password-v2",target:"_blank"}]},{title:"Reset Password",children:[{title:"Reset Password v1",to:"pages-authentication-reset-password-v1",target:"_blank"},{title:"Reset Password v2",to:"pages-authentication-reset-password-v2",target:"_blank"}]},{title:"Two Steps",children:[{title:"Two Steps v1",to:"pages-authentication-two-steps-v1",target:"_blank"},{title:"Two Steps v2",to:"pages-authentication-two-steps-v2",target:"_blank"}]}]},{title:"Wizard Examples",icon:{icon:"ri-git-commit-line"},children:[{title:"Checkout",to:{name:"wizard-examples-checkout"}},{title:"Property Listing",to:{name:"wizard-examples-property-listing"}},{title:"Create Deal",to:{name:"wizard-examples-create-deal"}}]},{title:"Dialog Examples",icon:{icon:"ri-tv-2-line"},to:"pages-dialog-examples"}],xA=[{heading:"Charts"},{title:"Charts",icon:{icon:"ri-bar-chart-2-line"},children:[{title:"Apex Chart",to:"charts-apex-chart"},{title:"Chartjs",to:"charts-chartjs"}]}],DA=[{title:"Dashboards",icon:{icon:"ri-home-smile-line"},children:[{title:"CRM",to:"dashboards-crm"},{title:"Analytics",to:"dashboards-analytics"},{title:"eCommerce",to:"dashboards-ecommerce"},{title:"Academy",to:"dashboards-academy"},{title:"Logistics",to:"dashboards-logistics"}],badgeContent:"5",badgeClass:"bg-error"},{title:"Front Pages",icon:{icon:"ri-file-copy-line"},children:[{title:"Landing",to:"front-pages-landing-page",target:"_blank"},{title:"Pricing",to:"front-pages-pricing",target:"_blank"},{title:"Payment",to:"front-pages-payment",target:"_blank"},{title:"Checkout",to:"front-pages-checkout",target:"_blank"},{title:"Help Center",to:"front-pages-help-center",target:"_blank"}]}],LA=[{heading:"Forms & Tables"},{title:"Form Elements",icon:{icon:"ri-radio-button-line"},children:[{title:"Autocomplete",to:"forms-autocomplete"},{title:"Checkbox",to:"forms-checkbox"},{title:"Combobox",to:"forms-combobox"},{title:"Date Time Picker",to:"forms-date-time-picker"},{title:"Editors",to:"forms-editors"},{title:"File Input",to:"forms-file-input"},{title:"Radio",to:"forms-radio"},{title:"Custom Input",to:"forms-custom-input"},{title:"Range Slider",to:"forms-range-slider"},{title:"Rating",to:"forms-rating"},{title:"Select",to:"forms-select"},{title:"Slider",to:"forms-slider"},{title:"Switch",to:"forms-switch"},{title:"Textarea",to:"forms-textarea"},{title:"Textfield",to:"forms-textfield"}]},{title:"Form Layouts",icon:{icon:"ri-layout-4-line"},to:"forms-form-layouts"},{title:"Form Wizard",icon:{icon:"ri-git-commit-line"},children:[{title:"Numbered",to:"forms-form-wizard-numbered"},{title:"Icons",to:"forms-form-wizard-icons"}]},{title:"Form Validation",icon:{icon:"ri-checkbox-multiple-line"},to:"forms-form-validation"},{title:"Tables",icon:{icon:"ri-table-alt-line"},children:[{title:"Simple Table",to:"tables-simple-table"},{title:"Data Table",to:"tables-data-table"}]}],UA=[{heading:"Others"},{title:"Access Control",icon:{icon:"ri-shield-line"},to:"access-control",action:"read",subject:"AclDemo"},{title:"Nav Levels",icon:{icon:"ri-menu-line"},children:[{title:"Level 2.1",to:null},{title:"Level 2.2",children:[{title:"Level 3.1",to:null},{title:"Level 3.2",to:null}]}]},{title:"Disabled Menu",to:null,icon:{icon:"ri-eye-off-line"},disable:!0},{title:"Raise Support",href:"https://pixinvent.ticksy.com/",icon:{icon:"ri-lifebuoy-line"},target:"_blank"},{title:"Documentation",href:"https://demos.pixinvent.com/materialize-vuejs-admin-template/documentation/",icon:{icon:"ri-article-line"},target:"_blank"}],MA=[{heading:"UI Elements"},{title:"Typography",icon:{icon:"ri-text"},to:"pages-typography"},{title:"Icons",icon:{icon:"ri-remixicon-line"},to:"pages-icons"},{title:"Cards",icon:{icon:"ri-bar-chart-box-line"},children:[{title:"Basic",to:"pages-cards-card-basic"},{title:"Advance",to:"pages-cards-card-advance"},{title:"Widgets",to:"pages-cards-card-widgets"},{title:"Statistics",to:"pages-cards-card-statistics"},{title:"Gamification",to:"pages-cards-card-gamification"},{title:"Actions",to:"pages-cards-card-actions"}]},{title:"Components",icon:{icon:"ri-toggle-line"},children:[{title:"Alert",to:"components-alert"},{title:"Avatar",to:"components-avatar"},{title:"Badge",to:"components-badge"},{title:"Button",to:"components-button"},{title:"Chip",to:"components-chip"},{title:"Dialog",to:"components-dialog"},{title:"Expansion Panel",to:"components-expansion-panel"},{title:"List",to:"components-list"},{title:"Menu",to:"components-menu"},{title:"Pagination",to:"components-pagination"},{title:"Progress Circular",to:"components-progress-circular"},{title:"Progress Linear",to:"components-progress-linear"},{title:"Snackbar",to:"components-snackbar"},{title:"Tabs",to:"components-tabs"},{title:"Timeline",to:"components-timeline"},{title:"Tooltip",to:"components-tooltip"}]},{title:"Extensions",icon:{icon:"ri-box-3-line"},children:[{title:"Tour",to:"extensions-tour"},{title:"Swiper",to:"extensions-swiper"}]}],FA=[...DA,...NA,...MA,...LA,...xA,...UA];function Zv(s,r){return function(){return s.apply(r,arguments)}}const{toString:$A}=Object.prototype,{getPrototypeOf:cd}=Object,mc=(s=>r=>{const n=$A.call(r);return s[n]||(s[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Gn=s=>(s=s.toLowerCase(),r=>mc(r)===s),yc=s=>r=>typeof r===s,{isArray:Gs}=Array,fl=yc("undefined");function HA(s){return s!==null&&!fl(s)&&s.constructor!==null&&!fl(s.constructor)&&Tn(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}const em=Gn("ArrayBuffer");function BA(s){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(s):r=s&&s.buffer&&em(s.buffer),r}const qA=yc("string"),Tn=yc("function"),tm=yc("number"),Tc=s=>s!==null&&typeof s=="object",WA=s=>s===!0||s===!1,Lu=s=>{if(mc(s)!=="object")return!1;const r=cd(s);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},jA=Gn("Date"),VA=Gn("File"),GA=Gn("Blob"),zA=Gn("FileList"),KA=s=>Tc(s)&&Tn(s.pipe),YA=s=>{let r;return s&&(typeof FormData=="function"&&s instanceof FormData||Tn(s.append)&&((r=mc(s))==="formdata"||r==="object"&&Tn(s.toString)&&s.toString()==="[object FormData]"))},JA=Gn("URLSearchParams"),[XA,QA,ZA,e1]=["ReadableStream","Request","Response","Headers"].map(Gn),t1=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function wl(s,r,{allOwnKeys:n=!1}={}){if(s===null||typeof s>"u")return;let i,l;if(typeof s!="object"&&(s=[s]),Gs(s))for(i=0,l=s.length;i<l;i++)r.call(null,s[i],i,s);else{const f=n?Object.getOwnPropertyNames(s):Object.keys(s),e=f.length;let _;for(i=0;i<e;i++)_=f[i],r.call(null,s[_],_,s)}}function nm(s,r){r=r.toLowerCase();const n=Object.keys(s);let i=n.length,l;for(;i-- >0;)if(l=n[i],r===l.toLowerCase())return l;return null}const Fi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,rm=s=>!fl(s)&&s!==Fi;function Dh(){const{caseless:s}=rm(this)&&this||{},r={},n=(i,l)=>{const f=s&&nm(r,l)||l;Lu(r[f])&&Lu(i)?r[f]=Dh(r[f],i):Lu(i)?r[f]=Dh({},i):Gs(i)?r[f]=i.slice():r[f]=i};for(let i=0,l=arguments.length;i<l;i++)arguments[i]&&wl(arguments[i],n);return r}const n1=(s,r,n,{allOwnKeys:i}={})=>(wl(r,(l,f)=>{n&&Tn(l)?s[f]=Zv(l,n):s[f]=l},{allOwnKeys:i}),s),r1=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),i1=(s,r,n,i)=>{s.prototype=Object.create(r.prototype,i),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:r.prototype}),n&&Object.assign(s.prototype,n)},s1=(s,r,n,i)=>{let l,f,e;const _={};if(r=r||{},s==null)return r;do{for(l=Object.getOwnPropertyNames(s),f=l.length;f-- >0;)e=l[f],(!i||i(e,s,r))&&!_[e]&&(r[e]=s[e],_[e]=!0);s=n!==!1&&cd(s)}while(s&&(!n||n(s,r))&&s!==Object.prototype);return r},o1=(s,r,n)=>{s=String(s),(n===void 0||n>s.length)&&(n=s.length),n-=r.length;const i=s.indexOf(r,n);return i!==-1&&i===n},l1=s=>{if(!s)return null;if(Gs(s))return s;let r=s.length;if(!tm(r))return null;const n=new Array(r);for(;r-- >0;)n[r]=s[r];return n},a1=(s=>r=>s&&r instanceof s)(typeof Uint8Array<"u"&&cd(Uint8Array)),u1=(s,r)=>{const i=(s&&s[Symbol.iterator]).call(s);let l;for(;(l=i.next())&&!l.done;){const f=l.value;r.call(s,f[0],f[1])}},c1=(s,r)=>{let n;const i=[];for(;(n=s.exec(r))!==null;)i.push(n);return i},f1=Gn("HTMLFormElement"),h1=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,l){return i.toUpperCase()+l}),tg=(({hasOwnProperty:s})=>(r,n)=>s.call(r,n))(Object.prototype),d1=Gn("RegExp"),im=(s,r)=>{const n=Object.getOwnPropertyDescriptors(s),i={};wl(n,(l,f)=>{let e;(e=r(l,f,s))!==!1&&(i[f]=e||l)}),Object.defineProperties(s,i)},p1=s=>{im(s,(r,n)=>{if(Tn(s)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=s[n];if(Tn(i)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},_1=(s,r)=>{const n={},i=l=>{l.forEach(f=>{n[f]=!0})};return Gs(s)?i(s):i(String(s).split(r)),n},g1=()=>{},v1=(s,r)=>s!=null&&Number.isFinite(s=+s)?s:r,rh="abcdefghijklmnopqrstuvwxyz",ng="0123456789",sm={DIGIT:ng,ALPHA:rh,ALPHA_DIGIT:rh+rh.toUpperCase()+ng},m1=(s=16,r=sm.ALPHA_DIGIT)=>{let n="";const{length:i}=r;for(;s--;)n+=r[Math.random()*i|0];return n};function y1(s){return!!(s&&Tn(s.append)&&s[Symbol.toStringTag]==="FormData"&&s[Symbol.iterator])}const T1=s=>{const r=new Array(10),n=(i,l)=>{if(Tc(i)){if(r.indexOf(i)>=0)return;if(!("toJSON"in i)){r[l]=i;const f=Gs(i)?[]:{};return wl(i,(e,_)=>{const T=n(e,l+1);!fl(T)&&(f[_]=T)}),r[l]=void 0,f}}return i};return n(s,0)},b1=Gn("AsyncFunction"),S1=s=>s&&(Tc(s)||Tn(s))&&Tn(s.then)&&Tn(s.catch),om=((s,r)=>s?setImmediate:r?((n,i)=>(Fi.addEventListener("message",({source:l,data:f})=>{l===Fi&&f===n&&i.length&&i.shift()()},!1),l=>{i.push(l),Fi.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Tn(Fi.postMessage)),w1=typeof queueMicrotask<"u"?queueMicrotask.bind(Fi):typeof process<"u"&&process.nextTick||om,V={isArray:Gs,isArrayBuffer:em,isBuffer:HA,isFormData:YA,isArrayBufferView:BA,isString:qA,isNumber:tm,isBoolean:WA,isObject:Tc,isPlainObject:Lu,isReadableStream:XA,isRequest:QA,isResponse:ZA,isHeaders:e1,isUndefined:fl,isDate:jA,isFile:VA,isBlob:GA,isRegExp:d1,isFunction:Tn,isStream:KA,isURLSearchParams:JA,isTypedArray:a1,isFileList:zA,forEach:wl,merge:Dh,extend:n1,trim:t1,stripBOM:r1,inherits:i1,toFlatObject:s1,kindOf:mc,kindOfTest:Gn,endsWith:o1,toArray:l1,forEachEntry:u1,matchAll:c1,isHTMLForm:f1,hasOwnProperty:tg,hasOwnProp:tg,reduceDescriptors:im,freezeMethods:p1,toObjectSet:_1,toCamelCase:h1,noop:g1,toFiniteNumber:v1,findKey:nm,global:Fi,isContextDefined:rm,ALPHABET:sm,generateString:m1,isSpecCompliantForm:y1,toJSONObject:T1,isAsyncFn:b1,isThenable:S1,setImmediate:om,asap:w1};function Re(s,r,n,i,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",r&&(this.code=r),n&&(this.config=n),i&&(this.request=i),l&&(this.response=l,this.status=l.status?l.status:null)}V.inherits(Re,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:V.toJSONObject(this.config),code:this.code,status:this.status}}});const lm=Re.prototype,am={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{am[s]={value:s}});Object.defineProperties(Re,am);Object.defineProperty(lm,"isAxiosError",{value:!0});Re.from=(s,r,n,i,l,f)=>{const e=Object.create(lm);return V.toFlatObject(s,e,function(T){return T!==Error.prototype},_=>_!=="isAxiosError"),Re.call(e,s.message,r,n,i,l),e.cause=s,e.name=s.name,f&&Object.assign(e,f),e};const E1=null;function Lh(s){return V.isPlainObject(s)||V.isArray(s)}function um(s){return V.endsWith(s,"[]")?s.slice(0,-2):s}function rg(s,r,n){return s?s.concat(r).map(function(l,f){return l=um(l),!n&&f?"["+l+"]":l}).join(n?".":""):r}function C1(s){return V.isArray(s)&&!s.some(Lh)}const A1=V.toFlatObject(V,{},null,function(r){return/^is[A-Z]/.test(r)});function bc(s,r,n){if(!V.isObject(s))throw new TypeError("target must be an object");r=r||new FormData,n=V.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(N,I){return!V.isUndefined(I[N])});const i=n.metaTokens,l=n.visitor||g,f=n.dots,e=n.indexes,T=(n.Blob||typeof Blob<"u"&&Blob)&&V.isSpecCompliantForm(r);if(!V.isFunction(l))throw new TypeError("visitor must be a function");function h(C){if(C===null)return"";if(V.isDate(C))return C.toISOString();if(!T&&V.isBlob(C))throw new Re("Blob is not supported. Use a Buffer instead.");return V.isArrayBuffer(C)||V.isTypedArray(C)?T&&typeof Blob=="function"?new Blob([C]):Buffer.from(C):C}function g(C,N,I){let P=C;if(C&&!I&&typeof C=="object"){if(V.endsWith(N,"{}"))N=i?N:N.slice(0,-2),C=JSON.stringify(C);else if(V.isArray(C)&&C1(C)||(V.isFileList(C)||V.endsWith(N,"[]"))&&(P=V.toArray(C)))return N=um(N),P.forEach(function(U,G){!(V.isUndefined(U)||U===null)&&r.append(e===!0?rg([N],G,f):e===null?N:N+"[]",h(U))}),!1}return Lh(C)?!0:(r.append(rg(I,N,f),h(C)),!1)}const m=[],b=Object.assign(A1,{defaultVisitor:g,convertValue:h,isVisitable:Lh});function E(C,N){if(!V.isUndefined(C)){if(m.indexOf(C)!==-1)throw Error("Circular reference detected in "+N.join("."));m.push(C),V.forEach(C,function(P,x){(!(V.isUndefined(P)||P===null)&&l.call(r,P,V.isString(x)?x.trim():x,N,b))===!0&&E(P,N?N.concat(x):[x])}),m.pop()}}if(!V.isObject(s))throw new TypeError("data must be an object");return E(s),r}function ig(s){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(i){return r[i]})}function fd(s,r){this._pairs=[],s&&bc(s,this,r)}const cm=fd.prototype;cm.append=function(r,n){this._pairs.push([r,n])};cm.toString=function(r){const n=r?function(i){return r.call(this,i,ig)}:ig;return this._pairs.map(function(l){return n(l[0])+"="+n(l[1])},"").join("&")};function R1(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function fm(s,r,n){if(!r)return s;const i=n&&n.encode||R1,l=n&&n.serialize;let f;if(l?f=l(r,n):f=V.isURLSearchParams(r)?r.toString():new fd(r,n).toString(i),f){const e=s.indexOf("#");e!==-1&&(s=s.slice(0,e)),s+=(s.indexOf("?")===-1?"?":"&")+f}return s}class sg{constructor(){this.handlers=[]}use(r,n,i){return this.handlers.push({fulfilled:r,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){V.forEach(this.handlers,function(i){i!==null&&r(i)})}}const hm={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},O1=typeof URLSearchParams<"u"?URLSearchParams:fd,I1=typeof FormData<"u"?FormData:null,k1=typeof Blob<"u"?Blob:null,P1={isBrowser:!0,classes:{URLSearchParams:O1,FormData:I1,Blob:k1},protocols:["http","https","file","blob","url","data"]},hd=typeof window<"u"&&typeof document<"u",Uh=typeof navigator=="object"&&navigator||void 0,N1=hd&&(!Uh||["ReactNative","NativeScript","NS"].indexOf(Uh.product)<0),x1=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",D1=hd&&window.location.href||"http://localhost",L1=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:hd,hasStandardBrowserEnv:N1,hasStandardBrowserWebWorkerEnv:x1,navigator:Uh,origin:D1},Symbol.toStringTag,{value:"Module"})),nn={...L1,...P1};function U1(s,r){return bc(s,new nn.classes.URLSearchParams,Object.assign({visitor:function(n,i,l,f){return nn.isNode&&V.isBuffer(n)?(this.append(i,n.toString("base64")),!1):f.defaultVisitor.apply(this,arguments)}},r))}function M1(s){return V.matchAll(/\w+|\[(\w*)]/g,s).map(r=>r[0]==="[]"?"":r[1]||r[0])}function F1(s){const r={},n=Object.keys(s);let i;const l=n.length;let f;for(i=0;i<l;i++)f=n[i],r[f]=s[f];return r}function dm(s){function r(n,i,l,f){let e=n[f++];if(e==="__proto__")return!0;const _=Number.isFinite(+e),T=f>=n.length;return e=!e&&V.isArray(l)?l.length:e,T?(V.hasOwnProp(l,e)?l[e]=[l[e],i]:l[e]=i,!_):((!l[e]||!V.isObject(l[e]))&&(l[e]=[]),r(n,i,l[e],f)&&V.isArray(l[e])&&(l[e]=F1(l[e])),!_)}if(V.isFormData(s)&&V.isFunction(s.entries)){const n={};return V.forEachEntry(s,(i,l)=>{r(M1(i),l,n,0)}),n}return null}function $1(s,r,n){if(V.isString(s))try{return(r||JSON.parse)(s),V.trim(s)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(s)}const dd={transitional:hm,adapter:["xhr","http","fetch"],transformRequest:[function(r,n){const i=n.getContentType()||"",l=i.indexOf("application/json")>-1,f=V.isObject(r);if(f&&V.isHTMLForm(r)&&(r=new FormData(r)),V.isFormData(r))return l?JSON.stringify(dm(r)):r;if(V.isArrayBuffer(r)||V.isBuffer(r)||V.isStream(r)||V.isFile(r)||V.isBlob(r)||V.isReadableStream(r))return r;if(V.isArrayBufferView(r))return r.buffer;if(V.isURLSearchParams(r))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let _;if(f){if(i.indexOf("application/x-www-form-urlencoded")>-1)return U1(r,this.formSerializer).toString();if((_=V.isFileList(r))||i.indexOf("multipart/form-data")>-1){const T=this.env&&this.env.FormData;return bc(_?{"files[]":r}:r,T&&new T,this.formSerializer)}}return f||l?(n.setContentType("application/json",!1),$1(r)):r}],transformResponse:[function(r){const n=this.transitional||dd.transitional,i=n&&n.forcedJSONParsing,l=this.responseType==="json";if(V.isResponse(r)||V.isReadableStream(r))return r;if(r&&V.isString(r)&&(i&&!this.responseType||l)){const e=!(n&&n.silentJSONParsing)&&l;try{return JSON.parse(r)}catch(_){if(e)throw _.name==="SyntaxError"?Re.from(_,Re.ERR_BAD_RESPONSE,this,null,this.response):_}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:nn.classes.FormData,Blob:nn.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};V.forEach(["delete","get","head","post","put","patch"],s=>{dd.headers[s]={}});const pd=dd,H1=V.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),B1=s=>{const r={};let n,i,l;return s&&s.split(`
`).forEach(function(e){l=e.indexOf(":"),n=e.substring(0,l).trim().toLowerCase(),i=e.substring(l+1).trim(),!(!n||r[n]&&H1[n])&&(n==="set-cookie"?r[n]?r[n].push(i):r[n]=[i]:r[n]=r[n]?r[n]+", "+i:i)}),r},og=Symbol("internals");function Qo(s){return s&&String(s).trim().toLowerCase()}function Uu(s){return s===!1||s==null?s:V.isArray(s)?s.map(Uu):String(s)}function q1(s){const r=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(s);)r[i[1]]=i[2];return r}const W1=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function ih(s,r,n,i,l){if(V.isFunction(i))return i.call(this,r,n);if(l&&(r=n),!!V.isString(r)){if(V.isString(i))return r.indexOf(i)!==-1;if(V.isRegExp(i))return i.test(r)}}function j1(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,n,i)=>n.toUpperCase()+i)}function V1(s,r){const n=V.toCamelCase(" "+r);["get","set","has"].forEach(i=>{Object.defineProperty(s,i+n,{value:function(l,f,e){return this[i].call(this,r,l,f,e)},configurable:!0})})}class Sc{constructor(r){r&&this.set(r)}set(r,n,i){const l=this;function f(_,T,h){const g=Qo(T);if(!g)throw new Error("header name must be a non-empty string");const m=V.findKey(l,g);(!m||l[m]===void 0||h===!0||h===void 0&&l[m]!==!1)&&(l[m||T]=Uu(_))}const e=(_,T)=>V.forEach(_,(h,g)=>f(h,g,T));if(V.isPlainObject(r)||r instanceof this.constructor)e(r,n);else if(V.isString(r)&&(r=r.trim())&&!W1(r))e(B1(r),n);else if(V.isHeaders(r))for(const[_,T]of r.entries())f(T,_,i);else r!=null&&f(n,r,i);return this}get(r,n){if(r=Qo(r),r){const i=V.findKey(this,r);if(i){const l=this[i];if(!n)return l;if(n===!0)return q1(l);if(V.isFunction(n))return n.call(this,l,i);if(V.isRegExp(n))return n.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,n){if(r=Qo(r),r){const i=V.findKey(this,r);return!!(i&&this[i]!==void 0&&(!n||ih(this,this[i],i,n)))}return!1}delete(r,n){const i=this;let l=!1;function f(e){if(e=Qo(e),e){const _=V.findKey(i,e);_&&(!n||ih(i,i[_],_,n))&&(delete i[_],l=!0)}}return V.isArray(r)?r.forEach(f):f(r),l}clear(r){const n=Object.keys(this);let i=n.length,l=!1;for(;i--;){const f=n[i];(!r||ih(this,this[f],f,r,!0))&&(delete this[f],l=!0)}return l}normalize(r){const n=this,i={};return V.forEach(this,(l,f)=>{const e=V.findKey(i,f);if(e){n[e]=Uu(l),delete n[f];return}const _=r?j1(f):String(f).trim();_!==f&&delete n[f],n[_]=Uu(l),i[_]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const n=Object.create(null);return V.forEach(this,(i,l)=>{i!=null&&i!==!1&&(n[l]=r&&V.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,n])=>r+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...n){const i=new this(r);return n.forEach(l=>i.set(l)),i}static accessor(r){const i=(this[og]=this[og]={accessors:{}}).accessors,l=this.prototype;function f(e){const _=Qo(e);i[_]||(V1(l,e),i[_]=!0)}return V.isArray(r)?r.forEach(f):f(r),this}}Sc.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);V.reduceDescriptors(Sc.prototype,({value:s},r)=>{let n=r[0].toUpperCase()+r.slice(1);return{get:()=>s,set(i){this[n]=i}}});V.freezeMethods(Sc);const jn=Sc;function sh(s,r){const n=this||pd,i=r||n,l=jn.from(i.headers);let f=i.data;return V.forEach(s,function(_){f=_.call(n,f,l.normalize(),r?r.status:void 0)}),l.normalize(),f}function pm(s){return!!(s&&s.__CANCEL__)}function zs(s,r,n){Re.call(this,s??"canceled",Re.ERR_CANCELED,r,n),this.name="CanceledError"}V.inherits(zs,Re,{__CANCEL__:!0});function _m(s,r,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?s(n):r(new Re("Request failed with status code "+n.status,[Re.ERR_BAD_REQUEST,Re.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function G1(s){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return r&&r[1]||""}function z1(s,r){s=s||10;const n=new Array(s),i=new Array(s);let l=0,f=0,e;return r=r!==void 0?r:1e3,function(T){const h=Date.now(),g=i[f];e||(e=h),n[l]=T,i[l]=h;let m=f,b=0;for(;m!==l;)b+=n[m++],m=m%s;if(l=(l+1)%s,l===f&&(f=(f+1)%s),h-e<r)return;const E=g&&h-g;return E?Math.round(b*1e3/E):void 0}}function K1(s,r){let n=0,i=1e3/r,l,f;const e=(h,g=Date.now())=>{n=g,l=null,f&&(clearTimeout(f),f=null),s.apply(null,h)};return[(...h)=>{const g=Date.now(),m=g-n;m>=i?e(h,g):(l=h,f||(f=setTimeout(()=>{f=null,e(l)},i-m)))},()=>l&&e(l)]}const Zu=(s,r,n=3)=>{let i=0;const l=z1(50,250);return K1(f=>{const e=f.loaded,_=f.lengthComputable?f.total:void 0,T=e-i,h=l(T),g=e<=_;i=e;const m={loaded:e,total:_,progress:_?e/_:void 0,bytes:T,rate:h||void 0,estimated:h&&_&&g?(_-e)/h:void 0,event:f,lengthComputable:_!=null,[r?"download":"upload"]:!0};s(m)},n)},lg=(s,r)=>{const n=s!=null;return[i=>r[0]({lengthComputable:n,total:s,loaded:i}),r[1]]},ag=s=>(...r)=>V.asap(()=>s(...r)),Y1=nn.hasStandardBrowserEnv?function(){const r=nn.navigator&&/(msie|trident)/i.test(nn.navigator.userAgent),n=document.createElement("a");let i;function l(f){let e=f;return r&&(n.setAttribute("href",e),e=n.href),n.setAttribute("href",e),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=l(window.location.href),function(e){const _=V.isString(e)?l(e):e;return _.protocol===i.protocol&&_.host===i.host}}():function(){return function(){return!0}}(),J1=nn.hasStandardBrowserEnv?{write(s,r,n,i,l,f){const e=[s+"="+encodeURIComponent(r)];V.isNumber(n)&&e.push("expires="+new Date(n).toGMTString()),V.isString(i)&&e.push("path="+i),V.isString(l)&&e.push("domain="+l),f===!0&&e.push("secure"),document.cookie=e.join("; ")},read(s){const r=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove(s){this.write(s,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function X1(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function Q1(s,r){return r?s.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):s}function gm(s,r){return s&&!X1(r)?Q1(s,r):r}const ug=s=>s instanceof jn?{...s}:s;function ji(s,r){r=r||{};const n={};function i(h,g,m){return V.isPlainObject(h)&&V.isPlainObject(g)?V.merge.call({caseless:m},h,g):V.isPlainObject(g)?V.merge({},g):V.isArray(g)?g.slice():g}function l(h,g,m){if(V.isUndefined(g)){if(!V.isUndefined(h))return i(void 0,h,m)}else return i(h,g,m)}function f(h,g){if(!V.isUndefined(g))return i(void 0,g)}function e(h,g){if(V.isUndefined(g)){if(!V.isUndefined(h))return i(void 0,h)}else return i(void 0,g)}function _(h,g,m){if(m in r)return i(h,g);if(m in s)return i(void 0,h)}const T={url:f,method:f,data:f,baseURL:e,transformRequest:e,transformResponse:e,paramsSerializer:e,timeout:e,timeoutMessage:e,withCredentials:e,withXSRFToken:e,adapter:e,responseType:e,xsrfCookieName:e,xsrfHeaderName:e,onUploadProgress:e,onDownloadProgress:e,decompress:e,maxContentLength:e,maxBodyLength:e,beforeRedirect:e,transport:e,httpAgent:e,httpsAgent:e,cancelToken:e,socketPath:e,responseEncoding:e,validateStatus:_,headers:(h,g)=>l(ug(h),ug(g),!0)};return V.forEach(Object.keys(Object.assign({},s,r)),function(g){const m=T[g]||l,b=m(s[g],r[g],g);V.isUndefined(b)&&m!==_||(n[g]=b)}),n}const vm=s=>{const r=ji({},s);let{data:n,withXSRFToken:i,xsrfHeaderName:l,xsrfCookieName:f,headers:e,auth:_}=r;r.headers=e=jn.from(e),r.url=fm(gm(r.baseURL,r.url),s.params,s.paramsSerializer),_&&e.set("Authorization","Basic "+btoa((_.username||"")+":"+(_.password?unescape(encodeURIComponent(_.password)):"")));let T;if(V.isFormData(n)){if(nn.hasStandardBrowserEnv||nn.hasStandardBrowserWebWorkerEnv)e.setContentType(void 0);else if((T=e.getContentType())!==!1){const[h,...g]=T?T.split(";").map(m=>m.trim()).filter(Boolean):[];e.setContentType([h||"multipart/form-data",...g].join("; "))}}if(nn.hasStandardBrowserEnv&&(i&&V.isFunction(i)&&(i=i(r)),i||i!==!1&&Y1(r.url))){const h=l&&f&&J1.read(f);h&&e.set(l,h)}return r},Z1=typeof XMLHttpRequest<"u",eR=Z1&&function(s){return new Promise(function(n,i){const l=vm(s);let f=l.data;const e=jn.from(l.headers).normalize();let{responseType:_,onUploadProgress:T,onDownloadProgress:h}=l,g,m,b,E,C;function N(){E&&E(),C&&C(),l.cancelToken&&l.cancelToken.unsubscribe(g),l.signal&&l.signal.removeEventListener("abort",g)}let I=new XMLHttpRequest;I.open(l.method.toUpperCase(),l.url,!0),I.timeout=l.timeout;function P(){if(!I)return;const U=jn.from("getAllResponseHeaders"in I&&I.getAllResponseHeaders()),te={data:!_||_==="text"||_==="json"?I.responseText:I.response,status:I.status,statusText:I.statusText,headers:U,config:s,request:I};_m(function(_e){n(_e),N()},function(_e){i(_e),N()},te),I=null}"onloadend"in I?I.onloadend=P:I.onreadystatechange=function(){!I||I.readyState!==4||I.status===0&&!(I.responseURL&&I.responseURL.indexOf("file:")===0)||setTimeout(P)},I.onabort=function(){I&&(i(new Re("Request aborted",Re.ECONNABORTED,s,I)),I=null)},I.onerror=function(){i(new Re("Network Error",Re.ERR_NETWORK,s,I)),I=null},I.ontimeout=function(){let G=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded";const te=l.transitional||hm;l.timeoutErrorMessage&&(G=l.timeoutErrorMessage),i(new Re(G,te.clarifyTimeoutError?Re.ETIMEDOUT:Re.ECONNABORTED,s,I)),I=null},f===void 0&&e.setContentType(null),"setRequestHeader"in I&&V.forEach(e.toJSON(),function(G,te){I.setRequestHeader(te,G)}),V.isUndefined(l.withCredentials)||(I.withCredentials=!!l.withCredentials),_&&_!=="json"&&(I.responseType=l.responseType),h&&([b,C]=Zu(h,!0),I.addEventListener("progress",b)),T&&I.upload&&([m,E]=Zu(T),I.upload.addEventListener("progress",m),I.upload.addEventListener("loadend",E)),(l.cancelToken||l.signal)&&(g=U=>{I&&(i(!U||U.type?new zs(null,s,I):U),I.abort(),I=null)},l.cancelToken&&l.cancelToken.subscribe(g),l.signal&&(l.signal.aborted?g():l.signal.addEventListener("abort",g)));const x=G1(l.url);if(x&&nn.protocols.indexOf(x)===-1){i(new Re("Unsupported protocol "+x+":",Re.ERR_BAD_REQUEST,s));return}I.send(f||null)})},tR=(s,r)=>{const{length:n}=s=s?s.filter(Boolean):[];if(r||n){let i=new AbortController,l;const f=function(h){if(!l){l=!0,_();const g=h instanceof Error?h:this.reason;i.abort(g instanceof Re?g:new zs(g instanceof Error?g.message:g))}};let e=r&&setTimeout(()=>{e=null,f(new Re(`timeout ${r} of ms exceeded`,Re.ETIMEDOUT))},r);const _=()=>{s&&(e&&clearTimeout(e),e=null,s.forEach(h=>{h.unsubscribe?h.unsubscribe(f):h.removeEventListener("abort",f)}),s=null)};s.forEach(h=>h.addEventListener("abort",f));const{signal:T}=i;return T.unsubscribe=()=>V.asap(_),T}},nR=tR,rR=function*(s,r){let n=s.byteLength;if(!r||n<r){yield s;return}let i=0,l;for(;i<n;)l=i+r,yield s.slice(i,l),i=l},iR=async function*(s,r){for await(const n of sR(s))yield*rR(n,r)},sR=async function*(s){if(s[Symbol.asyncIterator]){yield*s;return}const r=s.getReader();try{for(;;){const{done:n,value:i}=await r.read();if(n)break;yield i}}finally{await r.cancel()}},cg=(s,r,n,i)=>{const l=iR(s,r);let f=0,e,_=T=>{e||(e=!0,i&&i(T))};return new ReadableStream({async pull(T){try{const{done:h,value:g}=await l.next();if(h){_(),T.close();return}let m=g.byteLength;if(n){let b=f+=m;n(b)}T.enqueue(new Uint8Array(g))}catch(h){throw _(h),h}},cancel(T){return _(T),l.return()}},{highWaterMark:2})},wc=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",mm=wc&&typeof ReadableStream=="function",oR=wc&&(typeof TextEncoder=="function"?(s=>r=>s.encode(r))(new TextEncoder):async s=>new Uint8Array(await new Response(s).arrayBuffer())),ym=(s,...r)=>{try{return!!s(...r)}catch{return!1}},lR=mm&&ym(()=>{let s=!1;const r=new Request(nn.origin,{body:new ReadableStream,method:"POST",get duplex(){return s=!0,"half"}}).headers.has("Content-Type");return s&&!r}),fg=64*1024,Mh=mm&&ym(()=>V.isReadableStream(new Response("").body)),ec={stream:Mh&&(s=>s.body)};wc&&(s=>{["text","arrayBuffer","blob","formData","stream"].forEach(r=>{!ec[r]&&(ec[r]=V.isFunction(s[r])?n=>n[r]():(n,i)=>{throw new Re(`Response type '${r}' is not supported`,Re.ERR_NOT_SUPPORT,i)})})})(new Response);const aR=async s=>{if(s==null)return 0;if(V.isBlob(s))return s.size;if(V.isSpecCompliantForm(s))return(await new Request(nn.origin,{method:"POST",body:s}).arrayBuffer()).byteLength;if(V.isArrayBufferView(s)||V.isArrayBuffer(s))return s.byteLength;if(V.isURLSearchParams(s)&&(s=s+""),V.isString(s))return(await oR(s)).byteLength},uR=async(s,r)=>{const n=V.toFiniteNumber(s.getContentLength());return n??aR(r)},cR=wc&&(async s=>{let{url:r,method:n,data:i,signal:l,cancelToken:f,timeout:e,onDownloadProgress:_,onUploadProgress:T,responseType:h,headers:g,withCredentials:m="same-origin",fetchOptions:b}=vm(s);h=h?(h+"").toLowerCase():"text";let E=nR([l,f&&f.toAbortSignal()],e),C;const N=E&&E.unsubscribe&&(()=>{E.unsubscribe()});let I;try{if(T&&lR&&n!=="get"&&n!=="head"&&(I=await uR(g,i))!==0){let te=new Request(r,{method:"POST",body:i,duplex:"half"}),we;if(V.isFormData(i)&&(we=te.headers.get("content-type"))&&g.setContentType(we),te.body){const[_e,X]=lg(I,Zu(ag(T)));i=cg(te.body,fg,_e,X)}}V.isString(m)||(m=m?"include":"omit");const P="credentials"in Request.prototype;C=new Request(r,{...b,signal:E,method:n.toUpperCase(),headers:g.normalize().toJSON(),body:i,duplex:"half",credentials:P?m:void 0});let x=await fetch(C);const U=Mh&&(h==="stream"||h==="response");if(Mh&&(_||U&&N)){const te={};["status","statusText","headers"].forEach($=>{te[$]=x[$]});const we=V.toFiniteNumber(x.headers.get("content-length")),[_e,X]=_&&lg(we,Zu(ag(_),!0))||[];x=new Response(cg(x.body,fg,_e,()=>{X&&X(),N&&N()}),te)}h=h||"text";let G=await ec[V.findKey(ec,h)||"text"](x,s);return!U&&N&&N(),await new Promise((te,we)=>{_m(te,we,{data:G,headers:jn.from(x.headers),status:x.status,statusText:x.statusText,config:s,request:C})})}catch(P){throw N&&N(),P&&P.name==="TypeError"&&/fetch/i.test(P.message)?Object.assign(new Re("Network Error",Re.ERR_NETWORK,s,C),{cause:P.cause||P}):Re.from(P,P&&P.code,s,C)}}),Fh={http:E1,xhr:eR,fetch:cR};V.forEach(Fh,(s,r)=>{if(s){try{Object.defineProperty(s,"name",{value:r})}catch{}Object.defineProperty(s,"adapterName",{value:r})}});const hg=s=>`- ${s}`,fR=s=>V.isFunction(s)||s===null||s===!1,Tm={getAdapter:s=>{s=V.isArray(s)?s:[s];const{length:r}=s;let n,i;const l={};for(let f=0;f<r;f++){n=s[f];let e;if(i=n,!fR(n)&&(i=Fh[(e=String(n)).toLowerCase()],i===void 0))throw new Re(`Unknown adapter '${e}'`);if(i)break;l[e||"#"+f]=i}if(!i){const f=Object.entries(l).map(([_,T])=>`adapter ${_} `+(T===!1?"is not supported by the environment":"is not available in the build"));let e=r?f.length>1?`since :
`+f.map(hg).join(`
`):" "+hg(f[0]):"as no adapter specified";throw new Re("There is no suitable adapter to dispatch the request "+e,"ERR_NOT_SUPPORT")}return i},adapters:Fh};function oh(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new zs(null,s)}function dg(s){return oh(s),s.headers=jn.from(s.headers),s.data=sh.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),Tm.getAdapter(s.adapter||pd.adapter)(s).then(function(i){return oh(s),i.data=sh.call(s,s.transformResponse,i),i.headers=jn.from(i.headers),i},function(i){return pm(i)||(oh(s),i&&i.response&&(i.response.data=sh.call(s,s.transformResponse,i.response),i.response.headers=jn.from(i.response.headers))),Promise.reject(i)})}const bm="1.7.7",_d={};["object","boolean","number","function","string","symbol"].forEach((s,r)=>{_d[s]=function(i){return typeof i===s||"a"+(r<1?"n ":" ")+s}});const pg={};_d.transitional=function(r,n,i){function l(f,e){return"[Axios v"+bm+"] Transitional option '"+f+"'"+e+(i?". "+i:"")}return(f,e,_)=>{if(r===!1)throw new Re(l(e," has been removed"+(n?" in "+n:"")),Re.ERR_DEPRECATED);return n&&!pg[e]&&(pg[e]=!0,console.warn(l(e," has been deprecated since v"+n+" and will be removed in the near future"))),r?r(f,e,_):!0}};function hR(s,r,n){if(typeof s!="object")throw new Re("options must be an object",Re.ERR_BAD_OPTION_VALUE);const i=Object.keys(s);let l=i.length;for(;l-- >0;){const f=i[l],e=r[f];if(e){const _=s[f],T=_===void 0||e(_,f,s);if(T!==!0)throw new Re("option "+f+" must be "+T,Re.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Re("Unknown option "+f,Re.ERR_BAD_OPTION)}}const $h={assertOptions:hR,validators:_d},Jr=$h.validators;class tc{constructor(r){this.defaults=r,this.interceptors={request:new sg,response:new sg}}async request(r,n){try{return await this._request(r,n)}catch(i){if(i instanceof Error){let l;Error.captureStackTrace?Error.captureStackTrace(l={}):l=new Error;const f=l.stack?l.stack.replace(/^.+\n/,""):"";try{i.stack?f&&!String(i.stack).endsWith(f.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+f):i.stack=f}catch{}}throw i}}_request(r,n){typeof r=="string"?(n=n||{},n.url=r):n=r||{},n=ji(this.defaults,n);const{transitional:i,paramsSerializer:l,headers:f}=n;i!==void 0&&$h.assertOptions(i,{silentJSONParsing:Jr.transitional(Jr.boolean),forcedJSONParsing:Jr.transitional(Jr.boolean),clarifyTimeoutError:Jr.transitional(Jr.boolean)},!1),l!=null&&(V.isFunction(l)?n.paramsSerializer={serialize:l}:$h.assertOptions(l,{encode:Jr.function,serialize:Jr.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let e=f&&V.merge(f.common,f[n.method]);f&&V.forEach(["delete","get","head","post","put","patch","common"],C=>{delete f[C]}),n.headers=jn.concat(e,f);const _=[];let T=!0;this.interceptors.request.forEach(function(N){typeof N.runWhen=="function"&&N.runWhen(n)===!1||(T=T&&N.synchronous,_.unshift(N.fulfilled,N.rejected))});const h=[];this.interceptors.response.forEach(function(N){h.push(N.fulfilled,N.rejected)});let g,m=0,b;if(!T){const C=[dg.bind(this),void 0];for(C.unshift.apply(C,_),C.push.apply(C,h),b=C.length,g=Promise.resolve(n);m<b;)g=g.then(C[m++],C[m++]);return g}b=_.length;let E=n;for(m=0;m<b;){const C=_[m++],N=_[m++];try{E=C(E)}catch(I){N.call(this,I);break}}try{g=dg.call(this,E)}catch(C){return Promise.reject(C)}for(m=0,b=h.length;m<b;)g=g.then(h[m++],h[m++]);return g}getUri(r){r=ji(this.defaults,r);const n=gm(r.baseURL,r.url);return fm(n,r.params,r.paramsSerializer)}}V.forEach(["delete","get","head","options"],function(r){tc.prototype[r]=function(n,i){return this.request(ji(i||{},{method:r,url:n,data:(i||{}).data}))}});V.forEach(["post","put","patch"],function(r){function n(i){return function(f,e,_){return this.request(ji(_||{},{method:r,headers:i?{"Content-Type":"multipart/form-data"}:{},url:f,data:e}))}}tc.prototype[r]=n(),tc.prototype[r+"Form"]=n(!0)});const Mu=tc;class gd{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(f){n=f});const i=this;this.promise.then(l=>{if(!i._listeners)return;let f=i._listeners.length;for(;f-- >0;)i._listeners[f](l);i._listeners=null}),this.promise.then=l=>{let f;const e=new Promise(_=>{i.subscribe(_),f=_}).then(l);return e.cancel=function(){i.unsubscribe(f)},e},r(function(f,e,_){i.reason||(i.reason=new zs(f,e,_),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const n=this._listeners.indexOf(r);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const r=new AbortController,n=i=>{r.abort(i)};return this.subscribe(n),r.signal.unsubscribe=()=>this.unsubscribe(n),r.signal}static source(){let r;return{token:new gd(function(l){r=l}),cancel:r}}}const dR=gd;function pR(s){return function(n){return s.apply(null,n)}}function _R(s){return V.isObject(s)&&s.isAxiosError===!0}const Hh={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Hh).forEach(([s,r])=>{Hh[r]=s});const gR=Hh;function Sm(s){const r=new Mu(s),n=Zv(Mu.prototype.request,r);return V.extend(n,Mu.prototype,r,{allOwnKeys:!0}),V.extend(n,r,null,{allOwnKeys:!0}),n.create=function(l){return Sm(ji(s,l))},n}const pt=Sm(pd);pt.Axios=Mu;pt.CanceledError=zs;pt.CancelToken=dR;pt.isCancel=pm;pt.VERSION=bm;pt.toFormData=bc;pt.AxiosError=Re;pt.Cancel=pt.CanceledError;pt.all=function(r){return Promise.all(r)};pt.spread=pR;pt.isAxiosError=_R;pt.mergeConfig=ji;pt.AxiosHeaders=jn;pt.formToJSON=s=>dm(V.isHTMLForm(s)?new FormData(s):s);pt.getAdapter=Tm.getAdapter;pt.HttpStatusCode=gR;pt.default=pt;var wm={},nc={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */nc.exports;(function(s,r){(function(){var n,i="4.17.21",l=200,f="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",e="Expected a function",_="Invalid `variable` option passed into `_.template`",T="__lodash_hash_undefined__",h=500,g="__lodash_placeholder__",m=1,b=2,E=4,C=1,N=2,I=1,P=2,x=4,U=8,G=16,te=32,we=64,_e=128,X=256,$=512,se=30,me="...",ie=800,de=16,Z=1,re=2,W=3,ne=1/0,bt=9007199254740991,wn=17976931348623157e292,En=NaN,ht=4294967295,Me=ht-1,ur=ht>>>1,cr=[["ary",_e],["bind",I],["bindKey",P],["curry",U],["curryRight",G],["flip",$],["partial",te],["partialRight",we],["rearg",X]],Bt="[object Arguments]",on="[object Array]",Fe="[object AsyncFunction]",Ae="[object Boolean]",ln="[object Date]",zn="[object DOMException]",an="[object Error]",un="[object Function]",Un="[object GeneratorFunction]",St="[object Map]",ye="[object Number]",ge="[object Null]",ve="[object Object]",Pe="[object Promise]",Xe="[object Proxy]",Qe="[object RegExp]",xe="[object Set]",cn="[object String]",gt="[object Symbol]",ql="[object Undefined]",fr="[object WeakMap]",Wl="[object WeakSet]",Kn="[object ArrayBuffer]",Cn="[object DataView]",ci="[object Float32Array]",fi="[object Float64Array]",Zi="[object Int8Array]",hi="[object Int16Array]",di="[object Int32Array]",ce="[object Uint8Array]",Ct="[object Uint8ClampedArray]",hr="[object Uint16Array]",dr="[object Uint32Array]",jl=/\b__p \+= '';/g,Vl=/\b(__p \+=) '' \+/g,Qs=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Zs=/&(?:amp|lt|gt|quot|#39);/g,eo=/[&<>"']/g,Gl=RegExp(Zs.source),zl=RegExp(eo.source),Kl=/<%-([\s\S]+?)%>/g,Yl=/<%([\s\S]+?)%>/g,to=/<%=([\s\S]+?)%>/g,Jl=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Xl=/^\w*$/,pi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,es=/[\\^$.*+?()[\]{}|]/g,Ql=RegExp(es.source),Mr=/^\s+/,Zl=/\s/,ea=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,_i=/\{\n\/\* \[wrapped with (.+)\] \*/,Yc=/,? & /,ta=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,na=/[()=,{}\[\]\/\s]/,no=/\\(\\)?/g,ra=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ro=/\w*$/,ts=/^[-+]0x[0-9a-f]+$/i,ia=/^0b[01]+$/i,gi=/^\[object .+?Constructor\]$/,sa=/^0o[0-7]+$/i,oa=/^(?:0|[1-9]\d*)$/,ns=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Fr=/($^)/,vi=/['\n\r\u2028\u2029\\]/g,mi="\\ud800-\\udfff",la="\\u0300-\\u036f",aa="\\ufe20-\\ufe2f",ua="\\u20d0-\\u20ff",io=la+aa+ua,rs="\\u2700-\\u27bf",so="a-z\\xdf-\\xf6\\xf8-\\xff",ca="\\xac\\xb1\\xd7\\xf7",fa="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ha="\\u2000-\\u206f",da=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",oo="A-Z\\xc0-\\xd6\\xd8-\\xde",lo="\\ufe0e\\ufe0f",ao=ca+fa+ha+da,is="['’]",ss="["+mi+"]",uo="["+ao+"]",yi="["+io+"]",co="\\d+",pa="["+rs+"]",_a="["+so+"]",ga="[^"+mi+ao+co+rs+so+oo+"]",fo="\\ud83c[\\udffb-\\udfff]",os="(?:"+yi+"|"+fo+")",Yn="[^"+mi+"]",$r="(?:\\ud83c[\\udde6-\\uddff]){2}",Ti="[\\ud800-\\udbff][\\udc00-\\udfff]",pr="["+oo+"]",ho="\\u200d",Jn="(?:"+_a+"|"+ga+")",va="(?:"+pr+"|"+ga+")",et="(?:"+is+"(?:d|ll|m|re|s|t|ve))?",po="(?:"+is+"(?:D|LL|M|RE|S|T|VE))?",ma=os+"?",_o="["+lo+"]?",go="(?:"+ho+"(?:"+[Yn,$r,Ti].join("|")+")"+_o+ma+")*",ya="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Jc="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ta=_o+ma+go,Xc="(?:"+[pa,$r,Ti].join("|")+")"+Ta,ba="(?:"+[Yn+yi+"?",yi,$r,Ti,ss].join("|")+")",Sa=RegExp(is,"g"),wa=RegExp(yi,"g"),ls=RegExp(fo+"(?="+fo+")|"+ba+Ta,"g"),as=RegExp([pr+"?"+_a+"+"+et+"(?="+[uo,pr,"$"].join("|")+")",va+"+"+po+"(?="+[uo,pr+Jn,"$"].join("|")+")",pr+"?"+Jn+"+"+et,pr+"+"+po,Jc,ya,co,Xc].join("|"),"g"),Ea=RegExp("["+ho+mi+io+lo+"]"),Ca=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,vo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Aa=-1,Ge={};Ge[ci]=Ge[fi]=Ge[Zi]=Ge[hi]=Ge[di]=Ge[ce]=Ge[Ct]=Ge[hr]=Ge[dr]=!0,Ge[Bt]=Ge[on]=Ge[Kn]=Ge[Ae]=Ge[Cn]=Ge[ln]=Ge[an]=Ge[un]=Ge[St]=Ge[ye]=Ge[ve]=Ge[Qe]=Ge[xe]=Ge[cn]=Ge[fr]=!1;var qe={};qe[Bt]=qe[on]=qe[Kn]=qe[Cn]=qe[Ae]=qe[ln]=qe[ci]=qe[fi]=qe[Zi]=qe[hi]=qe[di]=qe[St]=qe[ye]=qe[ve]=qe[Qe]=qe[xe]=qe[cn]=qe[gt]=qe[ce]=qe[Ct]=qe[hr]=qe[dr]=!0,qe[an]=qe[un]=qe[fr]=!1;var Qc={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Zc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},bi={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ef={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},mo=parseFloat,yo=parseInt,Ra=typeof We=="object"&&We&&We.Object===Object&&We,tf=typeof self=="object"&&self&&self.Object===Object&&self,vt=Ra||tf||Function("return this")(),To=r&&!r.nodeType&&r,Mn=To&&!0&&s&&!s.nodeType&&s,bo=Mn&&Mn.exports===To,_r=bo&&Ra.process,At=function(){try{var M=Mn&&Mn.require&&Mn.require("util").types;return M||_r&&_r.binding&&_r.binding("util")}catch{}}(),So=At&&At.isArrayBuffer,wo=At&&At.isDate,Eo=At&&At.isMap,Si=At&&At.isRegExp,Co=At&&At.isSet,Ao=At&&At.isTypedArray;function xt(M,z,B){switch(B.length){case 0:return M.call(z);case 1:return M.call(z,B[0]);case 2:return M.call(z,B[0],B[1]);case 3:return M.call(z,B[0],B[1],B[2])}return M.apply(z,B)}function Oa(M,z,B,k){for(var Ee=-1,Le=M==null?0:M.length;++Ee<Le;){var ot=M[Ee];z(k,ot,B(ot),M)}return k}function qt(M,z){for(var B=-1,k=M==null?0:M.length;++B<k&&z(M[B],B,M)!==!1;);return M}function Ia(M,z){for(var B=M==null?0:M.length;B--&&z(M[B],B,M)!==!1;);return M}function wi(M,z){for(var B=-1,k=M==null?0:M.length;++B<k;)if(!z(M[B],B,M))return!1;return!0}function Xn(M,z){for(var B=-1,k=M==null?0:M.length,Ee=0,Le=[];++B<k;){var ot=M[B];z(ot,B,M)&&(Le[Ee++]=ot)}return Le}function us(M,z){var B=M==null?0:M.length;return!!B&&Br(M,z,0)>-1}function Hr(M,z,B){for(var k=-1,Ee=M==null?0:M.length;++k<Ee;)if(B(z,M[k]))return!0;return!1}function Ke(M,z){for(var B=-1,k=M==null?0:M.length,Ee=Array(k);++B<k;)Ee[B]=z(M[B],B,M);return Ee}function An(M,z){for(var B=-1,k=z.length,Ee=M.length;++B<k;)M[Ee+B]=z[B];return M}function cs(M,z,B,k){var Ee=-1,Le=M==null?0:M.length;for(k&&Le&&(B=M[++Ee]);++Ee<Le;)B=z(B,M[Ee],Ee,M);return B}function nf(M,z,B,k){var Ee=M==null?0:M.length;for(k&&Ee&&(B=M[--Ee]);Ee--;)B=z(B,M[Ee],Ee,M);return B}function Ro(M,z){for(var B=-1,k=M==null?0:M.length;++B<k;)if(z(M[B],B,M))return!0;return!1}var fs=Oo("length");function rf(M){return M.split("")}function ka(M){return M.match(ta)||[]}function hs(M,z,B){var k;return B(M,function(Ee,Le,ot){if(z(Ee,Le,ot))return k=Le,!1}),k}function Ei(M,z,B,k){for(var Ee=M.length,Le=B+(k?1:-1);k?Le--:++Le<Ee;)if(z(M[Le],Le,M))return Le;return-1}function Br(M,z,B){return z===z?Fn(M,z,B):Ei(M,Pa,B)}function sf(M,z,B,k){for(var Ee=B-1,Le=M.length;++Ee<Le;)if(k(M[Ee],z))return Ee;return-1}function Pa(M){return M!==M}function ds(M,z){var B=M==null?0:M.length;return B?_s(M,z)/B:En}function Oo(M){return function(z){return z==null?n:z[M]}}function qr(M){return function(z){return M==null?n:M[z]}}function ps(M,z,B,k,Ee){return Ee(M,function(Le,ot,$e){B=k?(k=!1,Le):z(B,Le,ot,$e)}),B}function Na(M,z){var B=M.length;for(M.sort(z);B--;)M[B]=M[B].value;return M}function _s(M,z){for(var B,k=-1,Ee=M.length;++k<Ee;){var Le=z(M[k]);Le!==n&&(B=B===n?Le:B+Le)}return B}function gs(M,z){for(var B=-1,k=Array(M);++B<M;)k[B]=z(B);return k}function xa(M,z){return Ke(z,function(B){return[B,M[B]]})}function Io(M){return M&&M.slice(0,$a(M)+1).replace(Mr,"")}function Dt(M){return function(z){return M(z)}}function vs(M,z){return Ke(z,function(B){return M[B]})}function Wr(M,z){return M.has(z)}function ko(M,z){for(var B=-1,k=M.length;++B<k&&Br(z,M[B],0)>-1;);return B}function Po(M,z){for(var B=M.length;B--&&Br(z,M[B],0)>-1;);return B}function Da(M,z){for(var B=M.length,k=0;B--;)M[B]===z&&++k;return k}var La=qr(Qc),No=qr(Zc);function of(M){return"\\"+ef[M]}function lf(M,z){return M==null?n:M[z]}function gr(M){return Ea.test(M)}function xo(M){return Ca.test(M)}function Ua(M){for(var z,B=[];!(z=M.next()).done;)B.push(z.value);return B}function Do(M){var z=-1,B=Array(M.size);return M.forEach(function(k,Ee){B[++z]=[Ee,k]}),B}function Lo(M,z){return function(B){return M(z(B))}}function Qn(M,z){for(var B=-1,k=M.length,Ee=0,Le=[];++B<k;){var ot=M[B];(ot===z||ot===g)&&(M[B]=g,Le[Ee++]=B)}return Le}function ms(M){var z=-1,B=Array(M.size);return M.forEach(function(k){B[++z]=k}),B}function Ma(M){var z=-1,B=Array(M.size);return M.forEach(function(k){B[++z]=[k,k]}),B}function Fn(M,z,B){for(var k=B-1,Ee=M.length;++k<Ee;)if(M[k]===z)return k;return-1}function Fa(M,z,B){for(var k=B+1;k--;)if(M[k]===z)return k;return k}function vr(M){return gr(M)?Uo(M):fs(M)}function fn(M){return gr(M)?Ba(M):rf(M)}function $a(M){for(var z=M.length;z--&&Zl.test(M.charAt(z)););return z}var Ha=qr(bi);function Uo(M){for(var z=ls.lastIndex=0;ls.test(M);)++z;return z}function Ba(M){return M.match(ls)||[]}function qa(M){return M.match(as)||[]}var Wa=function M(z){z=z==null?vt:jr.defaults(vt.Object(),z,jr.pick(vt,vo));var B=z.Array,k=z.Date,Ee=z.Error,Le=z.Function,ot=z.Math,$e=z.Object,t=z.RegExp,u=z.String,c=z.TypeError,p=B.prototype,y=Le.prototype,S=$e.prototype,O=z["__core-js_shared__"],H=y.toString,q=S.hasOwnProperty,pe=0,je=function(){var o=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),Wt=S.toString,ys=H.call($e),Mo=vt._,j=t("^"+H.call(q).replace(es,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fe=bo?z.Buffer:n,Zn=z.Symbol,ja=z.Uint8Array,hp=fe?fe.allocUnsafe:n,Va=Lo($e.getPrototypeOf,$e),dp=$e.create,pp=S.propertyIsEnumerable,Ga=p.splice,_p=Zn?Zn.isConcatSpreadable:n,Fo=Zn?Zn.iterator:n,Ci=Zn?Zn.toStringTag:n,za=function(){try{var o=ki($e,"defineProperty");return o({},"",{}),o}catch{}}(),$0=z.clearTimeout!==vt.clearTimeout&&z.clearTimeout,H0=k&&k.now!==vt.Date.now&&k.now,B0=z.setTimeout!==vt.setTimeout&&z.setTimeout,Ka=ot.ceil,Ya=ot.floor,af=$e.getOwnPropertySymbols,q0=fe?fe.isBuffer:n,gp=z.isFinite,W0=p.join,j0=Lo($e.keys,$e),mt=ot.max,Lt=ot.min,V0=k.now,G0=z.parseInt,vp=ot.random,z0=p.reverse,uf=ki(z,"DataView"),$o=ki(z,"Map"),cf=ki(z,"Promise"),Ts=ki(z,"Set"),Ho=ki(z,"WeakMap"),Bo=ki($e,"create"),Ja=Ho&&new Ho,bs={},K0=Pi(uf),Y0=Pi($o),J0=Pi(cf),X0=Pi(Ts),Q0=Pi(Ho),Xa=Zn?Zn.prototype:n,qo=Xa?Xa.valueOf:n,mp=Xa?Xa.toString:n;function A(o){if(it(o)&&!Ce(o)&&!(o instanceof De)){if(o instanceof Rn)return o;if(q.call(o,"__wrapped__"))return y_(o)}return new Rn(o)}var Ss=function(){function o(){}return function(a){if(!tt(a))return{};if(dp)return dp(a);o.prototype=a;var d=new o;return o.prototype=n,d}}();function Qa(){}function Rn(o,a){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!a,this.__index__=0,this.__values__=n}A.templateSettings={escape:Kl,evaluate:Yl,interpolate:to,variable:"",imports:{_:A}},A.prototype=Qa.prototype,A.prototype.constructor=A,Rn.prototype=Ss(Qa.prototype),Rn.prototype.constructor=Rn;function De(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ht,this.__views__=[]}function Z0(){var o=new De(this.__wrapped__);return o.__actions__=Xt(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=Xt(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=Xt(this.__views__),o}function eT(){if(this.__filtered__){var o=new De(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function tT(){var o=this.__wrapped__.value(),a=this.__dir__,d=Ce(o),v=a<0,w=d?o.length:0,R=db(0,w,this.__views__),D=R.start,L=R.end,F=L-D,K=v?L:D-1,Y=this.__iteratees__,ee=Y.length,oe=0,he=Lt(F,this.__takeCount__);if(!d||!v&&w==F&&he==F)return qp(o,this.__actions__);var be=[];e:for(;F--&&oe<he;){K+=a;for(var Ie=-1,Se=o[K];++Ie<ee;){var Ne=Y[Ie],Ue=Ne.iteratee,pn=Ne.type,Gt=Ue(Se);if(pn==re)Se=Gt;else if(!Gt){if(pn==Z)continue e;break e}}be[oe++]=Se}return be}De.prototype=Ss(Qa.prototype),De.prototype.constructor=De;function Ai(o){var a=-1,d=o==null?0:o.length;for(this.clear();++a<d;){var v=o[a];this.set(v[0],v[1])}}function nT(){this.__data__=Bo?Bo(null):{},this.size=0}function rT(o){var a=this.has(o)&&delete this.__data__[o];return this.size-=a?1:0,a}function iT(o){var a=this.__data__;if(Bo){var d=a[o];return d===T?n:d}return q.call(a,o)?a[o]:n}function sT(o){var a=this.__data__;return Bo?a[o]!==n:q.call(a,o)}function oT(o,a){var d=this.__data__;return this.size+=this.has(o)?0:1,d[o]=Bo&&a===n?T:a,this}Ai.prototype.clear=nT,Ai.prototype.delete=rT,Ai.prototype.get=iT,Ai.prototype.has=sT,Ai.prototype.set=oT;function mr(o){var a=-1,d=o==null?0:o.length;for(this.clear();++a<d;){var v=o[a];this.set(v[0],v[1])}}function lT(){this.__data__=[],this.size=0}function aT(o){var a=this.__data__,d=Za(a,o);if(d<0)return!1;var v=a.length-1;return d==v?a.pop():Ga.call(a,d,1),--this.size,!0}function uT(o){var a=this.__data__,d=Za(a,o);return d<0?n:a[d][1]}function cT(o){return Za(this.__data__,o)>-1}function fT(o,a){var d=this.__data__,v=Za(d,o);return v<0?(++this.size,d.push([o,a])):d[v][1]=a,this}mr.prototype.clear=lT,mr.prototype.delete=aT,mr.prototype.get=uT,mr.prototype.has=cT,mr.prototype.set=fT;function yr(o){var a=-1,d=o==null?0:o.length;for(this.clear();++a<d;){var v=o[a];this.set(v[0],v[1])}}function hT(){this.size=0,this.__data__={hash:new Ai,map:new($o||mr),string:new Ai}}function dT(o){var a=fu(this,o).delete(o);return this.size-=a?1:0,a}function pT(o){return fu(this,o).get(o)}function _T(o){return fu(this,o).has(o)}function gT(o,a){var d=fu(this,o),v=d.size;return d.set(o,a),this.size+=d.size==v?0:1,this}yr.prototype.clear=hT,yr.prototype.delete=dT,yr.prototype.get=pT,yr.prototype.has=_T,yr.prototype.set=gT;function Ri(o){var a=-1,d=o==null?0:o.length;for(this.__data__=new yr;++a<d;)this.add(o[a])}function vT(o){return this.__data__.set(o,T),this}function mT(o){return this.__data__.has(o)}Ri.prototype.add=Ri.prototype.push=vT,Ri.prototype.has=mT;function $n(o){var a=this.__data__=new mr(o);this.size=a.size}function yT(){this.__data__=new mr,this.size=0}function TT(o){var a=this.__data__,d=a.delete(o);return this.size=a.size,d}function bT(o){return this.__data__.get(o)}function ST(o){return this.__data__.has(o)}function wT(o,a){var d=this.__data__;if(d instanceof mr){var v=d.__data__;if(!$o||v.length<l-1)return v.push([o,a]),this.size=++d.size,this;d=this.__data__=new yr(v)}return d.set(o,a),this.size=d.size,this}$n.prototype.clear=yT,$n.prototype.delete=TT,$n.prototype.get=bT,$n.prototype.has=ST,$n.prototype.set=wT;function yp(o,a){var d=Ce(o),v=!d&&Ni(o),w=!d&&!v&&Yr(o),R=!d&&!v&&!w&&As(o),D=d||v||w||R,L=D?gs(o.length,u):[],F=L.length;for(var K in o)(a||q.call(o,K))&&!(D&&(K=="length"||w&&(K=="offset"||K=="parent")||R&&(K=="buffer"||K=="byteLength"||K=="byteOffset")||wr(K,F)))&&L.push(K);return L}function Tp(o){var a=o.length;return a?o[bf(0,a-1)]:n}function ET(o,a){return hu(Xt(o),Oi(a,0,o.length))}function CT(o){return hu(Xt(o))}function ff(o,a,d){(d!==n&&!Hn(o[a],d)||d===n&&!(a in o))&&Tr(o,a,d)}function Wo(o,a,d){var v=o[a];(!(q.call(o,a)&&Hn(v,d))||d===n&&!(a in o))&&Tr(o,a,d)}function Za(o,a){for(var d=o.length;d--;)if(Hn(o[d][0],a))return d;return-1}function AT(o,a,d,v){return Vr(o,function(w,R,D){a(v,w,d(w),D)}),v}function bp(o,a){return o&&tr(a,wt(a),o)}function RT(o,a){return o&&tr(a,Zt(a),o)}function Tr(o,a,d){a=="__proto__"&&za?za(o,a,{configurable:!0,enumerable:!0,value:d,writable:!0}):o[a]=d}function hf(o,a){for(var d=-1,v=a.length,w=B(v),R=o==null;++d<v;)w[d]=R?n:Gf(o,a[d]);return w}function Oi(o,a,d){return o===o&&(d!==n&&(o=o<=d?o:d),a!==n&&(o=o>=a?o:a)),o}function On(o,a,d,v,w,R){var D,L=a&m,F=a&b,K=a&E;if(d&&(D=w?d(o,v,w,R):d(o)),D!==n)return D;if(!tt(o))return o;var Y=Ce(o);if(Y){if(D=_b(o),!L)return Xt(o,D)}else{var ee=Ut(o),oe=ee==un||ee==Un;if(Yr(o))return Vp(o,L);if(ee==ve||ee==Bt||oe&&!w){if(D=F||oe?{}:c_(o),!L)return F?ib(o,RT(D,o)):rb(o,bp(D,o))}else{if(!qe[ee])return w?o:{};D=gb(o,ee,L)}}R||(R=new $n);var he=R.get(o);if(he)return he;R.set(o,D),$_(o)?o.forEach(function(Se){D.add(On(Se,a,d,Se,o,R))}):M_(o)&&o.forEach(function(Se,Ne){D.set(Ne,On(Se,a,d,Ne,o,R))});var be=K?F?Nf:Pf:F?Zt:wt,Ie=Y?n:be(o);return qt(Ie||o,function(Se,Ne){Ie&&(Ne=Se,Se=o[Ne]),Wo(D,Ne,On(Se,a,d,Ne,o,R))}),D}function OT(o){var a=wt(o);return function(d){return Sp(d,o,a)}}function Sp(o,a,d){var v=d.length;if(o==null)return!v;for(o=$e(o);v--;){var w=d[v],R=a[w],D=o[w];if(D===n&&!(w in o)||!R(D))return!1}return!0}function wp(o,a,d){if(typeof o!="function")throw new c(e);return Jo(function(){o.apply(n,d)},a)}function jo(o,a,d,v){var w=-1,R=us,D=!0,L=o.length,F=[],K=a.length;if(!L)return F;d&&(a=Ke(a,Dt(d))),v?(R=Hr,D=!1):a.length>=l&&(R=Wr,D=!1,a=new Ri(a));e:for(;++w<L;){var Y=o[w],ee=d==null?Y:d(Y);if(Y=v||Y!==0?Y:0,D&&ee===ee){for(var oe=K;oe--;)if(a[oe]===ee)continue e;F.push(Y)}else R(a,ee,v)||F.push(Y)}return F}var Vr=Jp(er),Ep=Jp(pf,!0);function IT(o,a){var d=!0;return Vr(o,function(v,w,R){return d=!!a(v,w,R),d}),d}function eu(o,a,d){for(var v=-1,w=o.length;++v<w;){var R=o[v],D=a(R);if(D!=null&&(L===n?D===D&&!dn(D):d(D,L)))var L=D,F=R}return F}function kT(o,a,d,v){var w=o.length;for(d=Oe(d),d<0&&(d=-d>w?0:w+d),v=v===n||v>w?w:Oe(v),v<0&&(v+=w),v=d>v?0:B_(v);d<v;)o[d++]=a;return o}function Cp(o,a){var d=[];return Vr(o,function(v,w,R){a(v,w,R)&&d.push(v)}),d}function Rt(o,a,d,v,w){var R=-1,D=o.length;for(d||(d=mb),w||(w=[]);++R<D;){var L=o[R];a>0&&d(L)?a>1?Rt(L,a-1,d,v,w):An(w,L):v||(w[w.length]=L)}return w}var df=Xp(),Ap=Xp(!0);function er(o,a){return o&&df(o,a,wt)}function pf(o,a){return o&&Ap(o,a,wt)}function tu(o,a){return Xn(a,function(d){return Er(o[d])})}function Ii(o,a){a=zr(a,o);for(var d=0,v=a.length;o!=null&&d<v;)o=o[nr(a[d++])];return d&&d==v?o:n}function Rp(o,a,d){var v=a(o);return Ce(o)?v:An(v,d(o))}function jt(o){return o==null?o===n?ql:ge:Ci&&Ci in $e(o)?hb(o):Cb(o)}function _f(o,a){return o>a}function PT(o,a){return o!=null&&q.call(o,a)}function NT(o,a){return o!=null&&a in $e(o)}function xT(o,a,d){return o>=Lt(a,d)&&o<mt(a,d)}function gf(o,a,d){for(var v=d?Hr:us,w=o[0].length,R=o.length,D=R,L=B(R),F=1/0,K=[];D--;){var Y=o[D];D&&a&&(Y=Ke(Y,Dt(a))),F=Lt(Y.length,F),L[D]=!d&&(a||w>=120&&Y.length>=120)?new Ri(D&&Y):n}Y=o[0];var ee=-1,oe=L[0];e:for(;++ee<w&&K.length<F;){var he=Y[ee],be=a?a(he):he;if(he=d||he!==0?he:0,!(oe?Wr(oe,be):v(K,be,d))){for(D=R;--D;){var Ie=L[D];if(!(Ie?Wr(Ie,be):v(o[D],be,d)))continue e}oe&&oe.push(be),K.push(he)}}return K}function DT(o,a,d,v){return er(o,function(w,R,D){a(v,d(w),R,D)}),v}function Vo(o,a,d){a=zr(a,o),o=p_(o,a);var v=o==null?o:o[nr(kn(a))];return v==null?n:xt(v,o,d)}function Op(o){return it(o)&&jt(o)==Bt}function LT(o){return it(o)&&jt(o)==Kn}function UT(o){return it(o)&&jt(o)==ln}function Go(o,a,d,v,w){return o===a?!0:o==null||a==null||!it(o)&&!it(a)?o!==o&&a!==a:MT(o,a,d,v,Go,w)}function MT(o,a,d,v,w,R){var D=Ce(o),L=Ce(a),F=D?on:Ut(o),K=L?on:Ut(a);F=F==Bt?ve:F,K=K==Bt?ve:K;var Y=F==ve,ee=K==ve,oe=F==K;if(oe&&Yr(o)){if(!Yr(a))return!1;D=!0,Y=!1}if(oe&&!Y)return R||(R=new $n),D||As(o)?l_(o,a,d,v,w,R):cb(o,a,F,d,v,w,R);if(!(d&C)){var he=Y&&q.call(o,"__wrapped__"),be=ee&&q.call(a,"__wrapped__");if(he||be){var Ie=he?o.value():o,Se=be?a.value():a;return R||(R=new $n),w(Ie,Se,d,v,R)}}return oe?(R||(R=new $n),fb(o,a,d,v,w,R)):!1}function FT(o){return it(o)&&Ut(o)==St}function vf(o,a,d,v){var w=d.length,R=w,D=!v;if(o==null)return!R;for(o=$e(o);w--;){var L=d[w];if(D&&L[2]?L[1]!==o[L[0]]:!(L[0]in o))return!1}for(;++w<R;){L=d[w];var F=L[0],K=o[F],Y=L[1];if(D&&L[2]){if(K===n&&!(F in o))return!1}else{var ee=new $n;if(v)var oe=v(K,Y,F,o,a,ee);if(!(oe===n?Go(Y,K,C|N,v,ee):oe))return!1}}return!0}function Ip(o){if(!tt(o)||Tb(o))return!1;var a=Er(o)?j:gi;return a.test(Pi(o))}function $T(o){return it(o)&&jt(o)==Qe}function HT(o){return it(o)&&Ut(o)==xe}function BT(o){return it(o)&&mu(o.length)&&!!Ge[jt(o)]}function kp(o){return typeof o=="function"?o:o==null?en:typeof o=="object"?Ce(o)?xp(o[0],o[1]):Np(o):Q_(o)}function mf(o){if(!Yo(o))return j0(o);var a=[];for(var d in $e(o))q.call(o,d)&&d!="constructor"&&a.push(d);return a}function qT(o){if(!tt(o))return Eb(o);var a=Yo(o),d=[];for(var v in o)v=="constructor"&&(a||!q.call(o,v))||d.push(v);return d}function yf(o,a){return o<a}function Pp(o,a){var d=-1,v=Qt(o)?B(o.length):[];return Vr(o,function(w,R,D){v[++d]=a(w,R,D)}),v}function Np(o){var a=Df(o);return a.length==1&&a[0][2]?h_(a[0][0],a[0][1]):function(d){return d===o||vf(d,o,a)}}function xp(o,a){return Uf(o)&&f_(a)?h_(nr(o),a):function(d){var v=Gf(d,o);return v===n&&v===a?zf(d,o):Go(a,v,C|N)}}function nu(o,a,d,v,w){o!==a&&df(a,function(R,D){if(w||(w=new $n),tt(R))WT(o,a,D,d,nu,v,w);else{var L=v?v(Ff(o,D),R,D+"",o,a,w):n;L===n&&(L=R),ff(o,D,L)}},Zt)}function WT(o,a,d,v,w,R,D){var L=Ff(o,d),F=Ff(a,d),K=D.get(F);if(K){ff(o,d,K);return}var Y=R?R(L,F,d+"",o,a,D):n,ee=Y===n;if(ee){var oe=Ce(F),he=!oe&&Yr(F),be=!oe&&!he&&As(F);Y=F,oe||he||be?Ce(L)?Y=L:lt(L)?Y=Xt(L):he?(ee=!1,Y=Vp(F,!0)):be?(ee=!1,Y=Gp(F,!0)):Y=[]:Xo(F)||Ni(F)?(Y=L,Ni(L)?Y=q_(L):(!tt(L)||Er(L))&&(Y=c_(F))):ee=!1}ee&&(D.set(F,Y),w(Y,F,v,R,D),D.delete(F)),ff(o,d,Y)}function Dp(o,a){var d=o.length;if(d)return a+=a<0?d:0,wr(a,d)?o[a]:n}function Lp(o,a,d){a.length?a=Ke(a,function(R){return Ce(R)?function(D){return Ii(D,R.length===1?R[0]:R)}:R}):a=[en];var v=-1;a=Ke(a,Dt(Te()));var w=Pp(o,function(R,D,L){var F=Ke(a,function(K){return K(R)});return{criteria:F,index:++v,value:R}});return Na(w,function(R,D){return nb(R,D,d)})}function jT(o,a){return Up(o,a,function(d,v){return zf(o,v)})}function Up(o,a,d){for(var v=-1,w=a.length,R={};++v<w;){var D=a[v],L=Ii(o,D);d(L,D)&&zo(R,zr(D,o),L)}return R}function VT(o){return function(a){return Ii(a,o)}}function Tf(o,a,d,v){var w=v?sf:Br,R=-1,D=a.length,L=o;for(o===a&&(a=Xt(a)),d&&(L=Ke(o,Dt(d)));++R<D;)for(var F=0,K=a[R],Y=d?d(K):K;(F=w(L,Y,F,v))>-1;)L!==o&&Ga.call(L,F,1),Ga.call(o,F,1);return o}function Mp(o,a){for(var d=o?a.length:0,v=d-1;d--;){var w=a[d];if(d==v||w!==R){var R=w;wr(w)?Ga.call(o,w,1):Ef(o,w)}}return o}function bf(o,a){return o+Ya(vp()*(a-o+1))}function GT(o,a,d,v){for(var w=-1,R=mt(Ka((a-o)/(d||1)),0),D=B(R);R--;)D[v?R:++w]=o,o+=d;return D}function Sf(o,a){var d="";if(!o||a<1||a>bt)return d;do a%2&&(d+=o),a=Ya(a/2),a&&(o+=o);while(a);return d}function ke(o,a){return $f(d_(o,a,en),o+"")}function zT(o){return Tp(Rs(o))}function KT(o,a){var d=Rs(o);return hu(d,Oi(a,0,d.length))}function zo(o,a,d,v){if(!tt(o))return o;a=zr(a,o);for(var w=-1,R=a.length,D=R-1,L=o;L!=null&&++w<R;){var F=nr(a[w]),K=d;if(F==="__proto__"||F==="constructor"||F==="prototype")return o;if(w!=D){var Y=L[F];K=v?v(Y,F,L):n,K===n&&(K=tt(Y)?Y:wr(a[w+1])?[]:{})}Wo(L,F,K),L=L[F]}return o}var Fp=Ja?function(o,a){return Ja.set(o,a),o}:en,YT=za?function(o,a){return za(o,"toString",{configurable:!0,enumerable:!1,value:Yf(a),writable:!0})}:en;function JT(o){return hu(Rs(o))}function In(o,a,d){var v=-1,w=o.length;a<0&&(a=-a>w?0:w+a),d=d>w?w:d,d<0&&(d+=w),w=a>d?0:d-a>>>0,a>>>=0;for(var R=B(w);++v<w;)R[v]=o[v+a];return R}function XT(o,a){var d;return Vr(o,function(v,w,R){return d=a(v,w,R),!d}),!!d}function ru(o,a,d){var v=0,w=o==null?v:o.length;if(typeof a=="number"&&a===a&&w<=ur){for(;v<w;){var R=v+w>>>1,D=o[R];D!==null&&!dn(D)&&(d?D<=a:D<a)?v=R+1:w=R}return w}return wf(o,a,en,d)}function wf(o,a,d,v){var w=0,R=o==null?0:o.length;if(R===0)return 0;a=d(a);for(var D=a!==a,L=a===null,F=dn(a),K=a===n;w<R;){var Y=Ya((w+R)/2),ee=d(o[Y]),oe=ee!==n,he=ee===null,be=ee===ee,Ie=dn(ee);if(D)var Se=v||be;else K?Se=be&&(v||oe):L?Se=be&&oe&&(v||!he):F?Se=be&&oe&&!he&&(v||!Ie):he||Ie?Se=!1:Se=v?ee<=a:ee<a;Se?w=Y+1:R=Y}return Lt(R,Me)}function $p(o,a){for(var d=-1,v=o.length,w=0,R=[];++d<v;){var D=o[d],L=a?a(D):D;if(!d||!Hn(L,F)){var F=L;R[w++]=D===0?0:D}}return R}function Hp(o){return typeof o=="number"?o:dn(o)?En:+o}function hn(o){if(typeof o=="string")return o;if(Ce(o))return Ke(o,hn)+"";if(dn(o))return mp?mp.call(o):"";var a=o+"";return a=="0"&&1/o==-ne?"-0":a}function Gr(o,a,d){var v=-1,w=us,R=o.length,D=!0,L=[],F=L;if(d)D=!1,w=Hr;else if(R>=l){var K=a?null:ab(o);if(K)return ms(K);D=!1,w=Wr,F=new Ri}else F=a?[]:L;e:for(;++v<R;){var Y=o[v],ee=a?a(Y):Y;if(Y=d||Y!==0?Y:0,D&&ee===ee){for(var oe=F.length;oe--;)if(F[oe]===ee)continue e;a&&F.push(ee),L.push(Y)}else w(F,ee,d)||(F!==L&&F.push(ee),L.push(Y))}return L}function Ef(o,a){return a=zr(a,o),o=p_(o,a),o==null||delete o[nr(kn(a))]}function Bp(o,a,d,v){return zo(o,a,d(Ii(o,a)),v)}function iu(o,a,d,v){for(var w=o.length,R=v?w:-1;(v?R--:++R<w)&&a(o[R],R,o););return d?In(o,v?0:R,v?R+1:w):In(o,v?R+1:0,v?w:R)}function qp(o,a){var d=o;return d instanceof De&&(d=d.value()),cs(a,function(v,w){return w.func.apply(w.thisArg,An([v],w.args))},d)}function Cf(o,a,d){var v=o.length;if(v<2)return v?Gr(o[0]):[];for(var w=-1,R=B(v);++w<v;)for(var D=o[w],L=-1;++L<v;)L!=w&&(R[w]=jo(R[w]||D,o[L],a,d));return Gr(Rt(R,1),a,d)}function Wp(o,a,d){for(var v=-1,w=o.length,R=a.length,D={};++v<w;){var L=v<R?a[v]:n;d(D,o[v],L)}return D}function Af(o){return lt(o)?o:[]}function Rf(o){return typeof o=="function"?o:en}function zr(o,a){return Ce(o)?o:Uf(o,a)?[o]:m_(He(o))}var QT=ke;function Kr(o,a,d){var v=o.length;return d=d===n?v:d,!a&&d>=v?o:In(o,a,d)}var jp=$0||function(o){return vt.clearTimeout(o)};function Vp(o,a){if(a)return o.slice();var d=o.length,v=hp?hp(d):new o.constructor(d);return o.copy(v),v}function Of(o){var a=new o.constructor(o.byteLength);return new ja(a).set(new ja(o)),a}function ZT(o,a){var d=a?Of(o.buffer):o.buffer;return new o.constructor(d,o.byteOffset,o.byteLength)}function eb(o){var a=new o.constructor(o.source,ro.exec(o));return a.lastIndex=o.lastIndex,a}function tb(o){return qo?$e(qo.call(o)):{}}function Gp(o,a){var d=a?Of(o.buffer):o.buffer;return new o.constructor(d,o.byteOffset,o.length)}function zp(o,a){if(o!==a){var d=o!==n,v=o===null,w=o===o,R=dn(o),D=a!==n,L=a===null,F=a===a,K=dn(a);if(!L&&!K&&!R&&o>a||R&&D&&F&&!L&&!K||v&&D&&F||!d&&F||!w)return 1;if(!v&&!R&&!K&&o<a||K&&d&&w&&!v&&!R||L&&d&&w||!D&&w||!F)return-1}return 0}function nb(o,a,d){for(var v=-1,w=o.criteria,R=a.criteria,D=w.length,L=d.length;++v<D;){var F=zp(w[v],R[v]);if(F){if(v>=L)return F;var K=d[v];return F*(K=="desc"?-1:1)}}return o.index-a.index}function Kp(o,a,d,v){for(var w=-1,R=o.length,D=d.length,L=-1,F=a.length,K=mt(R-D,0),Y=B(F+K),ee=!v;++L<F;)Y[L]=a[L];for(;++w<D;)(ee||w<R)&&(Y[d[w]]=o[w]);for(;K--;)Y[L++]=o[w++];return Y}function Yp(o,a,d,v){for(var w=-1,R=o.length,D=-1,L=d.length,F=-1,K=a.length,Y=mt(R-L,0),ee=B(Y+K),oe=!v;++w<Y;)ee[w]=o[w];for(var he=w;++F<K;)ee[he+F]=a[F];for(;++D<L;)(oe||w<R)&&(ee[he+d[D]]=o[w++]);return ee}function Xt(o,a){var d=-1,v=o.length;for(a||(a=B(v));++d<v;)a[d]=o[d];return a}function tr(o,a,d,v){var w=!d;d||(d={});for(var R=-1,D=a.length;++R<D;){var L=a[R],F=v?v(d[L],o[L],L,d,o):n;F===n&&(F=o[L]),w?Tr(d,L,F):Wo(d,L,F)}return d}function rb(o,a){return tr(o,Lf(o),a)}function ib(o,a){return tr(o,a_(o),a)}function su(o,a){return function(d,v){var w=Ce(d)?Oa:AT,R=a?a():{};return w(d,o,Te(v,2),R)}}function ws(o){return ke(function(a,d){var v=-1,w=d.length,R=w>1?d[w-1]:n,D=w>2?d[2]:n;for(R=o.length>3&&typeof R=="function"?(w--,R):n,D&&Vt(d[0],d[1],D)&&(R=w<3?n:R,w=1),a=$e(a);++v<w;){var L=d[v];L&&o(a,L,v,R)}return a})}function Jp(o,a){return function(d,v){if(d==null)return d;if(!Qt(d))return o(d,v);for(var w=d.length,R=a?w:-1,D=$e(d);(a?R--:++R<w)&&v(D[R],R,D)!==!1;);return d}}function Xp(o){return function(a,d,v){for(var w=-1,R=$e(a),D=v(a),L=D.length;L--;){var F=D[o?L:++w];if(d(R[F],F,R)===!1)break}return a}}function sb(o,a,d){var v=a&I,w=Ko(o);function R(){var D=this&&this!==vt&&this instanceof R?w:o;return D.apply(v?d:this,arguments)}return R}function Qp(o){return function(a){a=He(a);var d=gr(a)?fn(a):n,v=d?d[0]:a.charAt(0),w=d?Kr(d,1).join(""):a.slice(1);return v[o]()+w}}function Es(o){return function(a){return cs(J_(Y_(a).replace(Sa,"")),o,"")}}function Ko(o){return function(){var a=arguments;switch(a.length){case 0:return new o;case 1:return new o(a[0]);case 2:return new o(a[0],a[1]);case 3:return new o(a[0],a[1],a[2]);case 4:return new o(a[0],a[1],a[2],a[3]);case 5:return new o(a[0],a[1],a[2],a[3],a[4]);case 6:return new o(a[0],a[1],a[2],a[3],a[4],a[5]);case 7:return new o(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}var d=Ss(o.prototype),v=o.apply(d,a);return tt(v)?v:d}}function ob(o,a,d){var v=Ko(o);function w(){for(var R=arguments.length,D=B(R),L=R,F=Cs(w);L--;)D[L]=arguments[L];var K=R<3&&D[0]!==F&&D[R-1]!==F?[]:Qn(D,F);if(R-=K.length,R<d)return r_(o,a,ou,w.placeholder,n,D,K,n,n,d-R);var Y=this&&this!==vt&&this instanceof w?v:o;return xt(Y,this,D)}return w}function Zp(o){return function(a,d,v){var w=$e(a);if(!Qt(a)){var R=Te(d,3);a=wt(a),d=function(L){return R(w[L],L,w)}}var D=o(a,d,v);return D>-1?w[R?a[D]:D]:n}}function e_(o){return Sr(function(a){var d=a.length,v=d,w=Rn.prototype.thru;for(o&&a.reverse();v--;){var R=a[v];if(typeof R!="function")throw new c(e);if(w&&!D&&cu(R)=="wrapper")var D=new Rn([],!0)}for(v=D?v:d;++v<d;){R=a[v];var L=cu(R),F=L=="wrapper"?xf(R):n;F&&Mf(F[0])&&F[1]==(_e|U|te|X)&&!F[4].length&&F[9]==1?D=D[cu(F[0])].apply(D,F[3]):D=R.length==1&&Mf(R)?D[L]():D.thru(R)}return function(){var K=arguments,Y=K[0];if(D&&K.length==1&&Ce(Y))return D.plant(Y).value();for(var ee=0,oe=d?a[ee].apply(this,K):Y;++ee<d;)oe=a[ee].call(this,oe);return oe}})}function ou(o,a,d,v,w,R,D,L,F,K){var Y=a&_e,ee=a&I,oe=a&P,he=a&(U|G),be=a&$,Ie=oe?n:Ko(o);function Se(){for(var Ne=arguments.length,Ue=B(Ne),pn=Ne;pn--;)Ue[pn]=arguments[pn];if(he)var Gt=Cs(Se),_n=Da(Ue,Gt);if(v&&(Ue=Kp(Ue,v,w,he)),R&&(Ue=Yp(Ue,R,D,he)),Ne-=_n,he&&Ne<K){var at=Qn(Ue,Gt);return r_(o,a,ou,Se.placeholder,d,Ue,at,L,F,K-Ne)}var Bn=ee?d:this,Ar=oe?Bn[o]:o;return Ne=Ue.length,L?Ue=Ab(Ue,L):be&&Ne>1&&Ue.reverse(),Y&&F<Ne&&(Ue.length=F),this&&this!==vt&&this instanceof Se&&(Ar=Ie||Ko(Ar)),Ar.apply(Bn,Ue)}return Se}function t_(o,a){return function(d,v){return DT(d,o,a(v),{})}}function lu(o,a){return function(d,v){var w;if(d===n&&v===n)return a;if(d!==n&&(w=d),v!==n){if(w===n)return v;typeof d=="string"||typeof v=="string"?(d=hn(d),v=hn(v)):(d=Hp(d),v=Hp(v)),w=o(d,v)}return w}}function If(o){return Sr(function(a){return a=Ke(a,Dt(Te())),ke(function(d){var v=this;return o(a,function(w){return xt(w,v,d)})})})}function au(o,a){a=a===n?" ":hn(a);var d=a.length;if(d<2)return d?Sf(a,o):a;var v=Sf(a,Ka(o/vr(a)));return gr(a)?Kr(fn(v),0,o).join(""):v.slice(0,o)}function lb(o,a,d,v){var w=a&I,R=Ko(o);function D(){for(var L=-1,F=arguments.length,K=-1,Y=v.length,ee=B(Y+F),oe=this&&this!==vt&&this instanceof D?R:o;++K<Y;)ee[K]=v[K];for(;F--;)ee[K++]=arguments[++L];return xt(oe,w?d:this,ee)}return D}function n_(o){return function(a,d,v){return v&&typeof v!="number"&&Vt(a,d,v)&&(d=v=n),a=Cr(a),d===n?(d=a,a=0):d=Cr(d),v=v===n?a<d?1:-1:Cr(v),GT(a,d,v,o)}}function uu(o){return function(a,d){return typeof a=="string"&&typeof d=="string"||(a=Pn(a),d=Pn(d)),o(a,d)}}function r_(o,a,d,v,w,R,D,L,F,K){var Y=a&U,ee=Y?D:n,oe=Y?n:D,he=Y?R:n,be=Y?n:R;a|=Y?te:we,a&=~(Y?we:te),a&x||(a&=~(I|P));var Ie=[o,a,w,he,ee,be,oe,L,F,K],Se=d.apply(n,Ie);return Mf(o)&&__(Se,Ie),Se.placeholder=v,g_(Se,o,a)}function kf(o){var a=ot[o];return function(d,v){if(d=Pn(d),v=v==null?0:Lt(Oe(v),292),v&&gp(d)){var w=(He(d)+"e").split("e"),R=a(w[0]+"e"+(+w[1]+v));return w=(He(R)+"e").split("e"),+(w[0]+"e"+(+w[1]-v))}return a(d)}}var ab=Ts&&1/ms(new Ts([,-0]))[1]==ne?function(o){return new Ts(o)}:Qf;function i_(o){return function(a){var d=Ut(a);return d==St?Do(a):d==xe?Ma(a):xa(a,o(a))}}function br(o,a,d,v,w,R,D,L){var F=a&P;if(!F&&typeof o!="function")throw new c(e);var K=v?v.length:0;if(K||(a&=~(te|we),v=w=n),D=D===n?D:mt(Oe(D),0),L=L===n?L:Oe(L),K-=w?w.length:0,a&we){var Y=v,ee=w;v=w=n}var oe=F?n:xf(o),he=[o,a,d,v,w,Y,ee,R,D,L];if(oe&&wb(he,oe),o=he[0],a=he[1],d=he[2],v=he[3],w=he[4],L=he[9]=he[9]===n?F?0:o.length:mt(he[9]-K,0),!L&&a&(U|G)&&(a&=~(U|G)),!a||a==I)var be=sb(o,a,d);else a==U||a==G?be=ob(o,a,L):(a==te||a==(I|te))&&!w.length?be=lb(o,a,d,v):be=ou.apply(n,he);var Ie=oe?Fp:__;return g_(Ie(be,he),o,a)}function s_(o,a,d,v){return o===n||Hn(o,S[d])&&!q.call(v,d)?a:o}function o_(o,a,d,v,w,R){return tt(o)&&tt(a)&&(R.set(a,o),nu(o,a,n,o_,R),R.delete(a)),o}function ub(o){return Xo(o)?n:o}function l_(o,a,d,v,w,R){var D=d&C,L=o.length,F=a.length;if(L!=F&&!(D&&F>L))return!1;var K=R.get(o),Y=R.get(a);if(K&&Y)return K==a&&Y==o;var ee=-1,oe=!0,he=d&N?new Ri:n;for(R.set(o,a),R.set(a,o);++ee<L;){var be=o[ee],Ie=a[ee];if(v)var Se=D?v(Ie,be,ee,a,o,R):v(be,Ie,ee,o,a,R);if(Se!==n){if(Se)continue;oe=!1;break}if(he){if(!Ro(a,function(Ne,Ue){if(!Wr(he,Ue)&&(be===Ne||w(be,Ne,d,v,R)))return he.push(Ue)})){oe=!1;break}}else if(!(be===Ie||w(be,Ie,d,v,R))){oe=!1;break}}return R.delete(o),R.delete(a),oe}function cb(o,a,d,v,w,R,D){switch(d){case Cn:if(o.byteLength!=a.byteLength||o.byteOffset!=a.byteOffset)return!1;o=o.buffer,a=a.buffer;case Kn:return!(o.byteLength!=a.byteLength||!R(new ja(o),new ja(a)));case Ae:case ln:case ye:return Hn(+o,+a);case an:return o.name==a.name&&o.message==a.message;case Qe:case cn:return o==a+"";case St:var L=Do;case xe:var F=v&C;if(L||(L=ms),o.size!=a.size&&!F)return!1;var K=D.get(o);if(K)return K==a;v|=N,D.set(o,a);var Y=l_(L(o),L(a),v,w,R,D);return D.delete(o),Y;case gt:if(qo)return qo.call(o)==qo.call(a)}return!1}function fb(o,a,d,v,w,R){var D=d&C,L=Pf(o),F=L.length,K=Pf(a),Y=K.length;if(F!=Y&&!D)return!1;for(var ee=F;ee--;){var oe=L[ee];if(!(D?oe in a:q.call(a,oe)))return!1}var he=R.get(o),be=R.get(a);if(he&&be)return he==a&&be==o;var Ie=!0;R.set(o,a),R.set(a,o);for(var Se=D;++ee<F;){oe=L[ee];var Ne=o[oe],Ue=a[oe];if(v)var pn=D?v(Ue,Ne,oe,a,o,R):v(Ne,Ue,oe,o,a,R);if(!(pn===n?Ne===Ue||w(Ne,Ue,d,v,R):pn)){Ie=!1;break}Se||(Se=oe=="constructor")}if(Ie&&!Se){var Gt=o.constructor,_n=a.constructor;Gt!=_n&&"constructor"in o&&"constructor"in a&&!(typeof Gt=="function"&&Gt instanceof Gt&&typeof _n=="function"&&_n instanceof _n)&&(Ie=!1)}return R.delete(o),R.delete(a),Ie}function Sr(o){return $f(d_(o,n,S_),o+"")}function Pf(o){return Rp(o,wt,Lf)}function Nf(o){return Rp(o,Zt,a_)}var xf=Ja?function(o){return Ja.get(o)}:Qf;function cu(o){for(var a=o.name+"",d=bs[a],v=q.call(bs,a)?d.length:0;v--;){var w=d[v],R=w.func;if(R==null||R==o)return w.name}return a}function Cs(o){var a=q.call(A,"placeholder")?A:o;return a.placeholder}function Te(){var o=A.iteratee||Jf;return o=o===Jf?kp:o,arguments.length?o(arguments[0],arguments[1]):o}function fu(o,a){var d=o.__data__;return yb(a)?d[typeof a=="string"?"string":"hash"]:d.map}function Df(o){for(var a=wt(o),d=a.length;d--;){var v=a[d],w=o[v];a[d]=[v,w,f_(w)]}return a}function ki(o,a){var d=lf(o,a);return Ip(d)?d:n}function hb(o){var a=q.call(o,Ci),d=o[Ci];try{o[Ci]=n;var v=!0}catch{}var w=Wt.call(o);return v&&(a?o[Ci]=d:delete o[Ci]),w}var Lf=af?function(o){return o==null?[]:(o=$e(o),Xn(af(o),function(a){return pp.call(o,a)}))}:Zf,a_=af?function(o){for(var a=[];o;)An(a,Lf(o)),o=Va(o);return a}:Zf,Ut=jt;(uf&&Ut(new uf(new ArrayBuffer(1)))!=Cn||$o&&Ut(new $o)!=St||cf&&Ut(cf.resolve())!=Pe||Ts&&Ut(new Ts)!=xe||Ho&&Ut(new Ho)!=fr)&&(Ut=function(o){var a=jt(o),d=a==ve?o.constructor:n,v=d?Pi(d):"";if(v)switch(v){case K0:return Cn;case Y0:return St;case J0:return Pe;case X0:return xe;case Q0:return fr}return a});function db(o,a,d){for(var v=-1,w=d.length;++v<w;){var R=d[v],D=R.size;switch(R.type){case"drop":o+=D;break;case"dropRight":a-=D;break;case"take":a=Lt(a,o+D);break;case"takeRight":o=mt(o,a-D);break}}return{start:o,end:a}}function pb(o){var a=o.match(_i);return a?a[1].split(Yc):[]}function u_(o,a,d){a=zr(a,o);for(var v=-1,w=a.length,R=!1;++v<w;){var D=nr(a[v]);if(!(R=o!=null&&d(o,D)))break;o=o[D]}return R||++v!=w?R:(w=o==null?0:o.length,!!w&&mu(w)&&wr(D,w)&&(Ce(o)||Ni(o)))}function _b(o){var a=o.length,d=new o.constructor(a);return a&&typeof o[0]=="string"&&q.call(o,"index")&&(d.index=o.index,d.input=o.input),d}function c_(o){return typeof o.constructor=="function"&&!Yo(o)?Ss(Va(o)):{}}function gb(o,a,d){var v=o.constructor;switch(a){case Kn:return Of(o);case Ae:case ln:return new v(+o);case Cn:return ZT(o,d);case ci:case fi:case Zi:case hi:case di:case ce:case Ct:case hr:case dr:return Gp(o,d);case St:return new v;case ye:case cn:return new v(o);case Qe:return eb(o);case xe:return new v;case gt:return tb(o)}}function vb(o,a){var d=a.length;if(!d)return o;var v=d-1;return a[v]=(d>1?"& ":"")+a[v],a=a.join(d>2?", ":" "),o.replace(ea,`{
/* [wrapped with `+a+`] */
`)}function mb(o){return Ce(o)||Ni(o)||!!(_p&&o&&o[_p])}function wr(o,a){var d=typeof o;return a=a??bt,!!a&&(d=="number"||d!="symbol"&&oa.test(o))&&o>-1&&o%1==0&&o<a}function Vt(o,a,d){if(!tt(d))return!1;var v=typeof a;return(v=="number"?Qt(d)&&wr(a,d.length):v=="string"&&a in d)?Hn(d[a],o):!1}function Uf(o,a){if(Ce(o))return!1;var d=typeof o;return d=="number"||d=="symbol"||d=="boolean"||o==null||dn(o)?!0:Xl.test(o)||!Jl.test(o)||a!=null&&o in $e(a)}function yb(o){var a=typeof o;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?o!=="__proto__":o===null}function Mf(o){var a=cu(o),d=A[a];if(typeof d!="function"||!(a in De.prototype))return!1;if(o===d)return!0;var v=xf(d);return!!v&&o===v[0]}function Tb(o){return!!je&&je in o}var bb=O?Er:eh;function Yo(o){var a=o&&o.constructor,d=typeof a=="function"&&a.prototype||S;return o===d}function f_(o){return o===o&&!tt(o)}function h_(o,a){return function(d){return d==null?!1:d[o]===a&&(a!==n||o in $e(d))}}function Sb(o){var a=gu(o,function(v){return d.size===h&&d.clear(),v}),d=a.cache;return a}function wb(o,a){var d=o[1],v=a[1],w=d|v,R=w<(I|P|_e),D=v==_e&&d==U||v==_e&&d==X&&o[7].length<=a[8]||v==(_e|X)&&a[7].length<=a[8]&&d==U;if(!(R||D))return o;v&I&&(o[2]=a[2],w|=d&I?0:x);var L=a[3];if(L){var F=o[3];o[3]=F?Kp(F,L,a[4]):L,o[4]=F?Qn(o[3],g):a[4]}return L=a[5],L&&(F=o[5],o[5]=F?Yp(F,L,a[6]):L,o[6]=F?Qn(o[5],g):a[6]),L=a[7],L&&(o[7]=L),v&_e&&(o[8]=o[8]==null?a[8]:Lt(o[8],a[8])),o[9]==null&&(o[9]=a[9]),o[0]=a[0],o[1]=w,o}function Eb(o){var a=[];if(o!=null)for(var d in $e(o))a.push(d);return a}function Cb(o){return Wt.call(o)}function d_(o,a,d){return a=mt(a===n?o.length-1:a,0),function(){for(var v=arguments,w=-1,R=mt(v.length-a,0),D=B(R);++w<R;)D[w]=v[a+w];w=-1;for(var L=B(a+1);++w<a;)L[w]=v[w];return L[a]=d(D),xt(o,this,L)}}function p_(o,a){return a.length<2?o:Ii(o,In(a,0,-1))}function Ab(o,a){for(var d=o.length,v=Lt(a.length,d),w=Xt(o);v--;){var R=a[v];o[v]=wr(R,d)?w[R]:n}return o}function Ff(o,a){if(!(a==="constructor"&&typeof o[a]=="function")&&a!="__proto__")return o[a]}var __=v_(Fp),Jo=B0||function(o,a){return vt.setTimeout(o,a)},$f=v_(YT);function g_(o,a,d){var v=a+"";return $f(o,vb(v,Rb(pb(v),d)))}function v_(o){var a=0,d=0;return function(){var v=V0(),w=de-(v-d);if(d=v,w>0){if(++a>=ie)return arguments[0]}else a=0;return o.apply(n,arguments)}}function hu(o,a){var d=-1,v=o.length,w=v-1;for(a=a===n?v:a;++d<a;){var R=bf(d,w),D=o[R];o[R]=o[d],o[d]=D}return o.length=a,o}var m_=Sb(function(o){var a=[];return o.charCodeAt(0)===46&&a.push(""),o.replace(pi,function(d,v,w,R){a.push(w?R.replace(no,"$1"):v||d)}),a});function nr(o){if(typeof o=="string"||dn(o))return o;var a=o+"";return a=="0"&&1/o==-ne?"-0":a}function Pi(o){if(o!=null){try{return H.call(o)}catch{}try{return o+""}catch{}}return""}function Rb(o,a){return qt(cr,function(d){var v="_."+d[0];a&d[1]&&!us(o,v)&&o.push(v)}),o.sort()}function y_(o){if(o instanceof De)return o.clone();var a=new Rn(o.__wrapped__,o.__chain__);return a.__actions__=Xt(o.__actions__),a.__index__=o.__index__,a.__values__=o.__values__,a}function Ob(o,a,d){(d?Vt(o,a,d):a===n)?a=1:a=mt(Oe(a),0);var v=o==null?0:o.length;if(!v||a<1)return[];for(var w=0,R=0,D=B(Ka(v/a));w<v;)D[R++]=In(o,w,w+=a);return D}function Ib(o){for(var a=-1,d=o==null?0:o.length,v=0,w=[];++a<d;){var R=o[a];R&&(w[v++]=R)}return w}function kb(){var o=arguments.length;if(!o)return[];for(var a=B(o-1),d=arguments[0],v=o;v--;)a[v-1]=arguments[v];return An(Ce(d)?Xt(d):[d],Rt(a,1))}var Pb=ke(function(o,a){return lt(o)?jo(o,Rt(a,1,lt,!0)):[]}),Nb=ke(function(o,a){var d=kn(a);return lt(d)&&(d=n),lt(o)?jo(o,Rt(a,1,lt,!0),Te(d,2)):[]}),xb=ke(function(o,a){var d=kn(a);return lt(d)&&(d=n),lt(o)?jo(o,Rt(a,1,lt,!0),n,d):[]});function Db(o,a,d){var v=o==null?0:o.length;return v?(a=d||a===n?1:Oe(a),In(o,a<0?0:a,v)):[]}function Lb(o,a,d){var v=o==null?0:o.length;return v?(a=d||a===n?1:Oe(a),a=v-a,In(o,0,a<0?0:a)):[]}function Ub(o,a){return o&&o.length?iu(o,Te(a,3),!0,!0):[]}function Mb(o,a){return o&&o.length?iu(o,Te(a,3),!0):[]}function Fb(o,a,d,v){var w=o==null?0:o.length;return w?(d&&typeof d!="number"&&Vt(o,a,d)&&(d=0,v=w),kT(o,a,d,v)):[]}function T_(o,a,d){var v=o==null?0:o.length;if(!v)return-1;var w=d==null?0:Oe(d);return w<0&&(w=mt(v+w,0)),Ei(o,Te(a,3),w)}function b_(o,a,d){var v=o==null?0:o.length;if(!v)return-1;var w=v-1;return d!==n&&(w=Oe(d),w=d<0?mt(v+w,0):Lt(w,v-1)),Ei(o,Te(a,3),w,!0)}function S_(o){var a=o==null?0:o.length;return a?Rt(o,1):[]}function $b(o){var a=o==null?0:o.length;return a?Rt(o,ne):[]}function Hb(o,a){var d=o==null?0:o.length;return d?(a=a===n?1:Oe(a),Rt(o,a)):[]}function Bb(o){for(var a=-1,d=o==null?0:o.length,v={};++a<d;){var w=o[a];v[w[0]]=w[1]}return v}function w_(o){return o&&o.length?o[0]:n}function qb(o,a,d){var v=o==null?0:o.length;if(!v)return-1;var w=d==null?0:Oe(d);return w<0&&(w=mt(v+w,0)),Br(o,a,w)}function Wb(o){var a=o==null?0:o.length;return a?In(o,0,-1):[]}var jb=ke(function(o){var a=Ke(o,Af);return a.length&&a[0]===o[0]?gf(a):[]}),Vb=ke(function(o){var a=kn(o),d=Ke(o,Af);return a===kn(d)?a=n:d.pop(),d.length&&d[0]===o[0]?gf(d,Te(a,2)):[]}),Gb=ke(function(o){var a=kn(o),d=Ke(o,Af);return a=typeof a=="function"?a:n,a&&d.pop(),d.length&&d[0]===o[0]?gf(d,n,a):[]});function zb(o,a){return o==null?"":W0.call(o,a)}function kn(o){var a=o==null?0:o.length;return a?o[a-1]:n}function Kb(o,a,d){var v=o==null?0:o.length;if(!v)return-1;var w=v;return d!==n&&(w=Oe(d),w=w<0?mt(v+w,0):Lt(w,v-1)),a===a?Fa(o,a,w):Ei(o,Pa,w,!0)}function Yb(o,a){return o&&o.length?Dp(o,Oe(a)):n}var Jb=ke(E_);function E_(o,a){return o&&o.length&&a&&a.length?Tf(o,a):o}function Xb(o,a,d){return o&&o.length&&a&&a.length?Tf(o,a,Te(d,2)):o}function Qb(o,a,d){return o&&o.length&&a&&a.length?Tf(o,a,n,d):o}var Zb=Sr(function(o,a){var d=o==null?0:o.length,v=hf(o,a);return Mp(o,Ke(a,function(w){return wr(w,d)?+w:w}).sort(zp)),v});function eS(o,a){var d=[];if(!(o&&o.length))return d;var v=-1,w=[],R=o.length;for(a=Te(a,3);++v<R;){var D=o[v];a(D,v,o)&&(d.push(D),w.push(v))}return Mp(o,w),d}function Hf(o){return o==null?o:z0.call(o)}function tS(o,a,d){var v=o==null?0:o.length;return v?(d&&typeof d!="number"&&Vt(o,a,d)?(a=0,d=v):(a=a==null?0:Oe(a),d=d===n?v:Oe(d)),In(o,a,d)):[]}function nS(o,a){return ru(o,a)}function rS(o,a,d){return wf(o,a,Te(d,2))}function iS(o,a){var d=o==null?0:o.length;if(d){var v=ru(o,a);if(v<d&&Hn(o[v],a))return v}return-1}function sS(o,a){return ru(o,a,!0)}function oS(o,a,d){return wf(o,a,Te(d,2),!0)}function lS(o,a){var d=o==null?0:o.length;if(d){var v=ru(o,a,!0)-1;if(Hn(o[v],a))return v}return-1}function aS(o){return o&&o.length?$p(o):[]}function uS(o,a){return o&&o.length?$p(o,Te(a,2)):[]}function cS(o){var a=o==null?0:o.length;return a?In(o,1,a):[]}function fS(o,a,d){return o&&o.length?(a=d||a===n?1:Oe(a),In(o,0,a<0?0:a)):[]}function hS(o,a,d){var v=o==null?0:o.length;return v?(a=d||a===n?1:Oe(a),a=v-a,In(o,a<0?0:a,v)):[]}function dS(o,a){return o&&o.length?iu(o,Te(a,3),!1,!0):[]}function pS(o,a){return o&&o.length?iu(o,Te(a,3)):[]}var _S=ke(function(o){return Gr(Rt(o,1,lt,!0))}),gS=ke(function(o){var a=kn(o);return lt(a)&&(a=n),Gr(Rt(o,1,lt,!0),Te(a,2))}),vS=ke(function(o){var a=kn(o);return a=typeof a=="function"?a:n,Gr(Rt(o,1,lt,!0),n,a)});function mS(o){return o&&o.length?Gr(o):[]}function yS(o,a){return o&&o.length?Gr(o,Te(a,2)):[]}function TS(o,a){return a=typeof a=="function"?a:n,o&&o.length?Gr(o,n,a):[]}function Bf(o){if(!(o&&o.length))return[];var a=0;return o=Xn(o,function(d){if(lt(d))return a=mt(d.length,a),!0}),gs(a,function(d){return Ke(o,Oo(d))})}function C_(o,a){if(!(o&&o.length))return[];var d=Bf(o);return a==null?d:Ke(d,function(v){return xt(a,n,v)})}var bS=ke(function(o,a){return lt(o)?jo(o,a):[]}),SS=ke(function(o){return Cf(Xn(o,lt))}),wS=ke(function(o){var a=kn(o);return lt(a)&&(a=n),Cf(Xn(o,lt),Te(a,2))}),ES=ke(function(o){var a=kn(o);return a=typeof a=="function"?a:n,Cf(Xn(o,lt),n,a)}),CS=ke(Bf);function AS(o,a){return Wp(o||[],a||[],Wo)}function RS(o,a){return Wp(o||[],a||[],zo)}var OS=ke(function(o){var a=o.length,d=a>1?o[a-1]:n;return d=typeof d=="function"?(o.pop(),d):n,C_(o,d)});function A_(o){var a=A(o);return a.__chain__=!0,a}function IS(o,a){return a(o),o}function du(o,a){return a(o)}var kS=Sr(function(o){var a=o.length,d=a?o[0]:0,v=this.__wrapped__,w=function(R){return hf(R,o)};return a>1||this.__actions__.length||!(v instanceof De)||!wr(d)?this.thru(w):(v=v.slice(d,+d+(a?1:0)),v.__actions__.push({func:du,args:[w],thisArg:n}),new Rn(v,this.__chain__).thru(function(R){return a&&!R.length&&R.push(n),R}))});function PS(){return A_(this)}function NS(){return new Rn(this.value(),this.__chain__)}function xS(){this.__values__===n&&(this.__values__=H_(this.value()));var o=this.__index__>=this.__values__.length,a=o?n:this.__values__[this.__index__++];return{done:o,value:a}}function DS(){return this}function LS(o){for(var a,d=this;d instanceof Qa;){var v=y_(d);v.__index__=0,v.__values__=n,a?w.__wrapped__=v:a=v;var w=v;d=d.__wrapped__}return w.__wrapped__=o,a}function US(){var o=this.__wrapped__;if(o instanceof De){var a=o;return this.__actions__.length&&(a=new De(this)),a=a.reverse(),a.__actions__.push({func:du,args:[Hf],thisArg:n}),new Rn(a,this.__chain__)}return this.thru(Hf)}function MS(){return qp(this.__wrapped__,this.__actions__)}var FS=su(function(o,a,d){q.call(o,d)?++o[d]:Tr(o,d,1)});function $S(o,a,d){var v=Ce(o)?wi:IT;return d&&Vt(o,a,d)&&(a=n),v(o,Te(a,3))}function HS(o,a){var d=Ce(o)?Xn:Cp;return d(o,Te(a,3))}var BS=Zp(T_),qS=Zp(b_);function WS(o,a){return Rt(pu(o,a),1)}function jS(o,a){return Rt(pu(o,a),ne)}function VS(o,a,d){return d=d===n?1:Oe(d),Rt(pu(o,a),d)}function R_(o,a){var d=Ce(o)?qt:Vr;return d(o,Te(a,3))}function O_(o,a){var d=Ce(o)?Ia:Ep;return d(o,Te(a,3))}var GS=su(function(o,a,d){q.call(o,d)?o[d].push(a):Tr(o,d,[a])});function zS(o,a,d,v){o=Qt(o)?o:Rs(o),d=d&&!v?Oe(d):0;var w=o.length;return d<0&&(d=mt(w+d,0)),yu(o)?d<=w&&o.indexOf(a,d)>-1:!!w&&Br(o,a,d)>-1}var KS=ke(function(o,a,d){var v=-1,w=typeof a=="function",R=Qt(o)?B(o.length):[];return Vr(o,function(D){R[++v]=w?xt(a,D,d):Vo(D,a,d)}),R}),YS=su(function(o,a,d){Tr(o,d,a)});function pu(o,a){var d=Ce(o)?Ke:Pp;return d(o,Te(a,3))}function JS(o,a,d,v){return o==null?[]:(Ce(a)||(a=a==null?[]:[a]),d=v?n:d,Ce(d)||(d=d==null?[]:[d]),Lp(o,a,d))}var XS=su(function(o,a,d){o[d?0:1].push(a)},function(){return[[],[]]});function QS(o,a,d){var v=Ce(o)?cs:ps,w=arguments.length<3;return v(o,Te(a,4),d,w,Vr)}function ZS(o,a,d){var v=Ce(o)?nf:ps,w=arguments.length<3;return v(o,Te(a,4),d,w,Ep)}function ew(o,a){var d=Ce(o)?Xn:Cp;return d(o,vu(Te(a,3)))}function tw(o){var a=Ce(o)?Tp:zT;return a(o)}function nw(o,a,d){(d?Vt(o,a,d):a===n)?a=1:a=Oe(a);var v=Ce(o)?ET:KT;return v(o,a)}function rw(o){var a=Ce(o)?CT:JT;return a(o)}function iw(o){if(o==null)return 0;if(Qt(o))return yu(o)?vr(o):o.length;var a=Ut(o);return a==St||a==xe?o.size:mf(o).length}function sw(o,a,d){var v=Ce(o)?Ro:XT;return d&&Vt(o,a,d)&&(a=n),v(o,Te(a,3))}var ow=ke(function(o,a){if(o==null)return[];var d=a.length;return d>1&&Vt(o,a[0],a[1])?a=[]:d>2&&Vt(a[0],a[1],a[2])&&(a=[a[0]]),Lp(o,Rt(a,1),[])}),_u=H0||function(){return vt.Date.now()};function lw(o,a){if(typeof a!="function")throw new c(e);return o=Oe(o),function(){if(--o<1)return a.apply(this,arguments)}}function I_(o,a,d){return a=d?n:a,a=o&&a==null?o.length:a,br(o,_e,n,n,n,n,a)}function k_(o,a){var d;if(typeof a!="function")throw new c(e);return o=Oe(o),function(){return--o>0&&(d=a.apply(this,arguments)),o<=1&&(a=n),d}}var qf=ke(function(o,a,d){var v=I;if(d.length){var w=Qn(d,Cs(qf));v|=te}return br(o,v,a,d,w)}),P_=ke(function(o,a,d){var v=I|P;if(d.length){var w=Qn(d,Cs(P_));v|=te}return br(a,v,o,d,w)});function N_(o,a,d){a=d?n:a;var v=br(o,U,n,n,n,n,n,a);return v.placeholder=N_.placeholder,v}function x_(o,a,d){a=d?n:a;var v=br(o,G,n,n,n,n,n,a);return v.placeholder=x_.placeholder,v}function D_(o,a,d){var v,w,R,D,L,F,K=0,Y=!1,ee=!1,oe=!0;if(typeof o!="function")throw new c(e);a=Pn(a)||0,tt(d)&&(Y=!!d.leading,ee="maxWait"in d,R=ee?mt(Pn(d.maxWait)||0,a):R,oe="trailing"in d?!!d.trailing:oe);function he(at){var Bn=v,Ar=w;return v=w=n,K=at,D=o.apply(Ar,Bn),D}function be(at){return K=at,L=Jo(Ne,a),Y?he(at):D}function Ie(at){var Bn=at-F,Ar=at-K,Z_=a-Bn;return ee?Lt(Z_,R-Ar):Z_}function Se(at){var Bn=at-F,Ar=at-K;return F===n||Bn>=a||Bn<0||ee&&Ar>=R}function Ne(){var at=_u();if(Se(at))return Ue(at);L=Jo(Ne,Ie(at))}function Ue(at){return L=n,oe&&v?he(at):(v=w=n,D)}function pn(){L!==n&&jp(L),K=0,v=F=w=L=n}function Gt(){return L===n?D:Ue(_u())}function _n(){var at=_u(),Bn=Se(at);if(v=arguments,w=this,F=at,Bn){if(L===n)return be(F);if(ee)return jp(L),L=Jo(Ne,a),he(F)}return L===n&&(L=Jo(Ne,a)),D}return _n.cancel=pn,_n.flush=Gt,_n}var aw=ke(function(o,a){return wp(o,1,a)}),uw=ke(function(o,a,d){return wp(o,Pn(a)||0,d)});function cw(o){return br(o,$)}function gu(o,a){if(typeof o!="function"||a!=null&&typeof a!="function")throw new c(e);var d=function(){var v=arguments,w=a?a.apply(this,v):v[0],R=d.cache;if(R.has(w))return R.get(w);var D=o.apply(this,v);return d.cache=R.set(w,D)||R,D};return d.cache=new(gu.Cache||yr),d}gu.Cache=yr;function vu(o){if(typeof o!="function")throw new c(e);return function(){var a=arguments;switch(a.length){case 0:return!o.call(this);case 1:return!o.call(this,a[0]);case 2:return!o.call(this,a[0],a[1]);case 3:return!o.call(this,a[0],a[1],a[2])}return!o.apply(this,a)}}function fw(o){return k_(2,o)}var hw=QT(function(o,a){a=a.length==1&&Ce(a[0])?Ke(a[0],Dt(Te())):Ke(Rt(a,1),Dt(Te()));var d=a.length;return ke(function(v){for(var w=-1,R=Lt(v.length,d);++w<R;)v[w]=a[w].call(this,v[w]);return xt(o,this,v)})}),Wf=ke(function(o,a){var d=Qn(a,Cs(Wf));return br(o,te,n,a,d)}),L_=ke(function(o,a){var d=Qn(a,Cs(L_));return br(o,we,n,a,d)}),dw=Sr(function(o,a){return br(o,X,n,n,n,a)});function pw(o,a){if(typeof o!="function")throw new c(e);return a=a===n?a:Oe(a),ke(o,a)}function _w(o,a){if(typeof o!="function")throw new c(e);return a=a==null?0:mt(Oe(a),0),ke(function(d){var v=d[a],w=Kr(d,0,a);return v&&An(w,v),xt(o,this,w)})}function gw(o,a,d){var v=!0,w=!0;if(typeof o!="function")throw new c(e);return tt(d)&&(v="leading"in d?!!d.leading:v,w="trailing"in d?!!d.trailing:w),D_(o,a,{leading:v,maxWait:a,trailing:w})}function vw(o){return I_(o,1)}function mw(o,a){return Wf(Rf(a),o)}function yw(){if(!arguments.length)return[];var o=arguments[0];return Ce(o)?o:[o]}function Tw(o){return On(o,E)}function bw(o,a){return a=typeof a=="function"?a:n,On(o,E,a)}function Sw(o){return On(o,m|E)}function ww(o,a){return a=typeof a=="function"?a:n,On(o,m|E,a)}function Ew(o,a){return a==null||Sp(o,a,wt(a))}function Hn(o,a){return o===a||o!==o&&a!==a}var Cw=uu(_f),Aw=uu(function(o,a){return o>=a}),Ni=Op(function(){return arguments}())?Op:function(o){return it(o)&&q.call(o,"callee")&&!pp.call(o,"callee")},Ce=B.isArray,Rw=So?Dt(So):LT;function Qt(o){return o!=null&&mu(o.length)&&!Er(o)}function lt(o){return it(o)&&Qt(o)}function Ow(o){return o===!0||o===!1||it(o)&&jt(o)==Ae}var Yr=q0||eh,Iw=wo?Dt(wo):UT;function kw(o){return it(o)&&o.nodeType===1&&!Xo(o)}function Pw(o){if(o==null)return!0;if(Qt(o)&&(Ce(o)||typeof o=="string"||typeof o.splice=="function"||Yr(o)||As(o)||Ni(o)))return!o.length;var a=Ut(o);if(a==St||a==xe)return!o.size;if(Yo(o))return!mf(o).length;for(var d in o)if(q.call(o,d))return!1;return!0}function Nw(o,a){return Go(o,a)}function xw(o,a,d){d=typeof d=="function"?d:n;var v=d?d(o,a):n;return v===n?Go(o,a,n,d):!!v}function jf(o){if(!it(o))return!1;var a=jt(o);return a==an||a==zn||typeof o.message=="string"&&typeof o.name=="string"&&!Xo(o)}function Dw(o){return typeof o=="number"&&gp(o)}function Er(o){if(!tt(o))return!1;var a=jt(o);return a==un||a==Un||a==Fe||a==Xe}function U_(o){return typeof o=="number"&&o==Oe(o)}function mu(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=bt}function tt(o){var a=typeof o;return o!=null&&(a=="object"||a=="function")}function it(o){return o!=null&&typeof o=="object"}var M_=Eo?Dt(Eo):FT;function Lw(o,a){return o===a||vf(o,a,Df(a))}function Uw(o,a,d){return d=typeof d=="function"?d:n,vf(o,a,Df(a),d)}function Mw(o){return F_(o)&&o!=+o}function Fw(o){if(bb(o))throw new Ee(f);return Ip(o)}function $w(o){return o===null}function Hw(o){return o==null}function F_(o){return typeof o=="number"||it(o)&&jt(o)==ye}function Xo(o){if(!it(o)||jt(o)!=ve)return!1;var a=Va(o);if(a===null)return!0;var d=q.call(a,"constructor")&&a.constructor;return typeof d=="function"&&d instanceof d&&H.call(d)==ys}var Vf=Si?Dt(Si):$T;function Bw(o){return U_(o)&&o>=-bt&&o<=bt}var $_=Co?Dt(Co):HT;function yu(o){return typeof o=="string"||!Ce(o)&&it(o)&&jt(o)==cn}function dn(o){return typeof o=="symbol"||it(o)&&jt(o)==gt}var As=Ao?Dt(Ao):BT;function qw(o){return o===n}function Ww(o){return it(o)&&Ut(o)==fr}function jw(o){return it(o)&&jt(o)==Wl}var Vw=uu(yf),Gw=uu(function(o,a){return o<=a});function H_(o){if(!o)return[];if(Qt(o))return yu(o)?fn(o):Xt(o);if(Fo&&o[Fo])return Ua(o[Fo]());var a=Ut(o),d=a==St?Do:a==xe?ms:Rs;return d(o)}function Cr(o){if(!o)return o===0?o:0;if(o=Pn(o),o===ne||o===-ne){var a=o<0?-1:1;return a*wn}return o===o?o:0}function Oe(o){var a=Cr(o),d=a%1;return a===a?d?a-d:a:0}function B_(o){return o?Oi(Oe(o),0,ht):0}function Pn(o){if(typeof o=="number")return o;if(dn(o))return En;if(tt(o)){var a=typeof o.valueOf=="function"?o.valueOf():o;o=tt(a)?a+"":a}if(typeof o!="string")return o===0?o:+o;o=Io(o);var d=ia.test(o);return d||sa.test(o)?yo(o.slice(2),d?2:8):ts.test(o)?En:+o}function q_(o){return tr(o,Zt(o))}function zw(o){return o?Oi(Oe(o),-bt,bt):o===0?o:0}function He(o){return o==null?"":hn(o)}var Kw=ws(function(o,a){if(Yo(a)||Qt(a)){tr(a,wt(a),o);return}for(var d in a)q.call(a,d)&&Wo(o,d,a[d])}),W_=ws(function(o,a){tr(a,Zt(a),o)}),Tu=ws(function(o,a,d,v){tr(a,Zt(a),o,v)}),Yw=ws(function(o,a,d,v){tr(a,wt(a),o,v)}),Jw=Sr(hf);function Xw(o,a){var d=Ss(o);return a==null?d:bp(d,a)}var Qw=ke(function(o,a){o=$e(o);var d=-1,v=a.length,w=v>2?a[2]:n;for(w&&Vt(a[0],a[1],w)&&(v=1);++d<v;)for(var R=a[d],D=Zt(R),L=-1,F=D.length;++L<F;){var K=D[L],Y=o[K];(Y===n||Hn(Y,S[K])&&!q.call(o,K))&&(o[K]=R[K])}return o}),Zw=ke(function(o){return o.push(n,o_),xt(j_,n,o)});function eE(o,a){return hs(o,Te(a,3),er)}function tE(o,a){return hs(o,Te(a,3),pf)}function nE(o,a){return o==null?o:df(o,Te(a,3),Zt)}function rE(o,a){return o==null?o:Ap(o,Te(a,3),Zt)}function iE(o,a){return o&&er(o,Te(a,3))}function sE(o,a){return o&&pf(o,Te(a,3))}function oE(o){return o==null?[]:tu(o,wt(o))}function lE(o){return o==null?[]:tu(o,Zt(o))}function Gf(o,a,d){var v=o==null?n:Ii(o,a);return v===n?d:v}function aE(o,a){return o!=null&&u_(o,a,PT)}function zf(o,a){return o!=null&&u_(o,a,NT)}var uE=t_(function(o,a,d){a!=null&&typeof a.toString!="function"&&(a=Wt.call(a)),o[a]=d},Yf(en)),cE=t_(function(o,a,d){a!=null&&typeof a.toString!="function"&&(a=Wt.call(a)),q.call(o,a)?o[a].push(d):o[a]=[d]},Te),fE=ke(Vo);function wt(o){return Qt(o)?yp(o):mf(o)}function Zt(o){return Qt(o)?yp(o,!0):qT(o)}function hE(o,a){var d={};return a=Te(a,3),er(o,function(v,w,R){Tr(d,a(v,w,R),v)}),d}function dE(o,a){var d={};return a=Te(a,3),er(o,function(v,w,R){Tr(d,w,a(v,w,R))}),d}var pE=ws(function(o,a,d){nu(o,a,d)}),j_=ws(function(o,a,d,v){nu(o,a,d,v)}),_E=Sr(function(o,a){var d={};if(o==null)return d;var v=!1;a=Ke(a,function(R){return R=zr(R,o),v||(v=R.length>1),R}),tr(o,Nf(o),d),v&&(d=On(d,m|b|E,ub));for(var w=a.length;w--;)Ef(d,a[w]);return d});function gE(o,a){return V_(o,vu(Te(a)))}var vE=Sr(function(o,a){return o==null?{}:jT(o,a)});function V_(o,a){if(o==null)return{};var d=Ke(Nf(o),function(v){return[v]});return a=Te(a),Up(o,d,function(v,w){return a(v,w[0])})}function mE(o,a,d){a=zr(a,o);var v=-1,w=a.length;for(w||(w=1,o=n);++v<w;){var R=o==null?n:o[nr(a[v])];R===n&&(v=w,R=d),o=Er(R)?R.call(o):R}return o}function yE(o,a,d){return o==null?o:zo(o,a,d)}function TE(o,a,d,v){return v=typeof v=="function"?v:n,o==null?o:zo(o,a,d,v)}var G_=i_(wt),z_=i_(Zt);function bE(o,a,d){var v=Ce(o),w=v||Yr(o)||As(o);if(a=Te(a,4),d==null){var R=o&&o.constructor;w?d=v?new R:[]:tt(o)?d=Er(R)?Ss(Va(o)):{}:d={}}return(w?qt:er)(o,function(D,L,F){return a(d,D,L,F)}),d}function SE(o,a){return o==null?!0:Ef(o,a)}function wE(o,a,d){return o==null?o:Bp(o,a,Rf(d))}function EE(o,a,d,v){return v=typeof v=="function"?v:n,o==null?o:Bp(o,a,Rf(d),v)}function Rs(o){return o==null?[]:vs(o,wt(o))}function CE(o){return o==null?[]:vs(o,Zt(o))}function AE(o,a,d){return d===n&&(d=a,a=n),d!==n&&(d=Pn(d),d=d===d?d:0),a!==n&&(a=Pn(a),a=a===a?a:0),Oi(Pn(o),a,d)}function RE(o,a,d){return a=Cr(a),d===n?(d=a,a=0):d=Cr(d),o=Pn(o),xT(o,a,d)}function OE(o,a,d){if(d&&typeof d!="boolean"&&Vt(o,a,d)&&(a=d=n),d===n&&(typeof a=="boolean"?(d=a,a=n):typeof o=="boolean"&&(d=o,o=n)),o===n&&a===n?(o=0,a=1):(o=Cr(o),a===n?(a=o,o=0):a=Cr(a)),o>a){var v=o;o=a,a=v}if(d||o%1||a%1){var w=vp();return Lt(o+w*(a-o+mo("1e-"+((w+"").length-1))),a)}return bf(o,a)}var IE=Es(function(o,a,d){return a=a.toLowerCase(),o+(d?K_(a):a)});function K_(o){return Kf(He(o).toLowerCase())}function Y_(o){return o=He(o),o&&o.replace(ns,La).replace(wa,"")}function kE(o,a,d){o=He(o),a=hn(a);var v=o.length;d=d===n?v:Oi(Oe(d),0,v);var w=d;return d-=a.length,d>=0&&o.slice(d,w)==a}function PE(o){return o=He(o),o&&zl.test(o)?o.replace(eo,No):o}function NE(o){return o=He(o),o&&Ql.test(o)?o.replace(es,"\\$&"):o}var xE=Es(function(o,a,d){return o+(d?"-":"")+a.toLowerCase()}),DE=Es(function(o,a,d){return o+(d?" ":"")+a.toLowerCase()}),LE=Qp("toLowerCase");function UE(o,a,d){o=He(o),a=Oe(a);var v=a?vr(o):0;if(!a||v>=a)return o;var w=(a-v)/2;return au(Ya(w),d)+o+au(Ka(w),d)}function ME(o,a,d){o=He(o),a=Oe(a);var v=a?vr(o):0;return a&&v<a?o+au(a-v,d):o}function FE(o,a,d){o=He(o),a=Oe(a);var v=a?vr(o):0;return a&&v<a?au(a-v,d)+o:o}function $E(o,a,d){return d||a==null?a=0:a&&(a=+a),G0(He(o).replace(Mr,""),a||0)}function HE(o,a,d){return(d?Vt(o,a,d):a===n)?a=1:a=Oe(a),Sf(He(o),a)}function BE(){var o=arguments,a=He(o[0]);return o.length<3?a:a.replace(o[1],o[2])}var qE=Es(function(o,a,d){return o+(d?"_":"")+a.toLowerCase()});function WE(o,a,d){return d&&typeof d!="number"&&Vt(o,a,d)&&(a=d=n),d=d===n?ht:d>>>0,d?(o=He(o),o&&(typeof a=="string"||a!=null&&!Vf(a))&&(a=hn(a),!a&&gr(o))?Kr(fn(o),0,d):o.split(a,d)):[]}var jE=Es(function(o,a,d){return o+(d?" ":"")+Kf(a)});function VE(o,a,d){return o=He(o),d=d==null?0:Oi(Oe(d),0,o.length),a=hn(a),o.slice(d,d+a.length)==a}function GE(o,a,d){var v=A.templateSettings;d&&Vt(o,a,d)&&(a=n),o=He(o),a=Tu({},a,v,s_);var w=Tu({},a.imports,v.imports,s_),R=wt(w),D=vs(w,R),L,F,K=0,Y=a.interpolate||Fr,ee="__p += '",oe=t((a.escape||Fr).source+"|"+Y.source+"|"+(Y===to?ra:Fr).source+"|"+(a.evaluate||Fr).source+"|$","g"),he="//# sourceURL="+(q.call(a,"sourceURL")?(a.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Aa+"]")+`
`;o.replace(oe,function(Se,Ne,Ue,pn,Gt,_n){return Ue||(Ue=pn),ee+=o.slice(K,_n).replace(vi,of),Ne&&(L=!0,ee+=`' +
__e(`+Ne+`) +
'`),Gt&&(F=!0,ee+=`';
`+Gt+`;
__p += '`),Ue&&(ee+=`' +
((__t = (`+Ue+`)) == null ? '' : __t) +
'`),K=_n+Se.length,Se}),ee+=`';
`;var be=q.call(a,"variable")&&a.variable;if(!be)ee=`with (obj) {
`+ee+`
}
`;else if(na.test(be))throw new Ee(_);ee=(F?ee.replace(jl,""):ee).replace(Vl,"$1").replace(Qs,"$1;"),ee="function("+(be||"obj")+`) {
`+(be?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(L?", __e = _.escape":"")+(F?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ee+`return __p
}`;var Ie=X_(function(){return Le(R,he+"return "+ee).apply(n,D)});if(Ie.source=ee,jf(Ie))throw Ie;return Ie}function zE(o){return He(o).toLowerCase()}function KE(o){return He(o).toUpperCase()}function YE(o,a,d){if(o=He(o),o&&(d||a===n))return Io(o);if(!o||!(a=hn(a)))return o;var v=fn(o),w=fn(a),R=ko(v,w),D=Po(v,w)+1;return Kr(v,R,D).join("")}function JE(o,a,d){if(o=He(o),o&&(d||a===n))return o.slice(0,$a(o)+1);if(!o||!(a=hn(a)))return o;var v=fn(o),w=Po(v,fn(a))+1;return Kr(v,0,w).join("")}function XE(o,a,d){if(o=He(o),o&&(d||a===n))return o.replace(Mr,"");if(!o||!(a=hn(a)))return o;var v=fn(o),w=ko(v,fn(a));return Kr(v,w).join("")}function QE(o,a){var d=se,v=me;if(tt(a)){var w="separator"in a?a.separator:w;d="length"in a?Oe(a.length):d,v="omission"in a?hn(a.omission):v}o=He(o);var R=o.length;if(gr(o)){var D=fn(o);R=D.length}if(d>=R)return o;var L=d-vr(v);if(L<1)return v;var F=D?Kr(D,0,L).join(""):o.slice(0,L);if(w===n)return F+v;if(D&&(L+=F.length-L),Vf(w)){if(o.slice(L).search(w)){var K,Y=F;for(w.global||(w=t(w.source,He(ro.exec(w))+"g")),w.lastIndex=0;K=w.exec(Y);)var ee=K.index;F=F.slice(0,ee===n?L:ee)}}else if(o.indexOf(hn(w),L)!=L){var oe=F.lastIndexOf(w);oe>-1&&(F=F.slice(0,oe))}return F+v}function ZE(o){return o=He(o),o&&Gl.test(o)?o.replace(Zs,Ha):o}var eC=Es(function(o,a,d){return o+(d?" ":"")+a.toUpperCase()}),Kf=Qp("toUpperCase");function J_(o,a,d){return o=He(o),a=d?n:a,a===n?xo(o)?qa(o):ka(o):o.match(a)||[]}var X_=ke(function(o,a){try{return xt(o,n,a)}catch(d){return jf(d)?d:new Ee(d)}}),tC=Sr(function(o,a){return qt(a,function(d){d=nr(d),Tr(o,d,qf(o[d],o))}),o});function nC(o){var a=o==null?0:o.length,d=Te();return o=a?Ke(o,function(v){if(typeof v[1]!="function")throw new c(e);return[d(v[0]),v[1]]}):[],ke(function(v){for(var w=-1;++w<a;){var R=o[w];if(xt(R[0],this,v))return xt(R[1],this,v)}})}function rC(o){return OT(On(o,m))}function Yf(o){return function(){return o}}function iC(o,a){return o==null||o!==o?a:o}var sC=e_(),oC=e_(!0);function en(o){return o}function Jf(o){return kp(typeof o=="function"?o:On(o,m))}function lC(o){return Np(On(o,m))}function aC(o,a){return xp(o,On(a,m))}var uC=ke(function(o,a){return function(d){return Vo(d,o,a)}}),cC=ke(function(o,a){return function(d){return Vo(o,d,a)}});function Xf(o,a,d){var v=wt(a),w=tu(a,v);d==null&&!(tt(a)&&(w.length||!v.length))&&(d=a,a=o,o=this,w=tu(a,wt(a)));var R=!(tt(d)&&"chain"in d)||!!d.chain,D=Er(o);return qt(w,function(L){var F=a[L];o[L]=F,D&&(o.prototype[L]=function(){var K=this.__chain__;if(R||K){var Y=o(this.__wrapped__),ee=Y.__actions__=Xt(this.__actions__);return ee.push({func:F,args:arguments,thisArg:o}),Y.__chain__=K,Y}return F.apply(o,An([this.value()],arguments))})}),o}function fC(){return vt._===this&&(vt._=Mo),this}function Qf(){}function hC(o){return o=Oe(o),ke(function(a){return Dp(a,o)})}var dC=If(Ke),pC=If(wi),_C=If(Ro);function Q_(o){return Uf(o)?Oo(nr(o)):VT(o)}function gC(o){return function(a){return o==null?n:Ii(o,a)}}var vC=n_(),mC=n_(!0);function Zf(){return[]}function eh(){return!1}function yC(){return{}}function TC(){return""}function bC(){return!0}function SC(o,a){if(o=Oe(o),o<1||o>bt)return[];var d=ht,v=Lt(o,ht);a=Te(a),o-=ht;for(var w=gs(v,a);++d<o;)a(d);return w}function wC(o){return Ce(o)?Ke(o,nr):dn(o)?[o]:Xt(m_(He(o)))}function EC(o){var a=++pe;return He(o)+a}var CC=lu(function(o,a){return o+a},0),AC=kf("ceil"),RC=lu(function(o,a){return o/a},1),OC=kf("floor");function IC(o){return o&&o.length?eu(o,en,_f):n}function kC(o,a){return o&&o.length?eu(o,Te(a,2),_f):n}function PC(o){return ds(o,en)}function NC(o,a){return ds(o,Te(a,2))}function xC(o){return o&&o.length?eu(o,en,yf):n}function DC(o,a){return o&&o.length?eu(o,Te(a,2),yf):n}var LC=lu(function(o,a){return o*a},1),UC=kf("round"),MC=lu(function(o,a){return o-a},0);function FC(o){return o&&o.length?_s(o,en):0}function $C(o,a){return o&&o.length?_s(o,Te(a,2)):0}return A.after=lw,A.ary=I_,A.assign=Kw,A.assignIn=W_,A.assignInWith=Tu,A.assignWith=Yw,A.at=Jw,A.before=k_,A.bind=qf,A.bindAll=tC,A.bindKey=P_,A.castArray=yw,A.chain=A_,A.chunk=Ob,A.compact=Ib,A.concat=kb,A.cond=nC,A.conforms=rC,A.constant=Yf,A.countBy=FS,A.create=Xw,A.curry=N_,A.curryRight=x_,A.debounce=D_,A.defaults=Qw,A.defaultsDeep=Zw,A.defer=aw,A.delay=uw,A.difference=Pb,A.differenceBy=Nb,A.differenceWith=xb,A.drop=Db,A.dropRight=Lb,A.dropRightWhile=Ub,A.dropWhile=Mb,A.fill=Fb,A.filter=HS,A.flatMap=WS,A.flatMapDeep=jS,A.flatMapDepth=VS,A.flatten=S_,A.flattenDeep=$b,A.flattenDepth=Hb,A.flip=cw,A.flow=sC,A.flowRight=oC,A.fromPairs=Bb,A.functions=oE,A.functionsIn=lE,A.groupBy=GS,A.initial=Wb,A.intersection=jb,A.intersectionBy=Vb,A.intersectionWith=Gb,A.invert=uE,A.invertBy=cE,A.invokeMap=KS,A.iteratee=Jf,A.keyBy=YS,A.keys=wt,A.keysIn=Zt,A.map=pu,A.mapKeys=hE,A.mapValues=dE,A.matches=lC,A.matchesProperty=aC,A.memoize=gu,A.merge=pE,A.mergeWith=j_,A.method=uC,A.methodOf=cC,A.mixin=Xf,A.negate=vu,A.nthArg=hC,A.omit=_E,A.omitBy=gE,A.once=fw,A.orderBy=JS,A.over=dC,A.overArgs=hw,A.overEvery=pC,A.overSome=_C,A.partial=Wf,A.partialRight=L_,A.partition=XS,A.pick=vE,A.pickBy=V_,A.property=Q_,A.propertyOf=gC,A.pull=Jb,A.pullAll=E_,A.pullAllBy=Xb,A.pullAllWith=Qb,A.pullAt=Zb,A.range=vC,A.rangeRight=mC,A.rearg=dw,A.reject=ew,A.remove=eS,A.rest=pw,A.reverse=Hf,A.sampleSize=nw,A.set=yE,A.setWith=TE,A.shuffle=rw,A.slice=tS,A.sortBy=ow,A.sortedUniq=aS,A.sortedUniqBy=uS,A.split=WE,A.spread=_w,A.tail=cS,A.take=fS,A.takeRight=hS,A.takeRightWhile=dS,A.takeWhile=pS,A.tap=IS,A.throttle=gw,A.thru=du,A.toArray=H_,A.toPairs=G_,A.toPairsIn=z_,A.toPath=wC,A.toPlainObject=q_,A.transform=bE,A.unary=vw,A.union=_S,A.unionBy=gS,A.unionWith=vS,A.uniq=mS,A.uniqBy=yS,A.uniqWith=TS,A.unset=SE,A.unzip=Bf,A.unzipWith=C_,A.update=wE,A.updateWith=EE,A.values=Rs,A.valuesIn=CE,A.without=bS,A.words=J_,A.wrap=mw,A.xor=SS,A.xorBy=wS,A.xorWith=ES,A.zip=CS,A.zipObject=AS,A.zipObjectDeep=RS,A.zipWith=OS,A.entries=G_,A.entriesIn=z_,A.extend=W_,A.extendWith=Tu,Xf(A,A),A.add=CC,A.attempt=X_,A.camelCase=IE,A.capitalize=K_,A.ceil=AC,A.clamp=AE,A.clone=Tw,A.cloneDeep=Sw,A.cloneDeepWith=ww,A.cloneWith=bw,A.conformsTo=Ew,A.deburr=Y_,A.defaultTo=iC,A.divide=RC,A.endsWith=kE,A.eq=Hn,A.escape=PE,A.escapeRegExp=NE,A.every=$S,A.find=BS,A.findIndex=T_,A.findKey=eE,A.findLast=qS,A.findLastIndex=b_,A.findLastKey=tE,A.floor=OC,A.forEach=R_,A.forEachRight=O_,A.forIn=nE,A.forInRight=rE,A.forOwn=iE,A.forOwnRight=sE,A.get=Gf,A.gt=Cw,A.gte=Aw,A.has=aE,A.hasIn=zf,A.head=w_,A.identity=en,A.includes=zS,A.indexOf=qb,A.inRange=RE,A.invoke=fE,A.isArguments=Ni,A.isArray=Ce,A.isArrayBuffer=Rw,A.isArrayLike=Qt,A.isArrayLikeObject=lt,A.isBoolean=Ow,A.isBuffer=Yr,A.isDate=Iw,A.isElement=kw,A.isEmpty=Pw,A.isEqual=Nw,A.isEqualWith=xw,A.isError=jf,A.isFinite=Dw,A.isFunction=Er,A.isInteger=U_,A.isLength=mu,A.isMap=M_,A.isMatch=Lw,A.isMatchWith=Uw,A.isNaN=Mw,A.isNative=Fw,A.isNil=Hw,A.isNull=$w,A.isNumber=F_,A.isObject=tt,A.isObjectLike=it,A.isPlainObject=Xo,A.isRegExp=Vf,A.isSafeInteger=Bw,A.isSet=$_,A.isString=yu,A.isSymbol=dn,A.isTypedArray=As,A.isUndefined=qw,A.isWeakMap=Ww,A.isWeakSet=jw,A.join=zb,A.kebabCase=xE,A.last=kn,A.lastIndexOf=Kb,A.lowerCase=DE,A.lowerFirst=LE,A.lt=Vw,A.lte=Gw,A.max=IC,A.maxBy=kC,A.mean=PC,A.meanBy=NC,A.min=xC,A.minBy=DC,A.stubArray=Zf,A.stubFalse=eh,A.stubObject=yC,A.stubString=TC,A.stubTrue=bC,A.multiply=LC,A.nth=Yb,A.noConflict=fC,A.noop=Qf,A.now=_u,A.pad=UE,A.padEnd=ME,A.padStart=FE,A.parseInt=$E,A.random=OE,A.reduce=QS,A.reduceRight=ZS,A.repeat=HE,A.replace=BE,A.result=mE,A.round=UC,A.runInContext=M,A.sample=tw,A.size=iw,A.snakeCase=qE,A.some=sw,A.sortedIndex=nS,A.sortedIndexBy=rS,A.sortedIndexOf=iS,A.sortedLastIndex=sS,A.sortedLastIndexBy=oS,A.sortedLastIndexOf=lS,A.startCase=jE,A.startsWith=VE,A.subtract=MC,A.sum=FC,A.sumBy=$C,A.template=GE,A.times=SC,A.toFinite=Cr,A.toInteger=Oe,A.toLength=B_,A.toLower=zE,A.toNumber=Pn,A.toSafeInteger=zw,A.toString=He,A.toUpper=KE,A.trim=YE,A.trimEnd=JE,A.trimStart=XE,A.truncate=QE,A.unescape=ZE,A.uniqueId=EC,A.upperCase=eC,A.upperFirst=Kf,A.each=R_,A.eachRight=O_,A.first=w_,Xf(A,function(){var o={};return er(A,function(a,d){q.call(A.prototype,d)||(o[d]=a)}),o}(),{chain:!1}),A.VERSION=i,qt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){A[o].placeholder=A}),qt(["drop","take"],function(o,a){De.prototype[o]=function(d){d=d===n?1:mt(Oe(d),0);var v=this.__filtered__&&!a?new De(this):this.clone();return v.__filtered__?v.__takeCount__=Lt(d,v.__takeCount__):v.__views__.push({size:Lt(d,ht),type:o+(v.__dir__<0?"Right":"")}),v},De.prototype[o+"Right"]=function(d){return this.reverse()[o](d).reverse()}}),qt(["filter","map","takeWhile"],function(o,a){var d=a+1,v=d==Z||d==W;De.prototype[o]=function(w){var R=this.clone();return R.__iteratees__.push({iteratee:Te(w,3),type:d}),R.__filtered__=R.__filtered__||v,R}}),qt(["head","last"],function(o,a){var d="take"+(a?"Right":"");De.prototype[o]=function(){return this[d](1).value()[0]}}),qt(["initial","tail"],function(o,a){var d="drop"+(a?"":"Right");De.prototype[o]=function(){return this.__filtered__?new De(this):this[d](1)}}),De.prototype.compact=function(){return this.filter(en)},De.prototype.find=function(o){return this.filter(o).head()},De.prototype.findLast=function(o){return this.reverse().find(o)},De.prototype.invokeMap=ke(function(o,a){return typeof o=="function"?new De(this):this.map(function(d){return Vo(d,o,a)})}),De.prototype.reject=function(o){return this.filter(vu(Te(o)))},De.prototype.slice=function(o,a){o=Oe(o);var d=this;return d.__filtered__&&(o>0||a<0)?new De(d):(o<0?d=d.takeRight(-o):o&&(d=d.drop(o)),a!==n&&(a=Oe(a),d=a<0?d.dropRight(-a):d.take(a-o)),d)},De.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},De.prototype.toArray=function(){return this.take(ht)},er(De.prototype,function(o,a){var d=/^(?:filter|find|map|reject)|While$/.test(a),v=/^(?:head|last)$/.test(a),w=A[v?"take"+(a=="last"?"Right":""):a],R=v||/^find/.test(a);w&&(A.prototype[a]=function(){var D=this.__wrapped__,L=v?[1]:arguments,F=D instanceof De,K=L[0],Y=F||Ce(D),ee=function(Ne){var Ue=w.apply(A,An([Ne],L));return v&&oe?Ue[0]:Ue};Y&&d&&typeof K=="function"&&K.length!=1&&(F=Y=!1);var oe=this.__chain__,he=!!this.__actions__.length,be=R&&!oe,Ie=F&&!he;if(!R&&Y){D=Ie?D:new De(this);var Se=o.apply(D,L);return Se.__actions__.push({func:du,args:[ee],thisArg:n}),new Rn(Se,oe)}return be&&Ie?o.apply(this,L):(Se=this.thru(ee),be?v?Se.value()[0]:Se.value():Se)})}),qt(["pop","push","shift","sort","splice","unshift"],function(o){var a=p[o],d=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",v=/^(?:pop|shift)$/.test(o);A.prototype[o]=function(){var w=arguments;if(v&&!this.__chain__){var R=this.value();return a.apply(Ce(R)?R:[],w)}return this[d](function(D){return a.apply(Ce(D)?D:[],w)})}}),er(De.prototype,function(o,a){var d=A[a];if(d){var v=d.name+"";q.call(bs,v)||(bs[v]=[]),bs[v].push({name:a,func:d})}}),bs[ou(n,P).name]=[{name:"wrapper",func:n}],De.prototype.clone=Z0,De.prototype.reverse=eT,De.prototype.value=tT,A.prototype.at=kS,A.prototype.chain=PS,A.prototype.commit=NS,A.prototype.next=xS,A.prototype.plant=LS,A.prototype.reverse=US,A.prototype.toJSON=A.prototype.valueOf=A.prototype.value=MS,A.prototype.first=A.prototype.head,Fo&&(A.prototype[Fo]=DS),A},jr=Wa();Mn?((Mn.exports=jr)._=jr,To._=jr):vt._=jr}).call(We)})(nc,nc.exports);var El=nc.exports,vd={exports:{}},xs=typeof Reflect=="object"?Reflect:null,_g=xs&&typeof xs.apply=="function"?xs.apply:function(r,n,i){return Function.prototype.apply.call(r,n,i)},Fu;xs&&typeof xs.ownKeys=="function"?Fu=xs.ownKeys:Object.getOwnPropertySymbols?Fu=function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:Fu=function(r){return Object.getOwnPropertyNames(r)};function vR(s){console&&console.warn&&console.warn(s)}var Em=Number.isNaN||function(r){return r!==r};function Ve(){Ve.init.call(this)}vd.exports=Ve;vd.exports.once=bR;Ve.EventEmitter=Ve;Ve.prototype._events=void 0;Ve.prototype._eventsCount=0;Ve.prototype._maxListeners=void 0;var gg=10;function Ec(s){if(typeof s!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof s)}Object.defineProperty(Ve,"defaultMaxListeners",{enumerable:!0,get:function(){return gg},set:function(s){if(typeof s!="number"||s<0||Em(s))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+s+".");gg=s}});Ve.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Ve.prototype.setMaxListeners=function(r){if(typeof r!="number"||r<0||Em(r))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+r+".");return this._maxListeners=r,this};function Cm(s){return s._maxListeners===void 0?Ve.defaultMaxListeners:s._maxListeners}Ve.prototype.getMaxListeners=function(){return Cm(this)};Ve.prototype.emit=function(r){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var l=r==="error",f=this._events;if(f!==void 0)l=l&&f.error===void 0;else if(!l)return!1;if(l){var e;if(n.length>0&&(e=n[0]),e instanceof Error)throw e;var _=new Error("Unhandled error."+(e?" ("+e.message+")":""));throw _.context=e,_}var T=f[r];if(T===void 0)return!1;if(typeof T=="function")_g(T,this,n);else for(var h=T.length,g=km(T,h),i=0;i<h;++i)_g(g[i],this,n);return!0};function Am(s,r,n,i){var l,f,e;if(Ec(n),f=s._events,f===void 0?(f=s._events=Object.create(null),s._eventsCount=0):(f.newListener!==void 0&&(s.emit("newListener",r,n.listener?n.listener:n),f=s._events),e=f[r]),e===void 0)e=f[r]=n,++s._eventsCount;else if(typeof e=="function"?e=f[r]=i?[n,e]:[e,n]:i?e.unshift(n):e.push(n),l=Cm(s),l>0&&e.length>l&&!e.warned){e.warned=!0;var _=new Error("Possible EventEmitter memory leak detected. "+e.length+" "+String(r)+" listeners added. Use emitter.setMaxListeners() to increase limit");_.name="MaxListenersExceededWarning",_.emitter=s,_.type=r,_.count=e.length,vR(_)}return s}Ve.prototype.addListener=function(r,n){return Am(this,r,n,!1)};Ve.prototype.on=Ve.prototype.addListener;Ve.prototype.prependListener=function(r,n){return Am(this,r,n,!0)};function mR(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Rm(s,r,n){var i={fired:!1,wrapFn:void 0,target:s,type:r,listener:n},l=mR.bind(i);return l.listener=n,i.wrapFn=l,l}Ve.prototype.once=function(r,n){return Ec(n),this.on(r,Rm(this,r,n)),this};Ve.prototype.prependOnceListener=function(r,n){return Ec(n),this.prependListener(r,Rm(this,r,n)),this};Ve.prototype.removeListener=function(r,n){var i,l,f,e,_;if(Ec(n),l=this._events,l===void 0)return this;if(i=l[r],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete l[r],l.removeListener&&this.emit("removeListener",r,i.listener||n));else if(typeof i!="function"){for(f=-1,e=i.length-1;e>=0;e--)if(i[e]===n||i[e].listener===n){_=i[e].listener,f=e;break}if(f<0)return this;f===0?i.shift():yR(i,f),i.length===1&&(l[r]=i[0]),l.removeListener!==void 0&&this.emit("removeListener",r,_||n)}return this};Ve.prototype.off=Ve.prototype.removeListener;Ve.prototype.removeAllListeners=function(r){var n,i,l;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[r]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[r]),this;if(arguments.length===0){var f=Object.keys(i),e;for(l=0;l<f.length;++l)e=f[l],e!=="removeListener"&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[r],typeof n=="function")this.removeListener(r,n);else if(n!==void 0)for(l=n.length-1;l>=0;l--)this.removeListener(r,n[l]);return this};function Om(s,r,n){var i=s._events;if(i===void 0)return[];var l=i[r];return l===void 0?[]:typeof l=="function"?n?[l.listener||l]:[l]:n?TR(l):km(l,l.length)}Ve.prototype.listeners=function(r){return Om(this,r,!0)};Ve.prototype.rawListeners=function(r){return Om(this,r,!1)};Ve.listenerCount=function(s,r){return typeof s.listenerCount=="function"?s.listenerCount(r):Im.call(s,r)};Ve.prototype.listenerCount=Im;function Im(s){var r=this._events;if(r!==void 0){var n=r[s];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Ve.prototype.eventNames=function(){return this._eventsCount>0?Fu(this._events):[]};function km(s,r){for(var n=new Array(r),i=0;i<r;++i)n[i]=s[i];return n}function yR(s,r){for(;r+1<s.length;r++)s[r]=s[r+1];s.pop()}function TR(s){for(var r=new Array(s.length),n=0;n<r.length;++n)r[n]=s[n].listener||s[n];return r}function bR(s,r){return new Promise(function(n,i){function l(e){s.removeListener(r,f),i(e)}function f(){typeof s.removeListener=="function"&&s.removeListener("error",l),n([].slice.call(arguments))}Pm(s,r,f,{once:!0}),r!=="error"&&SR(s,l,{once:!0})})}function SR(s,r,n){typeof s.on=="function"&&Pm(s,"error",r,n)}function Pm(s,r,n,i){if(typeof s.on=="function")i.once?s.once(r,n):s.on(r,n);else if(typeof s.addEventListener=="function")s.addEventListener(r,function l(f){i.once&&s.removeEventListener(r,l),n(f)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof s)}var Lr=vd.exports,Nm={},xm={},Dm={},Lm={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,r(El);function r(T){return T&&T.__esModule?T:{default:T}}function n(T){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},n(T)}function i(T,h){if(!(T instanceof h))throw new TypeError("Cannot call a class as a function")}function l(T,h){for(var g=0;g<h.length;g++){var m=h[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(T,e(m.key),m)}}function f(T,h,g){return h&&l(T.prototype,h),g&&l(T,g),Object.defineProperty(T,"prototype",{writable:!1}),T}function e(T){var h=_(T,"string");return n(h)=="symbol"?h:h+""}function _(T,h){if(n(T)!="object"||!T)return T;var g=T[Symbol.toPrimitive];if(g!==void 0){var m=g.call(T,h||"default");if(n(m)!="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return(h==="string"?String:Number)(T)}s.default=function(){function T(){i(this,T)}return f(T,[{key:"getStats",value:function(g,m){var b=0,E=Date.now(),C={};m.cmi_webrtc_stats=setInterval(function(){g&&g.connectionState?(g.connectionState!="connected"&&clearInterval(m.cmi_webrtc_stats),g.getStats().then(function(N){N.forEach(function(I){if(I.type==="candidate-pair"&&I.nominated){var P=I.currentRoundTripTime,x=P;C.delay=x}if(I.type==="inbound-rtp"){var U=I.packetsLost,G=Date.now(),te=(G-E)/1e3,we=(U-b)/te;C.packetLostRate=we,b=U,E=G}if(I.type==="remote-inbound-rtp"){var _e=I.packetsLost,X=I.fractionLost,$=I.jitter,se=I.totalRoundTripTime;C.totalPacketLost=_e,C.fractionLost=X,C.jitter=$,C.rountTrip=se}if(I.type==="codec"){var me=I.mimeType;C.codec=me}if(I.type==="local-candidate"){var ie=I.networkType;C.network=ie}}),m.emit("RTCStats",C)}).catch(function(N){})):clearInterval(m.cmi_webrtc_stats)},1e3)}}])}()})(Lm);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,n(El);var r=n(Lm);function n(g){return g&&g.__esModule?g:{default:g}}function i(g){"@babel/helpers - typeof";return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},i(g)}function l(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function f(g,m){for(var b=0;b<m.length;b++){var E=m[b];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,_(E.key),E)}}function e(g,m,b){return m&&f(g.prototype,m),b&&f(g,b),Object.defineProperty(g,"prototype",{writable:!1}),g}function _(g){var m=T(g,"string");return i(m)=="symbol"?m:m+""}function T(g,m){if(i(g)!="object"||!g)return g;var b=g[Symbol.toPrimitive];if(b!==void 0){var E=b.call(g,m||"default");if(i(E)!="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return(m==="string"?String:Number)(g)}var h=new r.default;s.default=function(){function g(){l(this,g)}return e(g,[{key:"connections",value:function(b,E,C){E.oniceconnectionstatechange=function(N){E.iceConnectionState=="disconnected"?(C.cmi_webrtc_stats&&clearInterval(C.cmi_webrtc_stats),b.renegotiate({rtcOfferConstraints:{iceRestart:!0,offerToReceiveAudio:!0,offerToReceiveVideo:!1}}),C.emit("RTC",{state:"disconnected",msg:"CMI_NET"})):E.iceConnectionState=="connected"&&(h.getStats(E,C),C.emit("RTC",{state:"connected",msg:"CMI_NET"}))}}}])}()})(Dm);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var r=i(El),n=i(Dm);function i(N){return N&&N.__esModule?N:{default:N}}function l(N){"@babel/helpers - typeof";return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},l(N)}function f(N,I){if(!(N instanceof I))throw new TypeError("Cannot call a class as a function")}function e(N,I){for(var P=0;P<I.length;P++){var x=I[P];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(N,T(x.key),x)}}function _(N,I,P){return I&&e(N.prototype,I),P&&e(N,P),Object.defineProperty(N,"prototype",{writable:!1}),N}function T(N){var I=h(N,"string");return l(I)=="symbol"?I:I+""}function h(N,I){if(l(N)!="object"||!N)return N;var P=N[Symbol.toPrimitive];if(P!==void 0){var x=P.call(N,I||"default");if(l(x)!="object")return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return(I==="string"?String:Number)(N)}var g=new n.default,m={},b,E;s.default=function(){function N(){f(this,N)}return _(N,[{key:"make",value:function(P,x,U,G){if(!r.default.isEmpty(x._sessions)){U.emit("error",{code:1002,status:"already in call"});return}var te={audio:!0,video:!1};localStorage.getItem("deviceId")&&(te.audio={deviceId:localStorage.getItem("deviceId")});var we={progress:function(se){},failed:function(se){b&&(clearTimeout(b),clearTimeout(E)),se&&se.message&&se.message.status_code==407&&U.emit("loginFailed",{code:407,status:"invalid user"})},ended:function(se){b&&(clearTimeout(b),clearTimeout(E))},confirmed:function(se){b&&(clearTimeout(b),clearTimeout(E))}},_e={eventHandlers:we,mediaConstraints:te,pcConfig:{iceServers:U.ice_servers}};if(r.default.isObject(G)&&C(G.extra_param)){var X=["X-cmi-extra_param:".concat(G.extra_param)];_e.extraHeaders=X}m=x.call(P,_e),E=setTimeout(function(){m&&m.status===1&&U.emit("NETStats",{code:408,msg:"Request timeout"})},5e3),b=setTimeout(function(){m&&m.status===1&&(m.terminate(),x.stop(),x.start())},1e4)}},{key:"invite",value:function(P,x){if(m=P.session,P.originator!="local"&&x.emit("inComingCall",{from:P.request.from._display_name||"unknown"}),P.request){if(P.originator!="local"){var U=P.request,G=U.getHeader("X-cmi-uuid");m.call_ID=G}else m.call_ID=P.request.call_id;m.call_id=P.request.call_id}this.initSession(m,x)}},{key:"answer",value:function(P,x){if(r.default.isEmpty(P._sessions)){x.emit("error",{code:1002,status:"call not found"});return}if(m.isEstablished()){x.emit("error",{code:1002,status:"call already  answered"});return}m.answer({mediaConstraints:{audio:!0,video:!1},pcConfig:{iceServers:x.ice_servers}})}},{key:"reject",value:function(P,x){if(r.default.isEmpty(P._sessions)){x.emit("error",{code:1002,status:"call not found"});return}if(m.isEnded()){x.emit("error",{code:1002,status:"call already ended"});return}m.terminate()}},{key:"terminate",value:function(P,x){if(r.default.isEmpty(P._sessions)){x.emit("error",{code:1002,status:"call not found"});return}if(m.isEnded()){x.emit("error",{code:1002,status:"call already ended"});return}m.terminate()}},{key:"hangup",value:function(P,x){if(r.default.isEmpty(P.sessions)){x.emit("error",{code:1002,status:"call not found"});return}m.bye()}},{key:"dtmf",value:function(P,x,U){if(r.default.isEmpty(x._sessions)){U.emit("error",{code:1002,status:"call not found"});return}if(!m.isEstablished()){U.emit("error",{code:1002,status:"dtmf not allowed"});return}var G={transportType:"RFC2833"};m.sendDTMF(P,G)}},{key:"hold",value:function(P,x){if(r.default.isEmpty(P._sessions)){x.emit("error",{code:1002,status:"call not found"});return}if(!m.isEstablished()){x.emit("error",{code:1002,status:"hold not allowed"});return}if(m.isOnHold().local){x.emit("error",{code:1002,status:"call already in hold"});return}m.hold()}},{key:"unhold",value:function(P,x){if(r.default.isEmpty(P._sessions)){x.emit("error",{code:1002,status:"call not found"});return}if(!m.isEstablished()){x.emit("error",{code:1002,status:"hold not allowed"});return}if(!m.isOnHold().local){x.emit("error",{code:1002,status:"call not in hold"});return}m.unhold()}},{key:"mute",value:function(P,x){if(r.default.isEmpty(P._sessions)){x.emit("error",{code:1002,status:"call not found"});return}if(!m.isEstablished()){x.emit("error",{code:1002,status:"mute not allowed"});return}if(m.isMuted().audio){x.emit("error",{code:1002,status:"call already in mute"});return}m.mute()}},{key:"unmute",value:function(P,x){if(r.default.isEmpty(P._sessions)){x.emit("error",{code:1002,status:"call not found"});return}if(!m.isEstablished()){x.emit("error",{code:1002,status:"mute not allowed"});return}if(!m.isMuted().audio){x.emit("error",{code:1002,status:"call not in mute"});return}m.unmute()}},{key:"onmute",value:function(P,x){return r.default.isEmpty(P._sessions)||!m.isEstablished()?!1:m.isMuted().audio}},{key:"onhold",value:function(P,x){return r.default.isEmpty(P._sessions)||!m.isEstablished()?!1:m.isOnHold().local}},{key:"getCallId",value:function(P,x){return r.default.isEmpty(P._sessions)||!m.isEstablished()&&!m.isInProgress()?!1:m.call_id||!1}},{key:"getCallID",value:function(P,x){return r.default.isEmpty(P._sessions)||!m.isEstablished()&&!m.isInProgress()?!1:m.call_ID||!1}},{key:"initSession",value:function(P,x){P.on("failed",function(U){if(U.originator=="local")x.emit("hangup",{code:U.status_code||200,status:"call hangup"});else{var G,te;x.emit("ended",{code:(U==null||(G=U.message)===null||G===void 0?void 0:G.status_code)||200,status:(U==null||(te=U.message)===null||te===void 0?void 0:te.reason_phrase)||"call ended"})}}),P._connection&&(P._connection.onaddstream=function(U){if(x.piopiyOption.autoplay&&U.stream){var G=document.getElementById("telecmi_audio_tag");G.srcObject=U.stream,G.play()}x.emit("callStream",{code:200,status:U.stream})}),P.on("sending",function(U){var G=U.originator=="local"?"incoming":"outgoing";x.emit("trying",{code:100,status:"trying",type:G})}),P.on("peerconnection",function(U){if(U.peerconnection.onaddstream=function(G){if(x.piopiyOption.autoplay&&G.stream){var te=document.getElementById("telecmi_audio_tag");te.srcObject=G.stream,te.play()}x.emit("callStream",{code:200,status:G.stream})},P.connection)try{g.connections(P,P.connection,x)}catch(G){alert(G)}}),P.on("progress",function(U){var G=U.originator=="local"?"incoming":"outgoing";if(x.emit("ringing",{code:183,status:"ringing",type:G}),P.connection)try{g.connections(P,P.connection,x)}catch(te){alert(te)}}),P.on("accepted",function(U){U.originator!="local"&&(U.originator=="local",x.emit("answered",{code:200,status:"answered"}))}),P.on("confirmed",function(U){U.originator!="local"&&(P._request&&(x.call_id=P._request.call_id),U.originator=="local",x.emit("answered",{code:200,status:"answered"}))}),P.on("getusermediafailed",function(U){x.emit("mediaFailed",{code:415,status:U||"user media failed"})}),P.on("icecandidate",function(U){U.candidate.type==="srflx"&&U.candidate.relatedAddress!==null&&U.candidate.relatedPort!==null&&U.ready()}),P.on("newDTMF",function(U){var G=U.originator=="local"?"incoming":"outgoing";x.emit("dtmf",{code:200,dtmf:U.dtmf._tone,type:G})}),P.on("hold",function(U){var G=U.originator=="local"?"myself":"other";x.emit("hold",{code:200,status:"call on hold",whom:G})}),P.on("unhold",function(U){var G=U.originator=="local"?"myself":"other";x.emit("unhold",{code:200,status:"call on active",whom:G})}),P.on("ended",function(U){x.cmi_webrtc_stats&&clearInterval(x.cmi_webrtc_stats),U.originator=="local"?x.emit("hangup",{code:200,status:"call hangup"}):x.emit("ended",{code:200,status:"call ended"})})}}])}();var C=function(I){return typeof I=="string"}})(xm);var Um={},md="1.13.7",vg=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},Cc=Array.prototype,yd=Object.prototype,mg=typeof Symbol<"u"?Symbol.prototype:null,wR=Cc.push,Cl=Cc.slice,hl=yd.toString,ER=yd.hasOwnProperty,Mm=typeof ArrayBuffer<"u",CR=typeof DataView<"u",AR=Array.isArray,yg=Object.keys,Tg=Object.create,bg=Mm&&ArrayBuffer.isView,RR=isNaN,OR=isFinite,Fm=!{toString:null}.propertyIsEnumerable("toString"),Sg=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],IR=Math.pow(2,53)-1;function Jt(s,r){return r=r==null?s.length-1:+r,function(){for(var n=Math.max(arguments.length-r,0),i=Array(n),l=0;l<n;l++)i[l]=arguments[l+r];switch(r){case 0:return s.call(this,i);case 1:return s.call(this,arguments[0],i);case 2:return s.call(this,arguments[0],arguments[1],i)}var f=Array(r+1);for(l=0;l<r;l++)f[l]=arguments[l];return f[r]=i,s.apply(this,f)}}function si(s){var r=typeof s;return r==="function"||r==="object"&&!!s}function $m(s){return s===null}function Td(s){return s===void 0}function bd(s){return s===!0||s===!1||hl.call(s)==="[object Boolean]"}function Hm(s){return!!(s&&s.nodeType===1)}function $t(s){var r="[object "+s+"]";return function(n){return hl.call(n)===r}}const Ac=$t("String"),Sd=$t("Number"),Bm=$t("Date"),qm=$t("RegExp"),Wm=$t("Error"),wd=$t("Symbol"),Ed=$t("ArrayBuffer");var jm=$t("Function"),kR=vg.document&&vg.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof kR!="function"&&(jm=function(s){return typeof s=="function"||!1});const Ft=jm,Vm=$t("Object");var Gm=CR&&(!/\[native code\]/.test(String(DataView))||Vm(new DataView(new ArrayBuffer(8)))),Cd=typeof Map<"u"&&Vm(new Map),PR=$t("DataView");function NR(s){return s!=null&&Ft(s.getInt8)&&Ed(s.buffer)}const dl=Gm?NR:PR,oi=AR||$t("Array");function li(s,r){return s!=null&&ER.call(s,r)}var Bh=$t("Arguments");(function(){Bh(arguments)||(Bh=function(s){return li(s,"callee")})})();const Rc=Bh;function zm(s){return!wd(s)&&OR(s)&&!isNaN(parseFloat(s))}function Ad(s){return Sd(s)&&RR(s)}function Rd(s){return function(){return s}}function Km(s){return function(r){var n=s(r);return typeof n=="number"&&n>=0&&n<=IR}}function Ym(s){return function(r){return r==null?void 0:r[s]}}const rc=Ym("byteLength"),xR=Km(rc);var DR=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function LR(s){return bg?bg(s)&&!dl(s):xR(s)&&DR.test(hl.call(s))}const Od=Mm?LR:Rd(!1),rn=Ym("length");function UR(s){for(var r={},n=s.length,i=0;i<n;++i)r[s[i]]=!0;return{contains:function(l){return r[l]===!0},push:function(l){return r[l]=!0,s.push(l)}}}function Jm(s,r){r=UR(r);var n=Sg.length,i=s.constructor,l=Ft(i)&&i.prototype||yd,f="constructor";for(li(s,f)&&!r.contains(f)&&r.push(f);n--;)f=Sg[n],f in s&&s[f]!==l[f]&&!r.contains(f)&&r.push(f)}function Tt(s){if(!si(s))return[];if(yg)return yg(s);var r=[];for(var n in s)li(s,n)&&r.push(n);return Fm&&Jm(s,r),r}function Xm(s){if(s==null)return!0;var r=rn(s);return typeof r=="number"&&(oi(s)||Ac(s)||Rc(s))?r===0:rn(Tt(s))===0}function Id(s,r){var n=Tt(r),i=n.length;if(s==null)return!i;for(var l=Object(s),f=0;f<i;f++){var e=n[f];if(r[e]!==l[e]||!(e in l))return!1}return!0}function Be(s){if(s instanceof Be)return s;if(!(this instanceof Be))return new Be(s);this._wrapped=s}Be.VERSION=md;Be.prototype.value=function(){return this._wrapped};Be.prototype.valueOf=Be.prototype.toJSON=Be.prototype.value;Be.prototype.toString=function(){return String(this._wrapped)};function wg(s){return new Uint8Array(s.buffer||s,s.byteOffset||0,rc(s))}var Eg="[object DataView]";function qh(s,r,n,i){if(s===r)return s!==0||1/s===1/r;if(s==null||r==null)return!1;if(s!==s)return r!==r;var l=typeof s;return l!=="function"&&l!=="object"&&typeof r!="object"?!1:Qm(s,r,n,i)}function Qm(s,r,n,i){s instanceof Be&&(s=s._wrapped),r instanceof Be&&(r=r._wrapped);var l=hl.call(s);if(l!==hl.call(r))return!1;if(Gm&&l=="[object Object]"&&dl(s)){if(!dl(r))return!1;l=Eg}switch(l){case"[object RegExp]":case"[object String]":return""+s==""+r;case"[object Number]":return+s!=+s?+r!=+r:+s==0?1/+s===1/r:+s==+r;case"[object Date]":case"[object Boolean]":return+s==+r;case"[object Symbol]":return mg.valueOf.call(s)===mg.valueOf.call(r);case"[object ArrayBuffer]":case Eg:return Qm(wg(s),wg(r),n,i)}var f=l==="[object Array]";if(!f&&Od(s)){var e=rc(s);if(e!==rc(r))return!1;if(s.buffer===r.buffer&&s.byteOffset===r.byteOffset)return!0;f=!0}if(!f){if(typeof s!="object"||typeof r!="object")return!1;var _=s.constructor,T=r.constructor;if(_!==T&&!(Ft(_)&&_ instanceof _&&Ft(T)&&T instanceof T)&&"constructor"in s&&"constructor"in r)return!1}n=n||[],i=i||[];for(var h=n.length;h--;)if(n[h]===s)return i[h]===r;if(n.push(s),i.push(r),f){if(h=s.length,h!==r.length)return!1;for(;h--;)if(!qh(s[h],r[h],n,i))return!1}else{var g=Tt(s),m;if(h=g.length,Tt(r).length!==h)return!1;for(;h--;)if(m=g[h],!(li(r,m)&&qh(s[m],r[m],n,i)))return!1}return n.pop(),i.pop(),!0}function Zm(s,r){return qh(s,r)}function Ks(s){if(!si(s))return[];var r=[];for(var n in s)r.push(n);return Fm&&Jm(s,r),r}function kd(s){var r=rn(s);return function(n){if(n==null)return!1;var i=Ks(n);if(rn(i))return!1;for(var l=0;l<r;l++)if(!Ft(n[s[l]]))return!1;return s!==ny||!Ft(n[Pd])}}var Pd="forEach",ey="has",Nd=["clear","delete"],ty=["get",ey,"set"],MR=Nd.concat(Pd,ty),ny=Nd.concat(ty),FR=["add"].concat(Nd,Pd,ey);const ry=Cd?kd(MR):$t("Map"),iy=Cd?kd(ny):$t("WeakMap"),sy=Cd?kd(FR):$t("Set"),oy=$t("WeakSet");function Ki(s){for(var r=Tt(s),n=r.length,i=Array(n),l=0;l<n;l++)i[l]=s[r[l]];return i}function ly(s){for(var r=Tt(s),n=r.length,i=Array(n),l=0;l<n;l++)i[l]=[r[l],s[r[l]]];return i}function xd(s){for(var r={},n=Tt(s),i=0,l=n.length;i<l;i++)r[s[n[i]]]=n[i];return r}function pl(s){var r=[];for(var n in s)Ft(s[n])&&r.push(n);return r.sort()}function Dd(s,r){return function(n){var i=arguments.length;if(r&&(n=Object(n)),i<2||n==null)return n;for(var l=1;l<i;l++)for(var f=arguments[l],e=s(f),_=e.length,T=0;T<_;T++){var h=e[T];(!r||n[h]===void 0)&&(n[h]=f[h])}return n}}const Ld=Dd(Ks),$s=Dd(Tt),Ud=Dd(Ks,!0);function $R(){return function(){}}function ay(s){if(!si(s))return{};if(Tg)return Tg(s);var r=$R();r.prototype=s;var n=new r;return r.prototype=null,n}function uy(s,r){var n=ay(s);return r&&$s(n,r),n}function cy(s){return si(s)?oi(s)?s.slice():Ld({},s):s}function fy(s,r){return r(s),s}function Md(s){return oi(s)?s:[s]}Be.toPath=Md;function Al(s){return Be.toPath(s)}function Fd(s,r){for(var n=r.length,i=0;i<n;i++){if(s==null)return;s=s[r[i]]}return n?s:void 0}function $d(s,r,n){var i=Fd(s,Al(r));return Td(i)?n:i}function hy(s,r){r=Al(r);for(var n=r.length,i=0;i<n;i++){var l=r[i];if(!li(s,l))return!1;s=s[l]}return!!n}function Oc(s){return s}function Vi(s){return s=$s({},s),function(r){return Id(r,s)}}function Ic(s){return s=Al(s),function(r){return Fd(r,s)}}function Rl(s,r,n){if(r===void 0)return s;switch(n??3){case 1:return function(i){return s.call(r,i)};case 3:return function(i,l,f){return s.call(r,i,l,f)};case 4:return function(i,l,f,e){return s.call(r,i,l,f,e)}}return function(){return s.apply(r,arguments)}}function dy(s,r,n){return s==null?Oc:Ft(s)?Rl(s,r,n):si(s)&&!oi(s)?Vi(s):Ic(s)}function kc(s,r){return dy(s,r,1/0)}Be.iteratee=kc;function sn(s,r,n){return Be.iteratee!==kc?Be.iteratee(s,r):dy(s,r,n)}function py(s,r,n){r=sn(r,n);for(var i=Tt(s),l=i.length,f={},e=0;e<l;e++){var _=i[e];f[_]=r(s[_],_,s)}return f}function Hd(){}function _y(s){return s==null?Hd:function(r){return $d(s,r)}}function gy(s,r,n){var i=Array(Math.max(0,s));r=Rl(r,n,1);for(var l=0;l<s;l++)i[l]=r(l);return i}function ic(s,r){return r==null&&(r=s,s=0),s+Math.floor(Math.random()*(r-s+1))}const Hs=Date.now||function(){return new Date().getTime()};function vy(s){var r=function(f){return s[f]},n="(?:"+Tt(s).join("|")+")",i=RegExp(n),l=RegExp(n,"g");return function(f){return f=f==null?"":""+f,i.test(f)?f.replace(l,r):f}}const my={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},yy=vy(my),HR=xd(my),Ty=vy(HR),by=Be.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var lh=/(.)^/,BR={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},qR=/\\|'|\r|\n|\u2028|\u2029/g;function WR(s){return"\\"+BR[s]}var jR=/^\s*(\w|\$)+\s*$/;function Sy(s,r,n){!r&&n&&(r=n),r=Ud({},r,Be.templateSettings);var i=RegExp([(r.escape||lh).source,(r.interpolate||lh).source,(r.evaluate||lh).source].join("|")+"|$","g"),l=0,f="__p+='";s.replace(i,function(h,g,m,b,E){return f+=s.slice(l,E).replace(qR,WR),l=E+h.length,g?f+=`'+
((__t=(`+g+`))==null?'':_.escape(__t))+
'`:m?f+=`'+
((__t=(`+m+`))==null?'':__t)+
'`:b&&(f+=`';
`+b+`
__p+='`),h}),f+=`';
`;var e=r.variable;if(e){if(!jR.test(e))throw new Error("variable is not a bare identifier: "+e)}else f=`with(obj||{}){
`+f+`}
`,e="obj";f=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+f+`return __p;
`;var _;try{_=new Function(e,"_",f)}catch(h){throw h.source=f,h}var T=function(h){return _.call(this,h,Be)};return T.source="function("+e+`){
`+f+"}",T}function wy(s,r,n){r=Al(r);var i=r.length;if(!i)return Ft(n)?n.call(s):n;for(var l=0;l<i;l++){var f=s==null?void 0:s[r[l]];f===void 0&&(f=n,l=i),s=Ft(f)?f.call(s):f}return s}var VR=0;function Ey(s){var r=++VR+"";return s?s+r:r}function Cy(s){var r=Be(s);return r._chain=!0,r}function Ay(s,r,n,i,l){if(!(i instanceof r))return s.apply(n,l);var f=ay(s.prototype),e=s.apply(f,l);return si(e)?e:f}var Yi=Jt(function(s,r){var n=Yi.placeholder,i=function(){for(var l=0,f=r.length,e=Array(f),_=0;_<f;_++)e[_]=r[_]===n?arguments[l++]:r[_];for(;l<arguments.length;)e.push(arguments[l++]);return Ay(s,i,this,this,e)};return i});Yi.placeholder=Be;const Bd=Jt(function(s,r,n){if(!Ft(s))throw new TypeError("Bind must be called on a function");var i=Jt(function(l){return Ay(s,i,r,this,n.concat(l))});return i}),bn=Km(rn);function Ji(s,r,n,i){if(i=i||[],!r&&r!==0)r=1/0;else if(r<=0)return i.concat(s);for(var l=i.length,f=0,e=rn(s);f<e;f++){var _=s[f];if(bn(_)&&(oi(_)||Rc(_)))if(r>1)Ji(_,r-1,n,i),l=i.length;else for(var T=0,h=_.length;T<h;)i[l++]=_[T++];else n||(i[l++]=_)}return i}const Ry=Jt(function(s,r){r=Ji(r,!1,!1);var n=r.length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var i=r[n];s[i]=Bd(s[i],s)}return s});function Oy(s,r){var n=function(i){var l=n.cache,f=""+(r?r.apply(this,arguments):i);return li(l,f)||(l[f]=s.apply(this,arguments)),l[f]};return n.cache={},n}const qd=Jt(function(s,r,n){return setTimeout(function(){return s.apply(null,n)},r)}),Iy=Yi(qd,Be,1);function ky(s,r,n){var i,l,f,e,_=0;n||(n={});var T=function(){_=n.leading===!1?0:Hs(),i=null,e=s.apply(l,f),i||(l=f=null)},h=function(){var g=Hs();!_&&n.leading===!1&&(_=g);var m=r-(g-_);return l=this,f=arguments,m<=0||m>r?(i&&(clearTimeout(i),i=null),_=g,e=s.apply(l,f),i||(l=f=null)):!i&&n.trailing!==!1&&(i=setTimeout(T,m)),e};return h.cancel=function(){clearTimeout(i),_=0,i=l=f=null},h}function Py(s,r,n){var i,l,f,e,_,T=function(){var g=Hs()-l;r>g?i=setTimeout(T,r-g):(i=null,n||(e=s.apply(_,f)),i||(f=_=null))},h=Jt(function(g){return _=this,f=g,l=Hs(),i||(i=setTimeout(T,r),n&&(e=s.apply(_,f))),e});return h.cancel=function(){clearTimeout(i),i=f=_=null},h}function Ny(s,r){return Yi(r,s)}function Pc(s){return function(){return!s.apply(this,arguments)}}function xy(){var s=arguments,r=s.length-1;return function(){for(var n=r,i=s[r].apply(this,arguments);n--;)i=s[n].call(this,i);return i}}function Dy(s,r){return function(){if(--s<1)return r.apply(this,arguments)}}function Wd(s,r){var n;return function(){return--s>0&&(n=r.apply(this,arguments)),s<=1&&(r=null),n}}const Ly=Yi(Wd,2);function jd(s,r,n){r=sn(r,n);for(var i=Tt(s),l,f=0,e=i.length;f<e;f++)if(l=i[f],r(s[l],l,s))return l}function Uy(s){return function(r,n,i){n=sn(n,i);for(var l=rn(r),f=s>0?0:l-1;f>=0&&f<l;f+=s)if(n(r[f],f,r))return f;return-1}}const Nc=Uy(1),Vd=Uy(-1);function Gd(s,r,n,i){n=sn(n,i,1);for(var l=n(r),f=0,e=rn(s);f<e;){var _=Math.floor((f+e)/2);n(s[_])<l?f=_+1:e=_}return f}function My(s,r,n){return function(i,l,f){var e=0,_=rn(i);if(typeof f=="number")s>0?e=f>=0?f:Math.max(f+_,e):_=f>=0?Math.min(f+1,_):f+_+1;else if(n&&f&&_)return f=n(i,l),i[f]===l?f:-1;if(l!==l)return f=r(Cl.call(i,e,_),Ad),f>=0?f+e:-1;for(f=s>0?e:_-1;f>=0&&f<_;f+=s)if(i[f]===l)return f;return-1}}const zd=My(1,Nc,Gd),Fy=My(-1,Vd);function _l(s,r,n){var i=bn(s)?Nc:jd,l=i(s,r,n);if(l!==void 0&&l!==-1)return s[l]}function $y(s,r){return _l(s,Vi(r))}function Vn(s,r,n){r=Rl(r,n);var i,l;if(bn(s))for(i=0,l=s.length;i<l;i++)r(s[i],i,s);else{var f=Tt(s);for(i=0,l=f.length;i<l;i++)r(s[f[i]],f[i],s)}return s}function xr(s,r,n){r=sn(r,n);for(var i=!bn(s)&&Tt(s),l=(i||s).length,f=Array(l),e=0;e<l;e++){var _=i?i[e]:e;f[e]=r(s[_],_,s)}return f}function Hy(s){var r=function(n,i,l,f){var e=!bn(n)&&Tt(n),_=(e||n).length,T=s>0?0:_-1;for(f||(l=n[e?e[T]:T],T+=s);T>=0&&T<_;T+=s){var h=e?e[T]:T;l=i(l,n[h],h,n)}return l};return function(n,i,l,f){var e=arguments.length>=3;return r(n,Rl(i,f,4),l,e)}}const Ds=Hy(1),sc=Hy(-1);function ri(s,r,n){var i=[];return r=sn(r,n),Vn(s,function(l,f,e){r(l,f,e)&&i.push(l)}),i}function By(s,r,n){return ri(s,Pc(sn(r)),n)}function oc(s,r,n){r=sn(r,n);for(var i=!bn(s)&&Tt(s),l=(i||s).length,f=0;f<l;f++){var e=i?i[f]:f;if(!r(s[e],e,s))return!1}return!0}function lc(s,r,n){r=sn(r,n);for(var i=!bn(s)&&Tt(s),l=(i||s).length,f=0;f<l;f++){var e=i?i[f]:f;if(r(s[e],e,s))return!0}return!1}function Dn(s,r,n,i){return bn(s)||(s=Ki(s)),(typeof n!="number"||i)&&(n=0),zd(s,r,n)>=0}const qy=Jt(function(s,r,n){var i,l;return Ft(r)?l=r:(r=Al(r),i=r.slice(0,-1),r=r[r.length-1]),xr(s,function(f){var e=l;if(!e){if(i&&i.length&&(f=Fd(f,i)),f==null)return;e=f[r]}return e==null?e:e.apply(f,n)})});function xc(s,r){return xr(s,Ic(r))}function Wy(s,r){return ri(s,Vi(r))}function Kd(s,r,n){var i=-1/0,l=-1/0,f,e;if(r==null||typeof r=="number"&&typeof s[0]!="object"&&s!=null){s=bn(s)?s:Ki(s);for(var _=0,T=s.length;_<T;_++)f=s[_],f!=null&&f>i&&(i=f)}else r=sn(r,n),Vn(s,function(h,g,m){e=r(h,g,m),(e>l||e===-1/0&&i===-1/0)&&(i=h,l=e)});return i}function jy(s,r,n){var i=1/0,l=1/0,f,e;if(r==null||typeof r=="number"&&typeof s[0]!="object"&&s!=null){s=bn(s)?s:Ki(s);for(var _=0,T=s.length;_<T;_++)f=s[_],f!=null&&f<i&&(i=f)}else r=sn(r,n),Vn(s,function(h,g,m){e=r(h,g,m),(e<l||e===1/0&&i===1/0)&&(i=h,l=e)});return i}var GR=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Yd(s){return s?oi(s)?Cl.call(s):Ac(s)?s.match(GR):bn(s)?xr(s,Oc):Ki(s):[]}function Jd(s,r,n){if(r==null||n)return bn(s)||(s=Ki(s)),s[ic(s.length-1)];var i=Yd(s),l=rn(i);r=Math.max(Math.min(r,l),0);for(var f=l-1,e=0;e<r;e++){var _=ic(e,f),T=i[e];i[e]=i[_],i[_]=T}return i.slice(0,r)}function Vy(s){return Jd(s,1/0)}function Gy(s,r,n){var i=0;return r=sn(r,n),xc(xr(s,function(l,f,e){return{value:l,index:i++,criteria:r(l,f,e)}}).sort(function(l,f){var e=l.criteria,_=f.criteria;if(e!==_){if(e>_||e===void 0)return 1;if(e<_||_===void 0)return-1}return l.index-f.index}),"value")}function Dc(s,r){return function(n,i,l){var f=r?[[],[]]:{};return i=sn(i,l),Vn(n,function(e,_){var T=i(e,_,n);s(f,e,T)}),f}}const zy=Dc(function(s,r,n){li(s,n)?s[n].push(r):s[n]=[r]}),Ky=Dc(function(s,r,n){s[n]=r}),Yy=Dc(function(s,r,n){li(s,n)?s[n]++:s[n]=1}),Jy=Dc(function(s,r,n){s[n?0:1].push(r)},!0);function Xy(s){return s==null?0:bn(s)?s.length:Tt(s).length}function zR(s,r,n){return r in n}const Xd=Jt(function(s,r){var n={},i=r[0];if(s==null)return n;Ft(i)?(r.length>1&&(i=Rl(i,r[1])),r=Ks(s)):(i=zR,r=Ji(r,!1,!1),s=Object(s));for(var l=0,f=r.length;l<f;l++){var e=r[l],_=s[e];i(_,e,s)&&(n[e]=_)}return n}),Qy=Jt(function(s,r){var n=r[0],i;return Ft(n)?(n=Pc(n),r.length>1&&(i=r[1])):(r=xr(Ji(r,!1,!1),String),n=function(l,f){return!Dn(r,f)}),Xd(s,n,i)});function Qd(s,r,n){return Cl.call(s,0,Math.max(0,s.length-(r==null||n?1:r)))}function Ls(s,r,n){return s==null||s.length<1?r==null||n?void 0:[]:r==null||n?s[0]:Qd(s,s.length-r)}function Hi(s,r,n){return Cl.call(s,r==null||n?1:r)}function Zy(s,r,n){return s==null||s.length<1?r==null||n?void 0:[]:r==null||n?s[s.length-1]:Hi(s,Math.max(0,s.length-r))}function e0(s){return ri(s,Boolean)}function t0(s,r){return Ji(s,r,!1)}const Zd=Jt(function(s,r){return r=Ji(r,!0,!0),ri(s,function(n){return!Dn(r,n)})}),n0=Jt(function(s,r){return Zd(s,r)});function gl(s,r,n,i){bd(r)||(i=n,n=r,r=!1),n!=null&&(n=sn(n,i));for(var l=[],f=[],e=0,_=rn(s);e<_;e++){var T=s[e],h=n?n(T,e,s):T;r&&!n?((!e||f!==h)&&l.push(T),f=h):n?Dn(f,h)||(f.push(h),l.push(T)):Dn(l,T)||l.push(T)}return l}const r0=Jt(function(s){return gl(Ji(s,!0,!0))});function i0(s){for(var r=[],n=arguments.length,i=0,l=rn(s);i<l;i++){var f=s[i];if(!Dn(r,f)){var e;for(e=1;e<n&&Dn(arguments[e],f);e++);e===n&&r.push(f)}}return r}function vl(s){for(var r=s&&Kd(s,rn).length||0,n=Array(r),i=0;i<r;i++)n[i]=xc(s,i);return n}const s0=Jt(vl);function o0(s,r){for(var n={},i=0,l=rn(s);i<l;i++)r?n[s[i]]=r[i]:n[s[i][0]]=s[i][1];return n}function l0(s,r,n){r==null&&(r=s||0,s=0),n||(n=r<s?-1:1);for(var i=Math.max(Math.ceil((r-s)/n),0),l=Array(i),f=0;f<i;f++,s+=n)l[f]=s;return l}function a0(s,r){if(r==null||r<1)return[];for(var n=[],i=0,l=s.length;i<l;)n.push(Cl.call(s,i,i+=r));return n}function ep(s,r){return s._chain?Be(r).chain():r}function tp(s){return Vn(pl(s),function(r){var n=Be[r]=s[r];Be.prototype[r]=function(){var i=[this._wrapped];return wR.apply(i,arguments),ep(this,n.apply(Be,i))}}),Be}Vn(["pop","push","reverse","shift","sort","splice","unshift"],function(s){var r=Cc[s];Be.prototype[s]=function(){var n=this._wrapped;return n!=null&&(r.apply(n,arguments),(s==="shift"||s==="splice")&&n.length===0&&delete n[0]),ep(this,n)}});Vn(["concat","join","slice"],function(s){var r=Cc[s];Be.prototype[s]=function(){var n=this._wrapped;return n!=null&&(n=r.apply(n,arguments)),ep(this,n)}});const KR=Object.freeze(Object.defineProperty({__proto__:null,VERSION:md,after:Dy,all:oc,allKeys:Ks,any:lc,assign:$s,before:Wd,bind:Bd,bindAll:Ry,chain:Cy,chunk:a0,clone:cy,collect:xr,compact:e0,compose:xy,constant:Rd,contains:Dn,countBy:Yy,create:uy,debounce:Py,default:Be,defaults:Ud,defer:Iy,delay:qd,detect:_l,difference:Zd,drop:Hi,each:Vn,escape:yy,every:oc,extend:Ld,extendOwn:$s,filter:ri,find:_l,findIndex:Nc,findKey:jd,findLastIndex:Vd,findWhere:$y,first:Ls,flatten:t0,foldl:Ds,foldr:sc,forEach:Vn,functions:pl,get:$d,groupBy:zy,has:hy,head:Ls,identity:Oc,include:Dn,includes:Dn,indexBy:Ky,indexOf:zd,initial:Qd,inject:Ds,intersection:i0,invert:xd,invoke:qy,isArguments:Rc,isArray:oi,isArrayBuffer:Ed,isBoolean:bd,isDataView:dl,isDate:Bm,isElement:Hm,isEmpty:Xm,isEqual:Zm,isError:Wm,isFinite:zm,isFunction:Ft,isMap:ry,isMatch:Id,isNaN:Ad,isNull:$m,isNumber:Sd,isObject:si,isRegExp:qm,isSet:sy,isString:Ac,isSymbol:wd,isTypedArray:Od,isUndefined:Td,isWeakMap:iy,isWeakSet:oy,iteratee:kc,keys:Tt,last:Zy,lastIndexOf:Fy,map:xr,mapObject:py,matcher:Vi,matches:Vi,max:Kd,memoize:Oy,methods:pl,min:jy,mixin:tp,negate:Pc,noop:Hd,now:Hs,object:o0,omit:Qy,once:Ly,pairs:ly,partial:Yi,partition:Jy,pick:Xd,pluck:xc,property:Ic,propertyOf:_y,random:ic,range:l0,reduce:Ds,reduceRight:sc,reject:By,rest:Hi,restArguments:Jt,result:wy,sample:Jd,select:ri,shuffle:Vy,size:Xy,some:lc,sortBy:Gy,sortedIndex:Gd,tail:Hi,take:Ls,tap:fy,template:Sy,templateSettings:by,throttle:ky,times:gy,toArray:Yd,toPath:Md,transpose:vl,unescape:Ty,union:r0,uniq:gl,unique:gl,uniqueId:Ey,unzip:vl,values:Ki,where:Wy,without:n0,wrap:Ny,zip:s0},Symbol.toStringTag,{value:"Module"}));var Wh=tp(KR);Wh._=Wh;const YR=Object.freeze(Object.defineProperty({__proto__:null,VERSION:md,after:Dy,all:oc,allKeys:Ks,any:lc,assign:$s,before:Wd,bind:Bd,bindAll:Ry,chain:Cy,chunk:a0,clone:cy,collect:xr,compact:e0,compose:xy,constant:Rd,contains:Dn,countBy:Yy,create:uy,debounce:Py,default:Wh,defaults:Ud,defer:Iy,delay:qd,detect:_l,difference:Zd,drop:Hi,each:Vn,escape:yy,every:oc,extend:Ld,extendOwn:$s,filter:ri,find:_l,findIndex:Nc,findKey:jd,findLastIndex:Vd,findWhere:$y,first:Ls,flatten:t0,foldl:Ds,foldr:sc,forEach:Vn,functions:pl,get:$d,groupBy:zy,has:hy,head:Ls,identity:Oc,include:Dn,includes:Dn,indexBy:Ky,indexOf:zd,initial:Qd,inject:Ds,intersection:i0,invert:xd,invoke:qy,isArguments:Rc,isArray:oi,isArrayBuffer:Ed,isBoolean:bd,isDataView:dl,isDate:Bm,isElement:Hm,isEmpty:Xm,isEqual:Zm,isError:Wm,isFinite:zm,isFunction:Ft,isMap:ry,isMatch:Id,isNaN:Ad,isNull:$m,isNumber:Sd,isObject:si,isRegExp:qm,isSet:sy,isString:Ac,isSymbol:wd,isTypedArray:Od,isUndefined:Td,isWeakMap:iy,isWeakSet:oy,iteratee:kc,keys:Tt,last:Zy,lastIndexOf:Fy,map:xr,mapObject:py,matcher:Vi,matches:Vi,max:Kd,memoize:Oy,methods:pl,min:jy,mixin:tp,negate:Pc,noop:Hd,now:Hs,object:o0,omit:Qy,once:Ly,pairs:ly,partial:Yi,partition:Jy,pick:Xd,pluck:xc,property:Ic,propertyOf:_y,random:ic,range:l0,reduce:Ds,reduceRight:sc,reject:By,rest:Hi,restArguments:Jt,result:wy,sample:Jd,select:ri,shuffle:Vy,size:Xy,some:lc,sortBy:Gy,sortedIndex:Gd,tail:Hi,take:Ls,tap:fy,template:Sy,templateSettings:by,throttle:ky,times:gy,toArray:Yd,toPath:Md,transpose:vl,unescape:Ty,union:r0,uniq:gl,unique:gl,uniqueId:Ey,unzip:vl,values:Ki,where:Wy,without:n0,wrap:Ny,zip:s0},Symbol.toStringTag,{value:"Module"})),JR=Xv(YR);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var r=n(JR);function n(h){return h&&h.__esModule?h:{default:h}}function i(h){"@babel/helpers - typeof";return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},i(h)}function l(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}function f(h,g){for(var m=0;m<g.length;m++){var b=g[m];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,_(b.key),b)}}function e(h,g,m){return g&&f(h.prototype,g),m&&f(h,m),Object.defineProperty(h,"prototype",{writable:!1}),h}function _(h){var g=T(h,"string");return i(g)=="symbol"?g:g+""}function T(h,g){if(i(h)!="object"||!h)return h;var m=h[Symbol.toPrimitive];if(m!==void 0){var b=m.call(h,g||"default");if(i(b)!="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(h)}s.default=function(){function h(){l(this,h)}return e(h,[{key:"start",value:function(m){r.default.isEmpty(m)||(r.default.isEmpty(m._sessions)||m.terminateSessions(),m.isRegistered()&&(m.unregister(),m.stop()))}}])}()})(Um);const XR="jssip",QR="JsSIP",ZR="the Javascript SIP library",eO="3.10.1",tO="https://jssip.net",nO=["José Luis Millán <jmillan@aliax.net> (https://github.com/jmillan)","Iñaki Baz Castillo <ibc@aliax.net> (https://inakibaz.me)"],rO="lib/JsSIP.d.ts",iO="lib-es5/JsSIP.js",sO=["sip","websocket","webrtc","node","browser","library"],oO="MIT",lO={type:"git",url:"https://github.com/versatica/JsSIP.git"},aO={url:"https://github.com/versatica/JsSIP/issues"},uO={"@types/events":"^3.0.0","@types/debug":"^4.1.7",debug:"^4.3.1",events:"^3.3.0","sdp-transform":"^2.14.1"},cO={"@babel/core":"^7.19.6","@babel/preset-env":"^7.19.4","ansi-colors":"^3.2.4",browserify:"^16.5.1",eslint:"^5.16.0","fancy-log":"^1.3.3",gulp:"^4.0.2","gulp-babel":"^8.0.0","gulp-eslint":"^5.0.0","gulp-expect-file":"^1.0.2","gulp-header":"^2.0.9","gulp-nodeunit-runner":"^0.2.2","gulp-plumber":"^1.2.1","gulp-rename":"^1.4.0","gulp-uglify-es":"^1.0.4",pegjs:"^0.7.0","vinyl-buffer":"^1.0.1","vinyl-source-stream":"^2.0.0"},fO={lint:"node npm-scripts.js lint",test:"node npm-scripts.js test",prepublish:"node npm-scripts.js prepublish",release:"node npm-scripts.js release"},u0={name:XR,title:QR,description:ZR,version:eO,homepage:tO,contributors:nO,types:rO,main:iO,keywords:sO,license:oO,repository:lO,bugs:aO,dependencies:uO,devDependencies:cO,scripts:fO};var Cg=u0,_t={USER_AGENT:"".concat(Cg.title," ").concat(Cg.version),SIP:"sip",SIPS:"sips",causes:{CONNECTION_ERROR:"Connection Error",REQUEST_TIMEOUT:"Request Timeout",SIP_FAILURE_CODE:"SIP Failure Code",INTERNAL_ERROR:"Internal Error",BUSY:"Busy",REJECTED:"Rejected",REDIRECTED:"Redirected",UNAVAILABLE:"Unavailable",NOT_FOUND:"Not Found",ADDRESS_INCOMPLETE:"Address Incomplete",INCOMPATIBLE_SDP:"Incompatible SDP",MISSING_SDP:"Missing SDP",AUTHENTICATION_ERROR:"Authentication Error",BYE:"Terminated",WEBRTC_ERROR:"WebRTC Error",CANCELED:"Canceled",NO_ANSWER:"No Answer",EXPIRES:"Expires",NO_ACK:"No ACK",DIALOG_ERROR:"Dialog Error",USER_DENIED_MEDIA_ACCESS:"User Denied Media Access",BAD_MEDIA_DESCRIPTION:"Bad Media Description",RTP_TIMEOUT:"RTP Timeout"},SIP_ERROR_CAUSES:{REDIRECTED:[300,301,302,305,380],BUSY:[486,600],REJECTED:[403,603],NOT_FOUND:[404,604],UNAVAILABLE:[480,410,408,430],ADDRESS_INCOMPLETE:[484,424],INCOMPATIBLE_SDP:[488,606],AUTHENTICATION_ERROR:[401,407]},ACK:"ACK",BYE:"BYE",CANCEL:"CANCEL",INFO:"INFO",INVITE:"INVITE",MESSAGE:"MESSAGE",NOTIFY:"NOTIFY",OPTIONS:"OPTIONS",REGISTER:"REGISTER",REFER:"REFER",UPDATE:"UPDATE",SUBSCRIBE:"SUBSCRIBE",DTMF_TRANSPORT:{INFO:"INFO",RFC2833:"RFC2833"},REASON_PHRASE:{100:"Trying",180:"Ringing",181:"Call Is Being Forwarded",182:"Queued",183:"Session Progress",199:"Early Dialog Terminated",200:"OK",202:"Accepted",204:"No Notification",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",305:"Use Proxy",380:"Alternative Service",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",410:"Gone",412:"Conditional Request Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Unsupported URI Scheme",417:"Unknown Resource-Priority",420:"Bad Extension",421:"Extension Required",422:"Session Interval Too Small",423:"Interval Too Brief",424:"Bad Location Information",428:"Use Identity Header",429:"Provide Referrer Identity",430:"Flow Failed",433:"Anonymity Disallowed",436:"Bad Identity-Info",437:"Unsupported Certificate",438:"Invalid Identity Header",439:"First Hop Lacks Outbound Support",440:"Max-Breadth Exceeded",469:"Bad Info Package",470:"Consent Needed",478:"Unresolvable Destination",480:"Temporarily Unavailable",481:"Call/Transaction Does Not Exist",482:"Loop Detected",483:"Too Many Hops",484:"Address Incomplete",485:"Ambiguous",486:"Busy Here",487:"Request Terminated",488:"Not Acceptable Here",489:"Bad Event",491:"Request Pending",493:"Undecipherable",494:"Security Agreement Required",500:"JsSIP Internal Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Server Time-out",505:"Version Not Supported",513:"Message Too Large",580:"Precondition Failure",600:"Busy Everywhere",603:"Decline",604:"Does Not Exist Anywhere",606:"Not Acceptable"},ALLOWED_METHODS:"INVITE,ACK,CANCEL,BYE,UPDATE,MESSAGE,OPTIONS,REFER,INFO,NOTIFY",ACCEPTED_BODY_TYPES:"application/sdp, application/dtmf-relay",MAX_FORWARDS:69,SESSION_EXPIRES:90,MIN_SESSION_EXPIRES:60,CONNECTION_RECOVERY_MAX_INTERVAL:30,CONNECTION_RECOVERY_MIN_INTERVAL:2};function $u(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?$u=function(n){return typeof n}:$u=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},$u(s)}function Lc(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function Uc(s,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(r&&r.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),r&&ml(s,r)}function Mc(s){var r=c0();return function(){var i=yl(s),l;if(r){var f=yl(this).constructor;l=Reflect.construct(i,arguments,f)}else l=i.apply(this,arguments);return hO(this,l)}}function hO(s,r){return r&&($u(r)==="object"||typeof r=="function")?r:dO(s)}function dO(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function Bs(s){var r=typeof Map=="function"?new Map:void 0;return Bs=function(i){if(i===null||!pO(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof r<"u"){if(r.has(i))return r.get(i);r.set(i,l)}function l(){return Hu(i,arguments,yl(this).constructor)}return l.prototype=Object.create(i.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),ml(l,i)},Bs(s)}function Hu(s,r,n){return c0()?Hu=Reflect.construct:Hu=function(l,f,e){var _=[null];_.push.apply(_,f);var T=Function.bind.apply(l,_),h=new T;return e&&ml(h,e.prototype),h},Hu.apply(null,arguments)}function c0(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function pO(s){return Function.toString.call(s).indexOf("[native code]")!==-1}function ml(s,r){return ml=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i},ml(s,r)}function yl(s){return yl=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},yl(s)}var _O=function(s){Uc(n,s);var r=Mc(n);function n(i,l){var f;return Lc(this,n),f=r.call(this),f.code=1,f.name="CONFIGURATION_ERROR",f.parameter=i,f.value=l,f.message=f.value?"Invalid value ".concat(JSON.stringify(f.value),' for parameter "').concat(f.parameter,'"'):"Missing parameter: ".concat(f.parameter),f}return n}(Bs(Error)),gO=function(s){Uc(n,s);var r=Mc(n);function n(i){var l;return Lc(this,n),l=r.call(this),l.code=2,l.name="INVALID_STATE_ERROR",l.status=i,l.message="Invalid status: ".concat(i),l}return n}(Bs(Error)),vO=function(s){Uc(n,s);var r=Mc(n);function n(i){var l;return Lc(this,n),l=r.call(this),l.code=3,l.name="NOT_SUPPORTED_ERROR",l.message=i,l}return n}(Bs(Error)),mO=function(s){Uc(n,s);var r=Mc(n);function n(i){var l;return Lc(this,n),l=r.call(this),l.code=4,l.name="NOT_READY_ERROR",l.message=i,l}return n}(Bs(Error)),ai={ConfigurationError:_O,InvalidStateError:gO,NotSupportedError:vO,NotReadyError:mO},ut={},ah,Ag;function np(){if(Ag)return ah;Ag=1;function s(f,e){if(!(f instanceof e))throw new TypeError("Cannot call a class as a function")}function r(f,e){for(var _=0;_<e.length;_++){var T=e[_];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(f,T.key,T)}}function n(f,e,_){return e&&r(f.prototype,e),_&&r(f,_),f}var i=ui(),l=lr();return ah=function(){n(f,null,[{key:"parse",value:function(_){if(_=l.parse(_,"Name_Addr_Header"),_!==-1)return _}}]);function f(e,_,T){if(s(this,f),!e||!(e instanceof i))throw new TypeError('missing or invalid "uri" parameter');this._uri=e,this._parameters={},this.display_name=_;for(var h in T)Object.prototype.hasOwnProperty.call(T,h)&&this.setParam(h,T[h])}return n(f,[{key:"setParam",value:function(_,T){_&&(this._parameters[_.toLowerCase()]=typeof T>"u"||T===null?null:T.toString())}},{key:"getParam",value:function(_){if(_)return this._parameters[_.toLowerCase()]}},{key:"hasParam",value:function(_){if(_)return this._parameters.hasOwnProperty(_.toLowerCase())&&!0||!1}},{key:"deleteParam",value:function(_){if(_=_.toLowerCase(),this._parameters.hasOwnProperty(_)){var T=this._parameters[_];return delete this._parameters[_],T}}},{key:"clearParams",value:function(){this._parameters={}}},{key:"clone",value:function(){return new f(this._uri.clone(),this._display_name,JSON.parse(JSON.stringify(this._parameters)))}},{key:"_quote",value:function(_){return _.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}},{key:"toString",value:function(){var _=this._display_name?'"'.concat(this._quote(this._display_name),'" '):"";_+="<".concat(this._uri.toString(),">");for(var T in this._parameters)Object.prototype.hasOwnProperty.call(this._parameters,T)&&(_+=";".concat(T),this._parameters[T]!==null&&(_+="=".concat(this._parameters[T])));return _}},{key:"uri",get:function(){return this._uri}},{key:"display_name",get:function(){return this._display_name},set:function(_){this._display_name=_===0?"0":_}}]),f}(),ah}var uh,Rg;function lr(){return Rg||(Rg=1,uh=function(){function s(n){return'"'+n.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var r={parse:function(i,l){var f={CRLF:g,DIGIT:m,ALPHA:b,HEXDIG:E,WSP:C,OCTET:N,DQUOTE:I,SP:P,HTAB:x,alphanum:U,reserved:G,unreserved:te,mark:we,escaped:_e,LWS:X,SWS:$,HCOLON:se,TEXT_UTF8_TRIM:me,TEXT_UTF8char:ie,UTF8_NONASCII:de,UTF8_CONT:Z,LHEX:re,token:W,token_nodot:ne,separators:bt,word:wn,STAR:En,SLASH:ht,EQUAL:Me,LPAREN:ur,RPAREN:cr,RAQUOT:Bt,LAQUOT:on,COMMA:Fe,SEMI:Ae,COLON:ln,LDQUOT:zn,RDQUOT:an,comment:un,ctext:Un,quoted_string:St,quoted_string_clean:ye,qdtext:ge,quoted_pair:ve,SIP_URI_noparams:Pe,SIP_URI:Xe,uri_scheme:Qe,uri_scheme_sips:xe,uri_scheme_sip:cn,userinfo:gt,user:ql,user_unreserved:fr,password:Wl,hostport:Kn,host:Cn,hostname:ci,domainlabel:fi,toplabel:Zi,IPv6reference:hi,IPv6address:di,h16:ce,ls32:Ct,IPv4address:hr,dec_octet:dr,port:jl,uri_parameters:Vl,uri_parameter:Qs,transport_param:Zs,user_param:eo,method_param:Gl,ttl_param:zl,maddr_param:Kl,lr_param:Yl,other_param:to,pname:Jl,pvalue:Xl,paramchar:pi,param_unreserved:es,headers:Ql,header:Mr,hname:Zl,hvalue:ea,hnv_unreserved:_i,Request_Response:Yc,Request_Line:ta,Request_URI:na,absoluteURI:no,hier_part:ra,net_path:ro,abs_path:ts,opaque_part:ia,uric:gi,uric_no_slash:sa,path_segments:oa,segment:ns,param:Fr,pchar:vi,scheme:mi,authority:la,srvr:aa,reg_name:ua,query:io,SIP_Version:rs,INVITEm:so,ACKm:ca,OPTIONSm:fa,BYEm:ha,CANCELm:da,REGISTERm:oo,SUBSCRIBEm:lo,NOTIFYm:ao,REFERm:is,Method:ss,Status_Line:uo,Status_Code:yi,extension_code:co,Reason_Phrase:pa,Allow_Events:_a,Call_ID:ga,Contact:fo,contact_param:os,name_addr:Yn,display_name:$r,contact_params:Ti,c_p_q:pr,c_p_expires:ho,delta_seconds:Jn,qvalue:va,generic_param:et,gen_value:po,Content_Disposition:ma,disp_type:_o,disp_param:go,handling_param:ya,Content_Encoding:Jc,Content_Length:Ta,Content_Type:Xc,media_type:ba,m_type:Sa,discrete_type:wa,composite_type:ls,extension_token:as,x_token:Ea,m_subtype:Ca,m_parameter:vo,m_value:Aa,CSeq:Ge,CSeq_value:qe,Expires:Qc,Event:Zc,event_type:bi,From:ef,from_param:mo,tag_param:yo,Max_Forwards:Ra,Min_Expires:tf,Name_Addr_Header:vt,Proxy_Authenticate:To,challenge:Mn,other_challenge:bo,auth_param:_r,digest_cln:At,realm:So,realm_value:wo,domain:Eo,URI:Si,nonce:Co,nonce_value:Ao,opaque:xt,stale:Oa,algorithm:qt,qop_options:Ia,qop_value:wi,Proxy_Require:Xn,Record_Route:us,rec_route:Hr,Reason:Ke,reason_param:An,reason_cause:cs,Require:nf,Route:Ro,route_param:fs,Subscription_State:rf,substate_value:ka,subexp_params:hs,event_reason_value:Ei,Subject:Br,Supported:sf,To:Pa,to_param:ds,Via:Oo,via_param:qr,via_params:ps,via_ttl:Na,via_maddr:_s,via_received:gs,via_branch:xa,response_port:Io,rport:Dt,sent_protocol:vs,protocol_name:Wr,transport:ko,sent_by:Po,via_host:Da,via_port:La,ttl:No,WWW_Authenticate:of,Session_Expires:lf,s_e_expires:gr,s_e_params:xo,s_e_refresher:Ua,extension_header:Do,header_value:Lo,message_body:Qn,uuid_URI:ms,uuid:Ma,hex4:Fn,hex8:Fa,hex12:vr,Refer_To:fn,Replaces:$a,call_id:Ha,replaces_param:Uo,to_tag:Ba,from_tag:qa,early_flag:Wa};if(l!==void 0){if(f[l]===void 0)throw new Error("Invalid rule name: "+s(l)+".")}else l="CRLF";var e=0,_=0,T=[];function h(t){e<_||(e>_&&(_=e,T=[]),T.push(t))}function g(){var t;return i.substr(e,2)===`\r
`?(t=`\r
`,e+=2):(t=null,h('"\\r\\n"')),t}function m(){var t;return/^[0-9]/.test(i.charAt(e))?(t=i.charAt(e),e++):(t=null,h("[0-9]")),t}function b(){var t;return/^[a-zA-Z]/.test(i.charAt(e))?(t=i.charAt(e),e++):(t=null,h("[a-zA-Z]")),t}function E(){var t;return/^[0-9a-fA-F]/.test(i.charAt(e))?(t=i.charAt(e),e++):(t=null,h("[0-9a-fA-F]")),t}function C(){var t;return t=P(),t===null&&(t=x()),t}function N(){var t;return/^[\0-\xFF]/.test(i.charAt(e))?(t=i.charAt(e),e++):(t=null,h("[\\0-\\xFF]")),t}function I(){var t;return/^["]/.test(i.charAt(e))?(t=i.charAt(e),e++):(t=null,h('["]')),t}function P(){var t;return i.charCodeAt(e)===32?(t=" ",e++):(t=null,h('" "')),t}function x(){var t;return i.charCodeAt(e)===9?(t="	",e++):(t=null,h('"\\t"')),t}function U(){var t;return/^[a-zA-Z0-9]/.test(i.charAt(e))?(t=i.charAt(e),e++):(t=null,h("[a-zA-Z0-9]")),t}function G(){var t;return i.charCodeAt(e)===59?(t=";",e++):(t=null,h('";"')),t===null&&(i.charCodeAt(e)===47?(t="/",e++):(t=null,h('"/"')),t===null&&(i.charCodeAt(e)===63?(t="?",e++):(t=null,h('"?"')),t===null&&(i.charCodeAt(e)===58?(t=":",e++):(t=null,h('":"')),t===null&&(i.charCodeAt(e)===64?(t="@",e++):(t=null,h('"@"')),t===null&&(i.charCodeAt(e)===38?(t="&",e++):(t=null,h('"&"')),t===null&&(i.charCodeAt(e)===61?(t="=",e++):(t=null,h('"="')),t===null&&(i.charCodeAt(e)===43?(t="+",e++):(t=null,h('"+"')),t===null&&(i.charCodeAt(e)===36?(t="$",e++):(t=null,h('"$"')),t===null&&(i.charCodeAt(e)===44?(t=",",e++):(t=null,h('","'))))))))))),t}function te(){var t;return t=U(),t===null&&(t=we()),t}function we(){var t;return i.charCodeAt(e)===45?(t="-",e++):(t=null,h('"-"')),t===null&&(i.charCodeAt(e)===95?(t="_",e++):(t=null,h('"_"')),t===null&&(i.charCodeAt(e)===46?(t=".",e++):(t=null,h('"."')),t===null&&(i.charCodeAt(e)===33?(t="!",e++):(t=null,h('"!"')),t===null&&(i.charCodeAt(e)===126?(t="~",e++):(t=null,h('"~"')),t===null&&(i.charCodeAt(e)===42?(t="*",e++):(t=null,h('"*"')),t===null&&(i.charCodeAt(e)===39?(t="'",e++):(t=null,h(`"'"`)),t===null&&(i.charCodeAt(e)===40?(t="(",e++):(t=null,h('"("')),t===null&&(i.charCodeAt(e)===41?(t=")",e++):(t=null,h('")"')))))))))),t}function _e(){var t,u,c,p,y;return p=e,y=e,i.charCodeAt(e)===37?(t="%",e++):(t=null,h('"%"')),t!==null?(u=E(),u!==null?(c=E(),c!==null?t=[t,u,c]:(t=null,e=y)):(t=null,e=y)):(t=null,e=y),t!==null&&(t=function(S,O){return O.join("")}(p,t)),t===null&&(e=p),t}function X(){var t,u,c,p,y,S;for(p=e,y=e,S=e,t=[],u=C();u!==null;)t.push(u),u=C();if(t!==null?(u=g(),u!==null?t=[t,u]:(t=null,e=S)):(t=null,e=S),t=t!==null?t:"",t!==null){if(c=C(),c!==null)for(u=[];c!==null;)u.push(c),c=C();else u=null;u!==null?t=[t,u]:(t=null,e=y)}else t=null,e=y;return t!==null&&(t=function(O){return" "}()),t===null&&(e=p),t}function $(){var t;return t=X(),t=t!==null?t:"",t}function se(){var t,u,c,p,y;for(p=e,y=e,t=[],u=P(),u===null&&(u=x());u!==null;)t.push(u),u=P(),u===null&&(u=x());return t!==null?(i.charCodeAt(e)===58?(u=":",e++):(u=null,h('":"')),u!==null?(c=$(),c!==null?t=[t,u,c]:(t=null,e=y)):(t=null,e=y)):(t=null,e=y),t!==null&&(t=function(S){return":"}()),t===null&&(e=p),t}function me(){var t,u,c,p,y,S,O;if(y=e,S=e,u=ie(),u!==null)for(t=[];u!==null;)t.push(u),u=ie();else t=null;if(t!==null){for(u=[],O=e,c=[],p=X();p!==null;)c.push(p),p=X();for(c!==null?(p=ie(),p!==null?c=[c,p]:(c=null,e=O)):(c=null,e=O);c!==null;){for(u.push(c),O=e,c=[],p=X();p!==null;)c.push(p),p=X();c!==null?(p=ie(),p!==null?c=[c,p]:(c=null,e=O)):(c=null,e=O)}u!==null?t=[t,u]:(t=null,e=S)}else t=null,e=S;return t!==null&&(t=function(H){return i.substring(e,H)}(y)),t===null&&(e=y),t}function ie(){var t;return/^[!-~]/.test(i.charAt(e))?(t=i.charAt(e),e++):(t=null,h("[!-~]")),t===null&&(t=de()),t}function de(){var t;return/^[\x80-\uFFFF]/.test(i.charAt(e))?(t=i.charAt(e),e++):(t=null,h("[\\x80-\\uFFFF]")),t}function Z(){var t;return/^[\x80-\xBF]/.test(i.charAt(e))?(t=i.charAt(e),e++):(t=null,h("[\\x80-\\xBF]")),t}function re(){var t;return t=m(),t===null&&(/^[a-f]/.test(i.charAt(e))?(t=i.charAt(e),e++):(t=null,h("[a-f]"))),t}function W(){var t,u,c;if(c=e,u=U(),u===null&&(i.charCodeAt(e)===45?(u="-",e++):(u=null,h('"-"')),u===null&&(i.charCodeAt(e)===46?(u=".",e++):(u=null,h('"."')),u===null&&(i.charCodeAt(e)===33?(u="!",e++):(u=null,h('"!"')),u===null&&(i.charCodeAt(e)===37?(u="%",e++):(u=null,h('"%"')),u===null&&(i.charCodeAt(e)===42?(u="*",e++):(u=null,h('"*"')),u===null&&(i.charCodeAt(e)===95?(u="_",e++):(u=null,h('"_"')),u===null&&(i.charCodeAt(e)===43?(u="+",e++):(u=null,h('"+"')),u===null&&(i.charCodeAt(e)===96?(u="`",e++):(u=null,h('"`"')),u===null&&(i.charCodeAt(e)===39?(u="'",e++):(u=null,h(`"'"`)),u===null&&(i.charCodeAt(e)===126?(u="~",e++):(u=null,h('"~"')))))))))))),u!==null)for(t=[];u!==null;)t.push(u),u=U(),u===null&&(i.charCodeAt(e)===45?(u="-",e++):(u=null,h('"-"')),u===null&&(i.charCodeAt(e)===46?(u=".",e++):(u=null,h('"."')),u===null&&(i.charCodeAt(e)===33?(u="!",e++):(u=null,h('"!"')),u===null&&(i.charCodeAt(e)===37?(u="%",e++):(u=null,h('"%"')),u===null&&(i.charCodeAt(e)===42?(u="*",e++):(u=null,h('"*"')),u===null&&(i.charCodeAt(e)===95?(u="_",e++):(u=null,h('"_"')),u===null&&(i.charCodeAt(e)===43?(u="+",e++):(u=null,h('"+"')),u===null&&(i.charCodeAt(e)===96?(u="`",e++):(u=null,h('"`"')),u===null&&(i.charCodeAt(e)===39?(u="'",e++):(u=null,h(`"'"`)),u===null&&(i.charCodeAt(e)===126?(u="~",e++):(u=null,h('"~"'))))))))))));else t=null;return t!==null&&(t=function(p){return i.substring(e,p)}(c)),t===null&&(e=c),t}function ne(){var t,u,c;if(c=e,u=U(),u===null&&(i.charCodeAt(e)===45?(u="-",e++):(u=null,h('"-"')),u===null&&(i.charCodeAt(e)===33?(u="!",e++):(u=null,h('"!"')),u===null&&(i.charCodeAt(e)===37?(u="%",e++):(u=null,h('"%"')),u===null&&(i.charCodeAt(e)===42?(u="*",e++):(u=null,h('"*"')),u===null&&(i.charCodeAt(e)===95?(u="_",e++):(u=null,h('"_"')),u===null&&(i.charCodeAt(e)===43?(u="+",e++):(u=null,h('"+"')),u===null&&(i.charCodeAt(e)===96?(u="`",e++):(u=null,h('"`"')),u===null&&(i.charCodeAt(e)===39?(u="'",e++):(u=null,h(`"'"`)),u===null&&(i.charCodeAt(e)===126?(u="~",e++):(u=null,h('"~"'))))))))))),u!==null)for(t=[];u!==null;)t.push(u),u=U(),u===null&&(i.charCodeAt(e)===45?(u="-",e++):(u=null,h('"-"')),u===null&&(i.charCodeAt(e)===33?(u="!",e++):(u=null,h('"!"')),u===null&&(i.charCodeAt(e)===37?(u="%",e++):(u=null,h('"%"')),u===null&&(i.charCodeAt(e)===42?(u="*",e++):(u=null,h('"*"')),u===null&&(i.charCodeAt(e)===95?(u="_",e++):(u=null,h('"_"')),u===null&&(i.charCodeAt(e)===43?(u="+",e++):(u=null,h('"+"')),u===null&&(i.charCodeAt(e)===96?(u="`",e++):(u=null,h('"`"')),u===null&&(i.charCodeAt(e)===39?(u="'",e++):(u=null,h(`"'"`)),u===null&&(i.charCodeAt(e)===126?(u="~",e++):(u=null,h('"~"')))))))))));else t=null;return t!==null&&(t=function(p){return i.substring(e,p)}(c)),t===null&&(e=c),t}function bt(){var t;return i.charCodeAt(e)===40?(t="(",e++):(t=null,h('"("')),t===null&&(i.charCodeAt(e)===41?(t=")",e++):(t=null,h('")"')),t===null&&(i.charCodeAt(e)===60?(t="<",e++):(t=null,h('"<"')),t===null&&(i.charCodeAt(e)===62?(t=">",e++):(t=null,h('">"')),t===null&&(i.charCodeAt(e)===64?(t="@",e++):(t=null,h('"@"')),t===null&&(i.charCodeAt(e)===44?(t=",",e++):(t=null,h('","')),t===null&&(i.charCodeAt(e)===59?(t=";",e++):(t=null,h('";"')),t===null&&(i.charCodeAt(e)===58?(t=":",e++):(t=null,h('":"')),t===null&&(i.charCodeAt(e)===92?(t="\\",e++):(t=null,h('"\\\\"')),t===null&&(t=I(),t===null&&(i.charCodeAt(e)===47?(t="/",e++):(t=null,h('"/"')),t===null&&(i.charCodeAt(e)===91?(t="[",e++):(t=null,h('"["')),t===null&&(i.charCodeAt(e)===93?(t="]",e++):(t=null,h('"]"')),t===null&&(i.charCodeAt(e)===63?(t="?",e++):(t=null,h('"?"')),t===null&&(i.charCodeAt(e)===61?(t="=",e++):(t=null,h('"="')),t===null&&(i.charCodeAt(e)===123?(t="{",e++):(t=null,h('"{"')),t===null&&(i.charCodeAt(e)===125?(t="}",e++):(t=null,h('"}"')),t===null&&(t=P(),t===null&&(t=x())))))))))))))))))),t}function wn(){var t,u,c;if(c=e,u=U(),u===null&&(i.charCodeAt(e)===45?(u="-",e++):(u=null,h('"-"')),u===null&&(i.charCodeAt(e)===46?(u=".",e++):(u=null,h('"."')),u===null&&(i.charCodeAt(e)===33?(u="!",e++):(u=null,h('"!"')),u===null&&(i.charCodeAt(e)===37?(u="%",e++):(u=null,h('"%"')),u===null&&(i.charCodeAt(e)===42?(u="*",e++):(u=null,h('"*"')),u===null&&(i.charCodeAt(e)===95?(u="_",e++):(u=null,h('"_"')),u===null&&(i.charCodeAt(e)===43?(u="+",e++):(u=null,h('"+"')),u===null&&(i.charCodeAt(e)===96?(u="`",e++):(u=null,h('"`"')),u===null&&(i.charCodeAt(e)===39?(u="'",e++):(u=null,h(`"'"`)),u===null&&(i.charCodeAt(e)===126?(u="~",e++):(u=null,h('"~"')),u===null&&(i.charCodeAt(e)===40?(u="(",e++):(u=null,h('"("')),u===null&&(i.charCodeAt(e)===41?(u=")",e++):(u=null,h('")"')),u===null&&(i.charCodeAt(e)===60?(u="<",e++):(u=null,h('"<"')),u===null&&(i.charCodeAt(e)===62?(u=">",e++):(u=null,h('">"')),u===null&&(i.charCodeAt(e)===58?(u=":",e++):(u=null,h('":"')),u===null&&(i.charCodeAt(e)===92?(u="\\",e++):(u=null,h('"\\\\"')),u===null&&(u=I(),u===null&&(i.charCodeAt(e)===47?(u="/",e++):(u=null,h('"/"')),u===null&&(i.charCodeAt(e)===91?(u="[",e++):(u=null,h('"["')),u===null&&(i.charCodeAt(e)===93?(u="]",e++):(u=null,h('"]"')),u===null&&(i.charCodeAt(e)===63?(u="?",e++):(u=null,h('"?"')),u===null&&(i.charCodeAt(e)===123?(u="{",e++):(u=null,h('"{"')),u===null&&(i.charCodeAt(e)===125?(u="}",e++):(u=null,h('"}"'))))))))))))))))))))))))),u!==null)for(t=[];u!==null;)t.push(u),u=U(),u===null&&(i.charCodeAt(e)===45?(u="-",e++):(u=null,h('"-"')),u===null&&(i.charCodeAt(e)===46?(u=".",e++):(u=null,h('"."')),u===null&&(i.charCodeAt(e)===33?(u="!",e++):(u=null,h('"!"')),u===null&&(i.charCodeAt(e)===37?(u="%",e++):(u=null,h('"%"')),u===null&&(i.charCodeAt(e)===42?(u="*",e++):(u=null,h('"*"')),u===null&&(i.charCodeAt(e)===95?(u="_",e++):(u=null,h('"_"')),u===null&&(i.charCodeAt(e)===43?(u="+",e++):(u=null,h('"+"')),u===null&&(i.charCodeAt(e)===96?(u="`",e++):(u=null,h('"`"')),u===null&&(i.charCodeAt(e)===39?(u="'",e++):(u=null,h(`"'"`)),u===null&&(i.charCodeAt(e)===126?(u="~",e++):(u=null,h('"~"')),u===null&&(i.charCodeAt(e)===40?(u="(",e++):(u=null,h('"("')),u===null&&(i.charCodeAt(e)===41?(u=")",e++):(u=null,h('")"')),u===null&&(i.charCodeAt(e)===60?(u="<",e++):(u=null,h('"<"')),u===null&&(i.charCodeAt(e)===62?(u=">",e++):(u=null,h('">"')),u===null&&(i.charCodeAt(e)===58?(u=":",e++):(u=null,h('":"')),u===null&&(i.charCodeAt(e)===92?(u="\\",e++):(u=null,h('"\\\\"')),u===null&&(u=I(),u===null&&(i.charCodeAt(e)===47?(u="/",e++):(u=null,h('"/"')),u===null&&(i.charCodeAt(e)===91?(u="[",e++):(u=null,h('"["')),u===null&&(i.charCodeAt(e)===93?(u="]",e++):(u=null,h('"]"')),u===null&&(i.charCodeAt(e)===63?(u="?",e++):(u=null,h('"?"')),u===null&&(i.charCodeAt(e)===123?(u="{",e++):(u=null,h('"{"')),u===null&&(i.charCodeAt(e)===125?(u="}",e++):(u=null,h('"}"')))))))))))))))))))))))));else t=null;return t!==null&&(t=function(p){return i.substring(e,p)}(c)),t===null&&(e=c),t}function En(){var t,u,c,p,y;return p=e,y=e,t=$(),t!==null?(i.charCodeAt(e)===42?(u="*",e++):(u=null,h('"*"')),u!==null?(c=$(),c!==null?t=[t,u,c]:(t=null,e=y)):(t=null,e=y)):(t=null,e=y),t!==null&&(t=function(S){return"*"}()),t===null&&(e=p),t}function ht(){var t,u,c,p,y;return p=e,y=e,t=$(),t!==null?(i.charCodeAt(e)===47?(u="/",e++):(u=null,h('"/"')),u!==null?(c=$(),c!==null?t=[t,u,c]:(t=null,e=y)):(t=null,e=y)):(t=null,e=y),t!==null&&(t=function(S){return"/"}()),t===null&&(e=p),t}function Me(){var t,u,c,p,y;return p=e,y=e,t=$(),t!==null?(i.charCodeAt(e)===61?(u="=",e++):(u=null,h('"="')),u!==null?(c=$(),c!==null?t=[t,u,c]:(t=null,e=y)):(t=null,e=y)):(t=null,e=y),t!==null&&(t=function(S){return"="}()),t===null&&(e=p),t}function ur(){var t,u,c,p,y;return p=e,y=e,t=$(),t!==null?(i.charCodeAt(e)===40?(u="(",e++):(u=null,h('"("')),u!==null?(c=$(),c!==null?t=[t,u,c]:(t=null,e=y)):(t=null,e=y)):(t=null,e=y),t!==null&&(t=function(S){return"("}()),t===null&&(e=p),t}function cr(){var t,u,c,p,y;return p=e,y=e,t=$(),t!==null?(i.charCodeAt(e)===41?(u=")",e++):(u=null,h('")"')),u!==null?(c=$(),c!==null?t=[t,u,c]:(t=null,e=y)):(t=null,e=y)):(t=null,e=y),t!==null&&(t=function(S){return")"}()),t===null&&(e=p),t}function Bt(){var t,u,c,p;return c=e,p=e,i.charCodeAt(e)===62?(t=">",e++):(t=null,h('">"')),t!==null?(u=$(),u!==null?t=[t,u]:(t=null,e=p)):(t=null,e=p),t!==null&&(t=function(y){return">"}()),t===null&&(e=c),t}function on(){var t,u,c,p;return c=e,p=e,t=$(),t!==null?(i.charCodeAt(e)===60?(u="<",e++):(u=null,h('"<"')),u!==null?t=[t,u]:(t=null,e=p)):(t=null,e=p),t!==null&&(t=function(y){return"<"}()),t===null&&(e=c),t}function Fe(){var t,u,c,p,y;return p=e,y=e,t=$(),t!==null?(i.charCodeAt(e)===44?(u=",",e++):(u=null,h('","')),u!==null?(c=$(),c!==null?t=[t,u,c]:(t=null,e=y)):(t=null,e=y)):(t=null,e=y),t!==null&&(t=function(S){return","}()),t===null&&(e=p),t}function Ae(){var t,u,c,p,y;return p=e,y=e,t=$(),t!==null?(i.charCodeAt(e)===59?(u=";",e++):(u=null,h('";"')),u!==null?(c=$(),c!==null?t=[t,u,c]:(t=null,e=y)):(t=null,e=y)):(t=null,e=y),t!==null&&(t=function(S){return";"}()),t===null&&(e=p),t}function ln(){var t,u,c,p,y;return p=e,y=e,t=$(),t!==null?(i.charCodeAt(e)===58?(u=":",e++):(u=null,h('":"')),u!==null?(c=$(),c!==null?t=[t,u,c]:(t=null,e=y)):(t=null,e=y)):(t=null,e=y),t!==null&&(t=function(S){return":"}()),t===null&&(e=p),t}function zn(){var t,u,c,p;return c=e,p=e,t=$(),t!==null?(u=I(),u!==null?t=[t,u]:(t=null,e=p)):(t=null,e=p),t!==null&&(t=function(y){return'"'}()),t===null&&(e=c),t}function an(){var t,u,c,p;return c=e,p=e,t=I(),t!==null?(u=$(),u!==null?t=[t,u]:(t=null,e=p)):(t=null,e=p),t!==null&&(t=function(y){return'"'}()),t===null&&(e=c),t}function un(){var t,u,c,p;if(p=e,t=ur(),t!==null){for(u=[],c=Un(),c===null&&(c=ve(),c===null&&(c=un()));c!==null;)u.push(c),c=Un(),c===null&&(c=ve(),c===null&&(c=un()));u!==null?(c=cr(),c!==null?t=[t,u,c]:(t=null,e=p)):(t=null,e=p)}else t=null,e=p;return t}function Un(){var t;return/^[!-']/.test(i.charAt(e))?(t=i.charAt(e),e++):(t=null,h("[!-']")),t===null&&(/^[*-[]/.test(i.charAt(e))?(t=i.charAt(e),e++):(t=null,h("[*-[]")),t===null&&(/^[\]-~]/.test(i.charAt(e))?(t=i.charAt(e),e++):(t=null,h("[\\]-~]")),t===null&&(t=de(),t===null&&(t=X())))),t}function St(){var t,u,c,p,y,S;if(y=e,S=e,t=$(),t!==null)if(u=I(),u!==null){for(c=[],p=ge(),p===null&&(p=ve());p!==null;)c.push(p),p=ge(),p===null&&(p=ve());c!==null?(p=I(),p!==null?t=[t,u,c,p]:(t=null,e=S)):(t=null,e=S)}else t=null,e=S;else t=null,e=S;return t!==null&&(t=function(O){return i.substring(e,O)}(y)),t===null&&(e=y),t}function ye(){var t,u,c,p,y,S;if(y=e,S=e,t=$(),t!==null)if(u=I(),u!==null){for(c=[],p=ge(),p===null&&(p=ve());p!==null;)c.push(p),p=ge(),p===null&&(p=ve());c!==null?(p=I(),p!==null?t=[t,u,c,p]:(t=null,e=S)):(t=null,e=S)}else t=null,e=S;else t=null,e=S;return t!==null&&(t=function(O){var H=i.substring(e,O).trim();return H.substring(1,H.length-1).replace(/\\([\x00-\x09\x0b-\x0c\x0e-\x7f])/g,"$1")}(y)),t===null&&(e=y),t}function ge(){var t;return t=X(),t===null&&(i.charCodeAt(e)===33?(t="!",e++):(t=null,h('"!"')),t===null&&(/^[#-[]/.test(i.charAt(e))?(t=i.charAt(e),e++):(t=null,h("[#-[]")),t===null&&(/^[\]-~]/.test(i.charAt(e))?(t=i.charAt(e),e++):(t=null,h("[\\]-~]")),t===null&&(t=de())))),t}function ve(){var t,u,c;return c=e,i.charCodeAt(e)===92?(t="\\",e++):(t=null,h('"\\\\"')),t!==null?(/^[\0-\t]/.test(i.charAt(e))?(u=i.charAt(e),e++):(u=null,h("[\\0-\\t]")),u===null&&(/^[\x0B-\f]/.test(i.charAt(e))?(u=i.charAt(e),e++):(u=null,h("[\\x0B-\\f]")),u===null&&(/^[\x0E-]/.test(i.charAt(e))?(u=i.charAt(e),e++):(u=null,h("[\\x0E-]")))),u!==null?t=[t,u]:(t=null,e=c)):(t=null,e=c),t}function Pe(){var t,u,c,p,y,S;return y=e,S=e,t=Qe(),t!==null?(i.charCodeAt(e)===58?(u=":",e++):(u=null,h('":"')),u!==null?(c=gt(),c=c!==null?c:"",c!==null?(p=Kn(),p!==null?t=[t,u,c,p]:(t=null,e=S)):(t=null,e=S)):(t=null,e=S)):(t=null,e=S),t!==null&&(t=function(O){try{k.uri=new z(k.scheme,k.user,k.host,k.port),delete k.scheme,delete k.user,delete k.host,delete k.host_type,delete k.port}catch{k=-1}}()),t===null&&(e=y),t}function Xe(){var t,u,c,p,y,S,O,H;return O=e,H=e,t=Qe(),t!==null?(i.charCodeAt(e)===58?(u=":",e++):(u=null,h('":"')),u!==null?(c=gt(),c=c!==null?c:"",c!==null?(p=Kn(),p!==null?(y=Vl(),y!==null?(S=Ql(),S=S!==null?S:"",S!==null?t=[t,u,c,p,y,S]:(t=null,e=H)):(t=null,e=H)):(t=null,e=H)):(t=null,e=H)):(t=null,e=H)):(t=null,e=H),t!==null&&(t=function(q){try{k.uri=new z(k.scheme,k.user,k.host,k.port,k.uri_params,k.uri_headers),delete k.scheme,delete k.user,delete k.host,delete k.host_type,delete k.port,delete k.uri_params,l==="SIP_URI"&&(k=k.uri)}catch{k=-1}}()),t===null&&(e=O),t}function Qe(){var t;return t=xe(),t===null&&(t=cn()),t}function xe(){var t,u;return u=e,i.substr(e,4).toLowerCase()==="sips"?(t=i.substr(e,4),e+=4):(t=null,h('"sips"')),t!==null&&(t=function(c,p){k.scheme=p.toLowerCase()}(u,t)),t===null&&(e=u),t}function cn(){var t,u;return u=e,i.substr(e,3).toLowerCase()==="sip"?(t=i.substr(e,3),e+=3):(t=null,h('"sip"')),t!==null&&(t=function(c,p){k.scheme=p.toLowerCase()}(u,t)),t===null&&(e=u),t}function gt(){var t,u,c,p,y,S;return p=e,y=e,t=ql(),t!==null?(S=e,i.charCodeAt(e)===58?(u=":",e++):(u=null,h('":"')),u!==null?(c=Wl(),c!==null?u=[u,c]:(u=null,e=S)):(u=null,e=S),u=u!==null?u:"",u!==null?(i.charCodeAt(e)===64?(c="@",e++):(c=null,h('"@"')),c!==null?t=[t,u,c]:(t=null,e=y)):(t=null,e=y)):(t=null,e=y),t!==null&&(t=function(O){k.user=decodeURIComponent(i.substring(e-1,O))}(p)),t===null&&(e=p),t}function ql(){var t,u;if(u=te(),u===null&&(u=_e(),u===null&&(u=fr())),u!==null)for(t=[];u!==null;)t.push(u),u=te(),u===null&&(u=_e(),u===null&&(u=fr()));else t=null;return t}function fr(){var t;return i.charCodeAt(e)===38?(t="&",e++):(t=null,h('"&"')),t===null&&(i.charCodeAt(e)===61?(t="=",e++):(t=null,h('"="')),t===null&&(i.charCodeAt(e)===43?(t="+",e++):(t=null,h('"+"')),t===null&&(i.charCodeAt(e)===36?(t="$",e++):(t=null,h('"$"')),t===null&&(i.charCodeAt(e)===44?(t=",",e++):(t=null,h('","')),t===null&&(i.charCodeAt(e)===59?(t=";",e++):(t=null,h('";"')),t===null&&(i.charCodeAt(e)===63?(t="?",e++):(t=null,h('"?"')),t===null&&(i.charCodeAt(e)===47?(t="/",e++):(t=null,h('"/"'))))))))),t}function Wl(){var t,u,c;for(c=e,t=[],u=te(),u===null&&(u=_e(),u===null&&(i.charCodeAt(e)===38?(u="&",e++):(u=null,h('"&"')),u===null&&(i.charCodeAt(e)===61?(u="=",e++):(u=null,h('"="')),u===null&&(i.charCodeAt(e)===43?(u="+",e++):(u=null,h('"+"')),u===null&&(i.charCodeAt(e)===36?(u="$",e++):(u=null,h('"$"')),u===null&&(i.charCodeAt(e)===44?(u=",",e++):(u=null,h('","'))))))));u!==null;)t.push(u),u=te(),u===null&&(u=_e(),u===null&&(i.charCodeAt(e)===38?(u="&",e++):(u=null,h('"&"')),u===null&&(i.charCodeAt(e)===61?(u="=",e++):(u=null,h('"="')),u===null&&(i.charCodeAt(e)===43?(u="+",e++):(u=null,h('"+"')),u===null&&(i.charCodeAt(e)===36?(u="$",e++):(u=null,h('"$"')),u===null&&(i.charCodeAt(e)===44?(u=",",e++):(u=null,h('","'))))))));return t!==null&&(t=function(p){k.password=i.substring(e,p)}(c)),t===null&&(e=c),t}function Kn(){var t,u,c,p,y;return p=e,t=Cn(),t!==null?(y=e,i.charCodeAt(e)===58?(u=":",e++):(u=null,h('":"')),u!==null?(c=jl(),c!==null?u=[u,c]:(u=null,e=y)):(u=null,e=y),u=u!==null?u:"",u!==null?t=[t,u]:(t=null,e=p)):(t=null,e=p),t}function Cn(){var t,u;return u=e,t=ci(),t===null&&(t=hr(),t===null&&(t=hi())),t!==null&&(t=function(c){return k.host=i.substring(e,c).toLowerCase(),k.host}(u)),t===null&&(e=u),t}function ci(){var t,u,c,p,y,S;for(p=e,y=e,t=[],S=e,u=fi(),u!==null?(i.charCodeAt(e)===46?(c=".",e++):(c=null,h('"."')),c!==null?u=[u,c]:(u=null,e=S)):(u=null,e=S);u!==null;)t.push(u),S=e,u=fi(),u!==null?(i.charCodeAt(e)===46?(c=".",e++):(c=null,h('"."')),c!==null?u=[u,c]:(u=null,e=S)):(u=null,e=S);return t!==null?(u=Zi(),u!==null?(i.charCodeAt(e)===46?(c=".",e++):(c=null,h('"."')),c=c!==null?c:"",c!==null?t=[t,u,c]:(t=null,e=y)):(t=null,e=y)):(t=null,e=y),t!==null&&(t=function(O){return k.host_type="domain",i.substring(e,O)}(p)),t===null&&(e=p),t}function fi(){var t,u,c,p;if(p=e,t=U(),t!==null){for(u=[],c=U(),c===null&&(i.charCodeAt(e)===45?(c="-",e++):(c=null,h('"-"')),c===null&&(i.charCodeAt(e)===95?(c="_",e++):(c=null,h('"_"'))));c!==null;)u.push(c),c=U(),c===null&&(i.charCodeAt(e)===45?(c="-",e++):(c=null,h('"-"')),c===null&&(i.charCodeAt(e)===95?(c="_",e++):(c=null,h('"_"'))));u!==null?t=[t,u]:(t=null,e=p)}else t=null,e=p;return t}function Zi(){var t,u,c,p;if(p=e,t=b(),t!==null){for(u=[],c=U(),c===null&&(i.charCodeAt(e)===45?(c="-",e++):(c=null,h('"-"')),c===null&&(i.charCodeAt(e)===95?(c="_",e++):(c=null,h('"_"'))));c!==null;)u.push(c),c=U(),c===null&&(i.charCodeAt(e)===45?(c="-",e++):(c=null,h('"-"')),c===null&&(i.charCodeAt(e)===95?(c="_",e++):(c=null,h('"_"'))));u!==null?t=[t,u]:(t=null,e=p)}else t=null,e=p;return t}function hi(){var t,u,c,p,y;return p=e,y=e,i.charCodeAt(e)===91?(t="[",e++):(t=null,h('"["')),t!==null?(u=di(),u!==null?(i.charCodeAt(e)===93?(c="]",e++):(c=null,h('"]"')),c!==null?t=[t,u,c]:(t=null,e=y)):(t=null,e=y)):(t=null,e=y),t!==null&&(t=function(S){return k.host_type="IPv6",i.substring(e,S)}(p)),t===null&&(e=p),t}function di(){var t,u,c,p,y,S,O,H,q,pe,je,Wt,ys,Mo,j,fe;return Mo=e,j=e,t=ce(),t!==null?(i.charCodeAt(e)===58?(u=":",e++):(u=null,h('":"')),u!==null?(c=ce(),c!==null?(i.charCodeAt(e)===58?(p=":",e++):(p=null,h('":"')),p!==null?(y=ce(),y!==null?(i.charCodeAt(e)===58?(S=":",e++):(S=null,h('":"')),S!==null?(O=ce(),O!==null?(i.charCodeAt(e)===58?(H=":",e++):(H=null,h('":"')),H!==null?(q=ce(),q!==null?(i.charCodeAt(e)===58?(pe=":",e++):(pe=null,h('":"')),pe!==null?(je=ce(),je!==null?(i.charCodeAt(e)===58?(Wt=":",e++):(Wt=null,h('":"')),Wt!==null?(ys=Ct(),ys!==null?t=[t,u,c,p,y,S,O,H,q,pe,je,Wt,ys]:(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j),t===null&&(j=e,i.substr(e,2)==="::"?(t="::",e+=2):(t=null,h('"::"')),t!==null?(u=ce(),u!==null?(i.charCodeAt(e)===58?(c=":",e++):(c=null,h('":"')),c!==null?(p=ce(),p!==null?(i.charCodeAt(e)===58?(y=":",e++):(y=null,h('":"')),y!==null?(S=ce(),S!==null?(i.charCodeAt(e)===58?(O=":",e++):(O=null,h('":"')),O!==null?(H=ce(),H!==null?(i.charCodeAt(e)===58?(q=":",e++):(q=null,h('":"')),q!==null?(pe=ce(),pe!==null?(i.charCodeAt(e)===58?(je=":",e++):(je=null,h('":"')),je!==null?(Wt=Ct(),Wt!==null?t=[t,u,c,p,y,S,O,H,q,pe,je,Wt]:(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j),t===null&&(j=e,i.substr(e,2)==="::"?(t="::",e+=2):(t=null,h('"::"')),t!==null?(u=ce(),u!==null?(i.charCodeAt(e)===58?(c=":",e++):(c=null,h('":"')),c!==null?(p=ce(),p!==null?(i.charCodeAt(e)===58?(y=":",e++):(y=null,h('":"')),y!==null?(S=ce(),S!==null?(i.charCodeAt(e)===58?(O=":",e++):(O=null,h('":"')),O!==null?(H=ce(),H!==null?(i.charCodeAt(e)===58?(q=":",e++):(q=null,h('":"')),q!==null?(pe=Ct(),pe!==null?t=[t,u,c,p,y,S,O,H,q,pe]:(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j),t===null&&(j=e,i.substr(e,2)==="::"?(t="::",e+=2):(t=null,h('"::"')),t!==null?(u=ce(),u!==null?(i.charCodeAt(e)===58?(c=":",e++):(c=null,h('":"')),c!==null?(p=ce(),p!==null?(i.charCodeAt(e)===58?(y=":",e++):(y=null,h('":"')),y!==null?(S=ce(),S!==null?(i.charCodeAt(e)===58?(O=":",e++):(O=null,h('":"')),O!==null?(H=Ct(),H!==null?t=[t,u,c,p,y,S,O,H]:(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j),t===null&&(j=e,i.substr(e,2)==="::"?(t="::",e+=2):(t=null,h('"::"')),t!==null?(u=ce(),u!==null?(i.charCodeAt(e)===58?(c=":",e++):(c=null,h('":"')),c!==null?(p=ce(),p!==null?(i.charCodeAt(e)===58?(y=":",e++):(y=null,h('":"')),y!==null?(S=Ct(),S!==null?t=[t,u,c,p,y,S]:(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j),t===null&&(j=e,i.substr(e,2)==="::"?(t="::",e+=2):(t=null,h('"::"')),t!==null?(u=ce(),u!==null?(i.charCodeAt(e)===58?(c=":",e++):(c=null,h('":"')),c!==null?(p=Ct(),p!==null?t=[t,u,c,p]:(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j),t===null&&(j=e,i.substr(e,2)==="::"?(t="::",e+=2):(t=null,h('"::"')),t!==null?(u=Ct(),u!==null?t=[t,u]:(t=null,e=j)):(t=null,e=j),t===null&&(j=e,i.substr(e,2)==="::"?(t="::",e+=2):(t=null,h('"::"')),t!==null?(u=ce(),u!==null?t=[t,u]:(t=null,e=j)):(t=null,e=j),t===null&&(j=e,t=ce(),t!==null?(i.substr(e,2)==="::"?(u="::",e+=2):(u=null,h('"::"')),u!==null?(c=ce(),c!==null?(i.charCodeAt(e)===58?(p=":",e++):(p=null,h('":"')),p!==null?(y=ce(),y!==null?(i.charCodeAt(e)===58?(S=":",e++):(S=null,h('":"')),S!==null?(O=ce(),O!==null?(i.charCodeAt(e)===58?(H=":",e++):(H=null,h('":"')),H!==null?(q=ce(),q!==null?(i.charCodeAt(e)===58?(pe=":",e++):(pe=null,h('":"')),pe!==null?(je=Ct(),je!==null?t=[t,u,c,p,y,S,O,H,q,pe,je]:(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j),t===null&&(j=e,t=ce(),t!==null?(fe=e,i.charCodeAt(e)===58?(u=":",e++):(u=null,h('":"')),u!==null?(c=ce(),c!==null?u=[u,c]:(u=null,e=fe)):(u=null,e=fe),u=u!==null?u:"",u!==null?(i.substr(e,2)==="::"?(c="::",e+=2):(c=null,h('"::"')),c!==null?(p=ce(),p!==null?(i.charCodeAt(e)===58?(y=":",e++):(y=null,h('":"')),y!==null?(S=ce(),S!==null?(i.charCodeAt(e)===58?(O=":",e++):(O=null,h('":"')),O!==null?(H=ce(),H!==null?(i.charCodeAt(e)===58?(q=":",e++):(q=null,h('":"')),q!==null?(pe=Ct(),pe!==null?t=[t,u,c,p,y,S,O,H,q,pe]:(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j),t===null&&(j=e,t=ce(),t!==null?(fe=e,i.charCodeAt(e)===58?(u=":",e++):(u=null,h('":"')),u!==null?(c=ce(),c!==null?u=[u,c]:(u=null,e=fe)):(u=null,e=fe),u=u!==null?u:"",u!==null?(fe=e,i.charCodeAt(e)===58?(c=":",e++):(c=null,h('":"')),c!==null?(p=ce(),p!==null?c=[c,p]:(c=null,e=fe)):(c=null,e=fe),c=c!==null?c:"",c!==null?(i.substr(e,2)==="::"?(p="::",e+=2):(p=null,h('"::"')),p!==null?(y=ce(),y!==null?(i.charCodeAt(e)===58?(S=":",e++):(S=null,h('":"')),S!==null?(O=ce(),O!==null?(i.charCodeAt(e)===58?(H=":",e++):(H=null,h('":"')),H!==null?(q=Ct(),q!==null?t=[t,u,c,p,y,S,O,H,q]:(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j),t===null&&(j=e,t=ce(),t!==null?(fe=e,i.charCodeAt(e)===58?(u=":",e++):(u=null,h('":"')),u!==null?(c=ce(),c!==null?u=[u,c]:(u=null,e=fe)):(u=null,e=fe),u=u!==null?u:"",u!==null?(fe=e,i.charCodeAt(e)===58?(c=":",e++):(c=null,h('":"')),c!==null?(p=ce(),p!==null?c=[c,p]:(c=null,e=fe)):(c=null,e=fe),c=c!==null?c:"",c!==null?(fe=e,i.charCodeAt(e)===58?(p=":",e++):(p=null,h('":"')),p!==null?(y=ce(),y!==null?p=[p,y]:(p=null,e=fe)):(p=null,e=fe),p=p!==null?p:"",p!==null?(i.substr(e,2)==="::"?(y="::",e+=2):(y=null,h('"::"')),y!==null?(S=ce(),S!==null?(i.charCodeAt(e)===58?(O=":",e++):(O=null,h('":"')),O!==null?(H=Ct(),H!==null?t=[t,u,c,p,y,S,O,H]:(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j),t===null&&(j=e,t=ce(),t!==null?(fe=e,i.charCodeAt(e)===58?(u=":",e++):(u=null,h('":"')),u!==null?(c=ce(),c!==null?u=[u,c]:(u=null,e=fe)):(u=null,e=fe),u=u!==null?u:"",u!==null?(fe=e,i.charCodeAt(e)===58?(c=":",e++):(c=null,h('":"')),c!==null?(p=ce(),p!==null?c=[c,p]:(c=null,e=fe)):(c=null,e=fe),c=c!==null?c:"",c!==null?(fe=e,i.charCodeAt(e)===58?(p=":",e++):(p=null,h('":"')),p!==null?(y=ce(),y!==null?p=[p,y]:(p=null,e=fe)):(p=null,e=fe),p=p!==null?p:"",p!==null?(fe=e,i.charCodeAt(e)===58?(y=":",e++):(y=null,h('":"')),y!==null?(S=ce(),S!==null?y=[y,S]:(y=null,e=fe)):(y=null,e=fe),y=y!==null?y:"",y!==null?(i.substr(e,2)==="::"?(S="::",e+=2):(S=null,h('"::"')),S!==null?(O=Ct(),O!==null?t=[t,u,c,p,y,S,O]:(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j),t===null&&(j=e,t=ce(),t!==null?(fe=e,i.charCodeAt(e)===58?(u=":",e++):(u=null,h('":"')),u!==null?(c=ce(),c!==null?u=[u,c]:(u=null,e=fe)):(u=null,e=fe),u=u!==null?u:"",u!==null?(fe=e,i.charCodeAt(e)===58?(c=":",e++):(c=null,h('":"')),c!==null?(p=ce(),p!==null?c=[c,p]:(c=null,e=fe)):(c=null,e=fe),c=c!==null?c:"",c!==null?(fe=e,i.charCodeAt(e)===58?(p=":",e++):(p=null,h('":"')),p!==null?(y=ce(),y!==null?p=[p,y]:(p=null,e=fe)):(p=null,e=fe),p=p!==null?p:"",p!==null?(fe=e,i.charCodeAt(e)===58?(y=":",e++):(y=null,h('":"')),y!==null?(S=ce(),S!==null?y=[y,S]:(y=null,e=fe)):(y=null,e=fe),y=y!==null?y:"",y!==null?(fe=e,i.charCodeAt(e)===58?(S=":",e++):(S=null,h('":"')),S!==null?(O=ce(),O!==null?S=[S,O]:(S=null,e=fe)):(S=null,e=fe),S=S!==null?S:"",S!==null?(i.substr(e,2)==="::"?(O="::",e+=2):(O=null,h('"::"')),O!==null?(H=ce(),H!==null?t=[t,u,c,p,y,S,O,H]:(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j),t===null&&(j=e,t=ce(),t!==null?(fe=e,i.charCodeAt(e)===58?(u=":",e++):(u=null,h('":"')),u!==null?(c=ce(),c!==null?u=[u,c]:(u=null,e=fe)):(u=null,e=fe),u=u!==null?u:"",u!==null?(fe=e,i.charCodeAt(e)===58?(c=":",e++):(c=null,h('":"')),c!==null?(p=ce(),p!==null?c=[c,p]:(c=null,e=fe)):(c=null,e=fe),c=c!==null?c:"",c!==null?(fe=e,i.charCodeAt(e)===58?(p=":",e++):(p=null,h('":"')),p!==null?(y=ce(),y!==null?p=[p,y]:(p=null,e=fe)):(p=null,e=fe),p=p!==null?p:"",p!==null?(fe=e,i.charCodeAt(e)===58?(y=":",e++):(y=null,h('":"')),y!==null?(S=ce(),S!==null?y=[y,S]:(y=null,e=fe)):(y=null,e=fe),y=y!==null?y:"",y!==null?(fe=e,i.charCodeAt(e)===58?(S=":",e++):(S=null,h('":"')),S!==null?(O=ce(),O!==null?S=[S,O]:(S=null,e=fe)):(S=null,e=fe),S=S!==null?S:"",S!==null?(fe=e,i.charCodeAt(e)===58?(O=":",e++):(O=null,h('":"')),O!==null?(H=ce(),H!==null?O=[O,H]:(O=null,e=fe)):(O=null,e=fe),O=O!==null?O:"",O!==null?(i.substr(e,2)==="::"?(H="::",e+=2):(H=null,h('"::"')),H!==null?t=[t,u,c,p,y,S,O,H]:(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j)):(t=null,e=j))))))))))))))),t!==null&&(t=function(Zn){return k.host_type="IPv6",i.substring(e,Zn)}(Mo)),t===null&&(e=Mo),t}function ce(){var t,u,c,p,y;return y=e,t=E(),t!==null?(u=E(),u=u!==null?u:"",u!==null?(c=E(),c=c!==null?c:"",c!==null?(p=E(),p=p!==null?p:"",p!==null?t=[t,u,c,p]:(t=null,e=y)):(t=null,e=y)):(t=null,e=y)):(t=null,e=y),t}function Ct(){var t,u,c,p;return p=e,t=ce(),t!==null?(i.charCodeAt(e)===58?(u=":",e++):(u=null,h('":"')),u!==null?(c=ce(),c!==null?t=[t,u,c]:(t=null,e=p)):(t=null,e=p)):(t=null,e=p),t===null&&(t=hr()),t}function hr(){var t,u,c,p,y,S,O,H,q;return H=e,q=e,t=dr(),t!==null?(i.charCodeAt(e)===46?(u=".",e++):(u=null,h('"."')),u!==null?(c=dr(),c!==null?(i.charCodeAt(e)===46?(p=".",e++):(p=null,h('"."')),p!==null?(y=dr(),y!==null?(i.charCodeAt(e)===46?(S=".",e++):(S=null,h('"."')),S!==null?(O=dr(),O!==null?t=[t,u,c,p,y,S,O]:(t=null,e=q)):(t=null,e=q)):(t=null,e=q)):(t=null,e=q)):(t=null,e=q)):(t=null,e=q)):(t=null,e=q),t!==null&&(t=function(pe){return k.host_type="IPv4",i.substring(e,pe)}(H)),t===null&&(e=H),t}function dr(){var t,u,c,p;return p=e,i.substr(e,2)==="25"?(t="25",e+=2):(t=null,h('"25"')),t!==null?(/^[0-5]/.test(i.charAt(e))?(u=i.charAt(e),e++):(u=null,h("[0-5]")),u!==null?t=[t,u]:(t=null,e=p)):(t=null,e=p),t===null&&(p=e,i.charCodeAt(e)===50?(t="2",e++):(t=null,h('"2"')),t!==null?(/^[0-4]/.test(i.charAt(e))?(u=i.charAt(e),e++):(u=null,h("[0-4]")),u!==null?(c=m(),c!==null?t=[t,u,c]:(t=null,e=p)):(t=null,e=p)):(t=null,e=p),t===null&&(p=e,i.charCodeAt(e)===49?(t="1",e++):(t=null,h('"1"')),t!==null?(u=m(),u!==null?(c=m(),c!==null?t=[t,u,c]:(t=null,e=p)):(t=null,e=p)):(t=null,e=p),t===null&&(p=e,/^[1-9]/.test(i.charAt(e))?(t=i.charAt(e),e++):(t=null,h("[1-9]")),t!==null?(u=m(),u!==null?t=[t,u]:(t=null,e=p)):(t=null,e=p),t===null&&(t=m())))),t}function jl(){var t,u,c,p,y,S,O;return S=e,O=e,t=m(),t=t!==null?t:"",t!==null?(u=m(),u=u!==null?u:"",u!==null?(c=m(),c=c!==null?c:"",c!==null?(p=m(),p=p!==null?p:"",p!==null?(y=m(),y=y!==null?y:"",y!==null?t=[t,u,c,p,y]:(t=null,e=O)):(t=null,e=O)):(t=null,e=O)):(t=null,e=O)):(t=null,e=O),t!==null&&(t=function(H,q){return q=parseInt(q.join("")),k.port=q,q}(S,t)),t===null&&(e=S),t}function Vl(){var t,u,c,p;for(t=[],p=e,i.charCodeAt(e)===59?(u=";",e++):(u=null,h('";"')),u!==null?(c=Qs(),c!==null?u=[u,c]:(u=null,e=p)):(u=null,e=p);u!==null;)t.push(u),p=e,i.charCodeAt(e)===59?(u=";",e++):(u=null,h('";"')),u!==null?(c=Qs(),c!==null?u=[u,c]:(u=null,e=p)):(u=null,e=p);return t}function Qs(){var t;return t=Zs(),t===null&&(t=eo(),t===null&&(t=Gl(),t===null&&(t=zl(),t===null&&(t=Kl(),t===null&&(t=Yl(),t===null&&(t=to())))))),t}function Zs(){var t,u,c,p;return c=e,p=e,i.substr(e,10).toLowerCase()==="transport="?(t=i.substr(e,10),e+=10):(t=null,h('"transport="')),t!==null?(i.substr(e,3).toLowerCase()==="udp"?(u=i.substr(e,3),e+=3):(u=null,h('"udp"')),u===null&&(i.substr(e,3).toLowerCase()==="tcp"?(u=i.substr(e,3),e+=3):(u=null,h('"tcp"')),u===null&&(i.substr(e,4).toLowerCase()==="sctp"?(u=i.substr(e,4),e+=4):(u=null,h('"sctp"')),u===null&&(i.substr(e,3).toLowerCase()==="tls"?(u=i.substr(e,3),e+=3):(u=null,h('"tls"')),u===null&&(u=W())))),u!==null?t=[t,u]:(t=null,e=p)):(t=null,e=p),t!==null&&(t=function(y,S){k.uri_params||(k.uri_params={}),k.uri_params.transport=S.toLowerCase()}(c,t[1])),t===null&&(e=c),t}function eo(){var t,u,c,p;return c=e,p=e,i.substr(e,5).toLowerCase()==="user="?(t=i.substr(e,5),e+=5):(t=null,h('"user="')),t!==null?(i.substr(e,5).toLowerCase()==="phone"?(u=i.substr(e,5),e+=5):(u=null,h('"phone"')),u===null&&(i.substr(e,2).toLowerCase()==="ip"?(u=i.substr(e,2),e+=2):(u=null,h('"ip"')),u===null&&(u=W())),u!==null?t=[t,u]:(t=null,e=p)):(t=null,e=p),t!==null&&(t=function(y,S){k.uri_params||(k.uri_params={}),k.uri_params.user=S.toLowerCase()}(c,t[1])),t===null&&(e=c),t}function Gl(){var t,u,c,p;return c=e,p=e,i.substr(e,7).toLowerCase()==="method="?(t=i.substr(e,7),e+=7):(t=null,h('"method="')),t!==null?(u=ss(),u!==null?t=[t,u]:(t=null,e=p)):(t=null,e=p),t!==null&&(t=function(y,S){k.uri_params||(k.uri_params={}),k.uri_params.method=S}(c,t[1])),t===null&&(e=c),t}function zl(){var t,u,c,p;return c=e,p=e,i.substr(e,4).toLowerCase()==="ttl="?(t=i.substr(e,4),e+=4):(t=null,h('"ttl="')),t!==null?(u=No(),u!==null?t=[t,u]:(t=null,e=p)):(t=null,e=p),t!==null&&(t=function(y,S){k.params||(k.params={}),k.params.ttl=S}(c,t[1])),t===null&&(e=c),t}function Kl(){var t,u,c,p;return c=e,p=e,i.substr(e,6).toLowerCase()==="maddr="?(t=i.substr(e,6),e+=6):(t=null,h('"maddr="')),t!==null?(u=Cn(),u!==null?t=[t,u]:(t=null,e=p)):(t=null,e=p),t!==null&&(t=function(y,S){k.uri_params||(k.uri_params={}),k.uri_params.maddr=S}(c,t[1])),t===null&&(e=c),t}function Yl(){var t,u,c,p,y,S;return p=e,y=e,i.substr(e,2).toLowerCase()==="lr"?(t=i.substr(e,2),e+=2):(t=null,h('"lr"')),t!==null?(S=e,i.charCodeAt(e)===61?(u="=",e++):(u=null,h('"="')),u!==null?(c=W(),c!==null?u=[u,c]:(u=null,e=S)):(u=null,e=S),u=u!==null?u:"",u!==null?t=[t,u]:(t=null,e=y)):(t=null,e=y),t!==null&&(t=function(O){k.uri_params||(k.uri_params={}),k.uri_params.lr=void 0}()),t===null&&(e=p),t}function to(){var t,u,c,p,y,S;return p=e,y=e,t=Jl(),t!==null?(S=e,i.charCodeAt(e)===61?(u="=",e++):(u=null,h('"="')),u!==null?(c=Xl(),c!==null?u=[u,c]:(u=null,e=S)):(u=null,e=S),u=u!==null?u:"",u!==null?t=[t,u]:(t=null,e=y)):(t=null,e=y),t!==null&&(t=function(O,H,q){k.uri_params||(k.uri_params={}),typeof q>"u"?q=void 0:q=q[1],k.uri_params[H.toLowerCase()]=q}(p,t[0],t[1])),t===null&&(e=p),t}function Jl(){var t,u,c;if(c=e,u=pi(),u!==null)for(t=[];u!==null;)t.push(u),u=pi();else t=null;return t!==null&&(t=function(p,y){return y.join("")}(c,t)),t===null&&(e=c),t}function Xl(){var t,u,c;if(c=e,u=pi(),u!==null)for(t=[];u!==null;)t.push(u),u=pi();else t=null;return t!==null&&(t=function(p,y){return y.join("")}(c,t)),t===null&&(e=c),t}function pi(){var t;return t=es(),t===null&&(t=te(),t===null&&(t=_e())),t}function es(){var t;return i.charCodeAt(e)===91?(t="[",e++):(t=null,h('"["')),t===null&&(i.charCodeAt(e)===93?(t="]",e++):(t=null,h('"]"')),t===null&&(i.charCodeAt(e)===47?(t="/",e++):(t=null,h('"/"')),t===null&&(i.charCodeAt(e)===58?(t=":",e++):(t=null,h('":"')),t===null&&(i.charCodeAt(e)===38?(t="&",e++):(t=null,h('"&"')),t===null&&(i.charCodeAt(e)===43?(t="+",e++):(t=null,h('"+"')),t===null&&(i.charCodeAt(e)===36?(t="$",e++):(t=null,h('"$"')))))))),t}function Ql(){var t,u,c,p,y,S,O;if(S=e,i.charCodeAt(e)===63?(t="?",e++):(t=null,h('"?"')),t!==null)if(u=Mr(),u!==null){for(c=[],O=e,i.charCodeAt(e)===38?(p="&",e++):(p=null,h('"&"')),p!==null?(y=Mr(),y!==null?p=[p,y]:(p=null,e=O)):(p=null,e=O);p!==null;)c.push(p),O=e,i.charCodeAt(e)===38?(p="&",e++):(p=null,h('"&"')),p!==null?(y=Mr(),y!==null?p=[p,y]:(p=null,e=O)):(p=null,e=O);c!==null?t=[t,u,c]:(t=null,e=S)}else t=null,e=S;else t=null,e=S;return t}function Mr(){var t,u,c,p,y;return p=e,y=e,t=Zl(),t!==null?(i.charCodeAt(e)===61?(u="=",e++):(u=null,h('"="')),u!==null?(c=ea(),c!==null?t=[t,u,c]:(t=null,e=y)):(t=null,e=y)):(t=null,e=y),t!==null&&(t=function(S,O,H){O=O.join("").toLowerCase(),H=H.join(""),k.uri_headers||(k.uri_headers={}),k.uri_headers[O]?k.uri_headers[O].push(H):k.uri_headers[O]=[H]}(p,t[0],t[2])),t===null&&(e=p),t}function Zl(){var t,u;if(u=_i(),u===null&&(u=te(),u===null&&(u=_e())),u!==null)for(t=[];u!==null;)t.push(u),u=_i(),u===null&&(u=te(),u===null&&(u=_e()));else t=null;return t}function ea(){var t,u;for(t=[],u=_i(),u===null&&(u=te(),u===null&&(u=_e()));u!==null;)t.push(u),u=_i(),u===null&&(u=te(),u===null&&(u=_e()));return t}function _i(){var t;return i.charCodeAt(e)===91?(t="[",e++):(t=null,h('"["')),t===null&&(i.charCodeAt(e)===93?(t="]",e++):(t=null,h('"]"')),t===null&&(i.charCodeAt(e)===47?(t="/",e++):(t=null,h('"/"')),t===null&&(i.charCodeAt(e)===63?(t="?",e++):(t=null,h('"?"')),t===null&&(i.charCodeAt(e)===58?(t=":",e++):(t=null,h('":"')),t===null&&(i.charCodeAt(e)===43?(t="+",e++):(t=null,h('"+"')),t===null&&(i.charCodeAt(e)===36?(t="$",e++):(t=null,h('"$"')))))))),t}function Yc(){var t;return t=uo(),t===null&&(t=ta()),t}function ta(){var t,u,c,p,y,S;return S=e,t=ss(),t!==null?(u=P(),u!==null?(c=na(),c!==null?(p=P(),p!==null?(y=rs(),y!==null?t=[t,u,c,p,y]:(t=null,e=S)):(t=null,e=S)):(t=null,e=S)):(t=null,e=S)):(t=null,e=S),t}function na(){var t;return t=Xe(),t===null&&(t=no()),t}function no(){var t,u,c,p;return p=e,t=mi(),t!==null?(i.charCodeAt(e)===58?(u=":",e++):(u=null,h('":"')),u!==null?(c=ra(),c===null&&(c=ia()),c!==null?t=[t,u,c]:(t=null,e=p)):(t=null,e=p)):(t=null,e=p),t}function ra(){var t,u,c,p,y;return p=e,t=ro(),t===null&&(t=ts()),t!==null?(y=e,i.charCodeAt(e)===63?(u="?",e++):(u=null,h('"?"')),u!==null?(c=io(),c!==null?u=[u,c]:(u=null,e=y)):(u=null,e=y),u=u!==null?u:"",u!==null?t=[t,u]:(t=null,e=p)):(t=null,e=p),t}function ro(){var t,u,c,p;return p=e,i.substr(e,2)==="//"?(t="//",e+=2):(t=null,h('"//"')),t!==null?(u=la(),u!==null?(c=ts(),c=c!==null?c:"",c!==null?t=[t,u,c]:(t=null,e=p)):(t=null,e=p)):(t=null,e=p),t}function ts(){var t,u,c;return c=e,i.charCodeAt(e)===47?(t="/",e++):(t=null,h('"/"')),t!==null?(u=oa(),u!==null?t=[t,u]:(t=null,e=c)):(t=null,e=c),t}function ia(){var t,u,c,p;if(p=e,t=sa(),t!==null){for(u=[],c=gi();c!==null;)u.push(c),c=gi();u!==null?t=[t,u]:(t=null,e=p)}else t=null,e=p;return t}function gi(){var t;return t=G(),t===null&&(t=te(),t===null&&(t=_e())),t}function sa(){var t;return t=te(),t===null&&(t=_e(),t===null&&(i.charCodeAt(e)===59?(t=";",e++):(t=null,h('";"')),t===null&&(i.charCodeAt(e)===63?(t="?",e++):(t=null,h('"?"')),t===null&&(i.charCodeAt(e)===58?(t=":",e++):(t=null,h('":"')),t===null&&(i.charCodeAt(e)===64?(t="@",e++):(t=null,h('"@"')),t===null&&(i.charCodeAt(e)===38?(t="&",e++):(t=null,h('"&"')),t===null&&(i.charCodeAt(e)===61?(t="=",e++):(t=null,h('"="')),t===null&&(i.charCodeAt(e)===43?(t="+",e++):(t=null,h('"+"')),t===null&&(i.charCodeAt(e)===36?(t="$",e++):(t=null,h('"$"')),t===null&&(i.charCodeAt(e)===44?(t=",",e++):(t=null,h('","')))))))))))),t}function oa(){var t,u,c,p,y,S;if(y=e,t=ns(),t!==null){for(u=[],S=e,i.charCodeAt(e)===47?(c="/",e++):(c=null,h('"/"')),c!==null?(p=ns(),p!==null?c=[c,p]:(c=null,e=S)):(c=null,e=S);c!==null;)u.push(c),S=e,i.charCodeAt(e)===47?(c="/",e++):(c=null,h('"/"')),c!==null?(p=ns(),p!==null?c=[c,p]:(c=null,e=S)):(c=null,e=S);u!==null?t=[t,u]:(t=null,e=y)}else t=null,e=y;return t}function ns(){var t,u,c,p,y,S;for(y=e,t=[],u=vi();u!==null;)t.push(u),u=vi();if(t!==null){for(u=[],S=e,i.charCodeAt(e)===59?(c=";",e++):(c=null,h('";"')),c!==null?(p=Fr(),p!==null?c=[c,p]:(c=null,e=S)):(c=null,e=S);c!==null;)u.push(c),S=e,i.charCodeAt(e)===59?(c=";",e++):(c=null,h('";"')),c!==null?(p=Fr(),p!==null?c=[c,p]:(c=null,e=S)):(c=null,e=S);u!==null?t=[t,u]:(t=null,e=y)}else t=null,e=y;return t}function Fr(){var t,u;for(t=[],u=vi();u!==null;)t.push(u),u=vi();return t}function vi(){var t;return t=te(),t===null&&(t=_e(),t===null&&(i.charCodeAt(e)===58?(t=":",e++):(t=null,h('":"')),t===null&&(i.charCodeAt(e)===64?(t="@",e++):(t=null,h('"@"')),t===null&&(i.charCodeAt(e)===38?(t="&",e++):(t=null,h('"&"')),t===null&&(i.charCodeAt(e)===61?(t="=",e++):(t=null,h('"="')),t===null&&(i.charCodeAt(e)===43?(t="+",e++):(t=null,h('"+"')),t===null&&(i.charCodeAt(e)===36?(t="$",e++):(t=null,h('"$"')),t===null&&(i.charCodeAt(e)===44?(t=",",e++):(t=null,h('","')))))))))),t}function mi(){var t,u,c,p,y;if(p=e,y=e,t=b(),t!==null){for(u=[],c=b(),c===null&&(c=m(),c===null&&(i.charCodeAt(e)===43?(c="+",e++):(c=null,h('"+"')),c===null&&(i.charCodeAt(e)===45?(c="-",e++):(c=null,h('"-"')),c===null&&(i.charCodeAt(e)===46?(c=".",e++):(c=null,h('"."'))))));c!==null;)u.push(c),c=b(),c===null&&(c=m(),c===null&&(i.charCodeAt(e)===43?(c="+",e++):(c=null,h('"+"')),c===null&&(i.charCodeAt(e)===45?(c="-",e++):(c=null,h('"-"')),c===null&&(i.charCodeAt(e)===46?(c=".",e++):(c=null,h('"."'))))));u!==null?t=[t,u]:(t=null,e=y)}else t=null,e=y;return t!==null&&(t=function(S){k.scheme=i.substring(e,S)}(p)),t===null&&(e=p),t}function la(){var t;return t=aa(),t===null&&(t=ua()),t}function aa(){var t,u,c,p;return c=e,p=e,t=gt(),t!==null?(i.charCodeAt(e)===64?(u="@",e++):(u=null,h('"@"')),u!==null?t=[t,u]:(t=null,e=p)):(t=null,e=p),t=t!==null?t:"",t!==null?(u=Kn(),u!==null?t=[t,u]:(t=null,e=c)):(t=null,e=c),t=t!==null?t:"",t}function ua(){var t,u;if(u=te(),u===null&&(u=_e(),u===null&&(i.charCodeAt(e)===36?(u="$",e++):(u=null,h('"$"')),u===null&&(i.charCodeAt(e)===44?(u=",",e++):(u=null,h('","')),u===null&&(i.charCodeAt(e)===59?(u=";",e++):(u=null,h('";"')),u===null&&(i.charCodeAt(e)===58?(u=":",e++):(u=null,h('":"')),u===null&&(i.charCodeAt(e)===64?(u="@",e++):(u=null,h('"@"')),u===null&&(i.charCodeAt(e)===38?(u="&",e++):(u=null,h('"&"')),u===null&&(i.charCodeAt(e)===61?(u="=",e++):(u=null,h('"="')),u===null&&(i.charCodeAt(e)===43?(u="+",e++):(u=null,h('"+"'))))))))))),u!==null)for(t=[];u!==null;)t.push(u),u=te(),u===null&&(u=_e(),u===null&&(i.charCodeAt(e)===36?(u="$",e++):(u=null,h('"$"')),u===null&&(i.charCodeAt(e)===44?(u=",",e++):(u=null,h('","')),u===null&&(i.charCodeAt(e)===59?(u=";",e++):(u=null,h('";"')),u===null&&(i.charCodeAt(e)===58?(u=":",e++):(u=null,h('":"')),u===null&&(i.charCodeAt(e)===64?(u="@",e++):(u=null,h('"@"')),u===null&&(i.charCodeAt(e)===38?(u="&",e++):(u=null,h('"&"')),u===null&&(i.charCodeAt(e)===61?(u="=",e++):(u=null,h('"="')),u===null&&(i.charCodeAt(e)===43?(u="+",e++):(u=null,h('"+"')))))))))));else t=null;return t}function io(){var t,u;for(t=[],u=gi();u!==null;)t.push(u),u=gi();return t}function rs(){var t,u,c,p,y,S,O,H;if(O=e,H=e,i.substr(e,3).toLowerCase()==="sip"?(t=i.substr(e,3),e+=3):(t=null,h('"SIP"')),t!==null)if(i.charCodeAt(e)===47?(u="/",e++):(u=null,h('"/"')),u!==null){if(p=m(),p!==null)for(c=[];p!==null;)c.push(p),p=m();else c=null;if(c!==null)if(i.charCodeAt(e)===46?(p=".",e++):(p=null,h('"."')),p!==null){if(S=m(),S!==null)for(y=[];S!==null;)y.push(S),S=m();else y=null;y!==null?t=[t,u,c,p,y]:(t=null,e=H)}else t=null,e=H;else t=null,e=H}else t=null,e=H;else t=null,e=H;return t!==null&&(t=function(q){k.sip_version=i.substring(e,q)}(O)),t===null&&(e=O),t}function so(){var t;return i.substr(e,6)==="INVITE"?(t="INVITE",e+=6):(t=null,h('"INVITE"')),t}function ca(){var t;return i.substr(e,3)==="ACK"?(t="ACK",e+=3):(t=null,h('"ACK"')),t}function fa(){var t;return i.substr(e,7)==="OPTIONS"?(t="OPTIONS",e+=7):(t=null,h('"OPTIONS"')),t}function ha(){var t;return i.substr(e,3)==="BYE"?(t="BYE",e+=3):(t=null,h('"BYE"')),t}function da(){var t;return i.substr(e,6)==="CANCEL"?(t="CANCEL",e+=6):(t=null,h('"CANCEL"')),t}function oo(){var t;return i.substr(e,8)==="REGISTER"?(t="REGISTER",e+=8):(t=null,h('"REGISTER"')),t}function lo(){var t;return i.substr(e,9)==="SUBSCRIBE"?(t="SUBSCRIBE",e+=9):(t=null,h('"SUBSCRIBE"')),t}function ao(){var t;return i.substr(e,6)==="NOTIFY"?(t="NOTIFY",e+=6):(t=null,h('"NOTIFY"')),t}function is(){var t;return i.substr(e,5)==="REFER"?(t="REFER",e+=5):(t=null,h('"REFER"')),t}function ss(){var t,u;return u=e,t=so(),t===null&&(t=ca(),t===null&&(t=fa(),t===null&&(t=ha(),t===null&&(t=da(),t===null&&(t=oo(),t===null&&(t=lo(),t===null&&(t=ao(),t===null&&(t=is(),t===null&&(t=W()))))))))),t!==null&&(t=function(c){return k.method=i.substring(e,c),k.method}(u)),t===null&&(e=u),t}function uo(){var t,u,c,p,y,S;return S=e,t=rs(),t!==null?(u=P(),u!==null?(c=yi(),c!==null?(p=P(),p!==null?(y=pa(),y!==null?t=[t,u,c,p,y]:(t=null,e=S)):(t=null,e=S)):(t=null,e=S)):(t=null,e=S)):(t=null,e=S),t}function yi(){var t,u;return u=e,t=co(),t!==null&&(t=function(c,p){k.status_code=parseInt(p.join(""))}(u,t)),t===null&&(e=u),t}function co(){var t,u,c,p;return p=e,t=m(),t!==null?(u=m(),u!==null?(c=m(),c!==null?t=[t,u,c]:(t=null,e=p)):(t=null,e=p)):(t=null,e=p),t}function pa(){var t,u,c;for(c=e,t=[],u=G(),u===null&&(u=te(),u===null&&(u=_e(),u===null&&(u=de(),u===null&&(u=Z(),u===null&&(u=P(),u===null&&(u=x()))))));u!==null;)t.push(u),u=G(),u===null&&(u=te(),u===null&&(u=_e(),u===null&&(u=de(),u===null&&(u=Z(),u===null&&(u=P(),u===null&&(u=x()))))));return t!==null&&(t=function(p){k.reason_phrase=i.substring(e,p)}(c)),t===null&&(e=c),t}function _a(){var t,u,c,p,y,S;if(y=e,t=bi(),t!==null){for(u=[],S=e,c=Fe(),c!==null?(p=bi(),p!==null?c=[c,p]:(c=null,e=S)):(c=null,e=S);c!==null;)u.push(c),S=e,c=Fe(),c!==null?(p=bi(),p!==null?c=[c,p]:(c=null,e=S)):(c=null,e=S);u!==null?t=[t,u]:(t=null,e=y)}else t=null,e=y;return t}function ga(){var t,u,c,p,y,S;return p=e,y=e,t=wn(),t!==null?(S=e,i.charCodeAt(e)===64?(u="@",e++):(u=null,h('"@"')),u!==null?(c=wn(),c!==null?u=[u,c]:(u=null,e=S)):(u=null,e=S),u=u!==null?u:"",u!==null?t=[t,u]:(t=null,e=y)):(t=null,e=y),t!==null&&(t=function(O){k=i.substring(e,O)}(p)),t===null&&(e=p),t}function fo(){var t,u,c,p,y,S,O;if(y=e,t=En(),t===null)if(S=e,t=os(),t!==null){for(u=[],O=e,c=Fe(),c!==null?(p=os(),p!==null?c=[c,p]:(c=null,e=O)):(c=null,e=O);c!==null;)u.push(c),O=e,c=Fe(),c!==null?(p=os(),p!==null?c=[c,p]:(c=null,e=O)):(c=null,e=O);u!==null?t=[t,u]:(t=null,e=S)}else t=null,e=S;return t!==null&&(t=function(H){var q,pe;for(pe=k.multi_header.length,q=0;q<pe;q++)if(k.multi_header[q].parsed===null){k=null;break}k!==null?k=k.multi_header:k=-1}()),t===null&&(e=y),t}function os(){var t,u,c,p,y,S,O;if(y=e,S=e,t=Pe(),t===null&&(t=Yn()),t!==null){for(u=[],O=e,c=Ae(),c!==null?(p=Ti(),p!==null?c=[c,p]:(c=null,e=O)):(c=null,e=O);c!==null;)u.push(c),O=e,c=Ae(),c!==null?(p=Ti(),p!==null?c=[c,p]:(c=null,e=O)):(c=null,e=O);u!==null?t=[t,u]:(t=null,e=S)}else t=null,e=S;return t!==null&&(t=function(H){var q;k.multi_header||(k.multi_header=[]);try{q=new B(k.uri,k.display_name,k.params),delete k.uri,delete k.display_name,delete k.params}catch{q=null}k.multi_header.push({possition:e,offset:H,parsed:q})}(y)),t===null&&(e=y),t}function Yn(){var t,u,c,p,y;return y=e,t=$r(),t=t!==null?t:"",t!==null?(u=on(),u!==null?(c=Xe(),c!==null?(p=Bt(),p!==null?t=[t,u,c,p]:(t=null,e=y)):(t=null,e=y)):(t=null,e=y)):(t=null,e=y),t}function $r(){var t,u,c,p,y,S,O;if(y=e,S=e,t=W(),t!==null){for(u=[],O=e,c=X(),c!==null?(p=W(),p!==null?c=[c,p]:(c=null,e=O)):(c=null,e=O);c!==null;)u.push(c),O=e,c=X(),c!==null?(p=W(),p!==null?c=[c,p]:(c=null,e=O)):(c=null,e=O);u!==null?t=[t,u]:(t=null,e=S)}else t=null,e=S;return t===null&&(t=ye()),t!==null&&(t=function(H,q){typeof q=="string"?k.display_name=q:k.display_name=q[1].reduce(function(pe,je){return pe+je[0]+je[1]},q[0])}(y,t)),t===null&&(e=y),t}function Ti(){var t;return t=pr(),t===null&&(t=ho(),t===null&&(t=et())),t}function pr(){var t,u,c,p,y;return p=e,y=e,i.substr(e,1).toLowerCase()==="q"?(t=i.substr(e,1),e++):(t=null,h('"q"')),t!==null?(u=Me(),u!==null?(c=va(),c!==null?t=[t,u,c]:(t=null,e=y)):(t=null,e=y)):(t=null,e=y),t!==null&&(t=function(S,O){k.params||(k.params={}),k.params.q=O}(p,t[2])),t===null&&(e=p),t}function ho(){var t,u,c,p,y;return p=e,y=e,i.substr(e,7).toLowerCase()==="expires"?(t=i.substr(e,7),e+=7):(t=null,h('"expires"')),t!==null?(u=Me(),u!==null?(c=Jn(),c!==null?t=[t,u,c]:(t=null,e=y)):(t=null,e=y)):(t=null,e=y),t!==null&&(t=function(S,O){k.params||(k.params={}),k.params.expires=O}(p,t[2])),t===null&&(e=p),t}function Jn(){var t,u,c;if(c=e,u=m(),u!==null)for(t=[];u!==null;)t.push(u),u=m();else t=null;return t!==null&&(t=function(p,y){return parseInt(y.join(""))}(c,t)),t===null&&(e=c),t}function va(){var t,u,c,p,y,S,O,H;return S=e,O=e,i.charCodeAt(e)===48?(t="0",e++):(t=null,h('"0"')),t!==null?(H=e,i.charCodeAt(e)===46?(u=".",e++):(u=null,h('"."')),u!==null?(c=m(),c=c!==null?c:"",c!==null?(p=m(),p=p!==null?p:"",p!==null?(y=m(),y=y!==null?y:"",y!==null?u=[u,c,p,y]:(u=null,e=H)):(u=null,e=H)):(u=null,e=H)):(u=null,e=H),u=u!==null?u:"",u!==null?t=[t,u]:(t=null,e=O)):(t=null,e=O),t!==null&&(t=function(q){return parseFloat(i.substring(e,q))}(S)),t===null&&(e=S),t}function et(){var t,u,c,p,y,S;return p=e,y=e,t=W(),t!==null?(S=e,u=Me(),u!==null?(c=po(),c!==null?u=[u,c]:(u=null,e=S)):(u=null,e=S),u=u!==null?u:"",u!==null?t=[t,u]:(t=null,e=y)):(t=null,e=y),t!==null&&(t=function(O,H,q){k.params||(k.params={}),typeof q>"u"?q=void 0:q=q[1],k.params[H.toLowerCase()]=q}(p,t[0],t[1])),t===null&&(e=p),t}function po(){var t;return t=W(),t===null&&(t=Cn(),t===null&&(t=St())),t}function ma(){var t,u,c,p,y,S;if(y=e,t=_o(),t!==null){for(u=[],S=e,c=Ae(),c!==null?(p=go(),p!==null?c=[c,p]:(c=null,e=S)):(c=null,e=S);c!==null;)u.push(c),S=e,c=Ae(),c!==null?(p=go(),p!==null?c=[c,p]:(c=null,e=S)):(c=null,e=S);u!==null?t=[t,u]:(t=null,e=y)}else t=null,e=y;return t}function _o(){var t;return i.substr(e,6).toLowerCase()==="render"?(t=i.substr(e,6),e+=6):(t=null,h('"render"')),t===null&&(i.substr(e,7).toLowerCase()==="session"?(t=i.substr(e,7),e+=7):(t=null,h('"session"')),t===null&&(i.substr(e,4).toLowerCase()==="icon"?(t=i.substr(e,4),e+=4):(t=null,h('"icon"')),t===null&&(i.substr(e,5).toLowerCase()==="alert"?(t=i.substr(e,5),e+=5):(t=null,h('"alert"')),t===null&&(t=W())))),t}function go(){var t;return t=ya(),t===null&&(t=et()),t}function ya(){var t,u,c,p;return p=e,i.substr(e,8).toLowerCase()==="handling"?(t=i.substr(e,8),e+=8):(t=null,h('"handling"')),t!==null?(u=Me(),u!==null?(i.substr(e,8).toLowerCase()==="optional"?(c=i.substr(e,8),e+=8):(c=null,h('"optional"')),c===null&&(i.substr(e,8).toLowerCase()==="required"?(c=i.substr(e,8),e+=8):(c=null,h('"required"')),c===null&&(c=W())),c!==null?t=[t,u,c]:(t=null,e=p)):(t=null,e=p)):(t=null,e=p),t}function Jc(){var t,u,c,p,y,S;if(y=e,t=W(),t!==null){for(u=[],S=e,c=Fe(),c!==null?(p=W(),p!==null?c=[c,p]:(c=null,e=S)):(c=null,e=S);c!==null;)u.push(c),S=e,c=Fe(),c!==null?(p=W(),p!==null?c=[c,p]:(c=null,e=S)):(c=null,e=S);u!==null?t=[t,u]:(t=null,e=y)}else t=null,e=y;return t}function Ta(){var t,u,c;if(c=e,u=m(),u!==null)for(t=[];u!==null;)t.push(u),u=m();else t=null;return t!==null&&(t=function(p,y){k=parseInt(y.join(""))}(c,t)),t===null&&(e=c),t}function Xc(){var t,u;return u=e,t=ba(),t!==null&&(t=function(c){k=i.substring(e,c)}(u)),t===null&&(e=u),t}function ba(){var t,u,c,p,y,S,O,H;if(O=e,t=Sa(),t!==null)if(u=ht(),u!==null)if(c=Ca(),c!==null){for(p=[],H=e,y=Ae(),y!==null?(S=vo(),S!==null?y=[y,S]:(y=null,e=H)):(y=null,e=H);y!==null;)p.push(y),H=e,y=Ae(),y!==null?(S=vo(),S!==null?y=[y,S]:(y=null,e=H)):(y=null,e=H);p!==null?t=[t,u,c,p]:(t=null,e=O)}else t=null,e=O;else t=null,e=O;else t=null,e=O;return t}function Sa(){var t;return t=wa(),t===null&&(t=ls()),t}function wa(){var t;return i.substr(e,4).toLowerCase()==="text"?(t=i.substr(e,4),e+=4):(t=null,h('"text"')),t===null&&(i.substr(e,5).toLowerCase()==="image"?(t=i.substr(e,5),e+=5):(t=null,h('"image"')),t===null&&(i.substr(e,5).toLowerCase()==="audio"?(t=i.substr(e,5),e+=5):(t=null,h('"audio"')),t===null&&(i.substr(e,5).toLowerCase()==="video"?(t=i.substr(e,5),e+=5):(t=null,h('"video"')),t===null&&(i.substr(e,11).toLowerCase()==="application"?(t=i.substr(e,11),e+=11):(t=null,h('"application"')),t===null&&(t=as()))))),t}function ls(){var t;return i.substr(e,7).toLowerCase()==="message"?(t=i.substr(e,7),e+=7):(t=null,h('"message"')),t===null&&(i.substr(e,9).toLowerCase()==="multipart"?(t=i.substr(e,9),e+=9):(t=null,h('"multipart"')),t===null&&(t=as())),t}function as(){var t;return t=W(),t===null&&(t=Ea()),t}function Ea(){var t,u,c;return c=e,i.substr(e,2).toLowerCase()==="x-"?(t=i.substr(e,2),e+=2):(t=null,h('"x-"')),t!==null?(u=W(),u!==null?t=[t,u]:(t=null,e=c)):(t=null,e=c),t}function Ca(){var t;return t=as(),t===null&&(t=W()),t}function vo(){var t,u,c,p;return p=e,t=W(),t!==null?(u=Me(),u!==null?(c=Aa(),c!==null?t=[t,u,c]:(t=null,e=p)):(t=null,e=p)):(t=null,e=p),t}function Aa(){var t;return t=W(),t===null&&(t=St()),t}function Ge(){var t,u,c,p;return p=e,t=qe(),t!==null?(u=X(),u!==null?(c=ss(),c!==null?t=[t,u,c]:(t=null,e=p)):(t=null,e=p)):(t=null,e=p),t}function qe(){var t,u,c;if(c=e,u=m(),u!==null)for(t=[];u!==null;)t.push(u),u=m();else t=null;return t!==null&&(t=function(p,y){k.value=parseInt(y.join(""))}(c,t)),t===null&&(e=c),t}function Qc(){var t,u;return u=e,t=Jn(),t!==null&&(t=function(c,p){k=p}(u,t)),t===null&&(e=u),t}function Zc(){var t,u,c,p,y,S,O;if(y=e,S=e,t=bi(),t!==null){for(u=[],O=e,c=Ae(),c!==null?(p=et(),p!==null?c=[c,p]:(c=null,e=O)):(c=null,e=O);c!==null;)u.push(c),O=e,c=Ae(),c!==null?(p=et(),p!==null?c=[c,p]:(c=null,e=O)):(c=null,e=O);u!==null?t=[t,u]:(t=null,e=S)}else t=null,e=S;return t!==null&&(t=function(H,q){k.event=q.join("").toLowerCase()}(y,t[0])),t===null&&(e=y),t}function bi(){var t,u,c,p,y,S;if(y=e,t=ne(),t!==null){for(u=[],S=e,i.charCodeAt(e)===46?(c=".",e++):(c=null,h('"."')),c!==null?(p=ne(),p!==null?c=[c,p]:(c=null,e=S)):(c=null,e=S);c!==null;)u.push(c),S=e,i.charCodeAt(e)===46?(c=".",e++):(c=null,h('"."')),c!==null?(p=ne(),p!==null?c=[c,p]:(c=null,e=S)):(c=null,e=S);u!==null?t=[t,u]:(t=null,e=y)}else t=null,e=y;return t}function ef(){var t,u,c,p,y,S,O;if(y=e,S=e,t=Pe(),t===null&&(t=Yn()),t!==null){for(u=[],O=e,c=Ae(),c!==null?(p=mo(),p!==null?c=[c,p]:(c=null,e=O)):(c=null,e=O);c!==null;)u.push(c),O=e,c=Ae(),c!==null?(p=mo(),p!==null?c=[c,p]:(c=null,e=O)):(c=null,e=O);u!==null?t=[t,u]:(t=null,e=S)}else t=null,e=S;return t!==null&&(t=function(H){var q=k.tag;try{k=new B(k.uri,k.display_name,k.params),q&&k.setParam("tag",q)}catch{k=-1}}()),t===null&&(e=y),t}function mo(){var t;return t=yo(),t===null&&(t=et()),t}function yo(){var t,u,c,p,y;return p=e,y=e,i.substr(e,3).toLowerCase()==="tag"?(t=i.substr(e,3),e+=3):(t=null,h('"tag"')),t!==null?(u=Me(),u!==null?(c=W(),c!==null?t=[t,u,c]:(t=null,e=y)):(t=null,e=y)):(t=null,e=y),t!==null&&(t=function(S,O){k.tag=O}(p,t[2])),t===null&&(e=p),t}function Ra(){var t,u,c;if(c=e,u=m(),u!==null)for(t=[];u!==null;)t.push(u),u=m();else t=null;return t!==null&&(t=function(p,y){k=parseInt(y.join(""))}(c,t)),t===null&&(e=c),t}function tf(){var t,u;return u=e,t=Jn(),t!==null&&(t=function(c,p){k=p}(u,t)),t===null&&(e=u),t}function vt(){var t,u,c,p,y,S,O,H,q,pe;for(H=e,q=e,t=[],u=$r();u!==null;)t.push(u),u=$r();if(t!==null)if(u=on(),u!==null)if(c=Xe(),c!==null)if(p=Bt(),p!==null){for(y=[],pe=e,S=Ae(),S!==null?(O=et(),O!==null?S=[S,O]:(S=null,e=pe)):(S=null,e=pe);S!==null;)y.push(S),pe=e,S=Ae(),S!==null?(O=et(),O!==null?S=[S,O]:(S=null,e=pe)):(S=null,e=pe);y!==null?t=[t,u,c,p,y]:(t=null,e=q)}else t=null,e=q;else t=null,e=q;else t=null,e=q;else t=null,e=q;return t!==null&&(t=function(je){try{k=new B(k.uri,k.display_name,k.params)}catch{k=-1}}()),t===null&&(e=H),t}function To(){var t;return t=Mn(),t}function Mn(){var t,u,c,p,y,S,O,H;if(O=e,i.substr(e,6).toLowerCase()==="digest"?(t=i.substr(e,6),e+=6):(t=null,h('"Digest"')),t!==null)if(u=X(),u!==null)if(c=At(),c!==null){for(p=[],H=e,y=Fe(),y!==null?(S=At(),S!==null?y=[y,S]:(y=null,e=H)):(y=null,e=H);y!==null;)p.push(y),H=e,y=Fe(),y!==null?(S=At(),S!==null?y=[y,S]:(y=null,e=H)):(y=null,e=H);p!==null?t=[t,u,c,p]:(t=null,e=O)}else t=null,e=O;else t=null,e=O;else t=null,e=O;return t===null&&(t=bo()),t}function bo(){var t,u,c,p,y,S,O,H;if(O=e,t=W(),t!==null)if(u=X(),u!==null)if(c=_r(),c!==null){for(p=[],H=e,y=Fe(),y!==null?(S=_r(),S!==null?y=[y,S]:(y=null,e=H)):(y=null,e=H);y!==null;)p.push(y),H=e,y=Fe(),y!==null?(S=_r(),S!==null?y=[y,S]:(y=null,e=H)):(y=null,e=H);p!==null?t=[t,u,c,p]:(t=null,e=O)}else t=null,e=O;else t=null,e=O;else t=null,e=O;return t}function _r(){var t,u,c,p;return p=e,t=W(),t!==null?(u=Me(),u!==null?(c=W(),c===null&&(c=St()),c!==null?t=[t,u,c]:(t=null,e=p)):(t=null,e=p)):(t=null,e=p),t}function At(){var t;return t=So(),t===null&&(t=Eo(),t===null&&(t=Co(),t===null&&(t=xt(),t===null&&(t=Oa(),t===null&&(t=qt(),t===null&&(t=Ia(),t===null&&(t=_r()))))))),t}function So(){var t,u,c,p;return p=e,i.substr(e,5).toLowerCase()==="realm"?(t=i.substr(e,5),e+=5):(t=null,h('"realm"')),t!==null?(u=Me(),u!==null?(c=wo(),c!==null?t=[t,u,c]:(t=null,e=p)):(t=null,e=p)):(t=null,e=p),t}function wo(){var t,u;return u=e,t=ye(),t!==null&&(t=function(c,p){k.realm=p}(u,t)),t===null&&(e=u),t}function Eo(){var t,u,c,p,y,S,O,H,q;if(H=e,i.substr(e,6).toLowerCase()==="domain"?(t=i.substr(e,6),e+=6):(t=null,h('"domain"')),t!==null)if(u=Me(),u!==null)if(c=zn(),c!==null)if(p=Si(),p!==null){if(y=[],q=e,O=P(),O!==null)for(S=[];O!==null;)S.push(O),O=P();else S=null;for(S!==null?(O=Si(),O!==null?S=[S,O]:(S=null,e=q)):(S=null,e=q);S!==null;){if(y.push(S),q=e,O=P(),O!==null)for(S=[];O!==null;)S.push(O),O=P();else S=null;S!==null?(O=Si(),O!==null?S=[S,O]:(S=null,e=q)):(S=null,e=q)}y!==null?(S=an(),S!==null?t=[t,u,c,p,y,S]:(t=null,e=H)):(t=null,e=H)}else t=null,e=H;else t=null,e=H;else t=null,e=H;else t=null,e=H;return t}function Si(){var t;return t=no(),t===null&&(t=ts()),t}function Co(){var t,u,c,p;return p=e,i.substr(e,5).toLowerCase()==="nonce"?(t=i.substr(e,5),e+=5):(t=null,h('"nonce"')),t!==null?(u=Me(),u!==null?(c=Ao(),c!==null?t=[t,u,c]:(t=null,e=p)):(t=null,e=p)):(t=null,e=p),t}function Ao(){var t,u;return u=e,t=ye(),t!==null&&(t=function(c,p){k.nonce=p}(u,t)),t===null&&(e=u),t}function xt(){var t,u,c,p,y;return p=e,y=e,i.substr(e,6).toLowerCase()==="opaque"?(t=i.substr(e,6),e+=6):(t=null,h('"opaque"')),t!==null?(u=Me(),u!==null?(c=ye(),c!==null?t=[t,u,c]:(t=null,e=y)):(t=null,e=y)):(t=null,e=y),t!==null&&(t=function(S,O){k.opaque=O}(p,t[2])),t===null&&(e=p),t}function Oa(){var t,u,c,p,y;return p=e,i.substr(e,5).toLowerCase()==="stale"?(t=i.substr(e,5),e+=5):(t=null,h('"stale"')),t!==null?(u=Me(),u!==null?(y=e,i.substr(e,4).toLowerCase()==="true"?(c=i.substr(e,4),e+=4):(c=null,h('"true"')),c!==null&&(c=function(S){k.stale=!0}()),c===null&&(e=y),c===null&&(y=e,i.substr(e,5).toLowerCase()==="false"?(c=i.substr(e,5),e+=5):(c=null,h('"false"')),c!==null&&(c=function(S){k.stale=!1}()),c===null&&(e=y)),c!==null?t=[t,u,c]:(t=null,e=p)):(t=null,e=p)):(t=null,e=p),t}function qt(){var t,u,c,p,y;return p=e,y=e,i.substr(e,9).toLowerCase()==="algorithm"?(t=i.substr(e,9),e+=9):(t=null,h('"algorithm"')),t!==null?(u=Me(),u!==null?(i.substr(e,3).toLowerCase()==="md5"?(c=i.substr(e,3),e+=3):(c=null,h('"MD5"')),c===null&&(i.substr(e,8).toLowerCase()==="md5-sess"?(c=i.substr(e,8),e+=8):(c=null,h('"MD5-sess"')),c===null&&(c=W())),c!==null?t=[t,u,c]:(t=null,e=y)):(t=null,e=y)):(t=null,e=y),t!==null&&(t=function(S,O){k.algorithm=O.toUpperCase()}(p,t[2])),t===null&&(e=p),t}function Ia(){var t,u,c,p,y,S,O,H,q,pe;if(H=e,i.substr(e,3).toLowerCase()==="qop"?(t=i.substr(e,3),e+=3):(t=null,h('"qop"')),t!==null)if(u=Me(),u!==null)if(c=zn(),c!==null){if(q=e,p=wi(),p!==null){for(y=[],pe=e,i.charCodeAt(e)===44?(S=",",e++):(S=null,h('","')),S!==null?(O=wi(),O!==null?S=[S,O]:(S=null,e=pe)):(S=null,e=pe);S!==null;)y.push(S),pe=e,i.charCodeAt(e)===44?(S=",",e++):(S=null,h('","')),S!==null?(O=wi(),O!==null?S=[S,O]:(S=null,e=pe)):(S=null,e=pe);y!==null?p=[p,y]:(p=null,e=q)}else p=null,e=q;p!==null?(y=an(),y!==null?t=[t,u,c,p,y]:(t=null,e=H)):(t=null,e=H)}else t=null,e=H;else t=null,e=H;else t=null,e=H;return t}function wi(){var t,u;return u=e,i.substr(e,8).toLowerCase()==="auth-int"?(t=i.substr(e,8),e+=8):(t=null,h('"auth-int"')),t===null&&(i.substr(e,4).toLowerCase()==="auth"?(t=i.substr(e,4),e+=4):(t=null,h('"auth"')),t===null&&(t=W())),t!==null&&(t=function(c,p){k.qop||(k.qop=[]),k.qop.push(p.toLowerCase())}(u,t)),t===null&&(e=u),t}function Xn(){var t,u,c,p,y,S;if(y=e,t=W(),t!==null){for(u=[],S=e,c=Fe(),c!==null?(p=W(),p!==null?c=[c,p]:(c=null,e=S)):(c=null,e=S);c!==null;)u.push(c),S=e,c=Fe(),c!==null?(p=W(),p!==null?c=[c,p]:(c=null,e=S)):(c=null,e=S);u!==null?t=[t,u]:(t=null,e=y)}else t=null,e=y;return t}function us(){var t,u,c,p,y,S,O;if(y=e,S=e,t=Hr(),t!==null){for(u=[],O=e,c=Fe(),c!==null?(p=Hr(),p!==null?c=[c,p]:(c=null,e=O)):(c=null,e=O);c!==null;)u.push(c),O=e,c=Fe(),c!==null?(p=Hr(),p!==null?c=[c,p]:(c=null,e=O)):(c=null,e=O);u!==null?t=[t,u]:(t=null,e=S)}else t=null,e=S;return t!==null&&(t=function(H){var q,pe;for(pe=k.multi_header.length,q=0;q<pe;q++)if(k.multi_header[q].parsed===null){k=null;break}k!==null?k=k.multi_header:k=-1}()),t===null&&(e=y),t}function Hr(){var t,u,c,p,y,S,O;if(y=e,S=e,t=Yn(),t!==null){for(u=[],O=e,c=Ae(),c!==null?(p=et(),p!==null?c=[c,p]:(c=null,e=O)):(c=null,e=O);c!==null;)u.push(c),O=e,c=Ae(),c!==null?(p=et(),p!==null?c=[c,p]:(c=null,e=O)):(c=null,e=O);u!==null?t=[t,u]:(t=null,e=S)}else t=null,e=S;return t!==null&&(t=function(H){var q;k.multi_header||(k.multi_header=[]);try{q=new B(k.uri,k.display_name,k.params),delete k.uri,delete k.display_name,delete k.params}catch{q=null}k.multi_header.push({possition:e,offset:H,parsed:q})}(y)),t===null&&(e=y),t}function Ke(){var t,u,c,p,y,S,O;if(y=e,S=e,i.substr(e,3).toLowerCase()==="sip"?(t=i.substr(e,3),e+=3):(t=null,h('"SIP"')),t===null&&(t=W()),t!==null){for(u=[],O=e,c=Ae(),c!==null?(p=An(),p!==null?c=[c,p]:(c=null,e=O)):(c=null,e=O);c!==null;)u.push(c),O=e,c=Ae(),c!==null?(p=An(),p!==null?c=[c,p]:(c=null,e=O)):(c=null,e=O);u!==null?t=[t,u]:(t=null,e=S)}else t=null,e=S;return t!==null&&(t=function(H,q){if(k.protocol=q.toLowerCase(),k.params||(k.params={}),k.params.text&&k.params.text[0]==='"'){var pe=k.params.text;k.text=pe.substring(1,pe.length-1),delete k.params.text}}(y,t[0])),t===null&&(e=y),t}function An(){var t;return t=cs(),t===null&&(t=et()),t}function cs(){var t,u,c,p,y,S;if(y=e,S=e,i.substr(e,5).toLowerCase()==="cause"?(t=i.substr(e,5),e+=5):(t=null,h('"cause"')),t!==null)if(u=Me(),u!==null){if(p=m(),p!==null)for(c=[];p!==null;)c.push(p),p=m();else c=null;c!==null?t=[t,u,c]:(t=null,e=S)}else t=null,e=S;else t=null,e=S;return t!==null&&(t=function(O,H){k.cause=parseInt(H.join(""))}(y,t[2])),t===null&&(e=y),t}function nf(){var t,u,c,p,y,S;if(y=e,t=W(),t!==null){for(u=[],S=e,c=Fe(),c!==null?(p=W(),p!==null?c=[c,p]:(c=null,e=S)):(c=null,e=S);c!==null;)u.push(c),S=e,c=Fe(),c!==null?(p=W(),p!==null?c=[c,p]:(c=null,e=S)):(c=null,e=S);u!==null?t=[t,u]:(t=null,e=y)}else t=null,e=y;return t}function Ro(){var t,u,c,p,y,S;if(y=e,t=fs(),t!==null){for(u=[],S=e,c=Fe(),c!==null?(p=fs(),p!==null?c=[c,p]:(c=null,e=S)):(c=null,e=S);c!==null;)u.push(c),S=e,c=Fe(),c!==null?(p=fs(),p!==null?c=[c,p]:(c=null,e=S)):(c=null,e=S);u!==null?t=[t,u]:(t=null,e=y)}else t=null,e=y;return t}function fs(){var t,u,c,p,y,S;if(y=e,t=Yn(),t!==null){for(u=[],S=e,c=Ae(),c!==null?(p=et(),p!==null?c=[c,p]:(c=null,e=S)):(c=null,e=S);c!==null;)u.push(c),S=e,c=Ae(),c!==null?(p=et(),p!==null?c=[c,p]:(c=null,e=S)):(c=null,e=S);u!==null?t=[t,u]:(t=null,e=y)}else t=null,e=y;return t}function rf(){var t,u,c,p,y,S;if(y=e,t=ka(),t!==null){for(u=[],S=e,c=Ae(),c!==null?(p=hs(),p!==null?c=[c,p]:(c=null,e=S)):(c=null,e=S);c!==null;)u.push(c),S=e,c=Ae(),c!==null?(p=hs(),p!==null?c=[c,p]:(c=null,e=S)):(c=null,e=S);u!==null?t=[t,u]:(t=null,e=y)}else t=null,e=y;return t}function ka(){var t,u;return u=e,i.substr(e,6).toLowerCase()==="active"?(t=i.substr(e,6),e+=6):(t=null,h('"active"')),t===null&&(i.substr(e,7).toLowerCase()==="pending"?(t=i.substr(e,7),e+=7):(t=null,h('"pending"')),t===null&&(i.substr(e,10).toLowerCase()==="terminated"?(t=i.substr(e,10),e+=10):(t=null,h('"terminated"')),t===null&&(t=W()))),t!==null&&(t=function(c){k.state=i.substring(e,c)}(u)),t===null&&(e=u),t}function hs(){var t,u,c,p,y;return p=e,y=e,i.substr(e,6).toLowerCase()==="reason"?(t=i.substr(e,6),e+=6):(t=null,h('"reason"')),t!==null?(u=Me(),u!==null?(c=Ei(),c!==null?t=[t,u,c]:(t=null,e=y)):(t=null,e=y)):(t=null,e=y),t!==null&&(t=function(S,O){typeof O<"u"&&(k.reason=O)}(p,t[2])),t===null&&(e=p),t===null&&(p=e,y=e,i.substr(e,7).toLowerCase()==="expires"?(t=i.substr(e,7),e+=7):(t=null,h('"expires"')),t!==null?(u=Me(),u!==null?(c=Jn(),c!==null?t=[t,u,c]:(t=null,e=y)):(t=null,e=y)):(t=null,e=y),t!==null&&(t=function(S,O){typeof O<"u"&&(k.expires=O)}(p,t[2])),t===null&&(e=p),t===null&&(p=e,y=e,i.substr(e,11).toLowerCase()==="retry_after"?(t=i.substr(e,11),e+=11):(t=null,h('"retry_after"')),t!==null?(u=Me(),u!==null?(c=Jn(),c!==null?t=[t,u,c]:(t=null,e=y)):(t=null,e=y)):(t=null,e=y),t!==null&&(t=function(S,O){typeof O<"u"&&(k.retry_after=O)}(p,t[2])),t===null&&(e=p),t===null&&(t=et()))),t}function Ei(){var t;return i.substr(e,11).toLowerCase()==="deactivated"?(t=i.substr(e,11),e+=11):(t=null,h('"deactivated"')),t===null&&(i.substr(e,9).toLowerCase()==="probation"?(t=i.substr(e,9),e+=9):(t=null,h('"probation"')),t===null&&(i.substr(e,8).toLowerCase()==="rejected"?(t=i.substr(e,8),e+=8):(t=null,h('"rejected"')),t===null&&(i.substr(e,7).toLowerCase()==="timeout"?(t=i.substr(e,7),e+=7):(t=null,h('"timeout"')),t===null&&(i.substr(e,6).toLowerCase()==="giveup"?(t=i.substr(e,6),e+=6):(t=null,h('"giveup"')),t===null&&(i.substr(e,10).toLowerCase()==="noresource"?(t=i.substr(e,10),e+=10):(t=null,h('"noresource"')),t===null&&(i.substr(e,9).toLowerCase()==="invariant"?(t=i.substr(e,9),e+=9):(t=null,h('"invariant"')),t===null&&(t=W()))))))),t}function Br(){var t;return t=me(),t=t!==null?t:"",t}function sf(){var t,u,c,p,y,S;if(y=e,t=W(),t!==null){for(u=[],S=e,c=Fe(),c!==null?(p=W(),p!==null?c=[c,p]:(c=null,e=S)):(c=null,e=S);c!==null;)u.push(c),S=e,c=Fe(),c!==null?(p=W(),p!==null?c=[c,p]:(c=null,e=S)):(c=null,e=S);u!==null?t=[t,u]:(t=null,e=y)}else t=null,e=y;return t=t!==null?t:"",t}function Pa(){var t,u,c,p,y,S,O;if(y=e,S=e,t=Pe(),t===null&&(t=Yn()),t!==null){for(u=[],O=e,c=Ae(),c!==null?(p=ds(),p!==null?c=[c,p]:(c=null,e=O)):(c=null,e=O);c!==null;)u.push(c),O=e,c=Ae(),c!==null?(p=ds(),p!==null?c=[c,p]:(c=null,e=O)):(c=null,e=O);u!==null?t=[t,u]:(t=null,e=S)}else t=null,e=S;return t!==null&&(t=function(H){var q=k.tag;try{k=new B(k.uri,k.display_name,k.params),q&&k.setParam("tag",q)}catch{k=-1}}()),t===null&&(e=y),t}function ds(){var t;return t=yo(),t===null&&(t=et()),t}function Oo(){var t,u,c,p,y,S;if(y=e,t=qr(),t!==null){for(u=[],S=e,c=Fe(),c!==null?(p=qr(),p!==null?c=[c,p]:(c=null,e=S)):(c=null,e=S);c!==null;)u.push(c),S=e,c=Fe(),c!==null?(p=qr(),p!==null?c=[c,p]:(c=null,e=S)):(c=null,e=S);u!==null?t=[t,u]:(t=null,e=y)}else t=null,e=y;return t}function qr(){var t,u,c,p,y,S,O,H;if(O=e,t=vs(),t!==null)if(u=X(),u!==null)if(c=Po(),c!==null){for(p=[],H=e,y=Ae(),y!==null?(S=ps(),S!==null?y=[y,S]:(y=null,e=H)):(y=null,e=H);y!==null;)p.push(y),H=e,y=Ae(),y!==null?(S=ps(),S!==null?y=[y,S]:(y=null,e=H)):(y=null,e=H);p!==null?t=[t,u,c,p]:(t=null,e=O)}else t=null,e=O;else t=null,e=O;else t=null,e=O;return t}function ps(){var t;return t=Na(),t===null&&(t=_s(),t===null&&(t=gs(),t===null&&(t=xa(),t===null&&(t=Io(),t===null&&(t=et()))))),t}function Na(){var t,u,c,p,y;return p=e,y=e,i.substr(e,3).toLowerCase()==="ttl"?(t=i.substr(e,3),e+=3):(t=null,h('"ttl"')),t!==null?(u=Me(),u!==null?(c=No(),c!==null?t=[t,u,c]:(t=null,e=y)):(t=null,e=y)):(t=null,e=y),t!==null&&(t=function(S,O){k.ttl=O}(p,t[2])),t===null&&(e=p),t}function _s(){var t,u,c,p,y;return p=e,y=e,i.substr(e,5).toLowerCase()==="maddr"?(t=i.substr(e,5),e+=5):(t=null,h('"maddr"')),t!==null?(u=Me(),u!==null?(c=Cn(),c!==null?t=[t,u,c]:(t=null,e=y)):(t=null,e=y)):(t=null,e=y),t!==null&&(t=function(S,O){k.maddr=O}(p,t[2])),t===null&&(e=p),t}function gs(){var t,u,c,p,y;return p=e,y=e,i.substr(e,8).toLowerCase()==="received"?(t=i.substr(e,8),e+=8):(t=null,h('"received"')),t!==null?(u=Me(),u!==null?(c=hr(),c===null&&(c=di()),c!==null?t=[t,u,c]:(t=null,e=y)):(t=null,e=y)):(t=null,e=y),t!==null&&(t=function(S,O){k.received=O}(p,t[2])),t===null&&(e=p),t}function xa(){var t,u,c,p,y;return p=e,y=e,i.substr(e,6).toLowerCase()==="branch"?(t=i.substr(e,6),e+=6):(t=null,h('"branch"')),t!==null?(u=Me(),u!==null?(c=W(),c!==null?t=[t,u,c]:(t=null,e=y)):(t=null,e=y)):(t=null,e=y),t!==null&&(t=function(S,O){k.branch=O}(p,t[2])),t===null&&(e=p),t}function Io(){var t,u,c,p,y;return p=e,i.substr(e,5).toLowerCase()==="rport"?(t=i.substr(e,5),e+=5):(t=null,h('"rport"')),t!==null?(y=e,u=Me(),u!==null?(c=Dt(),c!==null?u=[u,c]:(u=null,e=y)):(u=null,e=y),u=u!==null?u:"",u!==null?t=[t,u]:(t=null,e=p)):(t=null,e=p),t}function Dt(){var t,u,c,p,y,S,O;return S=e,O=e,t=m(),t=t!==null?t:"",t!==null?(u=m(),u=u!==null?u:"",u!==null?(c=m(),c=c!==null?c:"",c!==null?(p=m(),p=p!==null?p:"",p!==null?(y=m(),y=y!==null?y:"",y!==null?t=[t,u,c,p,y]:(t=null,e=O)):(t=null,e=O)):(t=null,e=O)):(t=null,e=O)):(t=null,e=O),t!==null&&(t=function(H,q){k.rport=parseInt(q.join(""))}(S,t)),t===null&&(e=S),t}function vs(){var t,u,c,p,y,S;return S=e,t=Wr(),t!==null?(u=ht(),u!==null?(c=W(),c!==null?(p=ht(),p!==null?(y=ko(),y!==null?t=[t,u,c,p,y]:(t=null,e=S)):(t=null,e=S)):(t=null,e=S)):(t=null,e=S)):(t=null,e=S),t}function Wr(){var t,u;return u=e,i.substr(e,3).toLowerCase()==="sip"?(t=i.substr(e,3),e+=3):(t=null,h('"SIP"')),t===null&&(t=W()),t!==null&&(t=function(c,p){k.protocol=p}(u,t)),t===null&&(e=u),t}function ko(){var t,u;return u=e,i.substr(e,3).toLowerCase()==="udp"?(t=i.substr(e,3),e+=3):(t=null,h('"UDP"')),t===null&&(i.substr(e,3).toLowerCase()==="tcp"?(t=i.substr(e,3),e+=3):(t=null,h('"TCP"')),t===null&&(i.substr(e,3).toLowerCase()==="tls"?(t=i.substr(e,3),e+=3):(t=null,h('"TLS"')),t===null&&(i.substr(e,4).toLowerCase()==="sctp"?(t=i.substr(e,4),e+=4):(t=null,h('"SCTP"')),t===null&&(t=W())))),t!==null&&(t=function(c,p){k.transport=p}(u,t)),t===null&&(e=u),t}function Po(){var t,u,c,p,y;return p=e,t=Da(),t!==null?(y=e,u=ln(),u!==null?(c=La(),c!==null?u=[u,c]:(u=null,e=y)):(u=null,e=y),u=u!==null?u:"",u!==null?t=[t,u]:(t=null,e=p)):(t=null,e=p),t}function Da(){var t,u;return u=e,t=hr(),t===null&&(t=hi(),t===null&&(t=ci())),t!==null&&(t=function(c){k.host=i.substring(e,c)}(u)),t===null&&(e=u),t}function La(){var t,u,c,p,y,S,O;return S=e,O=e,t=m(),t=t!==null?t:"",t!==null?(u=m(),u=u!==null?u:"",u!==null?(c=m(),c=c!==null?c:"",c!==null?(p=m(),p=p!==null?p:"",p!==null?(y=m(),y=y!==null?y:"",y!==null?t=[t,u,c,p,y]:(t=null,e=O)):(t=null,e=O)):(t=null,e=O)):(t=null,e=O)):(t=null,e=O),t!==null&&(t=function(H,q){k.port=parseInt(q.join(""))}(S,t)),t===null&&(e=S),t}function No(){var t,u,c,p,y;return p=e,y=e,t=m(),t!==null?(u=m(),u=u!==null?u:"",u!==null?(c=m(),c=c!==null?c:"",c!==null?t=[t,u,c]:(t=null,e=y)):(t=null,e=y)):(t=null,e=y),t!==null&&(t=function(S,O){return parseInt(O.join(""))}(p,t)),t===null&&(e=p),t}function of(){var t;return t=Mn(),t}function lf(){var t,u,c,p,y,S;if(y=e,t=gr(),t!==null){for(u=[],S=e,c=Ae(),c!==null?(p=xo(),p!==null?c=[c,p]:(c=null,e=S)):(c=null,e=S);c!==null;)u.push(c),S=e,c=Ae(),c!==null?(p=xo(),p!==null?c=[c,p]:(c=null,e=S)):(c=null,e=S);u!==null?t=[t,u]:(t=null,e=y)}else t=null,e=y;return t}function gr(){var t,u;return u=e,t=Jn(),t!==null&&(t=function(c,p){k.expires=p}(u,t)),t===null&&(e=u),t}function xo(){var t;return t=Ua(),t===null&&(t=et()),t}function Ua(){var t,u,c,p,y;return p=e,y=e,i.substr(e,9).toLowerCase()==="refresher"?(t=i.substr(e,9),e+=9):(t=null,h('"refresher"')),t!==null?(u=Me(),u!==null?(i.substr(e,3).toLowerCase()==="uac"?(c=i.substr(e,3),e+=3):(c=null,h('"uac"')),c===null&&(i.substr(e,3).toLowerCase()==="uas"?(c=i.substr(e,3),e+=3):(c=null,h('"uas"'))),c!==null?t=[t,u,c]:(t=null,e=y)):(t=null,e=y)):(t=null,e=y),t!==null&&(t=function(S,O){k.refresher=O.toLowerCase()}(p,t[2])),t===null&&(e=p),t}function Do(){var t,u,c,p;return p=e,t=W(),t!==null?(u=se(),u!==null?(c=Lo(),c!==null?t=[t,u,c]:(t=null,e=p)):(t=null,e=p)):(t=null,e=p),t}function Lo(){var t,u;for(t=[],u=ie(),u===null&&(u=Z(),u===null&&(u=X()));u!==null;)t.push(u),u=ie(),u===null&&(u=Z(),u===null&&(u=X()));return t}function Qn(){var t,u;for(t=[],u=N();u!==null;)t.push(u),u=N();return t}function ms(){var t,u,c;return c=e,i.substr(e,5)==="uuid:"?(t="uuid:",e+=5):(t=null,h('"uuid:"')),t!==null?(u=Ma(),u!==null?t=[t,u]:(t=null,e=c)):(t=null,e=c),t}function Ma(){var t,u,c,p,y,S,O,H,q,pe,je;return pe=e,je=e,t=Fa(),t!==null?(i.charCodeAt(e)===45?(u="-",e++):(u=null,h('"-"')),u!==null?(c=Fn(),c!==null?(i.charCodeAt(e)===45?(p="-",e++):(p=null,h('"-"')),p!==null?(y=Fn(),y!==null?(i.charCodeAt(e)===45?(S="-",e++):(S=null,h('"-"')),S!==null?(O=Fn(),O!==null?(i.charCodeAt(e)===45?(H="-",e++):(H=null,h('"-"')),H!==null?(q=vr(),q!==null?t=[t,u,c,p,y,S,O,H,q]:(t=null,e=je)):(t=null,e=je)):(t=null,e=je)):(t=null,e=je)):(t=null,e=je)):(t=null,e=je)):(t=null,e=je)):(t=null,e=je)):(t=null,e=je),t!==null&&(t=function(Wt,ys){k=i.substring(e+5,Wt)}(pe,t[0])),t===null&&(e=pe),t}function Fn(){var t,u,c,p,y;return y=e,t=E(),t!==null?(u=E(),u!==null?(c=E(),c!==null?(p=E(),p!==null?t=[t,u,c,p]:(t=null,e=y)):(t=null,e=y)):(t=null,e=y)):(t=null,e=y),t}function Fa(){var t,u,c;return c=e,t=Fn(),t!==null?(u=Fn(),u!==null?t=[t,u]:(t=null,e=c)):(t=null,e=c),t}function vr(){var t,u,c,p;return p=e,t=Fn(),t!==null?(u=Fn(),u!==null?(c=Fn(),c!==null?t=[t,u,c]:(t=null,e=p)):(t=null,e=p)):(t=null,e=p),t}function fn(){var t,u,c,p,y,S,O;if(y=e,S=e,t=Pe(),t===null&&(t=Yn()),t!==null){for(u=[],O=e,c=Ae(),c!==null?(p=et(),p!==null?c=[c,p]:(c=null,e=O)):(c=null,e=O);c!==null;)u.push(c),O=e,c=Ae(),c!==null?(p=et(),p!==null?c=[c,p]:(c=null,e=O)):(c=null,e=O);u!==null?t=[t,u]:(t=null,e=S)}else t=null,e=S;return t!==null&&(t=function(H){try{k=new B(k.uri,k.display_name,k.params)}catch{k=-1}}()),t===null&&(e=y),t}function $a(){var t,u,c,p,y,S;if(y=e,t=Ha(),t!==null){for(u=[],S=e,c=Ae(),c!==null?(p=Uo(),p!==null?c=[c,p]:(c=null,e=S)):(c=null,e=S);c!==null;)u.push(c),S=e,c=Ae(),c!==null?(p=Uo(),p!==null?c=[c,p]:(c=null,e=S)):(c=null,e=S);u!==null?t=[t,u]:(t=null,e=y)}else t=null,e=y;return t}function Ha(){var t,u,c,p,y,S;return p=e,y=e,t=wn(),t!==null?(S=e,i.charCodeAt(e)===64?(u="@",e++):(u=null,h('"@"')),u!==null?(c=wn(),c!==null?u=[u,c]:(u=null,e=S)):(u=null,e=S),u=u!==null?u:"",u!==null?t=[t,u]:(t=null,e=y)):(t=null,e=y),t!==null&&(t=function(O){k.call_id=i.substring(e,O)}(p)),t===null&&(e=p),t}function Uo(){var t;return t=Ba(),t===null&&(t=qa(),t===null&&(t=Wa(),t===null&&(t=et()))),t}function Ba(){var t,u,c,p,y;return p=e,y=e,i.substr(e,6)==="to-tag"?(t="to-tag",e+=6):(t=null,h('"to-tag"')),t!==null?(u=Me(),u!==null?(c=W(),c!==null?t=[t,u,c]:(t=null,e=y)):(t=null,e=y)):(t=null,e=y),t!==null&&(t=function(S,O){k.to_tag=O}(p,t[2])),t===null&&(e=p),t}function qa(){var t,u,c,p,y;return p=e,y=e,i.substr(e,8)==="from-tag"?(t="from-tag",e+=8):(t=null,h('"from-tag"')),t!==null?(u=Me(),u!==null?(c=W(),c!==null?t=[t,u,c]:(t=null,e=y)):(t=null,e=y)):(t=null,e=y),t!==null&&(t=function(S,O){k.from_tag=O}(p,t[2])),t===null&&(e=p),t}function Wa(){var t,u;return u=e,i.substr(e,10)==="early-only"?(t="early-only",e+=10):(t=null,h('"early-only"')),t!==null&&(t=function(c){k.early_only=!0}()),t===null&&(e=u),t}function jr(t){t.sort();for(var u=null,c=[],p=0;p<t.length;p++)t[p]!==u&&(c.push(t[p]),u=t[p]);return c}function M(){for(var t=1,u=1,c=!1,p=0;p<Math.max(e,_);p++){var y=i.charAt(p);y===`
`?(c||t++,u=1,c=!1):y==="\r"||y==="\u2028"||y==="\u2029"?(t++,u=1,c=!0):(u++,c=!1)}return{line:t,column:u}}var z=ui(),B=np(),k={},Ee=f[l]();if(Ee===null||e!==i.length){var Le=Math.max(e,_),ot=Le<i.length?i.charAt(Le):null,$e=M();return new this.SyntaxError(jr(T),ot,Le,$e.line,$e.column),-1}return k},toSource:function(){return this._source}};return r.SyntaxError=function(n,i,l,f,e){function _(T,h){var g,m;switch(T.length){case 0:g="end of input";break;case 1:g=T[0];break;default:g=T.slice(0,T.length-1).join(", ")+" or "+T[T.length-1]}return m=h?s(h):"end of input","Expected "+g+" but "+m+" found."}this.name="SyntaxError",this.expected=n,this.found=i,this.message=_(n,i),this.offset=l,this.line=f,this.column=e},r.SyntaxError.prototype=Error.prototype,r}()),uh}var ch,Og;function ui(){if(Og)return ch;Og=1;function s(h,g){var m;if(typeof Symbol>"u"||h[Symbol.iterator]==null){if(Array.isArray(h)||(m=r(h))||g&&h&&typeof h.length=="number"){m&&(h=m);var b=0,E=function(){};return{s:E,n:function(){return b>=h.length?{done:!0}:{done:!1,value:h[b++]}},e:function(x){throw x},f:E}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var C=!0,N=!1,I;return{s:function(){m=h[Symbol.iterator]()},n:function(){var x=m.next();return C=x.done,x},e:function(x){N=!0,I=x},f:function(){try{!C&&m.return!=null&&m.return()}finally{if(N)throw I}}}}function r(h,g){if(h){if(typeof h=="string")return n(h,g);var m=Object.prototype.toString.call(h).slice(8,-1);if(m==="Object"&&h.constructor&&(m=h.constructor.name),m==="Map"||m==="Set")return Array.from(h);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return n(h,g)}}function n(h,g){(g==null||g>h.length)&&(g=h.length);for(var m=0,b=new Array(g);m<g;m++)b[m]=h[m];return b}function i(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}function l(h,g){for(var m=0;m<g.length;m++){var b=g[m];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}function f(h,g,m){return g&&l(h.prototype,g),m&&l(h,m),h}var e=_t,_=Ht(),T=lr();return ch=function(){f(h,null,[{key:"parse",value:function(m){if(m=T.parse(m,"SIP_URI"),m!==-1)return m}}]);function h(g,m,b,E){var C=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},N=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(i(this,h),!b)throw new TypeError('missing or invalid "host" parameter');this._parameters={},this._headers={},this._scheme=g||e.SIP,this._user=m,this._host=b,this._port=E;for(var I in C)Object.prototype.hasOwnProperty.call(C,I)&&this.setParam(I,C[I]);for(var P in N)Object.prototype.hasOwnProperty.call(N,P)&&this.setHeader(P,N[P])}return f(h,[{key:"setParam",value:function(m,b){m&&(this._parameters[m.toLowerCase()]=typeof b>"u"||b===null?null:b.toString())}},{key:"getParam",value:function(m){if(m)return this._parameters[m.toLowerCase()]}},{key:"hasParam",value:function(m){if(m)return this._parameters.hasOwnProperty(m.toLowerCase())&&!0||!1}},{key:"deleteParam",value:function(m){if(m=m.toLowerCase(),this._parameters.hasOwnProperty(m)){var b=this._parameters[m];return delete this._parameters[m],b}}},{key:"clearParams",value:function(){this._parameters={}}},{key:"setHeader",value:function(m,b){this._headers[_.headerize(m)]=Array.isArray(b)?b:[b]}},{key:"getHeader",value:function(m){if(m)return this._headers[_.headerize(m)]}},{key:"hasHeader",value:function(m){if(m)return this._headers.hasOwnProperty(_.headerize(m))&&!0||!1}},{key:"deleteHeader",value:function(m){if(m=_.headerize(m),this._headers.hasOwnProperty(m)){var b=this._headers[m];return delete this._headers[m],b}}},{key:"clearHeaders",value:function(){this._headers={}}},{key:"clone",value:function(){return new h(this._scheme,this._user,this._host,this._port,JSON.parse(JSON.stringify(this._parameters)),JSON.parse(JSON.stringify(this._headers)))}},{key:"toString",value:function(){var m=[],b="".concat(this._scheme,":");this._user&&(b+="".concat(_.escapeUser(this._user),"@")),b+=this._host,(this._port||this._port===0)&&(b+=":".concat(this._port));for(var E in this._parameters)Object.prototype.hasOwnProperty.call(this._parameters,E)&&(b+=";".concat(E),this._parameters[E]!==null&&(b+="=".concat(this._parameters[E])));for(var C in this._headers)if(Object.prototype.hasOwnProperty.call(this._headers,C)){var N=s(this._headers[C]),I;try{for(N.s();!(I=N.n()).done;){var P=I.value;m.push("".concat(C,"=").concat(P))}}catch(x){N.e(x)}finally{N.f()}}return m.length>0&&(b+="?".concat(m.join("&"))),b}},{key:"toAor",value:function(m){var b="".concat(this._scheme,":");return this._user&&(b+="".concat(_.escapeUser(this._user),"@")),b+=this._host,m&&(this._port||this._port===0)&&(b+=":".concat(this._port)),b}},{key:"scheme",get:function(){return this._scheme},set:function(m){this._scheme=m.toLowerCase()}},{key:"user",get:function(){return this._user},set:function(m){this._user=m}},{key:"host",get:function(){return this._host},set:function(m){this._host=m.toLowerCase()}},{key:"port",get:function(){return this._port},set:function(m){this._port=m===0?m:parseInt(m,10)||null}}]),h}(),ch}var Ig;function Ht(){if(Ig)return ut;Ig=1;function s(g){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?s=function(b){return typeof b}:s=function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},s(g)}function r(g,m){var b;if(typeof Symbol>"u"||g[Symbol.iterator]==null){if(Array.isArray(g)||(b=n(g))||m&&g&&typeof g.length=="number"){b&&(g=b);var E=0,C=function(){};return{s:C,n:function(){return E>=g.length?{done:!0}:{done:!1,value:g[E++]}},e:function(U){throw U},f:C}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var N=!0,I=!1,P;return{s:function(){b=g[Symbol.iterator]()},n:function(){var U=b.next();return N=U.done,U},e:function(U){I=!0,P=U},f:function(){try{!N&&b.return!=null&&b.return()}finally{if(I)throw P}}}}function n(g,m){if(g){if(typeof g=="string")return i(g,m);var b=Object.prototype.toString.call(g).slice(8,-1);if(b==="Object"&&g.constructor&&(b=g.constructor.name),b==="Map"||b==="Set")return Array.from(g);if(b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return i(g,m)}}function i(g,m){(m==null||m>g.length)&&(m=g.length);for(var b=0,E=new Array(m);b<m;b++)E[b]=g[b];return E}var l=_t,f=ui(),e=lr();ut.str_utf8_length=function(g){return unescape(encodeURIComponent(g)).length};var _=ut.isFunction=function(g){return g!==void 0?Object.prototype.toString.call(g)==="[object Function]":!1};ut.isString=function(g){return g!==void 0?Object.prototype.toString.call(g)==="[object String]":!1},ut.isDecimal=function(g){return!isNaN(g)&&parseFloat(g)===parseInt(g,10)},ut.isEmpty=function(g){return g===null||g===""||g===void 0||Array.isArray(g)&&g.length===0||typeof g=="number"&&isNaN(g)},ut.hasMethods=function(g){for(var m=arguments.length,b=new Array(m>1?m-1:0),E=1;E<m;E++)b[E-1]=arguments[E];for(var C=0,N=b;C<N.length;C++){var I=N[C];if(_(g[I]))return!1}return!0};var T=ut.createRandomToken=function(g){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:32,b,E,C="";for(b=0;b<g;b++)E=Math.random()*m|0,C+=E.toString(m);return C};ut.newTag=function(){return T(10)},ut.newUUID=function(){var g="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(m){var b=Math.random()*16|0,E=m==="x"?b:b&3|8;return E.toString(16)});return g},ut.hostType=function(g){if(g){if(g=e.parse(g,"host"),g!==-1)return g.host_type}else return};var h=ut.escapeUser=function(g){return encodeURIComponent(decodeURIComponent(g)).replace(/%3A/ig,":").replace(/%2B/ig,"+").replace(/%3F/ig,"?").replace(/%2F/ig,"/")};return ut.normalizeTarget=function(g,m){if(g){if(g instanceof f)return g;if(typeof g=="string"){var b=g.split("@"),E,C;switch(b.length){case 1:if(!m)return;E=g,C=m;break;case 2:E=b[0],C=b[1];break;default:E=b.slice(0,b.length-1).join("@"),C=b[b.length-1]}E=E.replace(/^(sips?|tel):/i,""),/^[-.()]*\+?[0-9\-.()]+$/.test(E)&&(E=E.replace(/[-.()]/g,"")),g="".concat(l.SIP,":").concat(h(E),"@").concat(C);var N;return(N=f.parse(g))?N:void 0}else return}else return},ut.headerize=function(g){var m={"Call-Id":"Call-ID",Cseq:"CSeq","Www-Authenticate":"WWW-Authenticate"},b=g.toLowerCase().replace(/_/g,"-").split("-"),E="",C=b.length,N;for(N=0;N<C;N++)N!==0&&(E+="-"),E+=b[N].charAt(0).toUpperCase()+b[N].substring(1);return m[E]&&(E=m[E]),E},ut.sipErrorCause=function(g){for(var m in l.SIP_ERROR_CAUSES)if(l.SIP_ERROR_CAUSES[m].indexOf(g)!==-1)return l.causes[m];return l.causes.SIP_FAILURE_CODE},ut.getRandomTestNetIP=function(){function g(m,b){return Math.floor(Math.random()*(b-m+1)+m)}return"192.0.2.".concat(g(1,254))},ut.calculateMD5=function(g){function m(ye,ge){return ye<<ge|ye>>>32-ge}function b(ye,ge){var ve=ye&2147483648,Pe=ge&2147483648,Xe=ye&1073741824,Qe=ge&1073741824,xe=(ye&1073741823)+(ge&1073741823);return Xe&Qe?xe^2147483648^ve^Pe:Xe|Qe?xe&1073741824?xe^3221225472^ve^Pe:xe^1073741824^ve^Pe:xe^ve^Pe}function E(ye,ge,ve){return ye&ge|~ye&ve}function C(ye,ge,ve){return ye&ve|ge&~ve}function N(ye,ge,ve){return ye^ge^ve}function I(ye,ge,ve){return ge^(ye|~ve)}function P(ye,ge,ve,Pe,Xe,Qe,xe){return ye=b(ye,b(b(E(ge,ve,Pe),Xe),xe)),b(m(ye,Qe),ge)}function x(ye,ge,ve,Pe,Xe,Qe,xe){return ye=b(ye,b(b(C(ge,ve,Pe),Xe),xe)),b(m(ye,Qe),ge)}function U(ye,ge,ve,Pe,Xe,Qe,xe){return ye=b(ye,b(b(N(ge,ve,Pe),Xe),xe)),b(m(ye,Qe),ge)}function G(ye,ge,ve,Pe,Xe,Qe,xe){return ye=b(ye,b(b(I(ge,ve,Pe),Xe),xe)),b(m(ye,Qe),ge)}function te(ye){for(var ge,ve=ye.length,Pe=ve+8,Xe=(Pe-Pe%64)/64,Qe=(Xe+1)*16,xe=new Array(Qe-1),cn=0,gt=0;gt<ve;)ge=(gt-gt%4)/4,cn=gt%4*8,xe[ge]=xe[ge]|ye.charCodeAt(gt)<<cn,gt++;return ge=(gt-gt%4)/4,cn=gt%4*8,xe[ge]=xe[ge]|128<<cn,xe[Qe-2]=ve<<3,xe[Qe-1]=ve>>>29,xe}function we(ye){var ge="",ve="",Pe,Xe;for(Xe=0;Xe<=3;Xe++)Pe=ye>>>Xe*8&255,ve="0".concat(Pe.toString(16)),ge=ge+ve.substr(ve.length-2,2);return ge}function _e(ye){for(var ge="",ve=0;ve<ye.length;ve++){var Pe=ye.charCodeAt(ve);Pe<128?ge+=String.fromCharCode(Pe):Pe>127&&Pe<2048?(ge+=String.fromCharCode(Pe>>6|192),ge+=String.fromCharCode(Pe&63|128)):(ge+=String.fromCharCode(Pe>>12|224),ge+=String.fromCharCode(Pe>>6&63|128),ge+=String.fromCharCode(Pe&63|128))}return ge}var X=[],$,se,me,ie,de,Z,re,W,ne,bt=7,wn=12,En=17,ht=22,Me=5,ur=9,cr=14,Bt=20,on=4,Fe=11,Ae=16,ln=23,zn=6,an=10,un=15,Un=21;for(g=_e(g),X=te(g),Z=1732584193,re=4023233417,W=2562383102,ne=271733878,$=0;$<X.length;$+=16)se=Z,me=re,ie=W,de=ne,Z=P(Z,re,W,ne,X[$+0],bt,3614090360),ne=P(ne,Z,re,W,X[$+1],wn,3905402710),W=P(W,ne,Z,re,X[$+2],En,606105819),re=P(re,W,ne,Z,X[$+3],ht,3250441966),Z=P(Z,re,W,ne,X[$+4],bt,4118548399),ne=P(ne,Z,re,W,X[$+5],wn,1200080426),W=P(W,ne,Z,re,X[$+6],En,2821735955),re=P(re,W,ne,Z,X[$+7],ht,4249261313),Z=P(Z,re,W,ne,X[$+8],bt,1770035416),ne=P(ne,Z,re,W,X[$+9],wn,2336552879),W=P(W,ne,Z,re,X[$+10],En,4294925233),re=P(re,W,ne,Z,X[$+11],ht,2304563134),Z=P(Z,re,W,ne,X[$+12],bt,1804603682),ne=P(ne,Z,re,W,X[$+13],wn,4254626195),W=P(W,ne,Z,re,X[$+14],En,2792965006),re=P(re,W,ne,Z,X[$+15],ht,1236535329),Z=x(Z,re,W,ne,X[$+1],Me,4129170786),ne=x(ne,Z,re,W,X[$+6],ur,3225465664),W=x(W,ne,Z,re,X[$+11],cr,643717713),re=x(re,W,ne,Z,X[$+0],Bt,3921069994),Z=x(Z,re,W,ne,X[$+5],Me,3593408605),ne=x(ne,Z,re,W,X[$+10],ur,38016083),W=x(W,ne,Z,re,X[$+15],cr,3634488961),re=x(re,W,ne,Z,X[$+4],Bt,3889429448),Z=x(Z,re,W,ne,X[$+9],Me,568446438),ne=x(ne,Z,re,W,X[$+14],ur,3275163606),W=x(W,ne,Z,re,X[$+3],cr,4107603335),re=x(re,W,ne,Z,X[$+8],Bt,1163531501),Z=x(Z,re,W,ne,X[$+13],Me,2850285829),ne=x(ne,Z,re,W,X[$+2],ur,4243563512),W=x(W,ne,Z,re,X[$+7],cr,1735328473),re=x(re,W,ne,Z,X[$+12],Bt,2368359562),Z=U(Z,re,W,ne,X[$+5],on,4294588738),ne=U(ne,Z,re,W,X[$+8],Fe,2272392833),W=U(W,ne,Z,re,X[$+11],Ae,1839030562),re=U(re,W,ne,Z,X[$+14],ln,4259657740),Z=U(Z,re,W,ne,X[$+1],on,2763975236),ne=U(ne,Z,re,W,X[$+4],Fe,1272893353),W=U(W,ne,Z,re,X[$+7],Ae,4139469664),re=U(re,W,ne,Z,X[$+10],ln,3200236656),Z=U(Z,re,W,ne,X[$+13],on,681279174),ne=U(ne,Z,re,W,X[$+0],Fe,3936430074),W=U(W,ne,Z,re,X[$+3],Ae,3572445317),re=U(re,W,ne,Z,X[$+6],ln,76029189),Z=U(Z,re,W,ne,X[$+9],on,3654602809),ne=U(ne,Z,re,W,X[$+12],Fe,3873151461),W=U(W,ne,Z,re,X[$+15],Ae,530742520),re=U(re,W,ne,Z,X[$+2],ln,3299628645),Z=G(Z,re,W,ne,X[$+0],zn,4096336452),ne=G(ne,Z,re,W,X[$+7],an,1126891415),W=G(W,ne,Z,re,X[$+14],un,2878612391),re=G(re,W,ne,Z,X[$+5],Un,4237533241),Z=G(Z,re,W,ne,X[$+12],zn,1700485571),ne=G(ne,Z,re,W,X[$+3],an,2399980690),W=G(W,ne,Z,re,X[$+10],un,4293915773),re=G(re,W,ne,Z,X[$+1],Un,2240044497),Z=G(Z,re,W,ne,X[$+8],zn,1873313359),ne=G(ne,Z,re,W,X[$+15],an,4264355552),W=G(W,ne,Z,re,X[$+6],un,2734768916),re=G(re,W,ne,Z,X[$+13],Un,1309151649),Z=G(Z,re,W,ne,X[$+4],zn,4149444226),ne=G(ne,Z,re,W,X[$+11],an,3174756917),W=G(W,ne,Z,re,X[$+2],un,718787259),re=G(re,W,ne,Z,X[$+9],Un,3951481745),Z=b(Z,se),re=b(re,me),W=b(W,ie),ne=b(ne,de);var St=we(Z)+we(re)+we(W)+we(ne);return St.toLowerCase()},ut.closeMediaStream=function(g){if(g)try{var m;if(g.getTracks){m=g.getTracks();var b=r(m),E;try{for(b.s();!(E=b.n()).done;){var C=E.value;C.stop()}}catch(te){b.e(te)}finally{b.f()}}else{m=g.getAudioTracks();var N=r(m),I;try{for(N.s();!(I=N.n()).done;){var P=I.value;P.stop()}}catch(te){N.e(te)}finally{N.f()}m=g.getVideoTracks();var x=r(m),U;try{for(x.s();!(U=x.n()).done;){var G=U.value;G.stop()}}catch(te){x.e(te)}finally{x.f()}}}catch{(typeof g.stop=="function"||s(g.stop)==="object")&&g.stop()}},ut.cloneArray=function(g){return g&&g.slice()||[]},ut.cloneObject=function(g){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return g&&Object.assign({},g)||m},ut}var jh={exports:{}},fh,kg;function yO(){if(kg)return fh;kg=1;var s=1e3,r=s*60,n=r*60,i=n*24,l=i*7,f=i*365.25;fh=function(g,m){m=m||{};var b=typeof g;if(b==="string"&&g.length>0)return e(g);if(b==="number"&&isFinite(g))return m.long?T(g):_(g);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(g))};function e(g){if(g=String(g),!(g.length>100)){var m=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(g);if(m){var b=parseFloat(m[1]),E=(m[2]||"ms").toLowerCase();switch(E){case"years":case"year":case"yrs":case"yr":case"y":return b*f;case"weeks":case"week":case"w":return b*l;case"days":case"day":case"d":return b*i;case"hours":case"hour":case"hrs":case"hr":case"h":return b*n;case"minutes":case"minute":case"mins":case"min":case"m":return b*r;case"seconds":case"second":case"secs":case"sec":case"s":return b*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return b;default:return}}}}function _(g){var m=Math.abs(g);return m>=i?Math.round(g/i)+"d":m>=n?Math.round(g/n)+"h":m>=r?Math.round(g/r)+"m":m>=s?Math.round(g/s)+"s":g+"ms"}function T(g){var m=Math.abs(g);return m>=i?h(g,m,i,"day"):m>=n?h(g,m,n,"hour"):m>=r?h(g,m,r,"minute"):m>=s?h(g,m,s,"second"):g+" ms"}function h(g,m,b,E){var C=m>=b*1.5;return Math.round(g/b)+" "+E+(C?"s":"")}return fh}function TO(s){n.debug=n,n.default=n,n.coerce=T,n.disable=f,n.enable=l,n.enabled=e,n.humanize=yO(),n.destroy=h,Object.keys(s).forEach(g=>{n[g]=s[g]}),n.names=[],n.skips=[],n.formatters={};function r(g){let m=0;for(let b=0;b<g.length;b++)m=(m<<5)-m+g.charCodeAt(b),m|=0;return n.colors[Math.abs(m)%n.colors.length]}n.selectColor=r;function n(g){let m,b=null,E,C;function N(...I){if(!N.enabled)return;const P=N,x=Number(new Date),U=x-(m||x);P.diff=U,P.prev=m,P.curr=x,m=x,I[0]=n.coerce(I[0]),typeof I[0]!="string"&&I.unshift("%O");let G=0;I[0]=I[0].replace(/%([a-zA-Z%])/g,(we,_e)=>{if(we==="%%")return"%";G++;const X=n.formatters[_e];if(typeof X=="function"){const $=I[G];we=X.call(P,$),I.splice(G,1),G--}return we}),n.formatArgs.call(P,I),(P.log||n.log).apply(P,I)}return N.namespace=g,N.useColors=n.useColors(),N.color=n.selectColor(g),N.extend=i,N.destroy=n.destroy,Object.defineProperty(N,"enabled",{enumerable:!0,configurable:!1,get:()=>b!==null?b:(E!==n.namespaces&&(E=n.namespaces,C=n.enabled(g)),C),set:I=>{b=I}}),typeof n.init=="function"&&n.init(N),N}function i(g,m){const b=n(this.namespace+(typeof m>"u"?":":m)+g);return b.log=this.log,b}function l(g){n.save(g),n.namespaces=g,n.names=[],n.skips=[];let m;const b=(typeof g=="string"?g:"").split(/[\s,]+/),E=b.length;for(m=0;m<E;m++)b[m]&&(g=b[m].replace(/\*/g,".*?"),g[0]==="-"?n.skips.push(new RegExp("^"+g.slice(1)+"$")):n.names.push(new RegExp("^"+g+"$")))}function f(){const g=[...n.names.map(_),...n.skips.map(_).map(m=>"-"+m)].join(",");return n.enable(""),g}function e(g){if(g[g.length-1]==="*")return!0;let m,b;for(m=0,b=n.skips.length;m<b;m++)if(n.skips[m].test(g))return!1;for(m=0,b=n.names.length;m<b;m++)if(n.names[m].test(g))return!0;return!1}function _(g){return g.toString().substring(2,g.toString().length-2).replace(/\.\*\?$/,"*")}function T(g){return g instanceof Error?g.stack||g.message:g}function h(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}var bO=TO;(function(s,r){var n={};r.formatArgs=l,r.save=f,r.load=e,r.useColors=i,r.storage=_(),r.destroy=(()=>{let h=!1;return()=>{h||(h=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function l(h){if(h[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+h[0]+(this.useColors?"%c ":" ")+"+"+s.exports.humanize(this.diff),!this.useColors)return;const g="color: "+this.color;h.splice(1,0,g,"color: inherit");let m=0,b=0;h[0].replace(/%[a-zA-Z%]/g,E=>{E!=="%%"&&(m++,E==="%c"&&(b=m))}),h.splice(b,0,g)}r.log=console.debug||console.log||(()=>{});function f(h){try{h?r.storage.setItem("debug",h):r.storage.removeItem("debug")}catch{}}function e(){let h;try{h=r.storage.getItem("debug")}catch{}return!h&&typeof process<"u"&&"env"in process&&(h=n.DEBUG),h}function _(){try{return localStorage}catch{}}s.exports=bO(r);const{formatters:T}=s.exports;T.j=function(h){try{return JSON.stringify(h)}catch(g){return"[UnexpectedJSONParseError]: "+g.message}}})(jh,jh.exports);var Sn=jh.exports;function SO(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function Pg(s,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}function wO(s,r,n){return r&&Pg(s.prototype,r),n&&Pg(s,n),s}var Os=Sn,Is="JsSIP",Et=function(){function s(r){SO(this,s),r?(this._debug=Os.default("".concat(Is,":").concat(r)),this._warn=Os.default("".concat(Is,":WARN:").concat(r)),this._error=Os.default("".concat(Is,":ERROR:").concat(r))):(this._debug=Os.default(Is),this._warn=Os.default("".concat(Is,":WARN")),this._error=Os.default("".concat(Is,":ERROR"))),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}return wO(s,[{key:"debug",get:function(){return this._debug}},{key:"warn",get:function(){return this._warn}},{key:"error",get:function(){return this._error}}]),s}(),ar={},f0={},h0={exports:{}},Ng=h0.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(s){return s.encoding?"rtpmap:%d %s/%s/%s":s.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(s){return s.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(s){return s.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(s){return"extmap:%d"+(s.direction?"/%s":"%v")+(s["encrypt-uri"]?" %s":"%v")+" %s"+(s.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(s){return s.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(s){var r="candidate:%s %d %s %d %s %d typ %s";return r+=s.raddr!=null?" raddr %s rport %d":"%v%v",r+=s.tcptype!=null?" tcptype %s":"%v",s.generation!=null&&(r+=" generation %d"),r+=s["network-id"]!=null?" network-id %d":"%v",r+=s["network-cost"]!=null?" network-cost %d":"%v",r}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(s){var r="ssrc:%d";return s.attribute!=null&&(r+=" %s",s.value!=null&&(r+=":%s")),r}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(s){return s.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(s){return s.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(s){return"imageattr:%s %s %s"+(s.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(s){return"simulcast:%s %s"+(s.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(s){return"ts-refclk:%s"+(s.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(s){var r="mediaclk:";return r+=s.id!=null?"id=%s %s":"%v%s",r+=s.mediaClockValue!=null?"=%s":"",r+=s.rateNumerator!=null?" rate=%s":"",r+=s.rateDenominator!=null?"/%s":"",r}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(Ng).forEach(function(s){var r=Ng[s];r.forEach(function(n){n.reg||(n.reg=/(.*)/),n.format||(n.format="%s")})});var d0=h0.exports;(function(s){var r=function(_){return String(Number(_))===_?Number(_):_},n=function(_,T,h,g){if(g&&!h)T[g]=r(_[1]);else for(var m=0;m<h.length;m+=1)_[m+1]!=null&&(T[h[m]]=r(_[m+1]))},i=function(_,T,h){var g=_.name&&_.names;_.push&&!T[_.push]?T[_.push]=[]:g&&!T[_.name]&&(T[_.name]={});var m=_.push?{}:g?T[_.name]:T;n(h.match(_.reg),m,_.names,_.name),_.push&&T[_.push].push(m)},l=d0,f=RegExp.prototype.test.bind(/^([a-z])=(.*)/);s.parse=function(_){var T={},h=[],g=T;return _.split(/(\r\n|\r|\n)/).filter(f).forEach(function(m){var b=m[0],E=m.slice(2);b==="m"&&(h.push({rtp:[],fmtp:[]}),g=h[h.length-1]);for(var C=0;C<(l[b]||[]).length;C+=1){var N=l[b][C];if(N.reg.test(E))return i(N,g,E)}}),T.media=h,T};var e=function(_,T){var h=T.split(/=(.+)/,2);return h.length===2?_[h[0]]=r(h[1]):h.length===1&&T.length>1&&(_[h[0]]=void 0),_};s.parseParams=function(_){return _.split(/;\s?/).reduce(e,{})},s.parseFmtpConfig=s.parseParams,s.parsePayloads=function(_){return _.toString().split(" ").map(Number)},s.parseRemoteCandidates=function(_){for(var T=[],h=_.split(" ").map(r),g=0;g<h.length;g+=3)T.push({component:h[g],ip:h[g+1],port:h[g+2]});return T},s.parseImageAttributes=function(_){return _.split(" ").map(function(T){return T.substring(1,T.length-1).split(",").reduce(e,{})})},s.parseSimulcastStreamList=function(_){return _.split(";").map(function(T){return T.split(",").map(function(h){var g,m=!1;return h[0]!=="~"?g=r(h):(g=r(h.substring(1,h.length)),m=!0),{scid:g,paused:m}})})}})(f0);var hh=d0,EO=/%[sdv%]/g,CO=function(s){var r=1,n=arguments,i=n.length;return s.replace(EO,function(l){if(r>=i)return l;var f=n[r];switch(r+=1,l){case"%%":return"%";case"%s":return String(f);case"%d":return Number(f);case"%v":return""}})},Zo=function(s,r,n){var i=r.format instanceof Function?r.format(r.push?n:n[r.name]):r.format,l=[s+"="+i];if(r.names)for(var f=0;f<r.names.length;f+=1){var e=r.names[f];r.name?l.push(n[r.name][e]):l.push(n[r.names[f]])}else l.push(n[r.name]);return CO.apply(null,l)},AO=["v","o","s","i","u","e","p","c","b","t","r","z","a"],RO=["i","c","b","a"],OO=function(s,r){r=r||{},s.version==null&&(s.version=0),s.name==null&&(s.name=" "),s.media.forEach(function(f){f.payloads==null&&(f.payloads="")});var n=r.outerOrder||AO,i=r.innerOrder||RO,l=[];return n.forEach(function(f){hh[f].forEach(function(e){e.name in s&&s[e.name]!=null?l.push(Zo(f,e,s)):e.push in s&&s[e.push]!=null&&s[e.push].forEach(function(_){l.push(Zo(f,e,_))})})}),s.media.forEach(function(f){l.push(Zo("m",hh.m[0],f)),i.forEach(function(e){hh[e].forEach(function(_){_.name in f&&f[_.name]!=null?l.push(Zo(e,_,f)):_.push in f&&f[_.push]!=null&&f[_.push].forEach(function(T){l.push(Zo(e,_,T))})})})}),l.join(`\r
`)+`\r
`},Xi=f0,IO=OO;ar.write=IO;ar.parse=Xi.parse;ar.parseParams=Xi.parseParams;ar.parseFmtpConfig=Xi.parseFmtpConfig;ar.parsePayloads=Xi.parsePayloads;ar.parseRemoteCandidates=Xi.parseRemoteCandidates;ar.parseImageAttributes=Xi.parseImageAttributes;ar.parseSimulcastStreamList=Xi.parseSimulcastStreamList;function Bu(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Bu=function(n){return typeof n}:Bu=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Bu(s)}function rp(s,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(r&&r.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),r&&Vh(s,r)}function Vh(s,r){return Vh=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i},Vh(s,r)}function ip(s){var r=NO();return function(){var i=ac(s),l;if(r){var f=ac(this).constructor;l=Reflect.construct(i,arguments,f)}else l=i.apply(this,arguments);return kO(this,l)}}function kO(s,r){return r&&(Bu(r)==="object"||typeof r=="function")?r:PO(s)}function PO(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function NO(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function ac(s){return ac=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},ac(s)}function xn(s,r){var n;if(typeof Symbol>"u"||s[Symbol.iterator]==null){if(Array.isArray(s)||(n=xO(s))||r&&s&&typeof s.length=="number"){n&&(s=n);var i=0,l=function(){};return{s:l,n:function(){return i>=s.length?{done:!0}:{done:!1,value:s[i++]}},e:function(h){throw h},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var f=!0,e=!1,_;return{s:function(){n=s[Symbol.iterator]()},n:function(){var h=n.next();return f=h.done,h},e:function(h){e=!0,_=h},f:function(){try{!f&&n.return!=null&&n.return()}finally{if(e)throw _}}}}function xO(s,r){if(s){if(typeof s=="string")return xg(s,r);var n=Object.prototype.toString.call(s).slice(8,-1);if(n==="Object"&&s.constructor&&(n=s.constructor.name),n==="Map"||n==="Set")return Array.from(s);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xg(s,r)}}function xg(s,r){(r==null||r>s.length)&&(r=s.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=s[n];return i}function Ol(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function Dg(s,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}function Fc(s,r,n){return r&&Dg(s.prototype,r),n&&Dg(s,n),s}var p0=ar,DO=Et,Pt=_t,dt=Ht(),Lg=np(),LO=lr(),dh=new DO("SIPMessage"),_0=function(){function s(r,n,i,l,f,e){if(Ol(this,s),!r||!n||!i)return null;l=l||{},this.ua=i,this.headers={},this.method=r,this.ruri=n,this.body=e,this.extraHeaders=dt.cloneArray(f),this.ua.configuration.extra_headers&&(this.extraHeaders=this.extraHeaders.concat(this.ua.configuration.extra_headers)),l.route_set?this.setHeader("route",l.route_set):i.configuration.use_preloaded_route&&this.setHeader("route","<".concat(i.transport.sip_uri,";lr>")),this.setHeader("via",""),this.setHeader("max-forwards",Pt.MAX_FORWARDS);var _=l.to_uri||n,T=l.to_tag?{tag:l.to_tag}:null,h=typeof l.to_display_name<"u"?l.to_display_name:null;this.to=new Lg(_,h,T),this.setHeader("to",this.to.toString());var g=l.from_uri||i.configuration.uri,m={tag:l.from_tag||dt.newTag()},b;typeof l.from_display_name<"u"?b=l.from_display_name:i.configuration.display_name?b=i.configuration.display_name:b=null,this.from=new Lg(g,b,m),this.setHeader("from",this.from.toString());var E=l.call_id||i.configuration.jssip_id+dt.createRandomToken(15);this.call_id=E,this.setHeader("call-id",E);var C=l.cseq||Math.floor(Math.random()*1e4);this.cseq=C,this.setHeader("cseq","".concat(C," ").concat(r))}return Fc(s,[{key:"setHeader",value:function(n,i){for(var l=new RegExp("^\\s*".concat(n,"\\s*:"),"i"),f=0;f<this.extraHeaders.length;f++)l.test(this.extraHeaders[f])&&this.extraHeaders.splice(f,1);this.headers[dt.headerize(n)]=Array.isArray(i)?i:[i]}},{key:"getHeader",value:function(n){var i=this.headers[dt.headerize(n)];if(i){if(i[0])return i[0]}else{var l=new RegExp("^\\s*".concat(n,"\\s*:"),"i"),f=xn(this.extraHeaders),e;try{for(f.s();!(e=f.n()).done;){var _=e.value;if(l.test(_))return _.substring(_.indexOf(":")+1).trim()}}catch(T){f.e(T)}finally{f.f()}}}},{key:"getHeaders",value:function(n){var i=this.headers[dt.headerize(n)],l=[];if(i){var f=xn(i),e;try{for(f.s();!(e=f.n()).done;){var _=e.value;l.push(_)}}catch(b){f.e(b)}finally{f.f()}return l}else{var T=new RegExp("^\\s*".concat(n,"\\s*:"),"i"),h=xn(this.extraHeaders),g;try{for(h.s();!(g=h.n()).done;){var m=g.value;T.test(m)&&l.push(m.substring(m.indexOf(":")+1).trim())}}catch(b){h.e(b)}finally{h.f()}return l}}},{key:"hasHeader",value:function(n){if(this.headers[dt.headerize(n)])return!0;var i=new RegExp("^\\s*".concat(n,"\\s*:"),"i"),l=xn(this.extraHeaders),f;try{for(l.s();!(f=l.n()).done;){var e=f.value;if(i.test(e))return!0}}catch(_){l.e(_)}finally{l.f()}return!1}},{key:"parseSDP",value:function(n){return!n&&this.sdp?this.sdp:(this.sdp=p0.parse(this.body||""),this.sdp)}},{key:"toString",value:function(){var n="".concat(this.method," ").concat(this.ruri,` SIP/2.0\r
`);for(var i in this.headers)if(Object.prototype.hasOwnProperty.call(this.headers,i)){var l=xn(this.headers[i]),f;try{for(l.s();!(f=l.n()).done;){var e=f.value;n+="".concat(i,": ").concat(e,`\r
`)}}catch(E){l.e(E)}finally{l.f()}}var _=xn(this.extraHeaders),T;try{for(_.s();!(T=_.n()).done;){var h=T.value;n+="".concat(h.trim(),`\r
`)}}catch(E){_.e(E)}finally{_.f()}var g=[];switch(this.method){case Pt.REGISTER:g.push("path","gruu");break;case Pt.INVITE:this.ua.configuration.session_timers&&g.push("timer"),(this.ua.contact.pub_gruu||this.ua.contact.temp_gruu)&&g.push("gruu"),g.push("ice","replaces");break;case Pt.UPDATE:this.ua.configuration.session_timers&&g.push("timer"),g.push("ice");break}g.push("outbound");var m=this.ua.configuration.user_agent||Pt.USER_AGENT;if(n+="Allow: ".concat(Pt.ALLOWED_METHODS,`\r
`),n+="Supported: ".concat(g,`\r
`),n+="User-Agent: ".concat(m,`\r
`),this.body){var b=dt.str_utf8_length(this.body);n+="Content-Length: ".concat(b,`\r
\r
`),n+=this.body}else n+=`Content-Length: 0\r
\r
`;return n}},{key:"clone",value:function(){var n=new s(this.method,this.ruri,this.ua);return Object.keys(this.headers).forEach(function(i){n.headers[i]=this.headers[i].slice()},this),n.body=this.body,n.extraHeaders=dt.cloneArray(this.extraHeaders),n.to=this.to,n.from=this.from,n.call_id=this.call_id,n.cseq=this.cseq,n}}]),s}(),UO=function(s){rp(n,s);var r=ip(n);function n(i,l,f,e,_){var T;return Ol(this,n),T=r.call(this,Pt.INVITE,i,l,f,e,_),T.transaction=null,T}return Fc(n,[{key:"cancel",value:function(l){this.transaction.cancel(l)}},{key:"clone",value:function(){var l=new n(this.ruri,this.ua);return Object.keys(this.headers).forEach(function(f){l.headers[f]=this.headers[f].slice()},this),l.body=this.body,l.extraHeaders=dt.cloneArray(this.extraHeaders),l.to=this.to,l.from=this.from,l.call_id=this.call_id,l.cseq=this.cseq,l.transaction=this.transaction,l}}]),n}(_0),g0=function(){function s(){Ol(this,s),this.data=null,this.headers=null,this.method=null,this.via=null,this.via_branch=null,this.call_id=null,this.cseq=null,this.from=null,this.from_tag=null,this.to=null,this.to_tag=null,this.body=null,this.sdp=null}return Fc(s,[{key:"addHeader",value:function(n,i){var l={raw:i};n=dt.headerize(n),this.headers[n]?this.headers[n].push(l):this.headers[n]=[l]}},{key:"getHeader",value:function(n){var i=this.headers[dt.headerize(n)];if(i){if(i[0])return i[0].raw}else return}},{key:"getHeaders",value:function(n){var i=this.headers[dt.headerize(n)],l=[];if(!i)return[];var f=xn(i),e;try{for(f.s();!(e=f.n()).done;){var _=e.value;l.push(_.raw)}}catch(T){f.e(T)}finally{f.f()}return l}},{key:"hasHeader",value:function(n){return!!this.headers[dt.headerize(n)]}},{key:"parseHeader",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(n=dt.headerize(n),this.headers[n]){if(i>=this.headers[n].length){dh.debug('not so many "'.concat(n,'" headers present'));return}}else{dh.debug('header "'.concat(n,'" not present'));return}var l=this.headers[n][i],f=l.raw;if(l.parsed)return l.parsed;var e=LO.parse(f,n.replace(/-/g,"_"));if(e===-1){this.headers[n].splice(i,1),dh.debug('error parsing "'.concat(n,'" header field with value "').concat(f,'"'));return}else return l.parsed=e,e}},{key:"s",value:function(n,i){return this.parseHeader(n,i)}},{key:"setHeader",value:function(n,i){var l={raw:i};this.headers[dt.headerize(n)]=[l]}},{key:"parseSDP",value:function(n){return!n&&this.sdp?this.sdp:(this.sdp=p0.parse(this.body||""),this.sdp)}},{key:"toString",value:function(){return this.data}}]),s}(),MO=function(s){rp(n,s);var r=ip(n);function n(i){var l;return Ol(this,n),l=r.call(this),l.ua=i,l.headers={},l.ruri=null,l.transport=null,l.server_transaction=null,l}return Fc(n,[{key:"reply",value:function(l,f,e,_,T,h){var g=[],m=this.getHeader("To");if(l=l||null,f=f||null,!l||l<100||l>699)throw new TypeError("Invalid status_code: ".concat(l));if(f&&typeof f!="string"&&!(f instanceof String))throw new TypeError("Invalid reason_phrase: ".concat(f));f=f||Pt.REASON_PHRASE[l]||"",e=dt.cloneArray(e),this.ua.configuration.extra_headers&&(e=e.concat(this.ua.configuration.extra_headers));var b="SIP/2.0 ".concat(l," ").concat(f,`\r
`);if(this.method===Pt.INVITE&&l>100&&l<=200){var E=this.getHeaders("record-route"),C=xn(E),N;try{for(C.s();!(N=C.n()).done;){var I=N.value;b+="Record-Route: ".concat(I,`\r
`)}}catch($){C.e($)}finally{C.f()}}var P=this.getHeaders("via"),x=xn(P),U;try{for(x.s();!(U=x.n()).done;){var G=U.value;b+="Via: ".concat(G,`\r
`)}}catch($){x.e($)}finally{x.f()}!this.to_tag&&l>100?m+=";tag=".concat(dt.newTag()):this.to_tag&&!this.s("to").hasParam("tag")&&(m+=";tag=".concat(this.to_tag)),b+="To: ".concat(m,`\r
`),b+="From: ".concat(this.getHeader("From"),`\r
`),b+="Call-ID: ".concat(this.call_id,`\r
`),b+="CSeq: ".concat(this.cseq," ").concat(this.method,`\r
`);var te=xn(e),we;try{for(te.s();!(we=te.n()).done;){var _e=we.value;b+="".concat(_e.trim(),`\r
`)}}catch($){te.e($)}finally{te.f()}switch(this.method){case Pt.INVITE:this.ua.configuration.session_timers&&g.push("timer"),(this.ua.contact.pub_gruu||this.ua.contact.temp_gruu)&&g.push("gruu"),g.push("ice","replaces");break;case Pt.UPDATE:this.ua.configuration.session_timers&&g.push("timer"),_&&g.push("ice"),g.push("replaces")}if(g.push("outbound"),this.method===Pt.OPTIONS?(b+="Allow: ".concat(Pt.ALLOWED_METHODS,`\r
`),b+="Accept: ".concat(Pt.ACCEPTED_BODY_TYPES,`\r
`)):l===405?b+="Allow: ".concat(Pt.ALLOWED_METHODS,`\r
`):l===415&&(b+="Accept: ".concat(Pt.ACCEPTED_BODY_TYPES,`\r
`)),b+="Supported: ".concat(g,`\r
`),_){var X=dt.str_utf8_length(_);b+=`Content-Type: application/sdp\r
`,b+="Content-Length: ".concat(X,`\r
\r
`),b+=_}else b+="Content-Length: ".concat(0,`\r
\r
`);this.server_transaction.receiveResponse(l,b,T,h)}},{key:"reply_sl",value:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,e=this.getHeaders("via");if(!l||l<100||l>699)throw new TypeError("Invalid status_code: ".concat(l));if(f&&typeof f!="string"&&!(f instanceof String))throw new TypeError("Invalid reason_phrase: ".concat(f));f=f||Pt.REASON_PHRASE[l]||"";var _="SIP/2.0 ".concat(l," ").concat(f,`\r
`),T=xn(e),h;try{for(T.s();!(h=T.n()).done;){var g=h.value;_+="Via: ".concat(g,`\r
`)}}catch(N){T.e(N)}finally{T.f()}var m=this.getHeader("To");if(!this.to_tag&&l>100?m+=";tag=".concat(dt.newTag()):this.to_tag&&!this.s("to").hasParam("tag")&&(m+=";tag=".concat(this.to_tag)),_+="To: ".concat(m,`\r
`),_+="From: ".concat(this.getHeader("From"),`\r
`),_+="Call-ID: ".concat(this.call_id,`\r
`),_+="CSeq: ".concat(this.cseq," ").concat(this.method,`\r
`),this.ua.configuration.extra_headers){var b=xn(this.ua.configuration.extra_headers),E;try{for(b.s();!(E=b.n()).done;){var C=E.value;_+="".concat(C.trim(),`\r
`)}}catch(N){b.e(N)}finally{b.f()}}_+="Content-Length: ".concat(0,`\r
\r
`),this.transport.send(_)}}]),n}(g0),FO=function(s){rp(n,s);var r=ip(n);function n(){var i;return Ol(this,n),i=r.call(this),i.headers={},i.status_code=null,i.reason_phrase=null,i}return n}(g0),Ur={OutgoingRequest:_0,InitialOutgoingInviteRequest:UO,IncomingRequest:MO,IncomingResponse:FO};function $O(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function Ug(s,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}function HO(s,r,n){return r&&Ug(s.prototype,r),n&&Ug(s,n),s}var BO=Et,Rr=Ht(),qn=new BO("DigestAuthentication"),qO=function(){function s(r){$O(this,s),this._credentials=r,this._cnonce=null,this._nc=0,this._ncHex="00000000",this._algorithm=null,this._realm=null,this._nonce=null,this._opaque=null,this._stale=null,this._qop=null,this._method=null,this._uri=null,this._ha1=null,this._response=null}return HO(s,[{key:"get",value:function(n){switch(n){case"realm":return this._realm;case"ha1":return this._ha1;default:qn.warn('get() | cannot get "%s" parameter',n);return}}},{key:"authenticate",value:function(n,i){var l=n.method,f=n.ruri,e=n.body,_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(this._algorithm=i.algorithm,this._realm=i.realm,this._nonce=i.nonce,this._opaque=i.opaque,this._stale=i.stale,this._algorithm){if(this._algorithm!=="MD5")return qn.warn('authenticate() | challenge with Digest algorithm different than "MD5", authentication aborted'),!1}else this._algorithm="MD5";if(!this._nonce)return qn.warn("authenticate() | challenge without Digest nonce, authentication aborted"),!1;if(!this._realm)return qn.warn("authenticate() | challenge without Digest realm, authentication aborted"),!1;if(!this._credentials.password){if(!this._credentials.ha1)return qn.warn("authenticate() | no plain SIP password nor ha1 provided, authentication aborted"),!1;if(this._credentials.realm!==this._realm)return qn.warn('authenticate() | no plain SIP password, and stored `realm` does not match the given `realm`, cannot authenticate [stored:"%s", given:"%s"]',this._credentials.realm,this._realm),!1}if(i.qop)if(i.qop.indexOf("auth-int")>-1)this._qop="auth-int";else if(i.qop.indexOf("auth")>-1)this._qop="auth";else return qn.warn('authenticate() | challenge without Digest qop different than "auth" or "auth-int", authentication aborted'),!1;else this._qop=null;this._method=l,this._uri=f,this._cnonce=_||Rr.createRandomToken(12),this._nc+=1;var T=Number(this._nc).toString(16);this._ncHex="00000000".substr(0,8-T.length)+T,this._nc===4294967296&&(this._nc=1,this._ncHex="00000001"),this._credentials.password?this._ha1=Rr.calculateMD5("".concat(this._credentials.username,":").concat(this._realm,":").concat(this._credentials.password)):this._ha1=this._credentials.ha1;var h,g;return this._qop==="auth"?(h="".concat(this._method,":").concat(this._uri),g=Rr.calculateMD5(h),qn.debug('authenticate() | using qop=auth [a2:"%s"]',h),this._response=Rr.calculateMD5("".concat(this._ha1,":").concat(this._nonce,":").concat(this._ncHex,":").concat(this._cnonce,":auth:").concat(g))):this._qop==="auth-int"?(h="".concat(this._method,":").concat(this._uri,":").concat(Rr.calculateMD5(e||"")),g=Rr.calculateMD5(h),qn.debug('authenticate() | using qop=auth-int [a2:"%s"]',h),this._response=Rr.calculateMD5("".concat(this._ha1,":").concat(this._nonce,":").concat(this._ncHex,":").concat(this._cnonce,":auth-int:").concat(g))):this._qop===null&&(h="".concat(this._method,":").concat(this._uri),g=Rr.calculateMD5(h),qn.debug('authenticate() | using qop=null [a2:"%s"]',h),this._response=Rr.calculateMD5("".concat(this._ha1,":").concat(this._nonce,":").concat(g))),qn.debug("authenticate() | response generated"),!0}},{key:"toString",value:function(){var n=[];if(!this._response)throw new Error("response field does not exist, cannot generate Authorization header");return n.push("algorithm=".concat(this._algorithm)),n.push('username="'.concat(this._credentials.username,'"')),n.push('realm="'.concat(this._realm,'"')),n.push('nonce="'.concat(this._nonce,'"')),n.push('uri="'.concat(this._uri,'"')),n.push('response="'.concat(this._response,'"')),this._opaque&&n.push('opaque="'.concat(this._opaque,'"')),this._qop&&(n.push("qop=".concat(this._qop)),n.push('cnonce="'.concat(this._cnonce,'"')),n.push("nc=".concat(this._ncHex))),"Digest ".concat(n.join(", "))}}]),s}(),Or=500,WO=4e3,Mg=5e3,v0={T1:Or,T2:WO,T4:Mg,TIMER_B:64*Or,TIMER_D:0*Or,TIMER_F:64*Or,TIMER_H:64*Or,TIMER_I:0*Or,TIMER_J:0*Or,TIMER_K:0*Mg,TIMER_L:64*Or,TIMER_M:64*Or,PROVISIONAL_RESPONSE_INTERVAL:6e4};function qu(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?qu=function(n){return typeof n}:qu=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},qu(s)}function Il(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function Fg(s,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}function kl(s,r,n){return r&&Fg(s.prototype,r),n&&Fg(s,n),s}function Pl(s,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(r&&r.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),r&&Gh(s,r)}function Gh(s,r){return Gh=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i},Gh(s,r)}function Nl(s){var r=VO();return function(){var i=uc(s),l;if(r){var f=uc(this).constructor;l=Reflect.construct(i,arguments,f)}else l=i.apply(this,arguments);return jO(this,l)}}function jO(s,r){return r&&(qu(r)==="object"||typeof r=="function")?r:ii(s)}function ii(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function VO(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function uc(s){return uc=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},uc(s)}var xl=Lr.EventEmitter,Dl=Et,ul=_t,$g=Ur,ir=v0,Hg=new Dl("NonInviteClientTransaction"),Su=new Dl("InviteClientTransaction"),GO=new Dl("AckClientTransaction"),Bg=new Dl("NonInviteServerTransaction"),wu=new Dl("InviteServerTransaction"),ue={STATUS_TRYING:1,STATUS_PROCEEDING:2,STATUS_CALLING:3,STATUS_ACCEPTED:4,STATUS_COMPLETED:5,STATUS_TERMINATED:6,STATUS_CONFIRMED:7,NON_INVITE_CLIENT:"nict",NON_INVITE_SERVER:"nist",INVITE_CLIENT:"ict",INVITE_SERVER:"ist"},zO=function(s){Pl(n,s);var r=Nl(n);function n(i,l,f,e){var _;Il(this,n),_=r.call(this),_.type=ue.NON_INVITE_CLIENT,_.id="z9hG4bK".concat(Math.floor(Math.random()*1e7)),_.ua=i,_.transport=l,_.request=f,_.eventHandlers=e;var T="SIP/2.0/".concat(l.via_transport);return T+=" ".concat(i.configuration.via_host,";branch=").concat(_.id),_.request.setHeader("via",T),_.ua.newTransaction(ii(_)),_}return kl(n,[{key:"stateChanged",value:function(l){this.state=l,this.emit("stateChanged")}},{key:"send",value:function(){var l=this;this.stateChanged(ue.STATUS_TRYING),this.F=setTimeout(function(){l.timer_F()},ir.TIMER_F),this.transport.send(this.request)||this.onTransportError()}},{key:"onTransportError",value:function(){Hg.debug("transport error occurred, deleting transaction ".concat(this.id)),clearTimeout(this.F),clearTimeout(this.K),this.stateChanged(ue.STATUS_TERMINATED),this.ua.destroyTransaction(this),this.eventHandlers.onTransportError()}},{key:"timer_F",value:function(){Hg.debug("Timer F expired for transaction ".concat(this.id)),this.stateChanged(ue.STATUS_TERMINATED),this.ua.destroyTransaction(this),this.eventHandlers.onRequestTimeout()}},{key:"timer_K",value:function(){this.stateChanged(ue.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"receiveResponse",value:function(l){var f=this,e=l.status_code;if(e<200)switch(this.state){case ue.STATUS_TRYING:case ue.STATUS_PROCEEDING:this.stateChanged(ue.STATUS_PROCEEDING),this.eventHandlers.onReceiveResponse(l);break}else switch(this.state){case ue.STATUS_TRYING:case ue.STATUS_PROCEEDING:this.stateChanged(ue.STATUS_COMPLETED),clearTimeout(this.F),e===408?this.eventHandlers.onRequestTimeout():this.eventHandlers.onReceiveResponse(l),this.K=setTimeout(function(){f.timer_K()},ir.TIMER_K);break;case ue.STATUS_COMPLETED:break}}},{key:"C",get:function(){return ue}}]),n}(xl),KO=function(s){Pl(n,s);var r=Nl(n);function n(i,l,f,e){var _;Il(this,n),_=r.call(this),_.type=ue.INVITE_CLIENT,_.id="z9hG4bK".concat(Math.floor(Math.random()*1e7)),_.ua=i,_.transport=l,_.request=f,_.eventHandlers=e,f.transaction=ii(_);var T="SIP/2.0/".concat(l.via_transport);return T+=" ".concat(i.configuration.via_host,";branch=").concat(_.id),_.request.setHeader("via",T),_.ua.newTransaction(ii(_)),_}return kl(n,[{key:"stateChanged",value:function(l){this.state=l,this.emit("stateChanged")}},{key:"send",value:function(){var l=this;this.stateChanged(ue.STATUS_CALLING),this.B=setTimeout(function(){l.timer_B()},ir.TIMER_B),this.transport.send(this.request)||this.onTransportError()}},{key:"onTransportError",value:function(){clearTimeout(this.B),clearTimeout(this.D),clearTimeout(this.M),this.state!==ue.STATUS_ACCEPTED&&(Su.debug("transport error occurred, deleting transaction ".concat(this.id)),this.eventHandlers.onTransportError()),this.stateChanged(ue.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"timer_M",value:function(){Su.debug("Timer M expired for transaction ".concat(this.id)),this.state===ue.STATUS_ACCEPTED&&(clearTimeout(this.B),this.stateChanged(ue.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:"timer_B",value:function(){Su.debug("Timer B expired for transaction ".concat(this.id)),this.state===ue.STATUS_CALLING&&(this.stateChanged(ue.STATUS_TERMINATED),this.ua.destroyTransaction(this),this.eventHandlers.onRequestTimeout())}},{key:"timer_D",value:function(){Su.debug("Timer D expired for transaction ".concat(this.id)),clearTimeout(this.B),this.stateChanged(ue.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"sendACK",value:function(l){var f=this,e=new $g.OutgoingRequest(ul.ACK,this.request.ruri,this.ua,{route_set:this.request.getHeaders("route"),call_id:this.request.getHeader("call-id"),cseq:this.request.cseq});e.setHeader("from",this.request.getHeader("from")),e.setHeader("via",this.request.getHeader("via")),e.setHeader("to",l.getHeader("to")),this.D=setTimeout(function(){f.timer_D()},ir.TIMER_D),this.transport.send(e)}},{key:"cancel",value:function(l){if(this.state===ue.STATUS_PROCEEDING){var f=new $g.OutgoingRequest(ul.CANCEL,this.request.ruri,this.ua,{route_set:this.request.getHeaders("route"),call_id:this.request.getHeader("call-id"),cseq:this.request.cseq});f.setHeader("from",this.request.getHeader("from")),f.setHeader("via",this.request.getHeader("via")),f.setHeader("to",this.request.getHeader("to")),l&&f.setHeader("reason",l),this.transport.send(f)}}},{key:"receiveResponse",value:function(l){var f=this,e=l.status_code;if(e>=100&&e<=199)switch(this.state){case ue.STATUS_CALLING:this.stateChanged(ue.STATUS_PROCEEDING),this.eventHandlers.onReceiveResponse(l);break;case ue.STATUS_PROCEEDING:this.eventHandlers.onReceiveResponse(l);break}else if(e>=200&&e<=299)switch(this.state){case ue.STATUS_CALLING:case ue.STATUS_PROCEEDING:this.stateChanged(ue.STATUS_ACCEPTED),this.M=setTimeout(function(){f.timer_M()},ir.TIMER_M),this.eventHandlers.onReceiveResponse(l);break;case ue.STATUS_ACCEPTED:this.eventHandlers.onReceiveResponse(l);break}else if(e>=300&&e<=699)switch(this.state){case ue.STATUS_CALLING:case ue.STATUS_PROCEEDING:this.stateChanged(ue.STATUS_COMPLETED),this.sendACK(l),this.eventHandlers.onReceiveResponse(l);break;case ue.STATUS_COMPLETED:this.sendACK(l);break}}},{key:"C",get:function(){return ue}}]),n}(xl),YO=function(s){Pl(n,s);var r=Nl(n);function n(i,l,f,e){var _;Il(this,n),_=r.call(this),_.id="z9hG4bK".concat(Math.floor(Math.random()*1e7)),_.transport=l,_.request=f,_.eventHandlers=e;var T="SIP/2.0/".concat(l.via_transport);return T+=" ".concat(i.configuration.via_host,";branch=").concat(_.id),_.request.setHeader("via",T),_}return kl(n,[{key:"send",value:function(){this.transport.send(this.request)||this.onTransportError()}},{key:"onTransportError",value:function(){GO.debug("transport error occurred for transaction ".concat(this.id)),this.eventHandlers.onTransportError()}},{key:"C",get:function(){return ue}}]),n}(xl),JO=function(s){Pl(n,s);var r=Nl(n);function n(i,l,f){var e;return Il(this,n),e=r.call(this),e.type=ue.NON_INVITE_SERVER,e.id=f.via_branch,e.ua=i,e.transport=l,e.request=f,e.last_response="",f.server_transaction=ii(e),e.state=ue.STATUS_TRYING,i.newTransaction(ii(e)),e}return kl(n,[{key:"stateChanged",value:function(l){this.state=l,this.emit("stateChanged")}},{key:"timer_J",value:function(){Bg.debug("Timer J expired for transaction ".concat(this.id)),this.stateChanged(ue.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"onTransportError",value:function(){this.transportError||(this.transportError=!0,Bg.debug("transport error occurred, deleting transaction ".concat(this.id)),clearTimeout(this.J),this.stateChanged(ue.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:"receiveResponse",value:function(l,f,e,_){var T=this;if(l===100)switch(this.state){case ue.STATUS_TRYING:this.stateChanged(ue.STATUS_PROCEEDING),this.transport.send(f)||this.onTransportError();break;case ue.STATUS_PROCEEDING:this.last_response=f,this.transport.send(f)?e&&e():(this.onTransportError(),_&&_());break}else if(l>=200&&l<=699)switch(this.state){case ue.STATUS_TRYING:case ue.STATUS_PROCEEDING:this.stateChanged(ue.STATUS_COMPLETED),this.last_response=f,this.J=setTimeout(function(){T.timer_J()},ir.TIMER_J),this.transport.send(f)?e&&e():(this.onTransportError(),_&&_());break;case ue.STATUS_COMPLETED:break}}},{key:"C",get:function(){return ue}}]),n}(xl),XO=function(s){Pl(n,s);var r=Nl(n);function n(i,l,f){var e;return Il(this,n),e=r.call(this),e.type=ue.INVITE_SERVER,e.id=f.via_branch,e.ua=i,e.transport=l,e.request=f,e.last_response="",f.server_transaction=ii(e),e.state=ue.STATUS_PROCEEDING,i.newTransaction(ii(e)),e.resendProvisionalTimer=null,f.reply(100),e}return kl(n,[{key:"stateChanged",value:function(l){this.state=l,this.emit("stateChanged")}},{key:"timer_H",value:function(){wu.debug("Timer H expired for transaction ".concat(this.id)),this.state===ue.STATUS_COMPLETED&&wu.debug("ACK not received, dialog will be terminated"),this.stateChanged(ue.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"timer_I",value:function(){this.stateChanged(ue.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"timer_L",value:function(){wu.debug("Timer L expired for transaction ".concat(this.id)),this.state===ue.STATUS_ACCEPTED&&(this.stateChanged(ue.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:"onTransportError",value:function(){this.transportError||(this.transportError=!0,wu.debug("transport error occurred, deleting transaction ".concat(this.id)),this.resendProvisionalTimer!==null&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null),clearTimeout(this.L),clearTimeout(this.H),clearTimeout(this.I),this.stateChanged(ue.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:"resend_provisional",value:function(){this.transport.send(this.last_response)||this.onTransportError()}},{key:"receiveResponse",value:function(l,f,e,_){var T=this;if(l>=100&&l<=199)switch(this.state){case ue.STATUS_PROCEEDING:this.transport.send(f)||this.onTransportError(),this.last_response=f;break}if(l>100&&l<=199&&this.state===ue.STATUS_PROCEEDING)this.resendProvisionalTimer===null&&(this.resendProvisionalTimer=setInterval(function(){T.resend_provisional()},ir.PROVISIONAL_RESPONSE_INTERVAL));else if(l>=200&&l<=299)switch(this.state){case ue.STATUS_PROCEEDING:this.stateChanged(ue.STATUS_ACCEPTED),this.last_response=f,this.L=setTimeout(function(){T.timer_L()},ir.TIMER_L),this.resendProvisionalTimer!==null&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null);case ue.STATUS_ACCEPTED:this.transport.send(f)?e&&e():(this.onTransportError(),_&&_());break}else if(l>=300&&l<=699)switch(this.state){case ue.STATUS_PROCEEDING:this.resendProvisionalTimer!==null&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null),this.transport.send(f)?(this.stateChanged(ue.STATUS_COMPLETED),this.H=setTimeout(function(){T.timer_H()},ir.TIMER_H),e&&e()):(this.onTransportError(),_&&_());break}}},{key:"C",get:function(){return ue}}]),n}(xl);function QO(s,r){var n=s._transactions,i;switch(r.method){case ul.INVITE:if(i=n.ist[r.via_branch],i){switch(i.state){case ue.STATUS_PROCEEDING:i.transport.send(i.last_response);break;case ue.STATUS_ACCEPTED:break}return!0}break;case ul.ACK:if(i=n.ist[r.via_branch],i){if(i.state===ue.STATUS_ACCEPTED)return!1;if(i.state===ue.STATUS_COMPLETED)return i.state=ue.STATUS_CONFIRMED,i.I=setTimeout(function(){i.timer_I()},ir.TIMER_I),!0}else return!1;break;case ul.CANCEL:return i=n.ist[r.via_branch],i?(r.reply_sl(200),i.state!==ue.STATUS_PROCEEDING):(r.reply_sl(481),!0);default:if(i=n.nist[r.via_branch],i){switch(i.state){case ue.STATUS_TRYING:break;case ue.STATUS_PROCEEDING:case ue.STATUS_COMPLETED:i.transport.send(i.last_response);break}return!0}break}}var Ll={C:ue,NonInviteClientTransaction:zO,InviteClientTransaction:KO,AckClientTransaction:YO,NonInviteServerTransaction:JO,InviteServerTransaction:XO,checkTransaction:QO};function ZO(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function qg(s,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}function eI(s,r,n){return r&&qg(s.prototype,r),n&&qg(s,n),s}var tI=Et,Wg=_t,nI=qO,ph=Ll,rI=new tI("RequestSender"),_h={onRequestTimeout:function(){},onTransportError:function(){},onReceiveResponse:function(){},onAuthenticated:function(){}},Ul=function(){function s(r,n,i){ZO(this,s),this._ua=r,this._eventHandlers=i,this._method=n.method,this._request=n,this._auth=null,this._challenged=!1,this._staled=!1;for(var l in _h)Object.prototype.hasOwnProperty.call(_h,l)&&(this._eventHandlers[l]||(this._eventHandlers[l]=_h[l]));r.status===r.C.STATUS_USER_CLOSED&&(this._method!==Wg.BYE||this._method!==Wg.ACK)&&this._eventHandlers.onTransportError()}return eI(s,[{key:"send",value:function(){var n=this,i={onRequestTimeout:function(){n._eventHandlers.onRequestTimeout()},onTransportError:function(){n._eventHandlers.onTransportError()},onReceiveResponse:function(f){n._receiveResponse(f)}};switch(this._method){case"INVITE":this.clientTransaction=new ph.InviteClientTransaction(this._ua,this._ua.transport,this._request,i);break;case"ACK":this.clientTransaction=new ph.AckClientTransaction(this._ua,this._ua.transport,this._request,i);break;default:this.clientTransaction=new ph.NonInviteClientTransaction(this._ua,this._ua.transport,this._request,i)}this._ua._configuration.authorization_jwt&&this._request.setHeader("Authorization",this._ua._configuration.authorization_jwt),this.clientTransaction.send()}},{key:"_receiveResponse",value:function(n){var i,l,f=n.status_code;if((f===401||f===407)&&(this._ua.configuration.password!==null||this._ua.configuration.ha1!==null)){if(n.status_code===401?(i=n.parseHeader("www-authenticate"),l="authorization"):(i=n.parseHeader("proxy-authenticate"),l="proxy-authorization"),!i){rI.debug("".concat(n.status_code," with wrong or missing challenge, cannot authenticate")),this._eventHandlers.onReceiveResponse(n);return}if(!this._challenged||!this._staled&&i.stale===!0){if(this._auth||(this._auth=new nI({username:this._ua.configuration.authorization_user,password:this._ua.configuration.password,realm:this._ua.configuration.realm,ha1:this._ua.configuration.ha1})),!this._auth.authenticate(this._request,i)){this._eventHandlers.onReceiveResponse(n);return}this._challenged=!0,this._ua.set("realm",this._auth.get("realm")),this._ua.set("ha1",this._auth.get("ha1")),i.stale&&(this._staled=!0),this._request=this._request.clone(),this._request.cseq+=1,this._request.setHeader("cseq","".concat(this._request.cseq," ").concat(this._method)),this._request.setHeader(l,this._auth.toString()),this._eventHandlers.onAuthenticated(this._request),this.send()}else this._eventHandlers.onReceiveResponse(n)}else this._eventHandlers.onReceiveResponse(n)}}]),s}();function iI(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function jg(s,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}function sI(s,r,n){return r&&jg(s.prototype,r),n&&jg(s,n),s}var oI=Et,gh=Ht(),Di=_t,Vg=Ur,Gg=Ul,el=new oI("Registrator"),Eu=10,lI=function(){function s(r,n){iI(this,s),this._reg_id=1,this._ua=r,this._transport=n,this._registrar=r.configuration.registrar_server,this._expires=r.configuration.register_expires,this._call_id=gh.createRandomToken(22),this._cseq=0,this._to_uri=r.configuration.uri,this._registrationTimer=null,this._registering=!1,this._registered=!1,this._contact=this._ua.contact.toString(),this._contact+=";+sip.ice",this._extraHeaders=[],this._extraContactParams="",this._sipInstance='"<urn:uuid:'.concat(this._ua.configuration.instance_id,'>"'),this._contact+=";reg-id=".concat(this._reg_id),this._contact+=";+sip.instance=".concat(this._sipInstance)}return sI(s,[{key:"setExtraHeaders",value:function(n){Array.isArray(n)||(n=[]),this._extraHeaders=n.slice()}},{key:"setExtraContactParams",value:function(n){n instanceof Object||(n={}),this._extraContactParams="";for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var l=n[i];this._extraContactParams+=";".concat(i),l&&(this._extraContactParams+="=".concat(l))}}},{key:"register",value:function(){var n=this;if(this._registering){el.debug("Register request in progress...");return}var i=this._extraHeaders.slice();i.push("Contact: ".concat(this._contact,";expires=").concat(this._expires).concat(this._extraContactParams)),i.push("Expires: ".concat(this._expires));var l=new Vg.OutgoingRequest(Di.REGISTER,this._registrar,this._ua,{to_uri:this._to_uri,call_id:this._call_id,cseq:this._cseq+=1},i),f=new Gg(this._ua,l,{onRequestTimeout:function(){n._registrationFailure(null,Di.causes.REQUEST_TIMEOUT)},onTransportError:function(){n._registrationFailure(null,Di.causes.CONNECTION_ERROR)},onAuthenticated:function(){n._cseq+=1},onReceiveResponse:function(_){if(_.cseq===n._cseq)switch(n._registrationTimer!==null&&(clearTimeout(n._registrationTimer),n._registrationTimer=null),!0){case/^1[0-9]{2}$/.test(_.status_code):break;case/^2[0-9]{2}$/.test(_.status_code):{if(n._registering=!1,!_.hasHeader("Contact")){el.debug("no Contact header in response to REGISTER, response ignored");break}var T=_.headers.Contact.reduce(function(E,C){return E.concat(C.parsed)},[]),h=T.find(function(E){return n._sipInstance===E.getParam("+sip.instance")&&n._reg_id===parseInt(E.getParam("reg-id"))});if(h||(h=T.find(function(E){return E.uri.user===n._ua.contact.uri.user})),!h){el.debug("no Contact header pointing to us, response ignored");break}var g=h.getParam("expires");!g&&_.hasHeader("expires")&&(g=_.getHeader("expires")),g||(g=n._expires),g=Number(g),g<Eu&&(g=Eu);var m=g>64?g*1e3/2+Math.floor((g/2-32)*1e3*Math.random()):g*1e3-5e3;n._registrationTimer=setTimeout(function(){n._registrationTimer=null,n._ua.listeners("registrationExpiring").length===0?n.register():n._ua.emit("registrationExpiring")},m),h.hasParam("temp-gruu")&&(n._ua.contact.temp_gruu=h.getParam("temp-gruu").replace(/"/g,"")),h.hasParam("pub-gruu")&&(n._ua.contact.pub_gruu=h.getParam("pub-gruu").replace(/"/g,"")),n._registered||(n._registered=!0,n._ua.registered({response:_}));break}case/^423$/.test(_.status_code):{_.hasHeader("min-expires")?(n._expires=Number(_.getHeader("min-expires")),n._expires<Eu&&(n._expires=Eu),n.register()):(el.debug("423 response received for REGISTER without Min-Expires"),n._registrationFailure(_,Di.causes.SIP_FAILURE_CODE));break}default:{var b=gh.sipErrorCause(_.status_code);n._registrationFailure(_,b)}}}});this._registering=!0,f.send()}},{key:"unregister",value:function(){var n=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this._registered){el.debug("already unregistered");return}this._registered=!1,this._registrationTimer!==null&&(clearTimeout(this._registrationTimer),this._registrationTimer=null);var l=this._extraHeaders.slice();i.all?l.push("Contact: *".concat(this._extraContactParams)):l.push("Contact: ".concat(this._contact,";expires=0").concat(this._extraContactParams)),l.push("Expires: 0");var f=new Vg.OutgoingRequest(Di.REGISTER,this._registrar,this._ua,{to_uri:this._to_uri,call_id:this._call_id,cseq:this._cseq+=1},l),e=new Gg(this._ua,f,{onRequestTimeout:function(){n._unregistered(null,Di.causes.REQUEST_TIMEOUT)},onTransportError:function(){n._unregistered(null,Di.causes.CONNECTION_ERROR)},onAuthenticated:function(){n._cseq+=1},onReceiveResponse:function(T){switch(!0){case/^1[0-9]{2}$/.test(T.status_code):break;case/^2[0-9]{2}$/.test(T.status_code):n._unregistered(T);break;default:{var h=gh.sipErrorCause(T.status_code);n._unregistered(T,h)}}}});e.send()}},{key:"close",value:function(){this._registered&&this.unregister()}},{key:"onTransportClosed",value:function(){this._registering=!1,this._registrationTimer!==null&&(clearTimeout(this._registrationTimer),this._registrationTimer=null),this._registered&&(this._registered=!1,this._ua.unregistered({}))}},{key:"_registrationFailure",value:function(n,i){this._registering=!1,this._ua.registrationFailed({response:n||null,cause:i}),this._registered&&(this._registered=!1,this._ua.unregistered({response:n||null,cause:i}))}},{key:"_unregistered",value:function(n,i){this._registering=!1,this._registered=!1,this._ua.unregistered({response:n||null,cause:i||null})}},{key:"registered",get:function(){return this._registered}}]),s}();function aI(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function zg(s,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}function uI(s,r,n){return r&&zg(s.prototype,r),n&&zg(s,n),s}var vh=_t,Cu=Ll,cI=Ul,mh={onRequestTimeout:function(){},onTransportError:function(){},onSuccessResponse:function(){},onErrorResponse:function(){},onAuthenticated:function(){},onDialogError:function(){}},fI=function(){function s(r,n,i){aI(this,s),this._dialog=r,this._ua=r._ua,this._request=n,this._eventHandlers=i,this._reattempt=!1,this._reattemptTimer=null;for(var l in mh)Object.prototype.hasOwnProperty.call(mh,l)&&(this._eventHandlers[l]||(this._eventHandlers[l]=mh[l]))}return uI(s,[{key:"send",value:function(){var n=this,i=new cI(this._ua,this._request,{onRequestTimeout:function(){n._eventHandlers.onRequestTimeout()},onTransportError:function(){n._eventHandlers.onTransportError()},onAuthenticated:function(e){n._eventHandlers.onAuthenticated(e)},onReceiveResponse:function(e){n._receiveResponse(e)}});if(i.send(),(this._request.method===vh.INVITE||this._request.method===vh.UPDATE&&this._request.body)&&i.clientTransaction.state!==Cu.C.STATUS_TERMINATED){this._dialog.uac_pending_reply=!0;var l=function f(){(i.clientTransaction.state===Cu.C.STATUS_ACCEPTED||i.clientTransaction.state===Cu.C.STATUS_COMPLETED||i.clientTransaction.state===Cu.C.STATUS_TERMINATED)&&(i.clientTransaction.removeListener("stateChanged",f),n._dialog.uac_pending_reply=!1)};i.clientTransaction.on("stateChanged",l)}}},{key:"_receiveResponse",value:function(n){var i=this;n.status_code===408||n.status_code===481?this._eventHandlers.onDialogError(n):n.method===vh.INVITE&&n.status_code===491?this._reattempt?n.status_code>=200&&n.status_code<300?this._eventHandlers.onSuccessResponse(n):n.status_code>=300&&this._eventHandlers.onErrorResponse(n):(this._request.cseq=this._dialog.local_seqnum+=1,this._reattemptTimer=setTimeout(function(){i._dialog.isTerminated()||(i._reattempt=!0,i.send())},1e3)):n.status_code>=200&&n.status_code<300?this._eventHandlers.onSuccessResponse(n):n.status_code>=300&&this._eventHandlers.onErrorResponse(n)}},{key:"request",get:function(){return this._request}}]),s}();function hI(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function Kg(s,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}function Yg(s,r,n){return r&&Kg(s.prototype,r),n&&Kg(s,n),s}var dI=Et,Jg=Ur,Xr=_t,tl=Ll,pI=fI,yh=Ht(),Th=new dI("Dialog"),Qr={STATUS_EARLY:1,STATUS_CONFIRMED:2,STATUS_TERMINATED:3},_I=function(){Yg(s,null,[{key:"C",get:function(){return Qr}}]);function s(r,n,i){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Qr.STATUS_CONFIRMED;if(hI(this,s),this._owner=r,this._ua=r._ua,this._uac_pending_reply=!1,this._uas_pending_reply=!1,!n.hasHeader("contact"))return{error:"unable to create a Dialog without Contact header field"};n instanceof Jg.IncomingResponse&&(l=n.status_code<200?Qr.STATUS_EARLY:Qr.STATUS_CONFIRMED);var f=n.parseHeader("contact");i==="UAS"?(this._id={call_id:n.call_id,local_tag:n.to_tag,remote_tag:n.from_tag,toString:function(){return this.call_id+this.local_tag+this.remote_tag}},this._state=l,this._remote_seqnum=n.cseq,this._local_uri=n.parseHeader("to").uri,this._remote_uri=n.parseHeader("from").uri,this._remote_target=f.uri,this._route_set=n.getHeaders("record-route"),this._ack_seqnum=this._remote_seqnum):i==="UAC"&&(this._id={call_id:n.call_id,local_tag:n.from_tag,remote_tag:n.to_tag,toString:function(){return this.call_id+this.local_tag+this.remote_tag}},this._state=l,this._local_seqnum=n.cseq,this._local_uri=n.parseHeader("from").uri,this._remote_uri=n.parseHeader("to").uri,this._remote_target=f.uri,this._route_set=n.getHeaders("record-route").reverse(),this._ack_seqnum=null),this._ua.newDialog(this),Th.debug("new ".concat(i," dialog created with status ").concat(this._state===Qr.STATUS_EARLY?"EARLY":"CONFIRMED"))}return Yg(s,[{key:"isTerminated",value:function(){return this._status===Qr.STATUS_TERMINATED}},{key:"update",value:function(n,i){this._state=Qr.STATUS_CONFIRMED,Th.debug("dialog ".concat(this._id.toString(),"  changed to CONFIRMED state")),i==="UAC"&&(this._route_set=n.getHeaders("record-route").reverse())}},{key:"terminate",value:function(){Th.debug("dialog ".concat(this._id.toString()," deleted")),this._ua.destroyDialog(this),this._state=Qr.STATUS_TERMINATED}},{key:"sendRequest",value:function(n){var i=this,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=yh.cloneArray(l.extraHeaders),e=yh.cloneObject(l.eventHandlers),_=l.body||null,T=this._createRequest(n,f,_);e.onAuthenticated=function(){i._local_seqnum+=1};var h=new pI(this,T,e);return h.send(),T}},{key:"receiveRequest",value:function(n){this._checkInDialogRequest(n)&&(n.method===Xr.ACK&&this._ack_seqnum!==null?this._ack_seqnum=null:n.method===Xr.INVITE&&(this._ack_seqnum=n.cseq),this._owner.receiveRequest(n))}},{key:"_createRequest",value:function(n,i,l){i=yh.cloneArray(i),this._local_seqnum||(this._local_seqnum=Math.floor(Math.random()*1e4));var f=n===Xr.CANCEL||n===Xr.ACK?this._local_seqnum:this._local_seqnum+=1,e=new Jg.OutgoingRequest(n,this._remote_target,this._ua,{cseq:f,call_id:this._id.call_id,from_uri:this._local_uri,from_tag:this._id.local_tag,to_uri:this._remote_uri,to_tag:this._id.remote_tag,route_set:this._route_set},i,l);return e}},{key:"_checkInDialogRequest",value:function(n){var i=this;if(!this._remote_seqnum)this._remote_seqnum=n.cseq;else if(n.cseq<this._remote_seqnum)if(n.method===Xr.ACK){if(this._ack_seqnum===null||n.cseq!==this._ack_seqnum)return!1}else return n.reply(500),!1;else n.cseq>this._remote_seqnum&&(this._remote_seqnum=n.cseq);if(n.method===Xr.INVITE||n.method===Xr.UPDATE&&n.body){if(this._uac_pending_reply===!0)n.reply(491);else if(this._uas_pending_reply===!0){var l=(Math.random()*10|0)+1;return n.reply(500,null,["Retry-After:".concat(l)]),!1}else{this._uas_pending_reply=!0;var f=function e(){(n.server_transaction.state===tl.C.STATUS_ACCEPTED||n.server_transaction.state===tl.C.STATUS_COMPLETED||n.server_transaction.state===tl.C.STATUS_TERMINATED)&&(n.server_transaction.removeListener("stateChanged",e),i._uas_pending_reply=!1)};n.server_transaction.on("stateChanged",f)}n.hasHeader("contact")&&n.server_transaction.on("stateChanged",function(){n.server_transaction.state===tl.C.STATUS_ACCEPTED&&(i._remote_target=n.parseHeader("contact").uri)})}else n.method===Xr.NOTIFY&&n.hasHeader("contact")&&n.server_transaction.on("stateChanged",function(){n.server_transaction.state===tl.C.STATUS_COMPLETED&&(i._remote_target=n.parseHeader("contact").uri)});return!0}},{key:"id",get:function(){return this._id}},{key:"local_seqnum",get:function(){return this._local_seqnum},set:function(n){this._local_seqnum=n}},{key:"owner",get:function(){return this._owner}},{key:"uac_pending_reply",get:function(){return this._uac_pending_reply},set:function(n){this._uac_pending_reply=n}},{key:"uas_pending_reply",get:function(){return this._uas_pending_reply}}]),s}(),sp={exports:{}};function Wu(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Wu=function(n){return typeof n}:Wu=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Wu(s)}function gI(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function Xg(s,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}function vI(s,r,n){return r&&Xg(s.prototype,r),n&&Xg(s,n),s}function mI(s,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(r&&r.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),r&&zh(s,r)}function zh(s,r){return zh=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i},zh(s,r)}function yI(s){var r=SI();return function(){var i=cc(s),l;if(r){var f=cc(this).constructor;l=Reflect.construct(i,arguments,f)}else l=i.apply(this,arguments);return TI(this,l)}}function TI(s,r){return r&&(Wu(r)==="object"||typeof r=="function")?r:bI(s)}function bI(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function SI(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function cc(s){return cc=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},cc(s)}var wI=Lr.EventEmitter,EI=Et,CI=_t,AI=ai,Qg=Ht(),RI=new EI("RTCSession:DTMF"),m0={MIN_DURATION:70,MAX_DURATION:6e3,DEFAULT_DURATION:100,MIN_INTER_TONE_GAP:50,DEFAULT_INTER_TONE_GAP:500};sp.exports=function(s){mI(n,s);var r=yI(n);function n(i){var l;return gI(this,n),l=r.call(this),l._session=i,l._direction=null,l._tone=null,l._duration=null,l._request=null,l}return vI(n,[{key:"send",value:function(l){var f=this,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(l===void 0)throw new TypeError("Not enough arguments");if(this._direction="outgoing",this._session.status!==this._session.C.STATUS_CONFIRMED&&this._session.status!==this._session.C.STATUS_WAITING_FOR_ACK)throw new AI.InvalidStateError(this._session.status);var _=Qg.cloneArray(e.extraHeaders);if(this.eventHandlers=Qg.cloneObject(e.eventHandlers),typeof l=="string")l=l.toUpperCase();else if(typeof l=="number")l=l.toString();else throw new TypeError("Invalid tone: ".concat(l));if(l.match(/^[0-9A-DR#*]$/))this._tone=l;else throw new TypeError("Invalid tone: ".concat(l));this._duration=e.duration,_.push("Content-Type: application/dtmf-relay");var T="Signal=".concat(this._tone,`\r
`);T+="Duration=".concat(this._duration),this._session.newDTMF({originator:"local",dtmf:this,request:this._request}),this._session.sendRequest(CI.INFO,{extraHeaders:_,eventHandlers:{onSuccessResponse:function(g){f.emit("succeeded",{originator:"remote",response:g})},onErrorResponse:function(g){f.eventHandlers.onFailed&&f.eventHandlers.onFailed(),f.emit("failed",{originator:"remote",response:g})},onRequestTimeout:function(){f._session.onRequestTimeout()},onTransportError:function(){f._session.onTransportError()},onDialogError:function(){f._session.onDialogError()}},body:T})}},{key:"init_incoming",value:function(l){var f=/^(Signal\s*?=\s*?)([0-9A-D#*]{1})(\s)?.*/,e=/^(Duration\s?=\s?)([0-9]{1,4})(\s)?.*/;if(this._direction="incoming",this._request=l,l.reply(200),l.body){var _=l.body.split(`
`);_.length>=1&&f.test(_[0])&&(this._tone=_[0].replace(f,"$2")),_.length>=2&&e.test(_[1])&&(this._duration=parseInt(_[1].replace(e,"$2"),10))}this._duration||(this._duration=m0.DEFAULT_DURATION),this._tone?this._session.newDTMF({originator:"remote",dtmf:this,request:l}):RI.debug("invalid INFO DTMF received, discarded")}},{key:"tone",get:function(){return this._tone}},{key:"duration",get:function(){return this._duration}}]),n}(wI);sp.exports.C=m0;var OI=sp.exports;function ju(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ju=function(n){return typeof n}:ju=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ju(s)}function II(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function Zg(s,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}function kI(s,r,n){return r&&Zg(s.prototype,r),n&&Zg(s,n),s}function PI(s,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(r&&r.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),r&&Kh(s,r)}function Kh(s,r){return Kh=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i},Kh(s,r)}function NI(s){var r=LI();return function(){var i=fc(s),l;if(r){var f=fc(this).constructor;l=Reflect.construct(i,arguments,f)}else l=i.apply(this,arguments);return xI(this,l)}}function xI(s,r){return r&&(ju(r)==="object"||typeof r=="function")?r:DI(s)}function DI(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function LI(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function fc(s){return fc=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},fc(s)}var UI=Lr.EventEmitter,MI=_t,FI=ai,$I=Ht(),HI=function(s){PI(n,s);var r=NI(n);function n(i){var l;return II(this,n),l=r.call(this),l._session=i,l._direction=null,l._contentType=null,l._body=null,l}return kI(n,[{key:"send",value:function(l,f){var e=this,_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this._direction="outgoing",l===void 0)throw new TypeError("Not enough arguments");if(this._session.status!==this._session.C.STATUS_CONFIRMED&&this._session.status!==this._session.C.STATUS_WAITING_FOR_ACK)throw new FI.InvalidStateError(this._session.status);this._contentType=l,this._body=f;var T=$I.cloneArray(_.extraHeaders);T.push("Content-Type: ".concat(l)),this._session.newInfo({originator:"local",info:this,request:this.request}),this._session.sendRequest(MI.INFO,{extraHeaders:T,eventHandlers:{onSuccessResponse:function(g){e.emit("succeeded",{originator:"remote",response:g})},onErrorResponse:function(g){e.emit("failed",{originator:"remote",response:g})},onTransportError:function(){e._session.onTransportError()},onRequestTimeout:function(){e._session.onRequestTimeout()},onDialogError:function(){e._session.onDialogError()}},body:f})}},{key:"init_incoming",value:function(l){this._direction="incoming",this.request=l,l.reply(200),this._contentType=l.hasHeader("Content-Type")?l.getHeader("Content-Type").toLowerCase():void 0,this._body=l.body,this._session.newInfo({originator:"remote",info:this,request:l})}},{key:"contentType",get:function(){return this._contentType}},{key:"body",get:function(){return this._body}}]),n}(UI);function BI(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function ev(s,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}function qI(s,r,n){return r&&ev(s.prototype,r),n&&ev(s,n),s}var WI=Et,tv=_t,jI=new WI("RTCSession:ReferNotifier"),bh={event_type:"refer",body_type:"message/sipfrag;version=2.0",expires:300},VI=function(){function s(r,n,i){BI(this,s),this._session=r,this._id=n,this._expires=i||bh.expires,this._active=!0,this.notify(100)}return qI(s,[{key:"notify",value:function(n,i){if(jI.debug("notify()"),this._active!==!1){i=i||tv.REASON_PHRASE[n]||"";var l;n>=200?l="terminated;reason=noresource":l="active;expires=".concat(this._expires),this._session.sendRequest(tv.NOTIFY,{extraHeaders:["Event: ".concat(bh.event_type,";id=").concat(this._id),"Subscription-State: ".concat(l),"Content-Type: ".concat(bh.body_type)],body:"SIP/2.0 ".concat(n," ").concat(i),eventHandlers:{onErrorResponse:function(){this._active=!1}}})}}}]),s}();function Vu(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Vu=function(n){return typeof n}:Vu=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Vu(s)}function GI(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function nv(s,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}function zI(s,r,n){return r&&nv(s.prototype,r),n&&nv(s,n),s}function KI(s,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(r&&r.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),r&&Yh(s,r)}function Yh(s,r){return Yh=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i},Yh(s,r)}function YI(s){var r=QI();return function(){var i=hc(s),l;if(r){var f=hc(this).constructor;l=Reflect.construct(i,arguments,f)}else l=i.apply(this,arguments);return JI(this,l)}}function JI(s,r){return r&&(Vu(r)==="object"||typeof r=="function")?r:XI(s)}function XI(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function QI(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function hc(s){return hc=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},hc(s)}var ZI=Lr.EventEmitter,ek=Et,nl=_t,tk=lr(),rv=Ht(),Li=new ek("RTCSession:ReferSubscriber"),nk=function(s){KI(n,s);var r=YI(n);function n(i){var l;return GI(this,n),l=r.call(this),l._id=null,l._session=i,l}return zI(n,[{key:"sendRefer",value:function(l){var f=this,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Li.debug("sendRefer()");var _=rv.cloneArray(e.extraHeaders),T=rv.cloneObject(e.eventHandlers);for(var h in T)Object.prototype.hasOwnProperty.call(T,h)&&this.on(h,T[h]);var g=null;e.replaces&&(g=e.replaces._request.call_id,g+=";to-tag=".concat(e.replaces._to_tag),g+=";from-tag=".concat(e.replaces._from_tag),g=encodeURIComponent(g));var m="Refer-To: <".concat(l).concat(g?"?Replaces=".concat(g):"",">");if(_.push(m),!_.some(function(C){return C.toLowerCase().startsWith("referred-by:")})){var b="Referred-By: <".concat(this._session._ua._configuration.uri._scheme,":").concat(this._session._ua._configuration.uri._user,"@").concat(this._session._ua._configuration.uri._host,">");_.push(b)}_.push("Contact: ".concat(this._session.contact));var E=this._session.sendRequest(nl.REFER,{extraHeaders:_,eventHandlers:{onSuccessResponse:function(N){f._requestSucceeded(N)},onErrorResponse:function(N){f._requestFailed(N,nl.causes.REJECTED)},onTransportError:function(){f._requestFailed(null,nl.causes.CONNECTION_ERROR)},onRequestTimeout:function(){f._requestFailed(null,nl.causes.REQUEST_TIMEOUT)},onDialogError:function(){f._requestFailed(null,nl.causes.DIALOG_ERROR)}}});this._id=E.cseq}},{key:"receiveNotify",value:function(l){if(Li.debug("receiveNotify()"),!!l.body){var f=tk.parse(l.body.trim().split(`\r
`,1)[0],"Status_Line");if(f===-1){Li.debug('receiveNotify() | error parsing NOTIFY body: "'.concat(l.body,'"'));return}switch(!0){case/^100$/.test(f.status_code):this.emit("trying",{request:l,status_line:f});break;case/^1[0-9]{2}$/.test(f.status_code):this.emit("progress",{request:l,status_line:f});break;case/^2[0-9]{2}$/.test(f.status_code):this.emit("accepted",{request:l,status_line:f});break;default:this.emit("failed",{request:l,status_line:f});break}}}},{key:"_requestSucceeded",value:function(l){Li.debug("REFER succeeded"),Li.debug('emit "requestSucceeded"'),this.emit("requestSucceeded",{response:l})}},{key:"_requestFailed",value:function(l,f){Li.debug("REFER failed"),Li.debug('emit "requestFailed"'),this.emit("requestFailed",{response:l||null,cause:f})}},{key:"id",get:function(){return this._id}}]),n}(ZI);function Gu(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Gu=function(n){return typeof n}:Gu=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Gu(s)}function Ir(s,r){var n;if(typeof Symbol>"u"||s[Symbol.iterator]==null){if(Array.isArray(s)||(n=rk(s))||r&&s&&typeof s.length=="number"){n&&(s=n);var i=0,l=function(){};return{s:l,n:function(){return i>=s.length?{done:!0}:{done:!1,value:s[i++]}},e:function(h){throw h},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var f=!0,e=!1,_;return{s:function(){n=s[Symbol.iterator]()},n:function(){var h=n.next();return f=h.done,h},e:function(h){e=!0,_=h},f:function(){try{!f&&n.return!=null&&n.return()}finally{if(e)throw _}}}}function rk(s,r){if(s){if(typeof s=="string")return iv(s,r);var n=Object.prototype.toString.call(s).slice(8,-1);if(n==="Object"&&s.constructor&&(n=s.constructor.name),n==="Map"||n==="Set")return Array.from(s);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iv(s,r)}}function iv(s,r){(r==null||r>s.length)&&(r=s.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=s[n];return i}function ik(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function sv(s,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}function ov(s,r,n){return r&&sv(s.prototype,r),n&&sv(s,n),s}function sk(s,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(r&&r.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),r&&Jh(s,r)}function Jh(s,r){return Jh=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i},Jh(s,r)}function ok(s){var r=uk();return function(){var i=dc(s),l;if(r){var f=dc(this).constructor;l=Reflect.construct(i,arguments,f)}else l=i.apply(this,arguments);return lk(this,l)}}function lk(s,r){return r&&(Gu(r)==="object"||typeof r=="function")?r:ak(s)}function ak(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function uk(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function dc(s){return dc=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},dc(s)}var ck=Lr.EventEmitter,lv=ar,fk=Et,le=_t,Ui=ai,av=Ll,Ze=Ht(),rl=v0,hk=Ur,Au=_I,dk=Ul,gn=OI,uv=HI,pk=VI,_k=nk,cv=ui(),J=new fk("RTCSession"),Q={STATUS_NULL:0,STATUS_INVITE_SENT:1,STATUS_1XX_RECEIVED:2,STATUS_INVITE_RECEIVED:3,STATUS_WAITING_FOR_ANSWER:4,STATUS_ANSWERED:5,STATUS_WAITING_FOR_ACK:6,STATUS_CANCELED:7,STATUS_TERMINATED:8,STATUS_CONFIRMED:9},Ru=["audio","video"],gk=function(s){sk(n,s);var r=ok(n);ov(n,null,[{key:"C",get:function(){return Q}}]);function n(i){var l;return ik(this,n),J.debug("new"),l=r.call(this),l._id=null,l._ua=i,l._status=Q.STATUS_NULL,l._dialog=null,l._earlyDialogs={},l._contact=null,l._from_tag=null,l._to_tag=null,l._connection=null,l._connectionPromiseQueue=Promise.resolve(),l._request=null,l._is_canceled=!1,l._cancel_reason="",l._is_confirmed=!1,l._late_sdp=!1,l._rtcOfferConstraints=null,l._rtcAnswerConstraints=null,l._localMediaStream=null,l._localMediaStreamLocallyGenerated=!1,l._rtcReady=!0,l._iceReady=!1,l._timers={ackTimer:null,expiresTimer:null,invite2xxTimer:null,userNoAnswerTimer:null},l._direction=null,l._local_identity=null,l._remote_identity=null,l._start_time=null,l._end_time=null,l._tones=null,l._audioMuted=!1,l._videoMuted=!1,l._localHold=!1,l._remoteHold=!1,l._sessionTimers={enabled:l._ua.configuration.session_timers,refreshMethod:l._ua.configuration.session_timers_refresh_method,defaultExpires:le.SESSION_EXPIRES,currentExpires:null,running:!1,refresher:!1,timer:null},l._referSubscribers={},l._data={},l}return ov(n,[{key:"isInProgress",value:function(){switch(this._status){case Q.STATUS_NULL:case Q.STATUS_INVITE_SENT:case Q.STATUS_1XX_RECEIVED:case Q.STATUS_INVITE_RECEIVED:case Q.STATUS_WAITING_FOR_ANSWER:return!0;default:return!1}}},{key:"isEstablished",value:function(){switch(this._status){case Q.STATUS_ANSWERED:case Q.STATUS_WAITING_FOR_ACK:case Q.STATUS_CONFIRMED:return!0;default:return!1}}},{key:"isEnded",value:function(){switch(this._status){case Q.STATUS_CANCELED:case Q.STATUS_TERMINATED:return!0;default:return!1}}},{key:"isMuted",value:function(){return{audio:this._audioMuted,video:this._videoMuted}}},{key:"isOnHold",value:function(){return{local:this._localHold,remote:this._remoteHold}}},{key:"connect",value:function(l){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2?arguments[2]:void 0;J.debug("connect()");var _=l,T=Ze.cloneObject(f.eventHandlers),h=Ze.cloneArray(f.extraHeaders),g=Ze.cloneObject(f.mediaConstraints,{audio:!0,video:!0}),m=f.mediaStream||null,b=Ze.cloneObject(f.pcConfig,{iceServers:[]}),E=f.rtcConstraints||null,C=f.rtcOfferConstraints||null;if(this._rtcOfferConstraints=C,this._rtcAnswerConstraints=f.rtcAnswerConstraints||null,this._data=f.data||this._data,l===void 0)throw new TypeError("Not enough arguments");if(this._status!==Q.STATUS_NULL)throw new Ui.InvalidStateError(this._status);if(!window.RTCPeerConnection)throw new Ui.NotSupportedError("WebRTC not supported");if(l=this._ua.normalizeTarget(l),!l)throw new TypeError("Invalid target: ".concat(_));this._sessionTimers.enabled&&Ze.isDecimal(f.sessionTimersExpires)&&(f.sessionTimersExpires>=le.MIN_SESSION_EXPIRES?this._sessionTimers.defaultExpires=f.sessionTimersExpires:this._sessionTimers.defaultExpires=le.SESSION_EXPIRES);for(var N in T)Object.prototype.hasOwnProperty.call(T,N)&&this.on(N,T[N]);this._from_tag=Ze.newTag();var I=f.anonymous||!1,P={from_tag:this._from_tag};this._contact=this._ua.contact.toString({anonymous:I,outbound:!0}),I?(P.from_display_name="Anonymous",P.from_uri=new cv("sip","anonymous","anonymous.invalid"),h.push("P-Preferred-Identity: ".concat(this._ua.configuration.uri.toString())),h.push("Privacy: id")):f.fromUserName&&(P.from_uri=new cv("sip",f.fromUserName,this._ua.configuration.uri.host),h.push("P-Preferred-Identity: ".concat(this._ua.configuration.uri.toString()))),f.fromDisplayName&&(P.from_display_name=f.fromDisplayName),h.push("Contact: ".concat(this._contact)),h.push("Content-Type: application/sdp"),this._sessionTimers.enabled&&h.push("Session-Expires: ".concat(this._sessionTimers.defaultExpires).concat(this._ua.configuration.session_timers_force_refresher?";refresher=uac":"")),this._request=new hk.InitialOutgoingInviteRequest(l,this._ua,P,h),this._id=this._request.call_id+this._from_tag,this._createRTCConnection(b,E),this._direction="outgoing",this._local_identity=this._request.from,this._remote_identity=this._request.to,e&&e(this),this._newRTCSession("local",this._request),this._sendInitialRequest(g,C,m)}},{key:"init_incoming",value:function(l,f){var e=this;J.debug("init_incoming()");var _,T=l.hasHeader("Content-Type")?l.getHeader("Content-Type").toLowerCase():void 0;if(l.body&&T!=="application/sdp"){l.reply(415);return}if(this._status=Q.STATUS_INVITE_RECEIVED,this._from_tag=l.from_tag,this._id=l.call_id+this._from_tag,this._request=l,this._contact=this._ua.contact.toString(),l.hasHeader("expires")&&(_=l.getHeader("expires")*1e3),l.to_tag=Ze.newTag(),!this._createDialog(l,"UAS",!0)){l.reply(500,"Missing Contact header field");return}l.body?this._late_sdp=!1:this._late_sdp=!0,this._status=Q.STATUS_WAITING_FOR_ANSWER,this._timers.userNoAnswerTimer=setTimeout(function(){l.reply(408),e._failed("local",null,le.causes.NO_ANSWER)},this._ua.configuration.no_answer_timeout),_&&(this._timers.expiresTimer=setTimeout(function(){e._status===Q.STATUS_WAITING_FOR_ANSWER&&(l.reply(487),e._failed("system",null,le.causes.EXPIRES))},_)),this._direction="incoming",this._local_identity=l.to,this._remote_identity=l.from,f&&f(this),this._newRTCSession("remote",l),this._status!==Q.STATUS_TERMINATED&&(l.reply(180,null,["Contact: ".concat(this._contact)]),this._progress("local",null))}},{key:"answer",value:function(){var l=this,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};J.debug("answer()");var e=this._request,_=Ze.cloneArray(f.extraHeaders),T=Ze.cloneObject(f.mediaConstraints),h=f.mediaStream||null,g=Ze.cloneObject(f.pcConfig,{iceServers:[]}),m=f.rtcConstraints||null,b=f.rtcAnswerConstraints||null,E=Ze.cloneObject(f.rtcOfferConstraints),C,N=!1,I=!1,P=!1,x=!1;if(this._rtcAnswerConstraints=b,this._rtcOfferConstraints=f.rtcOfferConstraints||null,this._data=f.data||this._data,this._direction!=="incoming")throw new Ui.NotSupportedError('"answer" not supported for outgoing RTCSession');if(this._status!==Q.STATUS_WAITING_FOR_ANSWER)throw new Ui.InvalidStateError(this._status);if(this._sessionTimers.enabled&&Ze.isDecimal(f.sessionTimersExpires)&&(f.sessionTimersExpires>=le.MIN_SESSION_EXPIRES?this._sessionTimers.defaultExpires=f.sessionTimersExpires:this._sessionTimers.defaultExpires=le.SESSION_EXPIRES),this._status=Q.STATUS_ANSWERED,!this._createDialog(e,"UAS")){e.reply(500,"Error creating dialog");return}clearTimeout(this._timers.userNoAnswerTimer),_.unshift("Contact: ".concat(this._contact));var U=e.parseSDP();Array.isArray(U.media)||(U.media=[U.media]);var G=Ir(U.media),te;try{for(G.s();!(te=G.n()).done;){var we=te.value;we.type==="audio"&&(N=!0,(!we.direction||we.direction==="sendrecv")&&(P=!0)),we.type==="video"&&(I=!0,(!we.direction||we.direction==="sendrecv")&&(x=!0))}}catch(de){G.e(de)}finally{G.f()}if(h&&T.audio===!1){C=h.getAudioTracks();var _e=Ir(C),X;try{for(_e.s();!(X=_e.n()).done;){var $=X.value;h.removeTrack($)}}catch(de){_e.e(de)}finally{_e.f()}}if(h&&T.video===!1){C=h.getVideoTracks();var se=Ir(C),me;try{for(se.s();!(me=se.n()).done;){var ie=me.value;h.removeTrack(ie)}}catch(de){se.e(de)}finally{se.f()}}!h&&T.audio===void 0&&(T.audio=P),!h&&T.video===void 0&&(T.video=x),!h&&!N&&!E.offerToReceiveAudio&&(T.audio=!1),!h&&!I&&!E.offerToReceiveVideo&&(T.video=!1),this._createRTCConnection(g,m),Promise.resolve().then(function(){if(h)return h;if(T.audio||T.video)return l._localMediaStreamLocallyGenerated=!0,navigator.mediaDevices.getUserMedia(T).catch(function(de){throw l._status===Q.STATUS_TERMINATED?new Error("terminated"):(e.reply(480),l._failed("local",null,le.causes.USER_DENIED_MEDIA_ACCESS),J.warn('emit "getusermediafailed" [error:%o]',de),l.emit("getusermediafailed",de),new Error("getUserMedia() failed"))})}).then(function(de){if(l._status===Q.STATUS_TERMINATED)throw new Error("terminated");l._localMediaStream=de,de&&de.getTracks().forEach(function(Z){l._connection.addTrack(Z,de)})}).then(function(){if(!l._late_sdp){var de={originator:"remote",type:"offer",sdp:e.body};J.debug('emit "sdp"'),l.emit("sdp",de);var Z=new RTCSessionDescription({type:"offer",sdp:de.sdp});return l._connectionPromiseQueue=l._connectionPromiseQueue.then(function(){return l._connection.setRemoteDescription(Z)}).catch(function(re){throw e.reply(488),l._failed("system",null,le.causes.WEBRTC_ERROR),J.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',re),l.emit("peerconnection:setremotedescriptionfailed",re),new Error("peerconnection.setRemoteDescription() failed")}),l._connectionPromiseQueue}}).then(function(){if(l._status===Q.STATUS_TERMINATED)throw new Error("terminated");return l._connecting(e),l._late_sdp?l._createLocalDescription("offer",l._rtcOfferConstraints).catch(function(){throw e.reply(500),new Error("_createLocalDescription() failed")}):l._createLocalDescription("answer",b).catch(function(){throw e.reply(500),new Error("_createLocalDescription() failed")})}).then(function(de){if(l._status===Q.STATUS_TERMINATED)throw new Error("terminated");l._handleSessionTimersInIncomingRequest(e,_),e.reply(200,null,_,de,function(){l._status=Q.STATUS_WAITING_FOR_ACK,l._setInvite2xxTimer(e,de),l._setACKTimer(),l._accepted("local")},function(){l._failed("system",null,le.causes.CONNECTION_ERROR)})}).catch(function(de){l._status!==Q.STATUS_TERMINATED&&J.warn(de)})}},{key:"terminate",value:function(){var l=this,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};J.debug("terminate()");var e=f.cause||le.causes.BYE,_=Ze.cloneArray(f.extraHeaders),T=f.body,h,g=f.status_code,m=f.reason_phrase;if(this._status===Q.STATUS_TERMINATED)throw new Ui.InvalidStateError(this._status);switch(this._status){case Q.STATUS_NULL:case Q.STATUS_INVITE_SENT:case Q.STATUS_1XX_RECEIVED:if(J.debug("canceling session"),g&&(g<200||g>=700))throw new TypeError("Invalid status_code: ".concat(g));g&&(m=m||le.REASON_PHRASE[g]||"",h="SIP ;cause=".concat(g,' ;text="').concat(m,'"')),this._status===Q.STATUS_NULL||this._status===Q.STATUS_INVITE_SENT?(this._is_canceled=!0,this._cancel_reason=h):this._status===Q.STATUS_1XX_RECEIVED&&this._request.cancel(h),this._status=Q.STATUS_CANCELED,this._failed("local",null,le.causes.CANCELED);break;case Q.STATUS_WAITING_FOR_ANSWER:case Q.STATUS_ANSWERED:if(J.debug("rejecting session"),g=g||480,g<300||g>=700)throw new TypeError("Invalid status_code: ".concat(g));this._request.reply(g,m,_,T),this._failed("local",null,le.causes.REJECTED);break;case Q.STATUS_WAITING_FOR_ACK:case Q.STATUS_CONFIRMED:if(J.debug("terminating session"),m=f.reason_phrase||le.REASON_PHRASE[g]||"",g&&(g<200||g>=700))throw new TypeError("Invalid status_code: ".concat(g));if(g&&_.push("Reason: SIP ;cause=".concat(g,'; text="').concat(m,'"')),this._status===Q.STATUS_WAITING_FOR_ACK&&this._direction==="incoming"&&this._request.server_transaction.state!==av.C.STATUS_TERMINATED){var b=this._dialog;this.receiveRequest=function(E){var C=E.method;C===le.ACK&&(l.sendRequest(le.BYE,{extraHeaders:_,body:T}),b.terminate())},this._request.server_transaction.on("stateChanged",function(){l._request.server_transaction.state===av.C.STATUS_TERMINATED&&(l.sendRequest(le.BYE,{extraHeaders:_,body:T}),b.terminate())}),this._ended("local",null,e),this._dialog=b,this._ua.newDialog(b)}else this.sendRequest(le.BYE,{extraHeaders:_,body:T}),this._ended("local",null,e)}}},{key:"sendDTMF",value:function(l){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};J.debug("sendDTMF() | tones: %s",l);var e=0,_=f.duration||null,T=f.interToneGap||null,h=f.transportType||le.DTMF_TRANSPORT.INFO;if(l===void 0)throw new TypeError("Not enough arguments");if(this._status!==Q.STATUS_CONFIRMED&&this._status!==Q.STATUS_WAITING_FOR_ACK&&this._status!==Q.STATUS_1XX_RECEIVED)throw new Ui.InvalidStateError(this._status);if(h!==le.DTMF_TRANSPORT.INFO&&h!==le.DTMF_TRANSPORT.RFC2833)throw new TypeError("invalid transportType: ".concat(h));if(typeof l=="number"&&(l=l.toString()),!l||typeof l!="string"||!l.match(/^[0-9A-DR#*,]+$/i))throw new TypeError("Invalid tones: ".concat(l));if(_&&!Ze.isDecimal(_))throw new TypeError("Invalid tone duration: ".concat(_));if(_?_<gn.C.MIN_DURATION?(J.debug('"duration" value is lower than the minimum allowed, setting it to '.concat(gn.C.MIN_DURATION," milliseconds")),_=gn.C.MIN_DURATION):_>gn.C.MAX_DURATION?(J.debug('"duration" value is greater than the maximum allowed, setting it to '.concat(gn.C.MAX_DURATION," milliseconds")),_=gn.C.MAX_DURATION):_=Math.abs(_):_=gn.C.DEFAULT_DURATION,f.duration=_,T&&!Ze.isDecimal(T))throw new TypeError("Invalid interToneGap: ".concat(T));if(T?T<gn.C.MIN_INTER_TONE_GAP?(J.debug('"interToneGap" value is lower than the minimum allowed, setting it to '.concat(gn.C.MIN_INTER_TONE_GAP," milliseconds")),T=gn.C.MIN_INTER_TONE_GAP):T=Math.abs(T):T=gn.C.DEFAULT_INTER_TONE_GAP,h===le.DTMF_TRANSPORT.RFC2833){var g=this._getDTMFRTPSender();g&&(l=g.toneBuffer+l,g.insertDTMF(l,_,T));return}if(this._tones){this._tones+=l;return}this._tones=l,m.call(this);function m(){var b=this,E;if(this._status===Q.STATUS_TERMINATED||!this._tones||e>=this._tones.length){this._tones=null;return}var C=this._tones[e];if(e+=1,C===",")E=2e3;else{var N=new gn(this);f.eventHandlers={onFailed:function(){b._tones=null}},N.send(C,f),E=_+T}setTimeout(m.bind(this),E)}}},{key:"sendInfo",value:function(l,f){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(J.debug("sendInfo()"),this._status!==Q.STATUS_CONFIRMED&&this._status!==Q.STATUS_WAITING_FOR_ACK&&this._status!==Q.STATUS_1XX_RECEIVED)throw new Ui.InvalidStateError(this._status);var _=new uv(this);_.send(l,f,e)}},{key:"mute",value:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{audio:!0,video:!1};J.debug("mute()");var f=!1,e=!1;this._audioMuted===!1&&l.audio&&(f=!0,this._audioMuted=!0,this._toggleMuteAudio(!0)),this._videoMuted===!1&&l.video&&(e=!0,this._videoMuted=!0,this._toggleMuteVideo(!0)),(f===!0||e===!0)&&this._onmute({audio:f,video:e})}},{key:"unmute",value:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{audio:!0,video:!0};J.debug("unmute()");var f=!1,e=!1;this._audioMuted===!0&&l.audio&&(f=!0,this._audioMuted=!1,this._localHold===!1&&this._toggleMuteAudio(!1)),this._videoMuted===!0&&l.video&&(e=!0,this._videoMuted=!1,this._localHold===!1&&this._toggleMuteVideo(!1)),(f===!0||e===!0)&&this._onunmute({audio:f,video:e})}},{key:"hold",value:function(){var l=this,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;if(J.debug("hold()"),this._status!==Q.STATUS_WAITING_FOR_ACK&&this._status!==Q.STATUS_CONFIRMED||this._localHold===!0||!this._isReadyToReOffer())return!1;this._localHold=!0,this._onhold("local");var _={succeeded:function(){e&&e()},failed:function(){l.terminate({cause:le.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Hold Failed"})}};return f.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:_,extraHeaders:f.extraHeaders}):this._sendReinvite({eventHandlers:_,extraHeaders:f.extraHeaders}),!0}},{key:"unhold",value:function(){var l=this,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;if(J.debug("unhold()"),this._status!==Q.STATUS_WAITING_FOR_ACK&&this._status!==Q.STATUS_CONFIRMED||this._localHold===!1||!this._isReadyToReOffer())return!1;this._localHold=!1,this._onunhold("local");var _={succeeded:function(){e&&e()},failed:function(){l.terminate({cause:le.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Unhold Failed"})}};return f.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:_,extraHeaders:f.extraHeaders}):this._sendReinvite({eventHandlers:_,extraHeaders:f.extraHeaders}),!0}},{key:"renegotiate",value:function(){var l=this,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;J.debug("renegotiate()");var _=f.rtcOfferConstraints||null;if(this._status!==Q.STATUS_WAITING_FOR_ACK&&this._status!==Q.STATUS_CONFIRMED||!this._isReadyToReOffer())return!1;var T={succeeded:function(){e&&e()},failed:function(){l.terminate({cause:le.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Media Renegotiation Failed"})}};return this._setLocalMediaStatus(),f.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:T,rtcOfferConstraints:_,extraHeaders:f.extraHeaders}):this._sendReinvite({eventHandlers:T,rtcOfferConstraints:_,extraHeaders:f.extraHeaders}),!0}},{key:"refer",value:function(l,f){var e=this;J.debug("refer()");var _=l;if(this._status!==Q.STATUS_WAITING_FOR_ACK&&this._status!==Q.STATUS_CONFIRMED)return!1;if(l=this._ua.normalizeTarget(l),!l)throw new TypeError("Invalid target: ".concat(_));var T=new _k(this);T.sendRefer(l,f);var h=T.id;return this._referSubscribers[h]=T,T.on("requestFailed",function(){delete e._referSubscribers[h]}),T.on("accepted",function(){delete e._referSubscribers[h]}),T.on("failed",function(){delete e._referSubscribers[h]}),T}},{key:"sendRequest",value:function(l,f){return J.debug("sendRequest()"),this._dialog.sendRequest(l,f)}},{key:"receiveRequest",value:function(l){var f=this;if(J.debug("receiveRequest()"),l.method===le.CANCEL)(this._status===Q.STATUS_WAITING_FOR_ANSWER||this._status===Q.STATUS_ANSWERED)&&(this._status=Q.STATUS_CANCELED,this._request.reply(487),this._failed("remote",l,le.causes.CANCELED));else switch(l.method){case le.ACK:if(this._status!==Q.STATUS_WAITING_FOR_ACK)return;if(this._status=Q.STATUS_CONFIRMED,clearTimeout(this._timers.ackTimer),clearTimeout(this._timers.invite2xxTimer),this._late_sdp){if(!l.body){this.terminate({cause:le.causes.MISSING_SDP,status_code:400});break}var e={originator:"remote",type:"answer",sdp:l.body};J.debug('emit "sdp"'),this.emit("sdp",e);var _=new RTCSessionDescription({type:"answer",sdp:e.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){return f._connection.setRemoteDescription(_)}).then(function(){f._is_confirmed||f._confirmed("remote",l)}).catch(function(h){f.terminate({cause:le.causes.BAD_MEDIA_DESCRIPTION,status_code:488}),J.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',h),f.emit("peerconnection:setremotedescriptionfailed",h)})}else this._is_confirmed||this._confirmed("remote",l);break;case le.BYE:this._status===Q.STATUS_CONFIRMED||this._status===Q.STATUS_WAITING_FOR_ACK?(l.reply(200),this._ended("remote",l,le.causes.BYE)):this._status===Q.STATUS_INVITE_RECEIVED||this._status===Q.STATUS_WAITING_FOR_ANSWER?(l.reply(200),this._request.reply(487,"BYE Received"),this._ended("remote",l,le.causes.BYE)):l.reply(403,"Wrong Status");break;case le.INVITE:this._status===Q.STATUS_CONFIRMED?l.hasHeader("replaces")?this._receiveReplaces(l):this._receiveReinvite(l):l.reply(403,"Wrong Status");break;case le.INFO:if(this._status===Q.STATUS_1XX_RECEIVED||this._status===Q.STATUS_WAITING_FOR_ANSWER||this._status===Q.STATUS_ANSWERED||this._status===Q.STATUS_WAITING_FOR_ACK||this._status===Q.STATUS_CONFIRMED){var T=l.hasHeader("Content-Type")?l.getHeader("Content-Type").toLowerCase():void 0;T&&T.match(/^application\/dtmf-relay/i)?new gn(this).init_incoming(l):T!==void 0?new uv(this).init_incoming(l):l.reply(415)}else l.reply(403,"Wrong Status");break;case le.UPDATE:this._status===Q.STATUS_CONFIRMED?this._receiveUpdate(l):l.reply(403,"Wrong Status");break;case le.REFER:this._status===Q.STATUS_CONFIRMED?this._receiveRefer(l):l.reply(403,"Wrong Status");break;case le.NOTIFY:this._status===Q.STATUS_CONFIRMED?this._receiveNotify(l):l.reply(403,"Wrong Status");break;default:l.reply(501)}}},{key:"onTransportError",value:function(){J.warn("onTransportError()"),this._status!==Q.STATUS_TERMINATED&&this.terminate({status_code:500,reason_phrase:le.causes.CONNECTION_ERROR,cause:le.causes.CONNECTION_ERROR})}},{key:"onRequestTimeout",value:function(){J.warn("onRequestTimeout()"),this._status!==Q.STATUS_TERMINATED&&this.terminate({status_code:408,reason_phrase:le.causes.REQUEST_TIMEOUT,cause:le.causes.REQUEST_TIMEOUT})}},{key:"onDialogError",value:function(){J.warn("onDialogError()"),this._status!==Q.STATUS_TERMINATED&&this.terminate({status_code:500,reason_phrase:le.causes.DIALOG_ERROR,cause:le.causes.DIALOG_ERROR})}},{key:"newDTMF",value:function(l){J.debug("newDTMF()"),this.emit("newDTMF",l)}},{key:"newInfo",value:function(l){J.debug("newInfo()"),this.emit("newInfo",l)}},{key:"_isReadyToReOffer",value:function(){return this._rtcReady?this._dialog?this._dialog.uac_pending_reply===!0||this._dialog.uas_pending_reply===!0?(J.debug("_isReadyToReOffer() | there is another INVITE/UPDATE transaction in progress"),!1):!0:(J.debug("_isReadyToReOffer() | session not established yet"),!1):(J.debug("_isReadyToReOffer() | internal WebRTC status not ready"),!1)}},{key:"_close",value:function(){if(J.debug("close()"),this._localMediaStream&&this._localMediaStreamLocallyGenerated&&(J.debug("close() | closing local MediaStream"),Ze.closeMediaStream(this._localMediaStream)),this._status!==Q.STATUS_TERMINATED){if(this._status=Q.STATUS_TERMINATED,this._connection)try{this._connection.close()}catch(_){J.warn("close() | error closing the RTCPeerConnection: %o",_)}for(var l in this._timers)Object.prototype.hasOwnProperty.call(this._timers,l)&&clearTimeout(this._timers[l]);clearTimeout(this._sessionTimers.timer),this._dialog&&(this._dialog.terminate(),delete this._dialog);for(var f in this._earlyDialogs)Object.prototype.hasOwnProperty.call(this._earlyDialogs,f)&&(this._earlyDialogs[f].terminate(),delete this._earlyDialogs[f]);for(var e in this._referSubscribers)Object.prototype.hasOwnProperty.call(this._referSubscribers,e)&&delete this._referSubscribers[e];this._ua.destroyRTCSession(this)}}},{key:"_setInvite2xxTimer",value:function(l,f){var e=rl.T1;function _(){this._status===Q.STATUS_WAITING_FOR_ACK&&(l.reply(200,null,["Contact: ".concat(this._contact)],f),e<rl.T2&&(e=e*2,e>rl.T2&&(e=rl.T2)),this._timers.invite2xxTimer=setTimeout(_.bind(this),e))}this._timers.invite2xxTimer=setTimeout(_.bind(this),e)}},{key:"_setACKTimer",value:function(){var l=this;this._timers.ackTimer=setTimeout(function(){l._status===Q.STATUS_WAITING_FOR_ACK&&(J.debug("no ACK received, terminating the session"),clearTimeout(l._timers.invite2xxTimer),l.sendRequest(le.BYE),l._ended("remote",null,le.causes.NO_ACK))},rl.TIMER_H)}},{key:"_createRTCConnection",value:function(l,f){var e=this;this._connection=new RTCPeerConnection(l,f),this._connection.addEventListener("iceconnectionstatechange",function(){var _=e._connection.iceConnectionState;_==="failed"&&e.terminate({cause:le.causes.RTP_TIMEOUT,status_code:408,reason_phrase:le.causes.RTP_TIMEOUT})}),J.debug('emit "peerconnection"'),this.emit("peerconnection",{peerconnection:this._connection})}},{key:"_createLocalDescription",value:function(l,f){var e=this;if(J.debug("createLocalDescription()"),l!=="offer"&&l!=="answer")throw new Error('createLocalDescription() | invalid type "'.concat(l,'"'));var _=this._connection;return this._rtcReady=!1,Promise.resolve().then(function(){return l==="offer"?_.createOffer(f).catch(function(T){return J.warn('emit "peerconnection:createofferfailed" [error:%o]',T),e.emit("peerconnection:createofferfailed",T),Promise.reject(T)}):_.createAnswer(f).catch(function(T){return J.warn('emit "peerconnection:createanswerfailed" [error:%o]',T),e.emit("peerconnection:createanswerfailed",T),Promise.reject(T)})}).then(function(T){return _.setLocalDescription(T).catch(function(h){return e._rtcReady=!0,J.warn('emit "peerconnection:setlocaldescriptionfailed" [error:%o]',h),e.emit("peerconnection:setlocaldescriptionfailed",h),Promise.reject(h)})}).then(function(){var T=f&&f.iceRestart;if(_.iceGatheringState==="complete"&&!T||_.iceGatheringState==="gathering"&&e._iceReady){e._rtcReady=!0;var h={originator:"local",type:l,sdp:_.localDescription.sdp};return J.debug('emit "sdp"'),e.emit("sdp",h),Promise.resolve(h.sdp)}return new Promise(function(g){var m=!1,b,E;e._iceReady=!1;var C=function(){if(!m){_.removeEventListener("icecandidate",b),_.removeEventListener("icegatheringstatechange",E),m=!0,e._rtcReady=!0,e._iceReady=!0;var I={originator:"local",type:l,sdp:_.localDescription.sdp};J.debug('emit "sdp"'),e.emit("sdp",I),g(I.sdp)}};_.addEventListener("icecandidate",b=function(I){var P=I.candidate;P?e.emit("icecandidate",{candidate:P,ready:C}):C()}),_.addEventListener("icegatheringstatechange",E=function(){_.iceGatheringState==="complete"&&C()})})})}},{key:"_createDialog",value:function(l,f,e){var _=f==="UAS"?l.to_tag:l.from_tag,T=f==="UAS"?l.from_tag:l.to_tag,h=l.call_id+_+T,g=this._earlyDialogs[h];if(e)return g?!0:(g=new Au(this,l,f,Au.C.STATUS_EARLY),g.error?(J.debug(g.error),this._failed("remote",l,le.causes.INTERNAL_ERROR),!1):(this._earlyDialogs[h]=g,!0));if(this._from_tag=l.from_tag,this._to_tag=l.to_tag,g)return g.update(l,f),this._dialog=g,delete this._earlyDialogs[h],!0;var m=new Au(this,l,f);return m.error?(J.debug(m.error),this._failed("remote",l,le.causes.INTERNAL_ERROR),!1):(this._dialog=m,!0)}},{key:"_receiveReinvite",value:function(l){var f=this;J.debug("receiveReinvite()");var e=l.hasHeader("Content-Type")?l.getHeader("Content-Type").toLowerCase():void 0,_={request:l,callback:void 0,reject:h.bind(this)},T=!1;function h(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};T=!0;var b=m.status_code||403,E=m.reason_phrase||"",C=Ze.cloneArray(m.extraHeaders);if(this._status!==Q.STATUS_CONFIRMED)return!1;if(b<300||b>=700)throw new TypeError("Invalid status_code: ".concat(b));l.reply(b,E,C)}if(this.emit("reinvite",_),T)return;if(this._late_sdp=!1,!l.body){this._late_sdp=!0,this._remoteHold&&(this._remoteHold=!1,this._onunhold("remote")),this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){return f._createLocalDescription("offer",f._rtcOfferConstraints)}).then(function(m){g.call(f,m)}).catch(function(){l.reply(500)});return}if(e!=="application/sdp"){J.debug("invalid Content-Type"),l.reply(415);return}this._processInDialogSdpOffer(l).then(function(m){f._status!==Q.STATUS_TERMINATED&&g.call(f,m)}).catch(function(m){J.warn(m)});function g(m){var b=this,E=["Contact: ".concat(this._contact)];this._handleSessionTimersInIncomingRequest(l,E),this._late_sdp&&(m=this._mangleOffer(m)),l.reply(200,null,E,m,function(){b._status=Q.STATUS_WAITING_FOR_ACK,b._setInvite2xxTimer(l,m),b._setACKTimer()}),typeof _.callback=="function"&&_.callback()}}},{key:"_receiveUpdate",value:function(l){var f=this;J.debug("receiveUpdate()");var e=l.hasHeader("Content-Type")?l.getHeader("Content-Type").toLowerCase():void 0,_={request:l,callback:void 0,reject:h.bind(this)},T=!1;function h(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};T=!0;var b=m.status_code||403,E=m.reason_phrase||"",C=Ze.cloneArray(m.extraHeaders);if(this._status!==Q.STATUS_CONFIRMED)return!1;if(b<300||b>=700)throw new TypeError("Invalid status_code: ".concat(b));l.reply(b,E,C)}if(this.emit("update",_),T)return;if(!l.body){g.call(this,null);return}if(e!=="application/sdp"){J.debug("invalid Content-Type"),l.reply(415);return}this._processInDialogSdpOffer(l).then(function(m){f._status!==Q.STATUS_TERMINATED&&g.call(f,m)}).catch(function(m){J.warn(m)});function g(m){var b=["Contact: ".concat(this._contact)];this._handleSessionTimersInIncomingRequest(l,b),l.reply(200,null,b,m),typeof _.callback=="function"&&_.callback()}}},{key:"_processInDialogSdpOffer",value:function(l){var f=this;J.debug("_processInDialogSdpOffer()");var e=l.parseSDP(),_=!1,T=Ir(e.media),h;try{for(T.s();!(h=T.n()).done;){var g=h.value;if(Ru.indexOf(g.type)!==-1){var m=g.direction||e.direction||"sendrecv";if(m==="sendonly"||m==="inactive")_=!0;else{_=!1;break}}}}catch(C){T.e(C)}finally{T.f()}var b={originator:"remote",type:"offer",sdp:l.body};J.debug('emit "sdp"'),this.emit("sdp",b);var E=new RTCSessionDescription({type:"offer",sdp:b.sdp});return this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){if(f._status===Q.STATUS_TERMINATED)throw new Error("terminated");return f._connection.setRemoteDescription(E).catch(function(C){throw l.reply(488),J.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',C),f.emit("peerconnection:setremotedescriptionfailed",C),C})}).then(function(){if(f._status===Q.STATUS_TERMINATED)throw new Error("terminated");f._remoteHold===!0&&_===!1?(f._remoteHold=!1,f._onunhold("remote")):f._remoteHold===!1&&_===!0&&(f._remoteHold=!0,f._onhold("remote"))}).then(function(){if(f._status===Q.STATUS_TERMINATED)throw new Error("terminated");return f._createLocalDescription("answer",f._rtcAnswerConstraints).catch(function(C){throw l.reply(500),J.warn('emit "peerconnection:createtelocaldescriptionfailed" [error:%o]',C),C})}).catch(function(C){J.warn("_processInDialogSdpOffer() failed [error: %o]",C)}),this._connectionPromiseQueue}},{key:"_receiveRefer",value:function(l){var f=this;if(J.debug("receiveRefer()"),!l.refer_to){J.debug("no Refer-To header field present in REFER"),l.reply(400);return}if(l.refer_to.uri.scheme!==le.SIP){J.debug("Refer-To header field points to a non-SIP URI scheme"),l.reply(416);return}l.reply(202);var e=new pk(this,l.cseq);J.debug('emit "refer"'),this.emit("refer",{request:l,accept:function(g,m){_.call(f,g,m)},reject:function(){T.call(f)}});function _(h){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(h=typeof h=="function"?h:null,this._status!==Q.STATUS_WAITING_FOR_ACK&&this._status!==Q.STATUS_CONFIRMED)return!1;var m=new n(this._ua);if(m.on("progress",function(E){var C=E.response;e.notify(C.status_code,C.reason_phrase)}),m.on("accepted",function(E){var C=E.response;e.notify(C.status_code,C.reason_phrase)}),m.on("_failed",function(E){var C=E.message,N=E.cause;C?e.notify(C.status_code,C.reason_phrase):e.notify(487,N)}),l.refer_to.uri.hasHeader("replaces")){var b=decodeURIComponent(l.refer_to.uri.getHeader("replaces"));g.extraHeaders=Ze.cloneArray(g.extraHeaders),g.extraHeaders.push("Replaces: ".concat(b))}m.connect(l.refer_to.uri.toAor(),g,h)}function T(){e.notify(603)}}},{key:"_receiveNotify",value:function(l){switch(J.debug("receiveNotify()"),l.event||l.reply(400),l.event.event){case"refer":{var f,e;if(l.event.params&&l.event.params.id)f=l.event.params.id,e=this._referSubscribers[f];else if(Object.keys(this._referSubscribers).length===1)e=this._referSubscribers[Object.keys(this._referSubscribers)[0]];else{l.reply(400,"Missing event id parameter");return}if(!e){l.reply(481,"Subscription does not exist");return}e.receiveNotify(l),l.reply(200);break}default:l.reply(489)}}},{key:"_receiveReplaces",value:function(l){var f=this;J.debug("receiveReplaces()");function e(T){var h=this;if(this._status!==Q.STATUS_WAITING_FOR_ACK&&this._status!==Q.STATUS_CONFIRMED)return!1;var g=new n(this._ua);g.on("confirmed",function(){h.terminate()}),g.init_incoming(l,T)}function _(){J.debug("Replaced INVITE rejected by the user"),l.reply(486)}this.emit("replaces",{request:l,accept:function(h){e.call(f,h)},reject:function(){_.call(f)}})}},{key:"_sendInitialRequest",value:function(l,f,e){var _=this,T=new dk(this._ua,this._request,{onRequestTimeout:function(){_.onRequestTimeout()},onTransportError:function(){_.onTransportError()},onAuthenticated:function(g){_._request=g},onReceiveResponse:function(g){_._receiveInviteResponse(g)}});Promise.resolve().then(function(){if(e)return e;if(l.audio||l.video)return _._localMediaStreamLocallyGenerated=!0,navigator.mediaDevices.getUserMedia(l).catch(function(h){throw _._status===Q.STATUS_TERMINATED?new Error("terminated"):(_._failed("local",null,le.causes.USER_DENIED_MEDIA_ACCESS),J.warn('emit "getusermediafailed" [error:%o]',h),_.emit("getusermediafailed",h),h)})}).then(function(h){if(_._status===Q.STATUS_TERMINATED)throw new Error("terminated");return _._localMediaStream=h,h&&h.getTracks().forEach(function(g){_._connection.addTrack(g,h)}),_._connecting(_._request),_._createLocalDescription("offer",f).catch(function(g){throw _._failed("local",null,le.causes.WEBRTC_ERROR),g})}).then(function(h){if(_._is_canceled||_._status===Q.STATUS_TERMINATED)throw new Error("terminated");_._request.body=h,_._status=Q.STATUS_INVITE_SENT,J.debug('emit "sending" [request:%o]',_._request),_.emit("sending",{request:_._request}),T.send()}).catch(function(h){_._status!==Q.STATUS_TERMINATED&&J.warn(h)})}},{key:"_getDTMFRTPSender",value:function(){var l=this._connection.getSenders().find(function(f){return f.track&&f.track.kind==="audio"});if(!(l&&l.dtmf)){J.warn("sendDTMF() | no local audio track to send DTMF with");return}return l.dtmf}},{key:"_receiveInviteResponse",value:function(l){var f=this;if(J.debug("receiveInviteResponse()"),this._dialog&&l.status_code>=200&&l.status_code<=299)if(this._dialog.id.call_id===l.call_id&&this._dialog.id.local_tag===l.from_tag&&this._dialog.id.remote_tag===l.to_tag){this.sendRequest(le.ACK);return}else{var e=new Au(this,l,"UAC");if(e.error!==void 0){J.debug(e.error);return}this.sendRequest(le.ACK),this.sendRequest(le.BYE);return}if(this._is_canceled){l.status_code>=100&&l.status_code<200?this._request.cancel(this._cancel_reason):l.status_code>=200&&l.status_code<299&&this._acceptAndTerminate(l);return}if(!(this._status!==Q.STATUS_INVITE_SENT&&this._status!==Q.STATUS_1XX_RECEIVED))switch(!0){case/^100$/.test(l.status_code):this._status=Q.STATUS_1XX_RECEIVED;break;case/^1[0-9]{2}$/.test(l.status_code):{if(!l.to_tag){J.debug("1xx response received without to tag");break}if(l.hasHeader("contact")&&!this._createDialog(l,"UAC",!0))break;if(this._status=Q.STATUS_1XX_RECEIVED,!l.body){this._progress("remote",l);break}var _={originator:"remote",type:"answer",sdp:l.body};J.debug('emit "sdp"'),this.emit("sdp",_);var T=new RTCSessionDescription({type:"answer",sdp:_.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){return f._connection.setRemoteDescription(T)}).then(function(){return f._progress("remote",l)}).catch(function(b){J.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',b),f.emit("peerconnection:setremotedescriptionfailed",b)});break}case/^2[0-9]{2}$/.test(l.status_code):{if(this._status=Q.STATUS_CONFIRMED,!l.body){this._acceptAndTerminate(l,400,le.causes.MISSING_SDP),this._failed("remote",l,le.causes.BAD_MEDIA_DESCRIPTION);break}if(!this._createDialog(l,"UAC"))break;var h={originator:"remote",type:"answer",sdp:l.body};J.debug('emit "sdp"'),this.emit("sdp",h);var g=new RTCSessionDescription({type:"answer",sdp:h.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){if(f._connection.signalingState==="stable")return f._connection.createOffer(f._rtcOfferConstraints).then(function(b){return f._connection.setLocalDescription(b)}).catch(function(b){f._acceptAndTerminate(l,500,b.toString()),f._failed("local",l,le.causes.WEBRTC_ERROR)})}).then(function(){f._connection.setRemoteDescription(g).then(function(){f._handleSessionTimersInIncomingResponse(l),f._accepted("remote",l),f.sendRequest(le.ACK),f._confirmed("local",null)}).catch(function(b){f._acceptAndTerminate(l,488,"Not Acceptable Here"),f._failed("remote",l,le.causes.BAD_MEDIA_DESCRIPTION),J.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',b),f.emit("peerconnection:setremotedescriptionfailed",b)})});break}default:{var m=Ze.sipErrorCause(l.status_code);this._failed("remote",l,m)}}}},{key:"_sendReinvite",value:function(){var l=this,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};J.debug("sendReinvite()");var e=Ze.cloneArray(f.extraHeaders),_=Ze.cloneObject(f.eventHandlers),T=f.rtcOfferConstraints||this._rtcOfferConstraints||null,h=!1;e.push("Contact: ".concat(this._contact)),e.push("Content-Type: application/sdp"),this._sessionTimers.running&&e.push("Session-Expires: ".concat(this._sessionTimers.currentExpires,";refresher=").concat(this._sessionTimers.refresher?"uac":"uas")),this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){return l._createLocalDescription("offer",T)}).then(function(b){b=l._mangleOffer(b);var E={originator:"local",type:"offer",sdp:b};J.debug('emit "sdp"'),l.emit("sdp",E),l.sendRequest(le.INVITE,{extraHeaders:e,body:b,eventHandlers:{onSuccessResponse:function(N){g.call(l,N),h=!0},onErrorResponse:function(N){m.call(l,N)},onTransportError:function(){l.onTransportError()},onRequestTimeout:function(){l.onRequestTimeout()},onDialogError:function(){l.onDialogError()}}})}).catch(function(){m()});function g(b){var E=this;if(this._status!==Q.STATUS_TERMINATED&&(this.sendRequest(le.ACK),!h)){if(this._handleSessionTimersInIncomingResponse(b),b.body){if(!b.hasHeader("Content-Type")||b.getHeader("Content-Type").toLowerCase()!=="application/sdp"){m.call(this);return}}else{m.call(this);return}var C={originator:"remote",type:"answer",sdp:b.body};J.debug('emit "sdp"'),this.emit("sdp",C);var N=new RTCSessionDescription({type:"answer",sdp:C.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){return E._connection.setRemoteDescription(N)}).then(function(){_.succeeded&&_.succeeded(b)}).catch(function(I){m.call(E),J.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',I),E.emit("peerconnection:setremotedescriptionfailed",I)})}}function m(b){_.failed&&_.failed(b)}}},{key:"_sendUpdate",value:function(){var l=this,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};J.debug("sendUpdate()");var e=Ze.cloneArray(f.extraHeaders),_=Ze.cloneObject(f.eventHandlers),T=f.rtcOfferConstraints||this._rtcOfferConstraints||null,h=f.sdpOffer||!1,g=!1;e.push("Contact: ".concat(this._contact)),this._sessionTimers.running&&e.push("Session-Expires: ".concat(this._sessionTimers.currentExpires,";refresher=").concat(this._sessionTimers.refresher?"uac":"uas")),h?(e.push("Content-Type: application/sdp"),this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){return l._createLocalDescription("offer",T)}).then(function(E){E=l._mangleOffer(E);var C={originator:"local",type:"offer",sdp:E};J.debug('emit "sdp"'),l.emit("sdp",C),l.sendRequest(le.UPDATE,{extraHeaders:e,body:E,eventHandlers:{onSuccessResponse:function(I){m.call(l,I),g=!0},onErrorResponse:function(I){b.call(l,I)},onTransportError:function(){l.onTransportError()},onRequestTimeout:function(){l.onRequestTimeout()},onDialogError:function(){l.onDialogError()}}})}).catch(function(){b.call(l)})):this.sendRequest(le.UPDATE,{extraHeaders:e,eventHandlers:{onSuccessResponse:function(C){m.call(l,C)},onErrorResponse:function(C){b.call(l,C)},onTransportError:function(){l.onTransportError()},onRequestTimeout:function(){l.onRequestTimeout()},onDialogError:function(){l.onDialogError()}}});function m(E){var C=this;if(this._status!==Q.STATUS_TERMINATED&&!g)if(this._handleSessionTimersInIncomingResponse(E),h){if(E.body){if(!E.hasHeader("Content-Type")||E.getHeader("Content-Type").toLowerCase()!=="application/sdp"){b.call(this);return}}else{b.call(this);return}var N={originator:"remote",type:"answer",sdp:E.body};J.debug('emit "sdp"'),this.emit("sdp",N);var I=new RTCSessionDescription({type:"answer",sdp:N.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then(function(){return C._connection.setRemoteDescription(I)}).then(function(){_.succeeded&&_.succeeded(E)}).catch(function(P){b.call(C),J.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',P),C.emit("peerconnection:setremotedescriptionfailed",P)})}else _.succeeded&&_.succeeded(E)}function b(E){_.failed&&_.failed(E)}}},{key:"_acceptAndTerminate",value:function(l,f,e){J.debug("acceptAndTerminate()");var _=[];f&&(e=e||le.REASON_PHRASE[f]||"",_.push("Reason: SIP ;cause=".concat(f,'; text="').concat(e,'"'))),(this._dialog||this._createDialog(l,"UAC"))&&(this.sendRequest(le.ACK),this.sendRequest(le.BYE,{extraHeaders:_})),this._status=Q.STATUS_TERMINATED}},{key:"_mangleOffer",value:function(l){if(!this._localHold&&!this._remoteHold)return l;if(l=lv.parse(l),this._localHold&&!this._remoteHold){J.debug("mangleOffer() | me on hold, mangling offer");var f=Ir(l.media),e;try{for(f.s();!(e=f.n()).done;){var _=e.value;Ru.indexOf(_.type)!==-1&&(_.direction?_.direction==="sendrecv"?_.direction="sendonly":_.direction==="recvonly"&&(_.direction="inactive"):_.direction="sendonly")}}catch(C){f.e(C)}finally{f.f()}}else if(this._localHold&&this._remoteHold){J.debug("mangleOffer() | both on hold, mangling offer");var T=Ir(l.media),h;try{for(T.s();!(h=T.n()).done;){var g=h.value;Ru.indexOf(g.type)!==-1&&(g.direction="inactive")}}catch(C){T.e(C)}finally{T.f()}}else if(this._remoteHold){J.debug("mangleOffer() | remote on hold, mangling offer");var m=Ir(l.media),b;try{for(m.s();!(b=m.n()).done;){var E=b.value;Ru.indexOf(E.type)!==-1&&(E.direction?E.direction==="sendrecv"?E.direction="recvonly":E.direction==="recvonly"&&(E.direction="inactive"):E.direction="recvonly")}}catch(C){m.e(C)}finally{m.f()}}return lv.write(l)}},{key:"_setLocalMediaStatus",value:function(){var l=!0,f=!0;(this._localHold||this._remoteHold)&&(l=!1,f=!1),this._audioMuted&&(l=!1),this._videoMuted&&(f=!1),this._toggleMuteAudio(!l),this._toggleMuteVideo(!f)}},{key:"_handleSessionTimersInIncomingRequest",value:function(l,f){if(this._sessionTimers.enabled){var e;l.session_expires&&l.session_expires>=le.MIN_SESSION_EXPIRES?(this._sessionTimers.currentExpires=l.session_expires,e=l.session_expires_refresher||"uas"):(this._sessionTimers.currentExpires=this._sessionTimers.defaultExpires,e="uas"),f.push("Session-Expires: ".concat(this._sessionTimers.currentExpires,";refresher=").concat(e)),this._sessionTimers.refresher=e==="uas",this._runSessionTimer()}}},{key:"_handleSessionTimersInIncomingResponse",value:function(l){if(this._sessionTimers.enabled){var f;l.session_expires&&l.session_expires>=le.MIN_SESSION_EXPIRES?(this._sessionTimers.currentExpires=l.session_expires,f=l.session_expires_refresher||"uac"):(this._sessionTimers.currentExpires=this._sessionTimers.defaultExpires,f="uac"),this._sessionTimers.refresher=f==="uac",this._runSessionTimer()}}},{key:"_runSessionTimer",value:function(){var l=this,f=this._sessionTimers.currentExpires;this._sessionTimers.running=!0,clearTimeout(this._sessionTimers.timer),this._sessionTimers.refresher?this._sessionTimers.timer=setTimeout(function(){l._status!==Q.STATUS_TERMINATED&&l._isReadyToReOffer()&&(J.debug("runSessionTimer() | sending session refresh request"),l._sessionTimers.refreshMethod===le.UPDATE?l._sendUpdate():l._sendReinvite())},f*500):this._sessionTimers.timer=setTimeout(function(){l._status!==Q.STATUS_TERMINATED&&(J.warn("runSessionTimer() | timer expired, terminating the session"),l.terminate({cause:le.causes.REQUEST_TIMEOUT,status_code:408,reason_phrase:"Session Timer Expired"}))},f*1100)}},{key:"_toggleMuteAudio",value:function(l){var f=this._connection.getSenders().filter(function(h){return h.track&&h.track.kind==="audio"}),e=Ir(f),_;try{for(e.s();!(_=e.n()).done;){var T=_.value;T.track.enabled=!l}}catch(h){e.e(h)}finally{e.f()}}},{key:"_toggleMuteVideo",value:function(l){var f=this._connection.getSenders().filter(function(h){return h.track&&h.track.kind==="video"}),e=Ir(f),_;try{for(e.s();!(_=e.n()).done;){var T=_.value;T.track.enabled=!l}}catch(h){e.e(h)}finally{e.f()}}},{key:"_newRTCSession",value:function(l,f){J.debug("newRTCSession()"),this._ua.newRTCSession(this,{originator:l,session:this,request:f})}},{key:"_connecting",value:function(l){J.debug("session connecting"),J.debug('emit "connecting"'),this.emit("connecting",{request:l})}},{key:"_progress",value:function(l,f){J.debug("session progress"),J.debug('emit "progress"'),this.emit("progress",{originator:l,response:f||null})}},{key:"_accepted",value:function(l,f){J.debug("session accepted"),this._start_time=new Date,J.debug('emit "accepted"'),this.emit("accepted",{originator:l,response:f||null})}},{key:"_confirmed",value:function(l,f){J.debug("session confirmed"),this._is_confirmed=!0,J.debug('emit "confirmed"'),this.emit("confirmed",{originator:l,ack:f||null})}},{key:"_ended",value:function(l,f,e){J.debug("session ended"),this._end_time=new Date,this._close(),J.debug('emit "ended"'),this.emit("ended",{originator:l,message:f||null,cause:e})}},{key:"_failed",value:function(l,f,e){J.debug("session failed"),J.debug('emit "_failed"'),this.emit("_failed",{originator:l,message:f||null,cause:e}),this._close(),J.debug('emit "failed"'),this.emit("failed",{originator:l,message:f||null,cause:e})}},{key:"_onhold",value:function(l){J.debug("session onhold"),this._setLocalMediaStatus(),J.debug('emit "hold"'),this.emit("hold",{originator:l})}},{key:"_onunhold",value:function(l){J.debug("session onunhold"),this._setLocalMediaStatus(),J.debug('emit "unhold"'),this.emit("unhold",{originator:l})}},{key:"_onmute",value:function(l){var f=l.audio,e=l.video;J.debug("session onmute"),this._setLocalMediaStatus(),J.debug('emit "muted"'),this.emit("muted",{audio:f,video:e})}},{key:"_onunmute",value:function(l){var f=l.audio,e=l.video;J.debug("session onunmute"),this._setLocalMediaStatus(),J.debug('emit "unmuted"'),this.emit("unmuted",{audio:f,video:e})}},{key:"C",get:function(){return Q}},{key:"causes",get:function(){return le.causes}},{key:"id",get:function(){return this._id}},{key:"connection",get:function(){return this._connection}},{key:"contact",get:function(){return this._contact}},{key:"direction",get:function(){return this._direction}},{key:"local_identity",get:function(){return this._local_identity}},{key:"remote_identity",get:function(){return this._remote_identity}},{key:"start_time",get:function(){return this._start_time}},{key:"end_time",get:function(){return this._end_time}},{key:"data",get:function(){return this._data},set:function(l){this._data=l}},{key:"status",get:function(){return this._status}}]),n}(ck);function zu(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?zu=function(n){return typeof n}:zu=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},zu(s)}function vk(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function fv(s,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}function mk(s,r,n){return r&&fv(s.prototype,r),n&&fv(s,n),s}function yk(s,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(r&&r.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),r&&Xh(s,r)}function Xh(s,r){return Xh=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i},Xh(s,r)}function Tk(s){var r=wk();return function(){var i=pc(s),l;if(r){var f=pc(this).constructor;l=Reflect.construct(i,arguments,f)}else l=i.apply(this,arguments);return bk(this,l)}}function bk(s,r){return r&&(zu(r)==="object"||typeof r=="function")?r:Sk(s)}function Sk(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function wk(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function pc(s){return pc=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},pc(s)}var Ek=Lr.EventEmitter,Ck=Et,Sh=_t,Ak=Ur,il=Ht(),Rk=Ul,hv=ai,Ok=ui(),Ou=new Ck("Message"),Ik=function(s){yk(n,s);var r=Tk(n);function n(i){var l;return vk(this,n),l=r.call(this),l._ua=i,l._request=null,l._closed=!1,l._direction=null,l._local_identity=null,l._remote_identity=null,l._is_replied=!1,l._data={},l}return mk(n,[{key:"send",value:function(l,f){var e=this,_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},T=l;if(l===void 0||f===void 0)throw new TypeError("Not enough arguments");if(l=this._ua.normalizeTarget(l),!l)throw new TypeError("Invalid target: ".concat(T));var h=il.cloneArray(_.extraHeaders),g=il.cloneObject(_.eventHandlers),m=_.contentType||"text/plain",b={};_.fromUserName&&(b.from_uri=new Ok("sip",_.fromUserName,this._ua.configuration.uri.host),h.push("P-Preferred-Identity: ".concat(this._ua.configuration.uri.toString()))),_.fromDisplayName&&(b.from_display_name=_.fromDisplayName);for(var E in g)Object.prototype.hasOwnProperty.call(g,E)&&this.on(E,g[E]);h.push("Content-Type: ".concat(m)),this._request=new Ak.OutgoingRequest(Sh.MESSAGE,l,this._ua,b,h),f&&(this._request.body=f);var C=new Rk(this._ua,this._request,{onRequestTimeout:function(){e._onRequestTimeout()},onTransportError:function(){e._onTransportError()},onReceiveResponse:function(I){e._receiveResponse(I)}});this._newMessage("local",this._request),C.send()}},{key:"init_incoming",value:function(l){this._request=l,this._newMessage("remote",l),this._is_replied||(this._is_replied=!0,l.reply(200)),this._close()}},{key:"accept",value:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=il.cloneArray(l.extraHeaders),e=l.body;if(this._direction!=="incoming")throw new hv.NotSupportedError('"accept" not supported for outgoing Message');if(this._is_replied)throw new Error("incoming Message already replied");this._is_replied=!0,this._request.reply(200,null,f,e)}},{key:"reject",value:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=l.status_code||480,e=l.reason_phrase,_=il.cloneArray(l.extraHeaders),T=l.body;if(this._direction!=="incoming")throw new hv.NotSupportedError('"reject" not supported for outgoing Message');if(this._is_replied)throw new Error("incoming Message already replied");if(f<300||f>=700)throw new TypeError("Invalid status_code: ".concat(f));this._is_replied=!0,this._request.reply(f,e,_,T)}},{key:"_receiveResponse",value:function(l){if(!this._closed)switch(!0){case/^1[0-9]{2}$/.test(l.status_code):break;case/^2[0-9]{2}$/.test(l.status_code):this._succeeded("remote",l);break;default:{var f=il.sipErrorCause(l.status_code);this._failed("remote",l,f);break}}}},{key:"_onRequestTimeout",value:function(){this._closed||this._failed("system",null,Sh.causes.REQUEST_TIMEOUT)}},{key:"_onTransportError",value:function(){this._closed||this._failed("system",null,Sh.causes.CONNECTION_ERROR)}},{key:"_close",value:function(){this._closed=!0,this._ua.destroyMessage(this)}},{key:"_newMessage",value:function(l,f){l==="remote"?(this._direction="incoming",this._local_identity=f.to,this._remote_identity=f.from):l==="local"&&(this._direction="outgoing",this._local_identity=f.from,this._remote_identity=f.to),this._ua.newMessage(this,{originator:l,message:this,request:f})}},{key:"_failed",value:function(l,f,e){Ou.debug("MESSAGE failed"),this._close(),Ou.debug('emit "failed"'),this.emit("failed",{originator:l,response:f||null,cause:e})}},{key:"_succeeded",value:function(l,f){Ou.debug("MESSAGE succeeded"),this._close(),Ou.debug('emit "succeeded"'),this.emit("succeeded",{originator:l,response:f})}},{key:"direction",get:function(){return this._direction}},{key:"local_identity",get:function(){return this._local_identity}},{key:"remote_identity",get:function(){return this._remote_identity}}]),n}(Ek);function Ku(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ku=function(n){return typeof n}:Ku=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ku(s)}function kk(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function dv(s,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}function Pk(s,r,n){return r&&dv(s.prototype,r),n&&dv(s,n),s}function Nk(s,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(r&&r.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),r&&Qh(s,r)}function Qh(s,r){return Qh=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i},Qh(s,r)}function xk(s){var r=Uk();return function(){var i=_c(s),l;if(r){var f=_c(this).constructor;l=Reflect.construct(i,arguments,f)}else l=i.apply(this,arguments);return Dk(this,l)}}function Dk(s,r){return r&&(Ku(r)==="object"||typeof r=="function")?r:Lk(s)}function Lk(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function Uk(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function _c(s){return _c=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},_c(s)}var Mk=Lr.EventEmitter,Fk=Et,wh=_t,$k=Ur,sl=Ht(),Hk=Ul,pv=ai,Iu=new Fk("Options"),Bk=function(s){Nk(n,s);var r=xk(n);function n(i){var l;return kk(this,n),l=r.call(this),l._ua=i,l._request=null,l._closed=!1,l._direction=null,l._local_identity=null,l._remote_identity=null,l._is_replied=!1,l._data={},l}return Pk(n,[{key:"send",value:function(l,f){var e=this,_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},T=l;if(l===void 0)throw new TypeError("A target is required for OPTIONS");if(l=this._ua.normalizeTarget(l),!l)throw new TypeError("Invalid target: ".concat(T));var h=sl.cloneArray(_.extraHeaders),g=sl.cloneObject(_.eventHandlers),m=_.contentType||"application/sdp";for(var b in g)Object.prototype.hasOwnProperty.call(g,b)&&this.on(b,g[b]);h.push("Content-Type: ".concat(m)),this._request=new $k.OutgoingRequest(wh.OPTIONS,l,this._ua,null,h),f&&(this._request.body=f);var E=new Hk(this._ua,this._request,{onRequestTimeout:function(){e._onRequestTimeout()},onTransportError:function(){e._onTransportError()},onReceiveResponse:function(N){e._receiveResponse(N)}});this._newOptions("local",this._request),E.send()}},{key:"init_incoming",value:function(l){this._request=l,this._newOptions("remote",l),this._is_replied||(this._is_replied=!0,l.reply(200)),this._close()}},{key:"accept",value:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=sl.cloneArray(l.extraHeaders),e=l.body;if(this._direction!=="incoming")throw new pv.NotSupportedError('"accept" not supported for outgoing Options');if(this._is_replied)throw new Error("incoming Options already replied");this._is_replied=!0,this._request.reply(200,null,f,e)}},{key:"reject",value:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=l.status_code||480,e=l.reason_phrase,_=sl.cloneArray(l.extraHeaders),T=l.body;if(this._direction!=="incoming")throw new pv.NotSupportedError('"reject" not supported for outgoing Options');if(this._is_replied)throw new Error("incoming Options already replied");if(f<300||f>=700)throw new TypeError("Invalid status_code: ".concat(f));this._is_replied=!0,this._request.reply(f,e,_,T)}},{key:"_receiveResponse",value:function(l){if(!this._closed)switch(!0){case/^1[0-9]{2}$/.test(l.status_code):break;case/^2[0-9]{2}$/.test(l.status_code):this._succeeded("remote",l);break;default:{var f=sl.sipErrorCause(l.status_code);this._failed("remote",l,f);break}}}},{key:"_onRequestTimeout",value:function(){this._closed||this._failed("system",null,wh.causes.REQUEST_TIMEOUT)}},{key:"_onTransportError",value:function(){this._closed||this._failed("system",null,wh.causes.CONNECTION_ERROR)}},{key:"_close",value:function(){this._closed=!0,this._ua.destroyMessage(this)}},{key:"_newOptions",value:function(l,f){l==="remote"?(this._direction="incoming",this._local_identity=f.to,this._remote_identity=f.from):l==="local"&&(this._direction="outgoing",this._local_identity=f.from,this._remote_identity=f.to),this._ua.newOptions(this,{originator:l,message:this,request:f})}},{key:"_failed",value:function(l,f,e){Iu.debug("OPTIONS failed"),this._close(),Iu.debug('emit "failed"'),this.emit("failed",{originator:l,response:f||null,cause:e})}},{key:"_succeeded",value:function(l,f){Iu.debug("OPTIONS succeeded"),this._close(),Iu.debug('emit "succeeded"'),this.emit("succeeded",{originator:l,response:f})}},{key:"direction",get:function(){return this._direction}},{key:"local_identity",get:function(){return this._local_identity}},{key:"remote_identity",get:function(){return this._remote_identity}}]),n}(Mk),op={},qk=Et,Eh=Ht(),Wk=lr(),ol=new qk("Socket");op.isSocket=function(s){if(Array.isArray(s))return!1;if(typeof s>"u")return ol.warn("undefined JsSIP.Socket instance"),!1;try{if(!Eh.isString(s.url))throw ol.warn("missing or invalid JsSIP.Socket url property"),new Error("Missing or invalid JsSIP.Socket url property");if(!Eh.isString(s.via_transport))throw ol.warn("missing or invalid JsSIP.Socket via_transport property"),new Error("Missing or invalid JsSIP.Socket via_transport property");if(Wk.parse(s.sip_uri,"SIP_URI")===-1)throw ol.warn("missing or invalid JsSIP.Socket sip_uri property"),new Error("missing or invalid JsSIP.Socket sip_uri property")}catch{return!1}try{["connect","disconnect","send"].forEach(function(r){if(!Eh.isFunction(s[r]))throw ol.warn("missing or invalid JsSIP.Socket method: ".concat(r)),new Error("Missing or invalid JsSIP.Socket method: ".concat(r))})}catch{return!1}return!0};function jk(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function _v(s,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}function Vk(s,r,n){return r&&_v(s.prototype,r),n&&_v(s,n),s}var Gk=Et,zk=op,gv=_t,Mt=new Gk("Transport"),Nn={STATUS_CONNECTED:0,STATUS_CONNECTING:1,STATUS_DISCONNECTED:2,SOCKET_STATUS_READY:0,SOCKET_STATUS_ERROR:1,recovery_options:{min_interval:gv.CONNECTION_RECOVERY_MIN_INTERVAL,max_interval:gv.CONNECTION_RECOVERY_MAX_INTERVAL}},Kk=function(){function s(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Nn.recovery_options;jk(this,s),Mt.debug("new()"),this.status=Nn.STATUS_DISCONNECTED,this.socket=null,this.sockets=[],this.recovery_options=n,this.recover_attempts=0,this.recovery_timer=null,this.close_requested=!1;try{this.textDecoder=new TextDecoder("utf8")}catch(i){Mt.warn("cannot use TextDecoder: ".concat(i))}if(typeof r>"u")throw new TypeError("Invalid argument. undefined 'sockets' argument");r instanceof Array||(r=[r]),r.forEach(function(i){if(!zk.isSocket(i.socket))throw new TypeError("Invalid argument. invalid 'JsSIP.Socket' instance");if(i.weight&&!Number(i.weight))throw new TypeError("Invalid argument. 'weight' attribute is not a number");this.sockets.push({socket:i.socket,weight:i.weight||0,status:Nn.SOCKET_STATUS_READY})},this),this._getSocket()}return Vk(s,[{key:"connect",value:function(){if(Mt.debug("connect()"),this.isConnected()){Mt.debug("Transport is already connected");return}else if(this.isConnecting()){Mt.debug("Transport is connecting");return}this.close_requested=!1,this.status=Nn.STATUS_CONNECTING,this.onconnecting({socket:this.socket,attempts:this.recover_attempts}),this.close_requested||(this.socket.onconnect=this._onConnect.bind(this),this.socket.ondisconnect=this._onDisconnect.bind(this),this.socket.ondata=this._onData.bind(this),this.socket.connect())}},{key:"disconnect",value:function(){Mt.debug("close()"),this.close_requested=!0,this.recover_attempts=0,this.status=Nn.STATUS_DISCONNECTED,this.recovery_timer!==null&&(clearTimeout(this.recovery_timer),this.recovery_timer=null),this.socket.onconnect=function(){},this.socket.ondisconnect=function(){},this.socket.ondata=function(){},this.socket.disconnect(),this.ondisconnect({socket:this.socket,error:!1})}},{key:"send",value:function(n){if(Mt.debug("send()"),!this.isConnected())return Mt.warn("unable to send message, transport is not connected"),!1;var i=n.toString();return Mt.debug(`sending message:

`.concat(i,`
`)),this.socket.send(i)}},{key:"isConnected",value:function(){return this.status===Nn.STATUS_CONNECTED}},{key:"isConnecting",value:function(){return this.status===Nn.STATUS_CONNECTING}},{key:"_reconnect",value:function(){var n=this;this.recover_attempts+=1;var i=Math.floor(Math.random()*Math.pow(2,this.recover_attempts)+1);i<this.recovery_options.min_interval?i=this.recovery_options.min_interval:i>this.recovery_options.max_interval&&(i=this.recovery_options.max_interval),Mt.debug("reconnection attempt: ".concat(this.recover_attempts,". next connection attempt in ").concat(i," seconds")),this.recovery_timer=setTimeout(function(){!n.close_requested&&!(n.isConnected()||n.isConnecting())&&(n._getSocket(),n.connect())},i*1e3)}},{key:"_getSocket",value:function(){var n=[];if(this.sockets.forEach(function(l){l.status!==Nn.SOCKET_STATUS_ERROR&&(n.length===0?n.push(l):l.weight>n[0].weight?n=[l]:l.weight===n[0].weight&&n.push(l))}),n.length===0){this.sockets.forEach(function(l){l.status=Nn.SOCKET_STATUS_READY}),this._getSocket();return}var i=Math.floor(Math.random()*n.length);this.socket=n[i].socket}},{key:"_onConnect",value:function(){this.recover_attempts=0,this.status=Nn.STATUS_CONNECTED,this.recovery_timer!==null&&(clearTimeout(this.recovery_timer),this.recovery_timer=null),this.onconnect({socket:this})}},{key:"_onDisconnect",value:function(n,i,l){this.status=Nn.STATUS_DISCONNECTED,this.ondisconnect({socket:this.socket,error:n,code:i,reason:l}),!this.close_requested&&(this.sockets.forEach(function(f){this.socket===f.socket&&(f.status=Nn.SOCKET_STATUS_ERROR)},this),this._reconnect(n))}},{key:"_onData",value:function(n){if(n===`\r
\r
`){Mt.debug("received message with double-CRLF Keep Alive request");try{this.socket.send(`\r
`)}catch(i){Mt.warn("error sending Keep Alive response: ".concat(i))}return}if(n===`\r
`){Mt.debug("received message with CRLF Keep Alive response");return}else if(typeof n!="string"){try{this.textDecoder?n=this.textDecoder.decode(n):n=String.fromCharCode.apply(null,new Uint8Array(n))}catch{Mt.debug("received binary message failed to be converted into string, message discarded");return}Mt.debug(`received binary message:

`.concat(n,`
`))}else Mt.debug(`received text message:

`.concat(n,`
`));this.ondata({transport:this,message:n})}},{key:"via_transport",get:function(){return this.socket.via_transport}},{key:"url",get:function(){return this.socket.url}},{key:"sip_uri",get:function(){return this.socket.sip_uri}}]),s}(),y0={};function vv(s,r){var n;if(typeof Symbol>"u"||s[Symbol.iterator]==null){if(Array.isArray(s)||(n=Yk(s))||r&&s&&typeof s.length=="number"){n&&(s=n);var i=0,l=function(){};return{s:l,n:function(){return i>=s.length?{done:!0}:{done:!1,value:s[i++]}},e:function(h){throw h},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var f=!0,e=!1,_;return{s:function(){n=s[Symbol.iterator]()},n:function(){var h=n.next();return f=h.done,h},e:function(h){e=!0,_=h},f:function(){try{!f&&n.return!=null&&n.return()}finally{if(e)throw _}}}}function Yk(s,r){if(s){if(typeof s=="string")return mv(s,r);var n=Object.prototype.toString.call(s).slice(8,-1);if(n==="Object"&&s.constructor&&(n=s.constructor.name),n==="Map"||n==="Set")return Array.from(s);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mv(s,r)}}function mv(s,r){(r==null||r>s.length)&&(r=s.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=s[n];return i}var Jk=Et,Zh=lr(),ed=Ur,ku=new Jk("Parser");y0.parseMessage=function(s,r){var n,i,l=s.indexOf(`\r
`);if(l===-1){ku.warn("parseMessage() | no CRLF found, not a SIP message");return}var f=s.substring(0,l),e=Zh.parse(f,"Request_Response");if(e===-1){ku.warn('parseMessage() | error parsing first line of SIP message: "'.concat(f,'"'));return}else e.status_code?(n=new ed.IncomingResponse,n.status_code=e.status_code,n.reason_phrase=e.reason_phrase):(n=new ed.IncomingRequest(r),n.method=e.method,n.ruri=e.uri);n.data=s;for(var _=l+2;;){if(l=Xk(s,_),l===-2){i=_+2;break}else if(l===-1){ku.warn("parseMessage() | malformed message");return}if(e=Qk(n,s,_,l),e!==!0){ku.warn("parseMessage() |",e.error);return}_=l+2}if(n.hasHeader("content-length")){var T=n.getHeader("content-length");n.body=s.substr(i,T)}else n.body=s.substring(i);return n};function Xk(s,r){var n=r,i=0,l=0;if(s.substring(n,n+2).match(/(^\r\n)/))return-2;for(;i===0;){if(l=s.indexOf(`\r
`,n),l===-1)return l;!s.substring(l+2,l+4).match(/(^\r\n)/)&&s.charAt(l+2).match(/(^\s+)/)?n=l+2:i=l}return i}function Qk(s,r,n,i){var l,f=r.indexOf(":",n),e=r.substring(n,f).trim(),_=r.substring(f+1,i).trim();switch(e.toLowerCase()){case"via":case"v":s.addHeader("via",_),s.getHeaders("via").length===1?(l=s.parseHeader("Via"),l&&(s.via=l,s.via_branch=l.branch)):l=0;break;case"from":case"f":s.setHeader("from",_),l=s.parseHeader("from"),l&&(s.from=l,s.from_tag=l.getParam("tag"));break;case"to":case"t":s.setHeader("to",_),l=s.parseHeader("to"),l&&(s.to=l,s.to_tag=l.getParam("tag"));break;case"record-route":if(l=Zh.parse(_,"Record_Route"),l===-1)l=void 0;else{var T=vv(l),h;try{for(T.s();!(h=T.n()).done;){var g=h.value;s.addHeader("record-route",_.substring(g.possition,g.offset)),s.headers["Record-Route"][s.getHeaders("record-route").length-1].parsed=g.parsed}}catch(C){T.e(C)}finally{T.f()}}break;case"call-id":case"i":s.setHeader("call-id",_),l=s.parseHeader("call-id"),l&&(s.call_id=_);break;case"contact":case"m":if(l=Zh.parse(_,"Contact"),l===-1)l=void 0;else{var m=vv(l),b;try{for(m.s();!(b=m.n()).done;){var E=b.value;s.addHeader("contact",_.substring(E.possition,E.offset)),s.headers.Contact[s.getHeaders("contact").length-1].parsed=E.parsed}}catch(C){m.e(C)}finally{m.f()}}break;case"content-length":case"l":s.setHeader("content-length",_),l=s.parseHeader("content-length");break;case"content-type":case"c":s.setHeader("content-type",_),l=s.parseHeader("content-type");break;case"cseq":s.setHeader("cseq",_),l=s.parseHeader("cseq"),l&&(s.cseq=l.value),s instanceof ed.IncomingResponse&&(s.method=l.method);break;case"max-forwards":s.setHeader("max-forwards",_),l=s.parseHeader("max-forwards");break;case"www-authenticate":s.setHeader("www-authenticate",_),l=s.parseHeader("www-authenticate");break;case"proxy-authenticate":s.setHeader("proxy-authenticate",_),l=s.parseHeader("proxy-authenticate");break;case"session-expires":case"x":s.setHeader("session-expires",_),l=s.parseHeader("session-expires"),l&&(s.session_expires=l.expires,s.session_expires_refresher=l.refresher);break;case"refer-to":case"r":s.setHeader("refer-to",_),l=s.parseHeader("refer-to"),l&&(s.refer_to=l);break;case"replaces":s.setHeader("replaces",_),l=s.parseHeader("replaces"),l&&(s.replaces=l);break;case"event":case"o":s.setHeader("event",_),l=s.parseHeader("event"),l&&(s.event=l);break;default:s.addHeader(e,_),l=0}return l===void 0?{error:'error parsing header "'.concat(e,'"')}:!0}function Yu(s,r){var n;if(typeof Symbol>"u"||s[Symbol.iterator]==null){if(Array.isArray(s)||(n=Zk(s))||r&&s&&typeof s.length=="number"){n&&(s=n);var i=0,l=function(){};return{s:l,n:function(){return i>=s.length?{done:!0}:{done:!1,value:s[i++]}},e:function(h){throw h},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var f=!0,e=!1,_;return{s:function(){n=s[Symbol.iterator]()},n:function(){var h=n.next();return f=h.done,h},e:function(h){e=!0,_=h},f:function(){try{!f&&n.return!=null&&n.return()}finally{if(e)throw _}}}}function Zk(s,r){if(s){if(typeof s=="string")return yv(s,r);var n=Object.prototype.toString.call(s).slice(8,-1);if(n==="Object"&&s.constructor&&(n=s.constructor.name),n==="Map"||n==="Set")return Array.from(s);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yv(s,r)}}function yv(s,r){(r==null||r>s.length)&&(r=s.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=s[n];return i}var eP=Et,T0=_t,Tv=Ur,lp=Ht(),ap=new eP("sanityCheck"),tP=[fP],nP=[sP,oP,lP,aP],rP=[uP,cP],Ye,rr,b0,iP=function(s,r,n){Ye=s,rr=r,b0=n;var i=Yu(tP),l;try{for(i.s();!(l=i.n()).done;){var f=l.value;if(f()===!1)return!1}}catch(b){i.e(b)}finally{i.f()}if(Ye instanceof Tv.IncomingRequest){var e=Yu(nP),_;try{for(e.s();!(_=e.n()).done;){var T=_.value;if(T()===!1)return!1}}catch(b){e.e(b)}finally{e.f()}}else if(Ye instanceof Tv.IncomingResponse){var h=Yu(rP),g;try{for(h.s();!(g=h.n()).done;){var m=g.value;if(m()===!1)return!1}}catch(b){h.e(b)}finally{h.f()}}return!0};function sP(){if(Ye.s("to").uri.scheme!=="sip")return Tl(416),!1}function oP(){if(!Ye.to_tag&&Ye.call_id.substr(0,5)===rr.configuration.jssip_id)return Tl(482),!1}function lP(){var s=lp.str_utf8_length(Ye.body),r=Ye.getHeader("content-length");if(s<r)return Tl(400),!1}function aP(){var s=Ye.from_tag,r=Ye.call_id,n=Ye.cseq,i;if(!Ye.to_tag)if(Ye.method===T0.INVITE){if(rr._transactions.ist[Ye.via_branch])return!1;for(var l in rr._transactions.ist)if(Object.prototype.hasOwnProperty.call(rr._transactions.ist,l)&&(i=rr._transactions.ist[l],i.request.from_tag===s&&i.request.call_id===r&&i.request.cseq===n))return Tl(482),!1}else{if(rr._transactions.nist[Ye.via_branch])return!1;for(var f in rr._transactions.nist)if(Object.prototype.hasOwnProperty.call(rr._transactions.nist,f)&&(i=rr._transactions.nist[f],i.request.from_tag===s&&i.request.call_id===r&&i.request.cseq===n))return Tl(482),!1}}function uP(){if(Ye.getHeaders("via").length>1)return ap.debug("more than one Via header field present in the response, dropping the response"),!1}function cP(){var s=lp.str_utf8_length(Ye.body),r=Ye.getHeader("content-length");if(s<r)return ap.debug("message body length is lower than the value in Content-Length header field, dropping the response"),!1}function fP(){for(var s=["from","to","call_id","cseq","via"],r=0,n=s;r<n.length;r++){var i=n[r];if(!Ye.hasHeader(i))return ap.debug("missing mandatory header field : ".concat(i,", dropping the response")),!1}}function Tl(s){var r=Ye.getHeaders("via"),n,i="SIP/2.0 ".concat(s," ").concat(T0.REASON_PHRASE[s],`\r
`),l=Yu(r),f;try{for(l.s();!(f=l.n()).done;){var e=f.value;i+="Via: ".concat(e,`\r
`)}}catch(_){l.e(_)}finally{l.f()}n=Ye.getHeader("To"),Ye.to_tag||(n+=";tag=".concat(lp.newTag())),i+="To: ".concat(n,`\r
`),i+="From: ".concat(Ye.getHeader("From"),`\r
`),i+="Call-ID: ".concat(Ye.call_id,`\r
`),i+="CSeq: ".concat(Ye.cseq," ").concat(Ye.method,`\r
`),i+=`\r
`,b0.send(i)}var up={};function bv(s,r){var n;if(typeof Symbol>"u"||s[Symbol.iterator]==null){if(Array.isArray(s)||(n=hP(s))||r&&s&&typeof s.length=="number"){n&&(s=n);var i=0,l=function(){};return{s:l,n:function(){return i>=s.length?{done:!0}:{done:!1,value:s[i++]}},e:function(h){throw h},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var f=!0,e=!1,_;return{s:function(){n=s[Symbol.iterator]()},n:function(){var h=n.next();return f=h.done,h},e:function(h){e=!0,_=h},f:function(){try{!f&&n.return!=null&&n.return()}finally{if(e)throw _}}}}function hP(s,r){if(s){if(typeof s=="string")return Sv(s,r);var n=Object.prototype.toString.call(s).slice(8,-1);if(n==="Object"&&s.constructor&&(n=s.constructor.name),n==="Map"||n==="Set")return Array.from(s);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sv(s,r)}}function Sv(s,r){(r==null||r>s.length)&&(r=s.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=s[n];return i}var Ps=Ht(),$i=_t,Ch=lr(),wv=ui(),Ah=op,Rh=ai;up.settings={authorization_user:null,password:null,realm:null,ha1:null,authorization_jwt:null,display_name:null,uri:null,contact_uri:null,instance_id:null,use_preloaded_route:!1,session_timers:!0,session_timers_refresh_method:$i.UPDATE,session_timers_force_refresher:!1,no_answer_timeout:60,register:!0,register_expires:600,registrar_server:null,sockets:null,connection_recovery_max_interval:$i.CONNECTION_RECOVERY_MAX_INTERVAL,connection_recovery_min_interval:$i.CONNECTION_RECOVERY_MIN_INTERVAL,extra_headers:null,via_host:"".concat(Ps.createRandomToken(12),".invalid")};var Pu={mandatory:{sockets:function(r){var n=[];if(Ah.isSocket(r))n.push({socket:r});else if(Array.isArray(r)&&r.length){var i=bv(r),l;try{for(i.s();!(l=i.n()).done;){var f=l.value;Object.prototype.hasOwnProperty.call(f,"socket")&&Ah.isSocket(f.socket)?n.push(f):Ah.isSocket(f)&&n.push({socket:f})}}catch(e){i.e(e)}finally{i.f()}}else return;return n},uri:function(r){/^sip:/i.test(r)||(r="".concat($i.SIP,":").concat(r));var n=wv.parse(r);if(n)return n.user?n:void 0}},optional:{authorization_user:function(r){if(Ch.parse('"'.concat(r,'"'),"quoted_string")!==-1)return r},authorization_jwt:function(r){if(typeof r=="string")return r},user_agent:function(r){if(typeof r=="string")return r},connection_recovery_max_interval:function(r){if(Ps.isDecimal(r)){var n=Number(r);if(n>0)return n}},connection_recovery_min_interval:function(r){if(Ps.isDecimal(r)){var n=Number(r);if(n>0)return n}},contact_uri:function(r){if(typeof r=="string"){var n=Ch.parse(r,"SIP_URI");if(n!==-1)return n}},display_name:function(r){return r},instance_id:function(r){if(/^uuid:/i.test(r)&&(r=r.substr(5)),Ch.parse(r,"uuid")!==-1)return r},no_answer_timeout:function(r){if(Ps.isDecimal(r)){var n=Number(r);if(n>0)return n}},session_timers:function(r){if(typeof r=="boolean")return r},session_timers_refresh_method:function(r){if(typeof r=="string"&&(r=r.toUpperCase(),r===$i.INVITE||r===$i.UPDATE))return r},session_timers_force_refresher:function(r){if(typeof r=="boolean")return r},password:function(r){return String(r)},realm:function(r){return String(r)},ha1:function(r){return String(r)},register:function(r){if(typeof r=="boolean")return r},register_expires:function(r){if(Ps.isDecimal(r)){var n=Number(r);if(n>0)return n}},registrar_server:function(r){/^sip:/i.test(r)||(r="".concat($i.SIP,":").concat(r));var n=wv.parse(r);if(n)return n.user?void 0:n},use_preloaded_route:function(r){if(typeof r=="boolean")return r},extra_headers:function(r){var n=[];if(Array.isArray(r)&&r.length){var i=bv(r),l;try{for(i.s();!(l=i.n()).done;){var f=l.value;typeof f=="string"&&n.push(f)}}catch(e){i.e(e)}finally{i.f()}}else return;return n}}};up.load=function(s,r){for(var n in Pu.mandatory)if(r.hasOwnProperty(n)){var i=r[n],l=Pu.mandatory[n](i);if(l!==void 0)s[n]=l;else throw new Rh.ConfigurationError(n,i)}else throw new Rh.ConfigurationError(n);for(var f in Pu.optional)if(r.hasOwnProperty(f)){var e=r[f];if(Ps.isEmpty(e))continue;var _=Pu.optional[f](e);if(_!==void 0)s[f]=_;else throw new Rh.ConfigurationError(f,e)}};function Ju(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ju=function(n){return typeof n}:Ju=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ju(s)}function dP(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function Ev(s,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}function Cv(s,r,n){return r&&Ev(s.prototype,r),n&&Ev(s,n),s}function pP(s,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(r&&r.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),r&&td(s,r)}function td(s,r){return td=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i},td(s,r)}function _P(s){var r=vP();return function(){var i=gc(s),l;if(r){var f=gc(this).constructor;l=Reflect.construct(i,arguments,f)}else l=i.apply(this,arguments);return gP(this,l)}}function gP(s,r){return r&&(Ju(r)==="object"||typeof r=="function")?r:S0(s)}function S0(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function vP(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function gc(s){return gc=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},gc(s)}var mP=Lr.EventEmitter,yP=Et,It=_t,TP=lI,Av=gk,Rv=Ik,Ov=Bk,Oh=Ll,bP=Kk,Nu=Ht(),SP=ai,wP=ui(),EP=y0,Ih=Ur,CP=iP,kh=up,Je=new yP("UA"),kt={STATUS_INIT:0,STATUS_READY:1,STATUS_USER_CLOSED:2,STATUS_NOT_READY:3,CONFIGURATION_ERROR:1,NETWORK_ERROR:2},AP=function(s){pP(n,s);var r=_P(n);Cv(n,null,[{key:"C",get:function(){return kt}}]);function n(i){var l;if(dP(this,n),Je.debug("new() [configuration:%o]",i),l=r.call(this),l._cache={credentials:{}},l._configuration=Object.assign({},kh.settings),l._dynConfiguration={},l._dialogs={},l._applicants={},l._sessions={},l._transport=null,l._contact=null,l._status=kt.STATUS_INIT,l._error=null,l._transactions={nist:{},nict:{},ist:{},ict:{}},l._data={},l._closeTimer=null,i===void 0)throw new TypeError("Not enough arguments");try{l._loadConfig(i)}catch(f){throw l._status=kt.STATUS_NOT_READY,l._error=kt.CONFIGURATION_ERROR,f}return l._registrator=new TP(S0(l)),l}return Cv(n,[{key:"start",value:function(){Je.debug("start()"),this._status===kt.STATUS_INIT?this._transport.connect():this._status===kt.STATUS_USER_CLOSED?(Je.debug("restarting UA"),this._closeTimer!==null&&(clearTimeout(this._closeTimer),this._closeTimer=null,this._transport.disconnect()),this._status=kt.STATUS_INIT,this._transport.connect()):this._status===kt.STATUS_READY?Je.debug("UA is in READY status, not restarted"):Je.debug("ERROR: connection is down, Auto-Recovery system is trying to reconnect"),this._dynConfiguration.register=this._configuration.register}},{key:"register",value:function(){Je.debug("register()"),this._dynConfiguration.register=!0,this._registrator.register()}},{key:"unregister",value:function(l){Je.debug("unregister()"),this._dynConfiguration.register=!1,this._registrator.unregister(l)}},{key:"registrator",value:function(){return this._registrator}},{key:"isRegistered",value:function(){return this._registrator.registered}},{key:"isConnected",value:function(){return this._transport.isConnected()}},{key:"call",value:function(l,f){Je.debug("call()");var e=new Av(this);return e.connect(l,f),e}},{key:"sendMessage",value:function(l,f,e){Je.debug("sendMessage()");var _=new Rv(this);return _.send(l,f,e),_}},{key:"sendOptions",value:function(l,f,e){Je.debug("sendOptions()");var _=new Ov(this);return _.send(l,f,e),_}},{key:"terminateSessions",value:function(l){Je.debug("terminateSessions()");for(var f in this._sessions)this._sessions[f].isEnded()||this._sessions[f].terminate(l)}},{key:"stop",value:function(){var l=this;if(Je.debug("stop()"),this._dynConfiguration={},this._status===kt.STATUS_USER_CLOSED){Je.debug("UA already closed");return}this._registrator.close();var f=Object.keys(this._sessions).length;for(var e in this._sessions)if(Object.prototype.hasOwnProperty.call(this._sessions,e)){Je.debug("closing session ".concat(e));try{this._sessions[e].terminate()}catch{}}for(var _ in this._applicants)if(Object.prototype.hasOwnProperty.call(this._applicants,_))try{this._applicants[_].close()}catch{}this._status=kt.STATUS_USER_CLOSED;var T=Object.keys(this._transactions.nict).length+Object.keys(this._transactions.nist).length+Object.keys(this._transactions.ict).length+Object.keys(this._transactions.ist).length;T===0&&f===0?this._transport.disconnect():this._closeTimer=setTimeout(function(){l._closeTimer=null,l._transport.disconnect()},2e3)}},{key:"normalizeTarget",value:function(l){return Nu.normalizeTarget(l,this._configuration.hostport_params)}},{key:"get",value:function(l){switch(l){case"authorization_user":return this._configuration.authorization_user;case"realm":return this._configuration.realm;case"ha1":return this._configuration.ha1;case"authorization_jwt":return this._configuration.authorization_jwt;default:Je.warn('get() | cannot get "%s" parameter in runtime',l);return}}},{key:"set",value:function(l,f){switch(l){case"authorization_user":{this._configuration.authorization_user=String(f);break}case"password":{this._configuration.password=String(f);break}case"realm":{this._configuration.realm=String(f);break}case"ha1":{this._configuration.ha1=String(f),this._configuration.password=null;break}case"authorization_jwt":{this._configuration.authorization_jwt=String(f);break}case"display_name":{this._configuration.display_name=f;break}case"extra_headers":{this._configuration.extra_headers=f;break}default:return Je.warn('set() | cannot set "%s" parameter in runtime',l),!1}return!0}},{key:"newTransaction",value:function(l){this._transactions[l.type][l.id]=l,this.emit("newTransaction",{transaction:l})}},{key:"destroyTransaction",value:function(l){delete this._transactions[l.type][l.id],this.emit("transactionDestroyed",{transaction:l})}},{key:"newDialog",value:function(l){this._dialogs[l.id]=l}},{key:"destroyDialog",value:function(l){delete this._dialogs[l.id]}},{key:"newMessage",value:function(l,f){this._applicants[l]=l,this.emit("newMessage",f)}},{key:"newOptions",value:function(l,f){this._applicants[l]=l,this.emit("newOptions",f)}},{key:"destroyMessage",value:function(l){delete this._applicants[l]}},{key:"newRTCSession",value:function(l,f){this._sessions[l.id]=l,this.emit("newRTCSession",f)}},{key:"destroyRTCSession",value:function(l){delete this._sessions[l.id]}},{key:"registered",value:function(l){this.emit("registered",l)}},{key:"unregistered",value:function(l){this.emit("unregistered",l)}},{key:"registrationFailed",value:function(l){this.emit("registrationFailed",l)}},{key:"receiveRequest",value:function(l){var f=l.method;if(l.ruri.user!==this._configuration.uri.user&&l.ruri.user!==this._contact.uri.user){Je.debug("Request-URI does not point to us"),l.method!==It.ACK&&l.reply_sl(404);return}if(l.ruri.scheme===It.SIPS){l.reply_sl(416);return}if(!Oh.checkTransaction(this,l)){if(f===It.INVITE?new Oh.InviteServerTransaction(this,this._transport,l):f!==It.ACK&&f!==It.CANCEL&&new Oh.NonInviteServerTransaction(this,this._transport,l),f===It.OPTIONS){if(this.listeners("newOptions").length===0){l.reply(200);return}var e=new Ov(this);e.init_incoming(l)}else if(f===It.MESSAGE){if(this.listeners("newMessage").length===0){l.reply(405);return}var _=new Rv(this);_.init_incoming(l)}else if(f===It.INVITE&&!l.to_tag&&this.listeners("newRTCSession").length===0){l.reply(405);return}var T,h;if(l.to_tag)T=this._findDialog(l.call_id,l.from_tag,l.to_tag),T?T.receiveRequest(l):f===It.NOTIFY?(h=this._findSession(l),h?h.receiveRequest(l):(Je.debug("received NOTIFY request for a non existent subscription"),l.reply(481,"Subscription does not exist"))):f!==It.ACK&&l.reply(481);else switch(f){case It.INVITE:if(window.RTCPeerConnection)if(l.hasHeader("replaces")){var g=l.replaces;T=this._findDialog(g.call_id,g.from_tag,g.to_tag),T?(h=T.owner,h.isEnded()?l.reply(603):h.receiveRequest(l)):l.reply(481)}else h=new Av(this),h.init_incoming(l);else Je.warn("INVITE received but WebRTC is not supported"),l.reply(488);break;case It.BYE:l.reply(481);break;case It.CANCEL:h=this._findSession(l),h?h.receiveRequest(l):Je.debug("received CANCEL request for a non existent session");break;case It.ACK:break;case It.NOTIFY:this.emit("sipEvent",{event:l.event,request:l}),l.reply(200);break;default:l.reply(405);break}}}},{key:"_findSession",value:function(l){var f=l.call_id,e=l.from_tag,_=l.to_tag,T=f+e,h=this._sessions[T],g=f+_,m=this._sessions[g];return h||m||null}},{key:"_findDialog",value:function(l,f,e){var _=l+f+e,T=this._dialogs[_];return T||(_=l+e+f,T=this._dialogs[_],T||null)}},{key:"_loadConfig",value:function(l){try{kh.load(this._configuration,l)}catch(g){throw g}this._configuration.display_name===0&&(this._configuration.display_name="0"),this._configuration.instance_id||(this._configuration.instance_id=Nu.newUUID()),this._configuration.jssip_id=Nu.createRandomToken(5);var f=this._configuration.uri.clone();f.user=null,this._configuration.hostport_params=f.toString().replace(/^sip:/i,"");try{this._transport=new bP(this._configuration.sockets,{max_interval:this._configuration.connection_recovery_max_interval,min_interval:this._configuration.connection_recovery_min_interval}),this._transport.onconnecting=RP.bind(this),this._transport.onconnect=OP.bind(this),this._transport.ondisconnect=IP.bind(this),this._transport.ondata=kP.bind(this)}catch(g){throw Je.warn(g),new SP.ConfigurationError("sockets",this._configuration.sockets)}if(delete this._configuration.sockets,this._configuration.authorization_user||(this._configuration.authorization_user=this._configuration.uri.user),!this._configuration.registrar_server){var e=this._configuration.uri.clone();e.user=null,e.clearParams(),e.clearHeaders(),this._configuration.registrar_server=e}this._configuration.no_answer_timeout*=1e3,this._configuration.contact_uri?this._configuration.via_host=this._configuration.contact_uri.host:this._configuration.contact_uri=new wP("sip",Nu.createRandomToken(8),this._configuration.via_host,null,{transport:"ws"}),this._contact={pub_gruu:null,temp_gruu:null,uri:this._configuration.contact_uri,toString:function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=m.anonymous||null,E=m.outbound||null,C="<";return b?C+=this.temp_gruu||"sip:anonymous@anonymous.invalid;transport=ws":C+=this.pub_gruu||this.uri.toString(),E&&(b?!this.temp_gruu:!this.pub_gruu)&&(C+=";ob"),C+=">",C}};var _=["authorization_user","password","realm","ha1","authorization_jwt","display_name","register","extra_headers"];for(var T in this._configuration)Object.prototype.hasOwnProperty.call(this._configuration,T)&&(_.indexOf(T)!==-1?Object.defineProperty(this._configuration,T,{writable:!0,configurable:!1}):Object.defineProperty(this._configuration,T,{writable:!1,configurable:!1}));Je.debug("configuration parameters after validation:");for(var h in this._configuration)if(Object.prototype.hasOwnProperty.call(kh.settings,h))switch(h){case"uri":case"registrar_server":Je.debug("- ".concat(h,": ").concat(this._configuration[h]));break;case"password":case"ha1":case"authorization_jwt":Je.debug("- ".concat(h,": NOT SHOWN"));break;default:Je.debug("- ".concat(h,": ").concat(JSON.stringify(this._configuration[h])))}}},{key:"C",get:function(){return kt}},{key:"status",get:function(){return this._status}},{key:"contact",get:function(){return this._contact}},{key:"configuration",get:function(){return this._configuration}},{key:"transport",get:function(){return this._transport}}]),n}(mP);function RP(s){this.emit("connecting",s)}function OP(s){this._status!==kt.STATUS_USER_CLOSED&&(this._status=kt.STATUS_READY,this._error=null,this.emit("connected",s),this._dynConfiguration.register&&this._registrator.register())}function IP(s){for(var r=["nict","ict","nist","ist"],n=0,i=r;n<i.length;n++){var l=i[n];for(var f in this._transactions[l])Object.prototype.hasOwnProperty.call(this._transactions[l],f)&&this._transactions[l][f].onTransportError()}this.emit("disconnected",s),this._registrator.onTransportClosed(),this._status!==kt.STATUS_USER_CLOSED&&(this._status=kt.STATUS_NOT_READY,this._error=kt.NETWORK_ERROR)}function kP(s){var r=s.transport,n=s.message;if(n=EP.parseMessage(n,this),!!n&&!(this._status===kt.STATUS_USER_CLOSED&&n instanceof Ih.IncomingRequest)&&CP(n,this,r)){if(n instanceof Ih.IncomingRequest)n.transport=r,this.receiveRequest(n);else if(n instanceof Ih.IncomingResponse){var i;switch(n.method){case It.INVITE:i=this._transactions.ict[n.via_branch],i&&i.receiveResponse(n);break;case It.ACK:break;default:i=this._transactions.nict[n.via_branch],i&&i.receiveResponse(n);break}}}}function PP(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function Iv(s,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}function NP(s,r,n){return r&&Iv(s.prototype,r),n&&Iv(s,n),s}var xP=Et,DP=lr(),zt=new xP("WebSocketInterface"),LP=function(){function s(r){PP(this,s),zt.debug('new() [url:"%s"]',r),this._url=r,this._sip_uri=null,this._via_transport=null,this._ws=null;var n=DP.parse(r,"absoluteURI");if(n===-1)throw zt.warn("invalid WebSocket URI: ".concat(r)),new TypeError("Invalid argument: ".concat(r));if(n.scheme!=="wss"&&n.scheme!=="ws")throw zt.warn("invalid WebSocket URI scheme: ".concat(n.scheme)),new TypeError("Invalid argument: ".concat(r));this._sip_uri="sip:".concat(n.host).concat(n.port?":".concat(n.port):"",";transport=ws"),this._via_transport=n.scheme.toUpperCase()}return NP(s,[{key:"connect",value:function(){if(zt.debug("connect()"),this.isConnected()){zt.debug("WebSocket ".concat(this._url," is already connected"));return}else if(this.isConnecting()){zt.debug("WebSocket ".concat(this._url," is connecting"));return}this._ws&&this.disconnect(),zt.debug("connecting to WebSocket ".concat(this._url));try{this._ws=new WebSocket(this._url,"sip"),this._ws.binaryType="arraybuffer",this._ws.onopen=this._onOpen.bind(this),this._ws.onclose=this._onClose.bind(this),this._ws.onmessage=this._onMessage.bind(this),this._ws.onerror=this._onError.bind(this)}catch(n){this._onError(n)}}},{key:"disconnect",value:function(){zt.debug("disconnect()"),this._ws&&(this._ws.onopen=function(){},this._ws.onclose=function(){},this._ws.onmessage=function(){},this._ws.onerror=function(){},this._ws.close(),this._ws=null)}},{key:"send",value:function(n){return zt.debug("send()"),this.isConnected()?(this._ws.send(n),!0):(zt.warn("unable to send message, WebSocket is not open"),!1)}},{key:"isConnected",value:function(){return this._ws&&this._ws.readyState===this._ws.OPEN}},{key:"isConnecting",value:function(){return this._ws&&this._ws.readyState===this._ws.CONNECTING}},{key:"_onOpen",value:function(){zt.debug("WebSocket ".concat(this._url," connected")),this.onconnect()}},{key:"_onClose",value:function(n){var i=n.wasClean,l=n.code,f=n.reason;zt.debug("WebSocket ".concat(this._url," closed")),i===!1&&zt.debug("WebSocket abrupt disconnection"),this.ondisconnect(!i,l,f)}},{key:"_onMessage",value:function(n){var i=n.data;zt.debug("received WebSocket message"),this.ondata(i)}},{key:"_onError",value:function(n){zt.warn("WebSocket ".concat(this._url," error: "),n)}},{key:"via_transport",get:function(){return this._via_transport},set:function(n){this._via_transport=n.toUpperCase()}},{key:"sip_uri",get:function(){return this._sip_uri}},{key:"url",get:function(){return this._url}}]),s}(),nd=u0,UP=_t,MP=ai,FP=Ht(),$P=AP,HP=ui(),BP=np(),qP=lr(),WP=LP,jP=Sn("JsSIP");jP("version %s",nd.version);var VP={C:UP,Exceptions:MP,Utils:FP,UA:$P,URI:HP,NameAddrHeader:BP,WebSocketInterface:WP,Grammar:qP,debug:Sn,get name(){return nd.title},get version(){return nd.version}};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var r=f(El),n=f(xm),i=f(Um),l=f(VP);function f(I){return I&&I.__esModule?I:{default:I}}function e(I){"@babel/helpers - typeof";return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},e(I)}function _(I,P){if(!(I instanceof P))throw new TypeError("Cannot call a class as a function")}function T(I,P){for(var x=0;x<P.length;x++){var U=P[x];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(I,g(U.key),U)}}function h(I,P,x){return P&&T(I.prototype,P),x&&T(I,x),Object.defineProperty(I,"prototype",{writable:!1}),I}function g(I){var P=m(I,"string");return e(P)=="symbol"?P:P+""}function m(I,P){if(e(I)!="object"||!I)return I;var x=I[Symbol.toPrimitive];if(x!==void 0){var U=x.call(I,P||"default");if(e(U)!="object")return U;throw new TypeError("@@toPrimitive must return a primitive value.")}return(P==="string"?String:Number)(I)}var b={},E=new n.default,C=new i.default,N=new l.default.WebSocketInterface("wss://sbcsg.telecmi.com");typeof window<"u"&&(window.onbeforeunload=function(){C.start(b)}),s.default=function(){function I(){_(this,I)}return h(I,[{key:"start",value:function(x,U){if(!r.default.isEmpty(b)){if(b.isRegistered()){U.emit("error",{code:1001,status:"Please logout before you login"});return}b.isConnected()&&b.stop()}x.debug===!0?l.default.debug.enable("JsSIP:*"):l.default.debug.disable("PIOPIY:*"),x.region&&(N=new l.default.WebSocketInterface("wss://"+x.region)),x.sockets=[N],x.user_agent="PIOPIYJS",x.use_preloaded_route=!0,b=new l.default.UA(x),b.on("registered",function(G){U.emit("login",{code:200,status:"login successfully"})}),b.on("unregistered",function(G){U.emit("logout",{code:200,status:"logout successfully"})}),b.on("connected",function(G){U.emit("connected",{code:200,status:"SBC connected"})}),b.on("disconnected",function(G){U.emit("disconnected",{code:1e3,status:"SBC disconneced"})}),b.on("registrationFailed",function(G){G.response&&(G.response.status_code===401&&U.emit("loginFailed",{code:401,status:"invalid user"}),G.response.status_code===503&&U.emit("loginFailed",{code:405,status:"too many connection"}),G.response.status_code===407&&U.emit("loginFailed",{code:407,status:"invalid IP"}))}),U.on("net_changed",function(G){b&&b.isRegistered()&b.isConnected()&&(b.transport.disconnect(),b.transport.connect(),b.start())}),b.on("newRTCSession",function(G){if(G.originator!="local"&&!r.default.isEmpty(b._sessions)&&Object.keys(b._sessions).length>1){G.session.terminate();return}G.request&&(U.call_id=G.request.call_id),E.invite(G,U)}),b.start()}},{key:"re_register",value:function(){b.isRegistered()||b.register()}},{key:"stop",value:function(x){if(b){if(!b.isRegistered()){x.emit("error",{code:1002,status:"Please login"});return}b.isRegistered()&&(b.unregister(),b.stop())}}},{key:"make",value:function(x,U,G){if(!r.default.isEmpty(b)&&!b.isRegistered()){U.emit("error",{code:1002,status:"Please login to call"});return}E.make(x,b,U,G)}},{key:"terminate",value:function(x){if(!r.default.isEmpty(b)&&!b.isRegistered()){x.emit("error",{code:1002,status:"Please login "});return}E.terminate(b,x)}},{key:"hangup",value:function(x){if(!r.default.isEmpty(b)&&!b.isRegistered()){x.emit("error",{code:1002,status:"Please login "});return}E.hangup(b,x)}},{key:"answer",value:function(x){if(!r.default.isEmpty(b)&&!b.isRegistered()){x.emit("error",{code:1002,status:"Please login "});return}E.answer(b,x)}},{key:"reject",value:function(x){if(!r.default.isEmpty(b)&&!b.isRegistered()){x.emit("error",{code:1002,status:"Please login "});return}E.reject(b,x)}},{key:"dtmf",value:function(x,U){if(!r.default.isEmpty(b)&&!b.isRegistered()){U.emit("error",{code:1002,status:"Please login "});return}if(r.default.isEmpty(x)&&!r.default.isNumber(x)){U.emit("error",{code:1005,status:"invalid dtmf type "});return}E.dtmf(x,b,U)}},{key:"hold",value:function(x){if(!r.default.isEmpty(b)&&!b.isRegistered()){x.emit("error",{code:1002,status:"Please login "});return}E.hold(b,x)}},{key:"unhold",value:function(x){if(!r.default.isEmpty(b)&&!b.isRegistered()){x.emit("error",{code:1002,status:"Please login "});return}E.unhold(b,x)}},{key:"mute",value:function(x){if(!r.default.isEmpty(b)&&!b.isRegistered()){x.emit("error",{code:1002,status:"Please login "});return}E.mute(b,x)}},{key:"unmute",value:function(x){if(!r.default.isEmpty(b)&&!b.isRegistered()){x.emit("error",{code:1002,status:"Please login "});return}E.unmute(b,x)}},{key:"islogedin",value:function(x){return!!(!r.default.isEmpty(b)&&b.isRegistered())}},{key:"isConnected",value:function(x){return!!(!r.default.isEmpty(b)&&b.isConnected())}},{key:"onmute",value:function(x){if(!r.default.isEmpty(b))return b.isRegistered()?E.onmute(b,x):!1}},{key:"onhold",value:function(x){if(!r.default.isEmpty(b))return b.isRegistered()?E.onhold(b,x):!1}},{key:"getCallId",value:function(x){if(!r.default.isEmpty(b))return b.isRegistered()?E.getCallId(b,x):!1}},{key:"getCallID",value:function(x){if(!r.default.isEmpty(b))return b.isRegistered()?E.getCallID(b,x):!1}}])}()})(Nm);var w0={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;function r(_){"@babel/helpers - typeof";return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},r(_)}function n(_,T){if(!(_ instanceof T))throw new TypeError("Cannot call a class as a function")}function i(_,T){for(var h=0;h<T.length;h++){var g=T[h];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(_,f(g.key),g)}}function l(_,T,h){return T&&i(_.prototype,T),h&&i(_,h),Object.defineProperty(_,"prototype",{writable:!1}),_}function f(_){var T=e(_,"string");return r(T)=="symbol"?T:T+""}function e(_,T){if(r(_)!="object"||!_)return _;var h=_[Symbol.toPrimitive];if(h!==void 0){var g=h.call(_,T||"default");if(r(g)!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return(T==="string"?String:Number)(_)}s.default=function(){function _(){n(this,_)}return l(_,[{key:"audioTag",value:function(){if(typeof window<"u"){var h=document.createElement("AUDIO");h.setAttribute("autoplay",!0),h.setAttribute("hidden",!0),h.setAttribute("id","telecmi_audio_tag"),document.body.appendChild(h)}}}])}()})(w0);var E0={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;function r(_){"@babel/helpers - typeof";return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},r(_)}function n(_,T){if(!(_ instanceof T))throw new TypeError("Cannot call a class as a function")}function i(_,T){for(var h=0;h<T.length;h++){var g=T[h];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(_,f(g.key),g)}}function l(_,T,h){return T&&i(_.prototype,T),h&&i(_,h),Object.defineProperty(_,"prototype",{writable:!1}),_}function f(_){var T=e(_,"string");return r(T)=="symbol"?T:T+""}function e(_,T){if(r(_)!="object"||!_)return _;var h=_[Symbol.toPrimitive];if(h!==void 0){var g=h.call(_,T||"default");if(r(g)!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return(T==="string"?String:Number)(_)}s.default=function(){function _(){n(this,_)}return l(_,[{key:"getToken",value:function(h,g,m){var b=new XMLHttpRequest;b.open("POST","https://rest.telecmi.com/v2/user/login",!0),b.setRequestHeader("Content-Type","application/json;charset=UTF-8"),b.timeout=5e3,b.onreadystatechange=function(){if(b.readyState===4)if(b.status===200){var C=JSON.parse(b.responseText);C.code===200?m({code:200,token:C.token}):m({code:407})}else m({code:407})},b.onerror=function(){m({code:407})},b.ontimeout=function(){m({code:407})};var E={id:h,password:g};b.send(JSON.stringify(E))}}])}()})(E0);var $c={},rd={exports:{}},Hc={},cp={},Bc={},Ml={},qs={},Dr={},Ys={},Fl={},sr={};Object.defineProperty(sr,"__esModule",{value:!0});sr.ERROR_PACKET=sr.PACKET_TYPES_REVERSE=sr.PACKET_TYPES=void 0;const or=Object.create(null);sr.PACKET_TYPES=or;or.open="0";or.close="1";or.ping="2";or.pong="3";or.message="4";or.upgrade="5";or.noop="6";const C0=Object.create(null);sr.PACKET_TYPES_REVERSE=C0;Object.keys(or).forEach(s=>{C0[or[s]]=s});const GP={type:"error",data:"parser error"};sr.ERROR_PACKET=GP;Object.defineProperty(Fl,"__esModule",{value:!0});Fl.encodePacket=void 0;Fl.encodePacketToBinary=KP;const zP=sr,A0=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",R0=typeof ArrayBuffer=="function",O0=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer,I0=({type:s,data:r},n,i)=>A0&&r instanceof Blob?n?i(r):kv(r,i):R0&&(r instanceof ArrayBuffer||O0(r))?n?i(r):kv(new Blob([r]),i):i(zP.PACKET_TYPES[s]+(r||""));Fl.encodePacket=I0;const kv=(s,r)=>{const n=new FileReader;return n.onload=function(){const i=n.result.split(",")[1];r("b"+(i||""))},n.readAsDataURL(s)};function Pv(s){return s instanceof Uint8Array?s:s instanceof ArrayBuffer?new Uint8Array(s):new Uint8Array(s.buffer,s.byteOffset,s.byteLength)}let Ph;function KP(s,r){if(A0&&s.data instanceof Blob)return s.data.arrayBuffer().then(Pv).then(r);if(R0&&(s.data instanceof ArrayBuffer||O0(s.data)))return r(Pv(s.data));I0(s,!1,n=>{Ph||(Ph=new TextEncoder),r(Ph.encode(n))})}var qc={},Ws={};Object.defineProperty(Ws,"__esModule",{value:!0});Ws.decode=Ws.encode=void 0;const Ns="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",al=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let s=0;s<Ns.length;s++)al[Ns.charCodeAt(s)]=s;const YP=s=>{let r=new Uint8Array(s),n,i=r.length,l="";for(n=0;n<i;n+=3)l+=Ns[r[n]>>2],l+=Ns[(r[n]&3)<<4|r[n+1]>>4],l+=Ns[(r[n+1]&15)<<2|r[n+2]>>6],l+=Ns[r[n+2]&63];return i%3===2?l=l.substring(0,l.length-1)+"=":i%3===1&&(l=l.substring(0,l.length-2)+"=="),l};Ws.encode=YP;const JP=s=>{let r=s.length*.75,n=s.length,i,l=0,f,e,_,T;s[s.length-1]==="="&&(r--,s[s.length-2]==="="&&r--);const h=new ArrayBuffer(r),g=new Uint8Array(h);for(i=0;i<n;i+=4)f=al[s.charCodeAt(i)],e=al[s.charCodeAt(i+1)],_=al[s.charCodeAt(i+2)],T=al[s.charCodeAt(i+3)],g[l++]=f<<2|e>>4,g[l++]=(e&15)<<4|_>>2,g[l++]=(_&3)<<6|T&63;return h};Ws.decode=JP;Object.defineProperty(qc,"__esModule",{value:!0});qc.decodePacket=void 0;const xu=sr,XP=Ws,QP=typeof ArrayBuffer=="function",ZP=(s,r)=>{if(typeof s!="string")return{type:"message",data:k0(s,r)};const n=s.charAt(0);return n==="b"?{type:"message",data:eN(s.substring(1),r)}:xu.PACKET_TYPES_REVERSE[n]?s.length>1?{type:xu.PACKET_TYPES_REVERSE[n],data:s.substring(1)}:{type:xu.PACKET_TYPES_REVERSE[n]}:xu.ERROR_PACKET};qc.decodePacket=ZP;const eN=(s,r)=>{if(QP){const n=(0,XP.decode)(s);return k0(n,r)}else return{base64:!0,data:s}},k0=(s,r)=>{switch(r){case"blob":return s instanceof Blob?s:new Blob([s]);case"arraybuffer":default:return s instanceof ArrayBuffer?s:s.buffer}};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.decodePayload=s.decodePacket=s.encodePayload=s.encodePacket=s.protocol=void 0,s.createPacketEncoderStream=_,s.createPacketDecoderStream=m;const r=Fl;Object.defineProperty(s,"encodePacket",{enumerable:!0,get:function(){return r.encodePacket}});const n=qc;Object.defineProperty(s,"decodePacket",{enumerable:!0,get:function(){return n.decodePacket}});const i=sr,l="",f=(b,E)=>{const C=b.length,N=new Array(C);let I=0;b.forEach((P,x)=>{(0,r.encodePacket)(P,!1,U=>{N[x]=U,++I===C&&E(N.join(l))})})};s.encodePayload=f;const e=(b,E)=>{const C=b.split(l),N=[];for(let I=0;I<C.length;I++){const P=(0,n.decodePacket)(C[I],E);if(N.push(P),P.type==="error")break}return N};s.decodePayload=e;function _(){return new TransformStream({transform(b,E){(0,r.encodePacketToBinary)(b,C=>{const N=C.length;let I;if(N<126)I=new Uint8Array(1),new DataView(I.buffer).setUint8(0,N);else if(N<65536){I=new Uint8Array(3);const P=new DataView(I.buffer);P.setUint8(0,126),P.setUint16(1,N)}else{I=new Uint8Array(9);const P=new DataView(I.buffer);P.setUint8(0,127),P.setBigUint64(1,BigInt(N))}b.data&&typeof b.data!="string"&&(I[0]|=128),E.enqueue(I),E.enqueue(C)})}})}let T;function h(b){return b.reduce((E,C)=>E+C.length,0)}function g(b,E){if(b[0].length===E)return b.shift();const C=new Uint8Array(E);let N=0;for(let I=0;I<E;I++)C[I]=b[0][N++],N===b[0].length&&(b.shift(),N=0);return b.length&&N<b[0].length&&(b[0]=b[0].slice(N)),C}function m(b,E){T||(T=new TextDecoder);const C=[];let N=0,I=-1,P=!1;return new TransformStream({transform(x,U){for(C.push(x);;){if(N===0){if(h(C)<1)break;const G=g(C,1);P=(G[0]&128)===128,I=G[0]&127,I<126?N=3:I===126?N=1:N=2}else if(N===1){if(h(C)<2)break;const G=g(C,2);I=new DataView(G.buffer,G.byteOffset,G.length).getUint16(0),N=3}else if(N===2){if(h(C)<8)break;const G=g(C,8),te=new DataView(G.buffer,G.byteOffset,G.length),we=te.getUint32(0);if(we>Math.pow(2,21)-1){U.enqueue(i.ERROR_PACKET);break}I=we*Math.pow(2,32)+te.getUint32(4),N=3}else{if(h(C)<I)break;const G=g(C,I);U.enqueue((0,n.decodePacket)(P?G:T.decode(G),E)),N=0}if(I===0||I>b){U.enqueue(i.ERROR_PACKET);break}}}})}s.protocol=4})(Ys);function Yt(s){if(s)return tN(s)}function tN(s){for(var r in Yt.prototype)s[r]=Yt.prototype[r];return s}Yt.prototype.on=Yt.prototype.addEventListener=function(s,r){return this._callbacks=this._callbacks||{},(this._callbacks["$"+s]=this._callbacks["$"+s]||[]).push(r),this};Yt.prototype.once=function(s,r){function n(){this.off(s,n),r.apply(this,arguments)}return n.fn=r,this.on(s,n),this};Yt.prototype.off=Yt.prototype.removeListener=Yt.prototype.removeAllListeners=Yt.prototype.removeEventListener=function(s,r){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+s];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+s],this;for(var i,l=0;l<n.length;l++)if(i=n[l],i===r||i.fn===r){n.splice(l,1);break}return n.length===0&&delete this._callbacks["$"+s],this};Yt.prototype.emit=function(s){this._callbacks=this._callbacks||{};for(var r=new Array(arguments.length-1),n=this._callbacks["$"+s],i=1;i<arguments.length;i++)r[i-1]=arguments[i];if(n){n=n.slice(0);for(var i=0,l=n.length;i<l;++i)n[i].apply(this,r)}return this};Yt.prototype.emitReserved=Yt.prototype.emit;Yt.prototype.listeners=function(s){return this._callbacks=this._callbacks||{},this._callbacks["$"+s]||[]};Yt.prototype.hasListeners=function(s){return!!this.listeners(s).length};const nN=Object.freeze(Object.defineProperty({__proto__:null,Emitter:Yt},Symbol.toStringTag,{value:"Module"})),Js=Xv(nN);var Ln={},Qi={};Object.defineProperty(Qi,"__esModule",{value:!0});Qi.globalThisShim=void 0;Qi.globalThisShim=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();Object.defineProperty(Ln,"__esModule",{value:!0});Ln.byteLength=Ln.installTimerFunctions=Ln.pick=void 0;const ei=Qi;function rN(s,...r){return r.reduce((n,i)=>(s.hasOwnProperty(i)&&(n[i]=s[i]),n),{})}Ln.pick=rN;const iN=ei.globalThisShim.setTimeout,sN=ei.globalThisShim.clearTimeout;function oN(s,r){r.useNativeTimers?(s.setTimeoutFn=iN.bind(ei.globalThisShim),s.clearTimeoutFn=sN.bind(ei.globalThisShim)):(s.setTimeoutFn=ei.globalThisShim.setTimeout.bind(ei.globalThisShim),s.clearTimeoutFn=ei.globalThisShim.clearTimeout.bind(ei.globalThisShim))}Ln.installTimerFunctions=oN;const lN=1.33;function aN(s){return typeof s=="string"?uN(s):Math.ceil((s.byteLength||s.size)*lN)}Ln.byteLength=aN;function uN(s){let r=0,n=0;for(let i=0,l=s.length;i<l;i++)r=s.charCodeAt(i),r<128?n+=1:r<2048?n+=2:r<55296||r>=57344?n+=3:(i++,n+=4);return n}var Gi={};Object.defineProperty(Gi,"__esModule",{value:!0});Gi.decode=Gi.encode=void 0;function cN(s){let r="";for(let n in s)s.hasOwnProperty(n)&&(r.length&&(r+="&"),r+=encodeURIComponent(n)+"="+encodeURIComponent(s[n]));return r}Gi.encode=cN;function fN(s){let r={},n=s.split("&");for(let i=0,l=n.length;i<l;i++){let f=n[i].split("=");r[decodeURIComponent(f[0])]=decodeURIComponent(f[1])}return r}Gi.decode=fN;var hN=We&&We.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Dr,"__esModule",{value:!0});Dr.Transport=Dr.TransportError=void 0;const dN=Ys,pN=Js,_N=Ln,gN=hN(Sn),vN=Gi,mN=(0,gN.default)("engine.io-client:transport");class P0 extends Error{constructor(r,n,i){super(r),this.description=n,this.context=i,this.type="TransportError"}}Dr.TransportError=P0;class yN extends pN.Emitter{constructor(r){super(),this.writable=!1,(0,_N.installTimerFunctions)(this,r),this.opts=r,this.query=r.query,this.socket=r.socket}onError(r,n,i){return super.emitReserved("error",new P0(r,n,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(r){this.readyState==="open"?this.write(r):mN("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(r){const n=(0,dN.decodePacket)(r,this.socket.binaryType);this.onPacket(n)}onPacket(r){super.emitReserved("packet",r)}onClose(r){this.readyState="closed",super.emitReserved("close",r)}pause(r){}createUri(r,n={}){return r+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const r=this.opts.hostname;return r.indexOf(":")===-1?r:"["+r+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(r){const n=(0,vN.encode)(r);return n.length?"?"+n:""}}Dr.Transport=yN;var Nr={};Object.defineProperty(Nr,"__esModule",{value:!0});Nr.yeast=Nr.decode=Nr.encode=void 0;const N0="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),vc=64,x0={};let Nv=0,ni=0,xv;function id(s){let r="";do r=N0[s%vc]+r,s=Math.floor(s/vc);while(s>0);return r}Nr.encode=id;function TN(s){let r=0;for(ni=0;ni<s.length;ni++)r=r*vc+x0[s.charAt(ni)];return r}Nr.decode=TN;function bN(){const s=id(+new Date);return s!==xv?(Nv=0,xv=s):s+"."+id(Nv++)}Nr.yeast=bN;for(;ni<vc;ni++)x0[N0[ni]]=ni;var js={},Wc={};Object.defineProperty(Wc,"__esModule",{value:!0});Wc.hasCORS=void 0;let D0=!1;try{D0=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}Wc.hasCORS=D0;Object.defineProperty(js,"__esModule",{value:!0});js.createCookieJar=js.XHR=void 0;const SN=Wc,wN=Qi;function EN(s){const r=s.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!r||SN.hasCORS))return new XMLHttpRequest}catch{}if(!r)try{return new wN.globalThisShim[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}js.XHR=EN;function CN(){}js.createCookieJar=CN;var AN=We&&We.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(qs,"__esModule",{value:!0});qs.Request=qs.Polling=void 0;const RN=Dr,ON=AN(Sn),IN=Nr,Dv=Ys,fp=js,kN=Js,Lv=Ln,PN=Qi,tn=(0,ON.default)("engine.io-client:polling");function NN(){}const xN=function(){return new fp.XHR({xdomain:!1}).responseType!=null}();class DN extends RN.Transport{constructor(r){if(super(r),this.polling=!1,typeof location<"u"){const i=location.protocol==="https:";let l=location.port;l||(l=i?"443":"80"),this.xd=typeof location<"u"&&r.hostname!==location.hostname||l!==r.port}const n=r&&r.forceBase64;this.supportsBinary=xN&&!n,this.opts.withCredentials&&(this.cookieJar=(0,fp.createCookieJar)())}get name(){return"polling"}doOpen(){this.poll()}pause(r){this.readyState="pausing";const n=()=>{tn("paused"),this.readyState="paused",r()};if(this.polling||!this.writable){let i=0;this.polling&&(tn("we are currently polling - waiting to pause"),i++,this.once("pollComplete",function(){tn("pre-pause polling complete"),--i||n()})),this.writable||(tn("we are currently writing - waiting to pause"),i++,this.once("drain",function(){tn("pre-pause writing complete"),--i||n()}))}else n()}poll(){tn("polling"),this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(r){tn("polling got data %s",r);const n=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};(0,Dv.decodePayload)(r,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"?this.poll():tn('ignoring poll - transport state "%s"',this.readyState))}doClose(){const r=()=>{tn("writing close packet"),this.write([{type:"close"}])};this.readyState==="open"?(tn("transport open - closing"),r()):(tn("transport not open - deferring close"),this.once("open",r))}write(r){this.writable=!1,(0,Dv.encodePayload)(r,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const r=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=(0,IN.yeast)()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(r,n)}request(r={}){return Object.assign(r,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Bi(this.uri(),r)}doWrite(r,n){const i=this.request({method:"POST",data:r});i.on("success",n),i.on("error",(l,f)=>{this.onError("xhr post error",l,f)})}doPoll(){tn("xhr poll");const r=this.request();r.on("data",this.onData.bind(this)),r.on("error",(n,i)=>{this.onError("xhr poll error",n,i)}),this.pollXhr=r}}qs.Polling=DN;let Bi=class Xu extends kN.Emitter{constructor(r,n){super(),(0,Lv.installTimerFunctions)(this,n),this.opts=n,this.method=n.method||"GET",this.uri=r,this.data=n.data!==void 0?n.data:null,this.create()}create(){var r;const n=(0,Lv.pick)(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this.opts.xd;const i=this.xhr=new fp.XHR(n);try{tn("xhr open %s: %s",this.method,this.uri),i.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let l in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(l)&&i.setRequestHeader(l,this.opts.extraHeaders[l])}}catch{}if(this.method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(r=this.opts.cookieJar)===null||r===void 0||r.addCookies(i),"withCredentials"in i&&(i.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(i.timeout=this.opts.requestTimeout),i.onreadystatechange=()=>{var l;i.readyState===3&&((l=this.opts.cookieJar)===null||l===void 0||l.parseCookies(i)),i.readyState===4&&(i.status===200||i.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof i.status=="number"?i.status:0)},0))},tn("xhr data %s",this.data),i.send(this.data)}catch(l){this.setTimeoutFn(()=>{this.onError(l)},0);return}typeof document<"u"&&(this.index=Xu.requestsCount++,Xu.requests[this.index]=this)}onError(r){this.emitReserved("error",r,this.xhr),this.cleanup(!0)}cleanup(r){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=NN,r)try{this.xhr.abort()}catch{}typeof document<"u"&&delete Xu.requests[this.index],this.xhr=null}}onLoad(){const r=this.xhr.responseText;r!==null&&(this.emitReserved("data",r),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}};qs.Request=Bi;Bi.requestsCount=0;Bi.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Uv);else if(typeof addEventListener=="function"){const s="onpagehide"in PN.globalThisShim?"pagehide":"unload";addEventListener(s,Uv,!1)}}function Uv(){for(let s in Bi.requests)Bi.requests.hasOwnProperty(s)&&Bi.requests[s].abort()}var jc={},yn={};Object.defineProperty(yn,"__esModule",{value:!0});yn.defaultBinaryType=yn.usingBrowserWebSocket=yn.WebSocket=yn.nextTick=void 0;const Mv=Qi;yn.nextTick=typeof Promise=="function"&&typeof Promise.resolve=="function"?r=>Promise.resolve().then(r):(r,n)=>n(r,0);yn.WebSocket=Mv.globalThisShim.WebSocket||Mv.globalThisShim.MozWebSocket;yn.usingBrowserWebSocket=!0;yn.defaultBinaryType="arraybuffer";var LN=We&&We.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(jc,"__esModule",{value:!0});jc.WS=void 0;const UN=Dr,MN=Nr,FN=Ln,Zr=yn,$N=LN(Sn),HN=Ys,BN=(0,$N.default)("engine.io-client:websocket"),Fv=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class qN extends UN.Transport{constructor(r){super(r),this.supportsBinary=!r.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const r=this.uri(),n=this.opts.protocols,i=Fv?{}:(0,FN.pick)(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=Zr.usingBrowserWebSocket&&!Fv?n?new Zr.WebSocket(r,n):new Zr.WebSocket(r):new Zr.WebSocket(r,n,i)}catch(l){return this.emitReserved("error",l)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=r=>this.onClose({description:"websocket connection closed",context:r}),this.ws.onmessage=r=>this.onData(r.data),this.ws.onerror=r=>this.onError("websocket error",r)}write(r){this.writable=!1;for(let n=0;n<r.length;n++){const i=r[n],l=n===r.length-1;(0,HN.encodePacket)(i,this.supportsBinary,f=>{const e={};Zr.usingBrowserWebSocket||(i.options&&(e.compress=i.options.compress),this.opts.perMessageDeflate&&(typeof f=="string"?Buffer.byteLength(f):f.length)<this.opts.perMessageDeflate.threshold&&(e.compress=!1));try{Zr.usingBrowserWebSocket?this.ws.send(f):this.ws.send(f,e)}catch{BN("websocket closed before onclose event")}l&&(0,Zr.nextTick)(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const r=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=(0,MN.yeast)()),this.supportsBinary||(n.b64=1),this.createUri(r,n)}check(){return!!Zr.WebSocket}}jc.WS=qN;var Vc={},WN=We&&We.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Vc,"__esModule",{value:!0});Vc.WT=void 0;const jN=Dr,VN=yn,$v=Ys,GN=WN(Sn),ll=(0,GN.default)("engine.io-client:webtransport");class zN extends jN.Transport{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{ll("transport closed gracefully"),this.onClose()}).catch(r=>{ll("transport closed due to %s",r),this.onError("webtransport error",r)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(r=>{const n=(0,$v.createPacketDecoderStream)(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=r.readable.pipeThrough(n).getReader(),l=(0,$v.createPacketEncoderStream)();l.readable.pipeTo(r.writable),this.writer=l.writable.getWriter();const f=()=>{i.read().then(({done:_,value:T})=>{if(_){ll("session is closed");return}ll("received chunk: %o",T),this.onPacket(T),f()}).catch(_=>{ll("an error occurred while reading: %s",_)})};f();const e={type:"open"};this.query.sid&&(e.data=`{"sid":"${this.query.sid}"}`),this.writer.write(e).then(()=>this.onOpen())})}))}write(r){this.writable=!1;for(let n=0;n<r.length;n++){const i=r[n],l=n===r.length-1;this.writer.write(i).then(()=>{l&&(0,VN.nextTick)(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var r;(r=this.transport)===null||r===void 0||r.close()}}Vc.WT=zN;Object.defineProperty(Ml,"__esModule",{value:!0});Ml.transports=void 0;const KN=qs,YN=jc,JN=Vc;Ml.transports={websocket:YN.WS,webtransport:JN.WT,polling:KN.Polling};var $l={};Object.defineProperty($l,"__esModule",{value:!0});$l.parse=void 0;const XN=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,QN=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function ZN(s){if(s.length>2e3)throw"URI too long";const r=s,n=s.indexOf("["),i=s.indexOf("]");n!=-1&&i!=-1&&(s=s.substring(0,n)+s.substring(n,i).replace(/:/g,";")+s.substring(i,s.length));let l=XN.exec(s||""),f={},e=14;for(;e--;)f[QN[e]]=l[e]||"";return n!=-1&&i!=-1&&(f.source=r,f.host=f.host.substring(1,f.host.length-1).replace(/;/g,":"),f.authority=f.authority.replace("[","").replace("]","").replace(/;/g,":"),f.ipv6uri=!0),f.pathNames=ex(f,f.path),f.queryKey=tx(f,f.query),f}$l.parse=ZN;function ex(s,r){const n=/\/{2,9}/g,i=r.replace(n,"/").split("/");return(r.slice(0,1)=="/"||r.length===0)&&i.splice(0,1),r.slice(-1)=="/"&&i.splice(i.length-1,1),i}function tx(s,r){const n={};return r.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,l,f){l&&(n[l]=f)}),n}var nx=We&&We.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Bc,"__esModule",{value:!0});Bc.Socket=void 0;const rx=Ml,Hv=Ln,ix=Gi,Bv=$l,sx=nx(Sn),ox=Js,L0=Ys,lx=yn,nt=(0,sx.default)("engine.io-client:socket");let U0=class ks extends ox.Emitter{constructor(r,n={}){super(),this.binaryType=lx.defaultBinaryType,this.writeBuffer=[],r&&typeof r=="object"&&(n=r,r=null),r?(r=(0,Bv.parse)(r),n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)):n.host&&(n.hostname=(0,Bv.parse)(n.host).host),(0,Hv.installTimerFunctions)(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=n.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=(0,ix.decode)(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(r){nt('creating transport "%s"',r);const n=Object.assign({},this.opts.query);n.EIO=L0.protocol,n.transport=r,this.id&&(n.sid=this.id);const i=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[r]);return nt("options: %j",i),new rx.transports[r](i)}open(){let r;if(this.opts.rememberUpgrade&&ks.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)r="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else r=this.transports[0];this.readyState="opening";try{r=this.createTransport(r)}catch(n){nt("error while creating transport: %s",n),this.transports.shift(),this.open();return}r.open(),this.setTransport(r)}setTransport(r){nt("setting transport %s",r.name),this.transport&&(nt("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=r,r.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",n=>this.onClose("transport close",n))}probe(r){nt('probing transport "%s"',r);let n=this.createTransport(r),i=!1;ks.priorWebsocketSuccess=!1;const l=()=>{i||(nt('probe transport "%s" opened',r),n.send([{type:"ping",data:"probe"}]),n.once("packet",m=>{if(!i)if(m.type==="pong"&&m.data==="probe"){if(nt('probe transport "%s" pong',r),this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;ks.priorWebsocketSuccess=n.name==="websocket",nt('pausing current transport "%s"',this.transport.name),this.transport.pause(()=>{i||this.readyState!=="closed"&&(nt("changing transport and sending upgrade packet"),g(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{nt('probe transport "%s" failed',r);const b=new Error("probe error");b.transport=n.name,this.emitReserved("upgradeError",b)}}))};function f(){i||(i=!0,g(),n.close(),n=null)}const e=m=>{const b=new Error("probe error: "+m);b.transport=n.name,f(),nt('probe transport "%s" failed because of error: %s',r,m),this.emitReserved("upgradeError",b)};function _(){e("transport closed")}function T(){e("socket closed")}function h(m){n&&m.name!==n.name&&(nt('"%s" works - aborting "%s"',m.name,n.name),f())}const g=()=>{n.removeListener("open",l),n.removeListener("error",e),n.removeListener("close",_),this.off("close",T),this.off("upgrading",h)};n.once("open",l),n.once("error",e),n.once("close",_),this.once("close",T),this.once("upgrading",h),this.upgrades.indexOf("webtransport")!==-1&&r!=="webtransport"?this.setTimeoutFn(()=>{i||n.open()},200):n.open()}onOpen(){if(nt("socket open"),this.readyState="open",ks.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){nt("starting upgrade probes");let r=0;const n=this.upgrades.length;for(;r<n;r++)this.probe(this.upgrades[r])}}onPacket(r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(nt('socket receive: type "%s", data "%s"',r.type,r.data),this.emitReserved("packet",r),this.emitReserved("heartbeat"),this.resetPingTimeout(),r.type){case"open":this.onHandshake(JSON.parse(r.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const n=new Error("server error");n.code=r.data,this.onError(n);break;case"message":this.emitReserved("data",r.data),this.emitReserved("message",r.data);break}else nt('packet received with socket readyState "%s"',this.readyState)}onHandshake(r){this.emitReserved("handshake",r),this.id=r.sid,this.transport.query.sid=r.sid,this.upgrades=this.filterUpgrades(r.upgrades),this.pingInterval=r.pingInterval,this.pingTimeout=r.pingTimeout,this.maxPayload=r.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const r=this.getWritablePackets();nt("flushing %d packets in socket",r.length),this.transport.send(r),this.prevBufferLen=r.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let i=0;i<this.writeBuffer.length;i++){const l=this.writeBuffer[i].data;if(l&&(n+=(0,Hv.byteLength)(l)),i>0&&n>this.maxPayload)return nt("only send %d out of %d packets",i,this.writeBuffer.length),this.writeBuffer.slice(0,i);n+=2}return nt("payload size is %d (max: %d)",n,this.maxPayload),this.writeBuffer}write(r,n,i){return this.sendPacket("message",r,n,i),this}send(r,n,i){return this.sendPacket("message",r,n,i),this}sendPacket(r,n,i,l){if(typeof n=="function"&&(l=n,n=void 0),typeof i=="function"&&(l=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const f={type:r,data:n,options:i};this.emitReserved("packetCreate",f),this.writeBuffer.push(f),l&&this.once("flush",l),this.flush()}close(){const r=()=>{this.onClose("forced close"),nt("socket closing - telling transport to close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),r()},i=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():r()}):this.upgrading?i():r()),this}onError(r){nt("socket error %j",r),ks.priorWebsocketSuccess=!1,this.emitReserved("error",r),this.onClose("transport error",r)}onClose(r,n){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(nt('socket close with reason: "%s"',r),this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",r,n),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(r){const n=[];let i=0;const l=r.length;for(;i<l;i++)~this.transports.indexOf(r[i])&&n.push(r[i]);return n}};Bc.Socket=U0;U0.protocol=L0.protocol;(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.nextTick=s.parse=s.installTimerFunctions=s.transports=s.TransportError=s.Transport=s.protocol=s.Socket=void 0;const r=Bc;Object.defineProperty(s,"Socket",{enumerable:!0,get:function(){return r.Socket}}),s.protocol=r.Socket.protocol;var n=Dr;Object.defineProperty(s,"Transport",{enumerable:!0,get:function(){return n.Transport}}),Object.defineProperty(s,"TransportError",{enumerable:!0,get:function(){return n.TransportError}});var i=Ml;Object.defineProperty(s,"transports",{enumerable:!0,get:function(){return i.transports}});var l=Ln;Object.defineProperty(s,"installTimerFunctions",{enumerable:!0,get:function(){return l.installTimerFunctions}});var f=$l;Object.defineProperty(s,"parse",{enumerable:!0,get:function(){return f.parse}});var e=yn;Object.defineProperty(s,"nextTick",{enumerable:!0,get:function(){return e.nextTick}})})(cp);var ax=We&&We.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Hc,"__esModule",{value:!0});Hc.url=void 0;const ux=cp,cx=ax(Sn),qv=cx.default("socket.io-client:url");function fx(s,r="",n){let i=s;n=n||typeof location<"u"&&location,s==null&&(s=n.protocol+"//"+n.host),typeof s=="string"&&(s.charAt(0)==="/"&&(s.charAt(1)==="/"?s=n.protocol+s:s=n.host+s),/^(https?|wss?):\/\//.test(s)||(qv("protocol-less url %s",s),typeof n<"u"?s=n.protocol+"//"+s:s="https://"+s),qv("parse %s",s),i=ux.parse(s)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const f=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+f+":"+i.port+r,i.href=i.protocol+"://"+f+(n&&n.port===i.port?"":":"+i.port),i}Hc.url=fx;var Gc={},Hl={},zc={},Vs={},zi={};Object.defineProperty(zi,"__esModule",{value:!0});zi.hasBinary=zi.isBinary=void 0;const hx=typeof ArrayBuffer=="function",dx=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s.buffer instanceof ArrayBuffer,M0=Object.prototype.toString,px=typeof Blob=="function"||typeof Blob<"u"&&M0.call(Blob)==="[object BlobConstructor]",_x=typeof File=="function"||typeof File<"u"&&M0.call(File)==="[object FileConstructor]";function F0(s){return hx&&(s instanceof ArrayBuffer||dx(s))||px&&s instanceof Blob||_x&&s instanceof File}zi.isBinary=F0;function Qu(s,r){if(!s||typeof s!="object")return!1;if(Array.isArray(s)){for(let n=0,i=s.length;n<i;n++)if(Qu(s[n]))return!0;return!1}if(F0(s))return!0;if(s.toJSON&&typeof s.toJSON=="function"&&arguments.length===1)return Qu(s.toJSON(),!0);for(const n in s)if(Object.prototype.hasOwnProperty.call(s,n)&&Qu(s[n]))return!0;return!1}zi.hasBinary=Qu;Object.defineProperty(Vs,"__esModule",{value:!0});Vs.reconstructPacket=Vs.deconstructPacket=void 0;const gx=zi;function vx(s){const r=[],n=s.data,i=s;return i.data=sd(n,r),i.attachments=r.length,{packet:i,buffers:r}}Vs.deconstructPacket=vx;function sd(s,r){if(!s)return s;if((0,gx.isBinary)(s)){const n={_placeholder:!0,num:r.length};return r.push(s),n}else if(Array.isArray(s)){const n=new Array(s.length);for(let i=0;i<s.length;i++)n[i]=sd(s[i],r);return n}else if(typeof s=="object"&&!(s instanceof Date)){const n={};for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=sd(s[i],r));return n}return s}function mx(s,r){return s.data=od(s.data,r),delete s.attachments,s}Vs.reconstructPacket=mx;function od(s,r){if(!s)return s;if(s&&s._placeholder===!0){if(typeof s.num=="number"&&s.num>=0&&s.num<r.length)return r[s.num];throw new Error("illegal attachments")}else if(Array.isArray(s))for(let n=0;n<s.length;n++)s[n]=od(s[n],r);else if(typeof s=="object")for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&(s[n]=od(s[n],r));return s}(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.Decoder=s.Encoder=s.PacketType=s.protocol=void 0;const r=Js,n=Vs,i=zi,f=(0,Sn.default)("socket.io-parser"),e=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];s.protocol=5;var _;(function(b){b[b.CONNECT=0]="CONNECT",b[b.DISCONNECT=1]="DISCONNECT",b[b.EVENT=2]="EVENT",b[b.ACK=3]="ACK",b[b.CONNECT_ERROR=4]="CONNECT_ERROR",b[b.BINARY_EVENT=5]="BINARY_EVENT",b[b.BINARY_ACK=6]="BINARY_ACK"})(_=s.PacketType||(s.PacketType={}));class T{constructor(E){this.replacer=E}encode(E){return f("encoding packet %j",E),(E.type===_.EVENT||E.type===_.ACK)&&(0,i.hasBinary)(E)?this.encodeAsBinary({type:E.type===_.EVENT?_.BINARY_EVENT:_.BINARY_ACK,nsp:E.nsp,data:E.data,id:E.id}):[this.encodeAsString(E)]}encodeAsString(E){let C=""+E.type;return(E.type===_.BINARY_EVENT||E.type===_.BINARY_ACK)&&(C+=E.attachments+"-"),E.nsp&&E.nsp!=="/"&&(C+=E.nsp+","),E.id!=null&&(C+=E.id),E.data!=null&&(C+=JSON.stringify(E.data,this.replacer)),f("encoded %j as %s",E,C),C}encodeAsBinary(E){const C=(0,n.deconstructPacket)(E),N=this.encodeAsString(C.packet),I=C.buffers;return I.unshift(N),I}}s.Encoder=T;function h(b){return Object.prototype.toString.call(b)==="[object Object]"}class g extends r.Emitter{constructor(E){super(),this.reviver=E}add(E){let C;if(typeof E=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");C=this.decodeString(E);const N=C.type===_.BINARY_EVENT;N||C.type===_.BINARY_ACK?(C.type=N?_.EVENT:_.ACK,this.reconstructor=new m(C),C.attachments===0&&super.emitReserved("decoded",C)):super.emitReserved("decoded",C)}else if((0,i.isBinary)(E)||E.base64)if(this.reconstructor)C=this.reconstructor.takeBinaryData(E),C&&(this.reconstructor=null,super.emitReserved("decoded",C));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+E)}decodeString(E){let C=0;const N={type:Number(E.charAt(0))};if(_[N.type]===void 0)throw new Error("unknown packet type "+N.type);if(N.type===_.BINARY_EVENT||N.type===_.BINARY_ACK){const P=C+1;for(;E.charAt(++C)!=="-"&&C!=E.length;);const x=E.substring(P,C);if(x!=Number(x)||E.charAt(C)!=="-")throw new Error("Illegal attachments");N.attachments=Number(x)}if(E.charAt(C+1)==="/"){const P=C+1;for(;++C&&!(E.charAt(C)===","||C===E.length););N.nsp=E.substring(P,C)}else N.nsp="/";const I=E.charAt(C+1);if(I!==""&&Number(I)==I){const P=C+1;for(;++C;){const x=E.charAt(C);if(x==null||Number(x)!=x){--C;break}if(C===E.length)break}N.id=Number(E.substring(P,C+1))}if(E.charAt(++C)){const P=this.tryParse(E.substr(C));if(g.isPayloadValid(N.type,P))N.data=P;else throw new Error("invalid payload")}return f("decoded %s as %j",E,N),N}tryParse(E){try{return JSON.parse(E,this.reviver)}catch{return!1}}static isPayloadValid(E,C){switch(E){case _.CONNECT:return h(C);case _.DISCONNECT:return C===void 0;case _.CONNECT_ERROR:return typeof C=="string"||h(C);case _.EVENT:case _.BINARY_EVENT:return Array.isArray(C)&&(typeof C[0]=="number"||typeof C[0]=="string"&&e.indexOf(C[0])===-1);case _.ACK:case _.BINARY_ACK:return Array.isArray(C)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}s.Decoder=g;class m{constructor(E){this.packet=E,this.buffers=[],this.reconPack=E}takeBinaryData(E){if(this.buffers.push(E),this.buffers.length===this.reconPack.attachments){const C=(0,n.reconstructPacket)(this.reconPack,this.buffers);return this.finishedReconstruction(),C}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}})(zc);var Bl={};Object.defineProperty(Bl,"__esModule",{value:!0});Bl.on=void 0;function yx(s,r,n){return s.on(r,n),function(){s.off(r,n)}}Bl.on=yx;var Tx=We&&We.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Hl,"__esModule",{value:!0});Hl.Socket=void 0;const Wn=zc,Du=Bl,bx=Js,Sx=Tx(Sn),yt=Sx.default("socket.io-client:socket"),wx=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Ex extends bx.Emitter{constructor(r,n,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=r,this.nsp=n,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const r=this.io;this.subs=[Du.on(r,"open",this.onopen.bind(this)),Du.on(r,"packet",this.onpacket.bind(this)),Du.on(r,"error",this.onerror.bind(this)),Du.on(r,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...r){return r.unshift("message"),this.emit.apply(this,r),this}emit(r,...n){if(wx.hasOwnProperty(r))throw new Error('"'+r.toString()+'" is a reserved event name');if(n.unshift(r),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const i={type:Wn.PacketType.EVENT,data:n};if(i.options={},i.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const e=this.ids++;yt("emitting packet with ack id %d",e);const _=n.pop();this._registerAckCallback(e,_),i.id=e}const l=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!l||!this.connected)?yt("discard packet as the transport is not currently writable"):this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i),this.flags={},this}_registerAckCallback(r,n){var i;const l=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(l===void 0){this.acks[r]=n;return}const f=this.io.setTimeoutFn(()=>{delete this.acks[r];for(let _=0;_<this.sendBuffer.length;_++)this.sendBuffer[_].id===r&&(yt("removing packet with ack id %d from the buffer",r),this.sendBuffer.splice(_,1));yt("event with ack id %d has timed out after %d ms",r,l),n.call(this,new Error("operation has timed out"))},l),e=(..._)=>{this.io.clearTimeoutFn(f),n.apply(this,_)};e.withError=!0,this.acks[r]=e}emitWithAck(r,...n){return new Promise((i,l)=>{const f=(e,_)=>e?l(e):i(_);f.withError=!0,n.push(f),this.emit(r,...n)})}_addToQueue(r){let n;typeof r[r.length-1]=="function"&&(n=r.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:r,flags:Object.assign({fromQueue:!0},this.flags)};r.push((l,...f)=>i!==this._queue[0]?void 0:(l!==null?i.tryCount>this._opts.retries&&(yt("packet [%d] is discarded after %d tries",i.id,i.tryCount),this._queue.shift(),n&&n(l)):(yt("packet [%d] was successfully sent",i.id),this._queue.shift(),n&&n(null,...f)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(r=!1){if(yt("draining queue"),!this.connected||this._queue.length===0)return;const n=this._queue[0];if(n.pending&&!r){yt("packet [%d] has already been sent and is waiting for an ack",n.id);return}n.pending=!0,n.tryCount++,yt("sending packet [%d] (try n°%d)",n.id,n.tryCount),this.flags=n.flags,this.emit.apply(this,n.args)}packet(r){r.nsp=this.nsp,this.io._packet(r)}onopen(){yt("transport is open - connecting"),typeof this.auth=="function"?this.auth(r=>{this._sendConnectPacket(r)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(r){this.packet({type:Wn.PacketType.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},r):r})}onerror(r){this.connected||this.emitReserved("connect_error",r)}onclose(r,n){yt("close (%s)",r),this.connected=!1,delete this.id,this.emitReserved("disconnect",r,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(r=>{if(!this.sendBuffer.some(i=>String(i.id)===r)){const i=this.acks[r];delete this.acks[r],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(r){if(r.nsp===this.nsp)switch(r.type){case Wn.PacketType.CONNECT:r.data&&r.data.sid?this.onconnect(r.data.sid,r.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Wn.PacketType.EVENT:case Wn.PacketType.BINARY_EVENT:this.onevent(r);break;case Wn.PacketType.ACK:case Wn.PacketType.BINARY_ACK:this.onack(r);break;case Wn.PacketType.DISCONNECT:this.ondisconnect();break;case Wn.PacketType.CONNECT_ERROR:this.destroy();const i=new Error(r.data.message);i.data=r.data.data,this.emitReserved("connect_error",i);break}}onevent(r){const n=r.data||[];yt("emitting event %j",n),r.id!=null&&(yt("attaching ack callback to event"),n.push(this.ack(r.id))),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(r){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const i of n)i.apply(this,r)}super.emit.apply(this,r),this._pid&&r.length&&typeof r[r.length-1]=="string"&&(this._lastOffset=r[r.length-1])}ack(r){const n=this;let i=!1;return function(...l){i||(i=!0,yt("sending ack %j",l),n.packet({type:Wn.PacketType.ACK,id:r,data:l}))}}onack(r){const n=this.acks[r.id];if(typeof n!="function"){yt("bad ack %s",r.id);return}delete this.acks[r.id],yt("calling ack %s with %j",r.id,r.data),n.withError&&r.data.unshift(null),n.apply(this,r.data)}onconnect(r,n){yt("socket connected with id %s",r),this.id=r,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(r=>this.emitEvent(r)),this.receiveBuffer=[],this.sendBuffer.forEach(r=>{this.notifyOutgoingListeners(r),this.packet(r)}),this.sendBuffer=[]}ondisconnect(){yt("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(r=>r()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(yt("performing disconnect (%s)",this.nsp),this.packet({type:Wn.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(r){return this.flags.compress=r,this}get volatile(){return this.flags.volatile=!0,this}timeout(r){return this.flags.timeout=r,this}onAny(r){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(r),this}prependAny(r){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(r),this}offAny(r){if(!this._anyListeners)return this;if(r){const n=this._anyListeners;for(let i=0;i<n.length;i++)if(r===n[i])return n.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(r){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(r),this}prependAnyOutgoing(r){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(r),this}offAnyOutgoing(r){if(!this._anyOutgoingListeners)return this;if(r){const n=this._anyOutgoingListeners;for(let i=0;i<n.length;i++)if(r===n[i])return n.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(r){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const i of n)i.apply(this,r.data)}}}Hl.Socket=Ex;var Kc={};Object.defineProperty(Kc,"__esModule",{value:!0});Kc.Backoff=void 0;function Xs(s){s=s||{},this.ms=s.min||100,this.max=s.max||1e4,this.factor=s.factor||2,this.jitter=s.jitter>0&&s.jitter<=1?s.jitter:0,this.attempts=0}Kc.Backoff=Xs;Xs.prototype.duration=function(){var s=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var r=Math.random(),n=Math.floor(r*this.jitter*s);s=Math.floor(r*10)&1?s+n:s-n}return Math.min(s,this.max)|0};Xs.prototype.reset=function(){this.attempts=0};Xs.prototype.setMin=function(s){this.ms=s};Xs.prototype.setMax=function(s){this.max=s};Xs.prototype.setJitter=function(s){this.jitter=s};var Cx=We&&We.__createBinding||(Object.create?function(s,r,n,i){i===void 0&&(i=n),Object.defineProperty(s,i,{enumerable:!0,get:function(){return r[n]}})}:function(s,r,n,i){i===void 0&&(i=n),s[i]=r[n]}),Ax=We&&We.__setModuleDefault||(Object.create?function(s,r){Object.defineProperty(s,"default",{enumerable:!0,value:r})}:function(s,r){s.default=r}),Rx=We&&We.__importStar||function(s){if(s&&s.__esModule)return s;var r={};if(s!=null)for(var n in s)n!=="default"&&Object.prototype.hasOwnProperty.call(s,n)&&Cx(r,s,n);return Ax(r,s),r},Ox=We&&We.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Gc,"__esModule",{value:!0});Gc.Manager=void 0;const Nh=cp,Ix=Hl,kx=Rx(zc),Mi=Bl,Px=Kc,Nx=Js,xx=Ox(Sn),Ot=xx.default("socket.io-client:manager");class Dx extends Nx.Emitter{constructor(r,n){var i;super(),this.nsps={},this.subs=[],r&&typeof r=="object"&&(n=r,r=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Nh.installTimerFunctions(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((i=n.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new Px.Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=r;const l=n.parser||kx;this.encoder=new l.Encoder,this.decoder=new l.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(r){return arguments.length?(this._reconnection=!!r,this):this._reconnection}reconnectionAttempts(r){return r===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=r,this)}reconnectionDelay(r){var n;return r===void 0?this._reconnectionDelay:(this._reconnectionDelay=r,(n=this.backoff)===null||n===void 0||n.setMin(r),this)}randomizationFactor(r){var n;return r===void 0?this._randomizationFactor:(this._randomizationFactor=r,(n=this.backoff)===null||n===void 0||n.setJitter(r),this)}reconnectionDelayMax(r){var n;return r===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=r,(n=this.backoff)===null||n===void 0||n.setMax(r),this)}timeout(r){return arguments.length?(this._timeout=r,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(r){if(Ot("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;Ot("opening %s",this.uri),this.engine=new Nh.Socket(this.uri,this.opts);const n=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const l=Mi.on(n,"open",function(){i.onopen(),r&&r()}),f=_=>{Ot("error"),this.cleanup(),this._readyState="closed",this.emitReserved("error",_),r?r(_):this.maybeReconnectOnOpen()},e=Mi.on(n,"error",f);if(this._timeout!==!1){const _=this._timeout;Ot("connect attempt will timeout after %d",_);const T=this.setTimeoutFn(()=>{Ot("connect attempt timed out after %d",_),l(),f(new Error("timeout")),n.close()},_);this.opts.autoUnref&&T.unref(),this.subs.push(()=>{this.clearTimeoutFn(T)})}return this.subs.push(l),this.subs.push(e),this}connect(r){return this.open(r)}onopen(){Ot("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");const r=this.engine;this.subs.push(Mi.on(r,"ping",this.onping.bind(this)),Mi.on(r,"data",this.ondata.bind(this)),Mi.on(r,"error",this.onerror.bind(this)),Mi.on(r,"close",this.onclose.bind(this)),Mi.on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(r){try{this.decoder.add(r)}catch(n){this.onclose("parse error",n)}}ondecoded(r){Nh.nextTick(()=>{this.emitReserved("packet",r)},this.setTimeoutFn)}onerror(r){Ot("error",r),this.emitReserved("error",r)}socket(r,n){let i=this.nsps[r];return i?this._autoConnect&&!i.active&&i.connect():(i=new Ix.Socket(this,r,n),this.nsps[r]=i),i}_destroy(r){const n=Object.keys(this.nsps);for(const i of n)if(this.nsps[i].active){Ot("socket %s is still active, skipping close",i);return}this._close()}_packet(r){Ot("writing packet %j",r);const n=this.encoder.encode(r);for(let i=0;i<n.length;i++)this.engine.write(n[i],r.options)}cleanup(){Ot("cleanup"),this.subs.forEach(r=>r()),this.subs.length=0,this.decoder.destroy()}_close(){Ot("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(r,n){Ot("closed due to %s",r),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",r,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const r=this;if(this.backoff.attempts>=this._reconnectionAttempts)Ot("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();Ot("will wait %dms before reconnect attempt",n),this._reconnecting=!0;const i=this.setTimeoutFn(()=>{r.skipReconnect||(Ot("attempting reconnect"),this.emitReserved("reconnect_attempt",r.backoff.attempts),!r.skipReconnect&&r.open(l=>{l?(Ot("reconnect attempt error"),r._reconnecting=!1,r.reconnect(),this.emitReserved("reconnect_error",l)):(Ot("reconnect success"),r.onreconnect())}))},n);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const r=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",r)}}Gc.Manager=Dx;(function(s,r){var n=We&&We.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.connect=r.io=r.Socket=r.Manager=r.protocol=void 0;const i=Hc,l=Gc;Object.defineProperty(r,"Manager",{enumerable:!0,get:function(){return l.Manager}});const f=Hl;Object.defineProperty(r,"Socket",{enumerable:!0,get:function(){return f.Socket}});const _=n(Sn).default("socket.io-client"),T={};function h(m,b){typeof m=="object"&&(b=m,m=void 0),b=b||{};const E=i.url(m,b.path||"/socket.io"),C=E.source,N=E.id,I=E.path,P=T[N]&&I in T[N].nsps,x=b.forceNew||b["force new connection"]||b.multiplex===!1||P;let U;return x?(_("ignoring socket cache for %s",C),U=new l.Manager(C,b)):(T[N]||(_("new io instance for %s",C),T[N]=new l.Manager(C,b)),U=T[N]),E.query&&!b.query&&(b.query=E.queryKey),U.socket(E.path,b)}r.io=h,r.connect=h,r.default=h,Object.assign(h,{Manager:l.Manager,Socket:f.Socket,io:h,connect:h});var g=zc;Object.defineProperty(r,"protocol",{enumerable:!0,get:function(){return g.protocol}}),s.exports=h})(rd,rd.exports);var Lx=rd.exports;Object.defineProperty($c,"__esModule",{value:!0});$c.SocketCMI=void 0;var Ux=Mx(Lx);function Mx(s){return s&&s.__esModule?s:{default:s}}function bl(s){"@babel/helpers - typeof";return bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},bl(s)}function Fx(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function Wv(s,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,Hx(i.key),i)}}function $x(s,r,n){return r&&Wv(s.prototype,r),n&&Wv(s,n),Object.defineProperty(s,"prototype",{writable:!1}),s}function Hx(s){var r=Bx(s,"string");return bl(r)=="symbol"?r:r+""}function Bx(s,r){if(bl(s)!="object"||!s)return s;var n=s[Symbol.toPrimitive];if(n!==void 0){var i=n.call(s,r||"default");if(bl(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(s)}$c.SocketCMI=function(){function s(r,n){var i=this;Fx(this,s),this.socket=(0,Ux.default)("https://notify.telecmi.com",{query:{token:r}}),this.socket,this.socket.on("disconnect",function(l){n.ready_transfer=!1,l=="transport close"&&n.emit("net_changed",{code:400,msg:"network changed"})}),this.socket.on("connect_error",function(l){n.ready_transfer=!1}),this.socket.on("connect",function(){n.ready_transfer=!0,i.socket.emit("wssip-agent-opt",{join:!0})}),this.socket.on("cmi_transfer",function(l){l.state=="init"&&n.sendDtmf("*9"),n.emit("transfer",l)}),this.socket.on("cmi_record",function(l){n.emit("record",l)})}return $x(s,[{key:"transfer",value:function(n,i){this.socket.connected&&this.socket.emit("agent-call-transfer",{uuid:n,to:i})}},{key:"cancel",value:function(n){this.socket("agent-cancel-transfer",{uuid:n})}}])}();(function(s){function r($){"@babel/helpers - typeof";return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(se){return typeof se}:function(se){return se&&typeof Symbol=="function"&&se.constructor===Symbol&&se!==Symbol.prototype?"symbol":typeof se},r($)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var n=T(El),i=Lr,l=T(Nm),f=T(w0),e=T(E0),_=$c;function T($){return $&&$.__esModule?$:{default:$}}function h($,se){if(!($ instanceof se))throw new TypeError("Cannot call a class as a function")}function g($,se){for(var me=0;me<se.length;me++){var ie=se[me];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty($,b(ie.key),ie)}}function m($,se,me){return se&&g($.prototype,se),me&&g($,me),Object.defineProperty($,"prototype",{writable:!1}),$}function b($){var se=E($,"string");return r(se)=="symbol"?se:se+""}function E($,se){if(r($)!="object"||!$)return $;var me=$[Symbol.toPrimitive];if(me!==void 0){var ie=me.call($,se||"default");if(r(ie)!="object")return ie;throw new TypeError("@@toPrimitive must return a primitive value.")}return(se==="string"?String:Number)($)}function C($,se,me){return se=x(se),N($,P()?Reflect.construct(se,me||[],x($).constructor):se.apply($,me))}function N($,se){if(se&&(r(se)=="object"||typeof se=="function"))return se;if(se!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return I($)}function I($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}function P(){try{var $=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(P=function(){return!!$})()}function x($){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(se){return se.__proto__||Object.getPrototypeOf(se)},x($)}function U($,se){if(typeof se!="function"&&se!==null)throw new TypeError("Super expression must either be null or a function");$.prototype=Object.create(se&&se.prototype,{constructor:{value:$,writable:!0,configurable:!0}}),Object.defineProperty($,"prototype",{writable:!1}),se&&G($,se)}function G($,se){return G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(me,ie){return me.__proto__=ie,me},G($,se)}var te=new l.default,we=new f.default,_e=new e.default;s.default=function($){function se(me){var ie;h(this,se),ie=C(this,se),ie.piopiyOption={},ie.ua={};var de=me||{};return i.EventEmitter.bind(ie),ie.name="PIOPIYJS",ie.version="0.0.5",ie.ice_servers=[{urls:"stun:stunind.telecmi.com"}],ie.piopiyOption.debug=n.default.isBoolean(de.debug)?de.debug:!1,ie.piopiyOption.autoplay=n.default.isBoolean(de.autoplay)?de.autoplay:!0,ie.piopiyOption.autoReboot=n.default.isBoolean(de.autoReboot)?de.autoReboot:!0,ie.piopiyOption.ringTime=n.default.isNumber(de.ringTime)?de.ringTime:60,ie.piopiyOption.displayName=n.default.isString(de.name)?de.name:null,ie.piopiyOption.autoplay&&we.audioTag(),ie}return U(se,$),m(se,[{key:"login",value:function(ie,de,Z){var re=this,W=Z||"sbcsg.telecmi.com";if(n.default.isString(ie)&&n.default.isString(de)){var ne={uri:ie+"@"+Z,authorization_user:ie,password:de,debug:this.piopiyOption.debug,display_name:this.piopiyOption.displayName,no_answer_timeout:this.piopiyOption.ringTime,register:!0,region:W,session_timers:!1};te.start(ne,re),_e.getToken(ie,de,function(bt){bt.code==200&&(re.socketCMI=new _.SocketCMI(bt.token,re))})}else throw new Error("invalid user_id or password")}},{key:"logout",value:function(){var ie=this;te.stop(ie)}},{key:"call",value:function(ie,de){var Z=this;if(!n.default.isString(ie)){Z.emit("error",{code:1002,status:"Invalid type to call"});return}if(n.default.isObject(de)&&!X(de.extra_param)){Z.emit("error",{code:1002,status:"extra_param must be string"});return}te.make(ie,Z,de)}},{key:"terminate",value:function(){var ie=this;te.terminate(ie)}},{key:"reRegister",value:function(){te.re_register()}},{key:"answer",value:function(){var ie=this;te.answer(ie)}},{key:"reject",value:function(){var ie=this;te.reject(ie)}},{key:"sendDtmf",value:function(ie){var de=this;te.dtmf(ie,de)}},{key:"hold",value:function(){var ie=this;te.hold(ie)}},{key:"unHold",value:function(){var ie=this;te.unhold(ie)}},{key:"mute",value:function(){var ie=this;te.mute(ie)}},{key:"unMute",value:function(){var ie=this;te.unmute(ie)}},{key:"isLogedIn",value:function(){var ie=this;return te.islogedin(ie)}},{key:"isConnected",value:function(){var ie=this;return te.isConnected(ie)}},{key:"onHold",value:function(){var ie=this;return te.onhold(ie)}},{key:"onMute",value:function(){var ie=this;return te.onmute(ie)}},{key:"transfer",value:function(ie){var de=this;de.socketCMI.transfer(te.getCallId(de),ie)}},{key:"merge",value:function(){var ie=this;te.dtmf("0",ie)}},{key:"cancel",value:function(){var ie=this;te.dtmf("#",ie)}},{key:"getCallId",value:function(){var ie=this;return te.getCallId(ie)}},{key:"getCallID",value:function(){var ie=this;return te.getCallID(ie)}}])}(i.EventEmitter);var X=function(se){return typeof se=="string"}})(wm);var qx=wm.default,Wx=qx;const jx=gA(Wx),Vx={class:"d-flex h-100 align-center"},V2={__name:"DefaultLayoutWithVerticalNav",setup(s){iA(b=>({"29e775c7":ae(g)})),Kt(""),Kt();const r=Kt(!1),n=Kt(!1),i=Kt("8888"),l=new jx({name:"Faizal",debug:!1,autoplay:!1,ringTime:60});l.login("1001_33334356","123123","sbcind.telecmi.com"),l.on("login",function(b){b.code==200}),l.on("error",function(b){alert("error")}),l.on("hangup",function(b){alert("hangup"),n.value=!1});let f=!0;window.onfocus=()=>{f=!0},window.onblur=()=>{f=!1},l.on("inComingCall",function(b){var E=b.from;if(i.value=E,!f){var C=C=new Notification(E,{badge:"http://cdn.sstatic.net/stackexchange/img/logos/so/so-icon.png",icon:"http://cdn.sstatic.net/stackexchange/img/logos/so/so-icon.png",image:"http://cdn.sstatic.net/stackexchange/img/logos/so/so-icon.png",body:"Incoming Call from "+E,requireInteraction:!0});setTimeout(function(){window.focus(),C.close()},5e3),C.onclick=function(N){l.answer(),setTimeout(()=>{window.focus()},100),C.close()},C.addEventListener("click",N=>{N.action==="reply"?alert("User clicked answer"):N.action==="archive"&&alert("User clicked reject")})}n.value=!0});let e=async function(b){try{const E={action:"POSMODE"},N=(await pt.post("http://192.168.1.138/STEPZWEBSERVICE/authorizeme.aspx",E,{headers:{"Content-Type":"multipart/form-data"}})).data;alert("todoItems:"+JSON.stringify(N))}catch(E){alert(E.message)}};l.on("ringing",function(b){b.code==183}),l.on("answered",function(b){b.code==200&&(n.value=!1,r.value=!0)}),l.on("ended",function(b){b.code==200&&(n.value=!1,r.value=!1)});const _=Kt(!1),T=Kt(null);ti([_,T],()=>{_.value&&T.value&&T.value.fallbackHandle(),!_.value&&T.value&&T.value.resolveHandle()},{immediate:!0});const h=sA(),g=Kt(null);ti([()=>h.isVerticalNavCollapsed,()=>h.isAppRTL],b=>{h.isAppRTL?g.value=b[0]?"rotate-back-180":"rotate-180":g.value=b[0]?"rotate-180":"rotate-back-180"},{immediate:!0});let m=function(b){b===!0?l.answer():l.reject()};return(b,E)=>{const C=xh("IconBtn"),N=WC,I=xh("RouterView"),P=qC,x=HC;return ze(),Ms(ad,null,[rt(ae(OA),{"nav-items":ae(FA)},{navbar:st(({toggleVerticalOverlayNavActive:U})=>{var G;return[qi("div",Vx,[rt(C,{id:"vertical-nav-toggle-btn",class:"ms-n2 d-lg-none",onClick:te=>U(!0)},{default:st(()=>[rt(th,{icon:"ri-menu-line"})]),_:2},1032,["onClick"]),rt(cA,{class:"ms-lg-n2"}),rt(vA),rt(C,{onClick:E[0]||(E[0]=te=>ae(e)(8056883387))},{default:st(()=>[rt(th,{icon:"ri-thunderstorms-line"})]),_:1}),ae(r)?(ze(),ft(mA,{key:0,variant:"flat",class:"ma-2 blink",color:"onCall"},{default:st(()=>[rt(th,{icon:"ri-phone-fill"}),Fs("  On Call ")]),_:1})):Wi("",!0),ae(nh).app.i18n.enable&&((G=ae(nh).app.i18n.langConfig)!=null&&G.length)?(ze(),ft(BC,{key:1,languages:ae(nh).app.i18n.langConfig},null,8,["languages"])):Wi("",!0),rt(hA),rt(fA),rt(uA,{class:"me-2"}),rt(dA)])]}),footer:st(()=>[rt(aA)]),default:st(()=>[rt(N,{ref_key:"refLoadingIndicator",ref:T},null,512),rt(I,null,{default:st(({Component:U})=>[(ze(),ft(oA,{timeout:0,onFallback:E[1]||(E[1]=G=>_.value=!0),onResolve:E[2]||(E[2]=G=>_.value=!1)},{default:st(()=>[(ze(),ft(Nt(U)))]),_:2},1024))]),_:1}),rt(P)]),_:1},8,["nav-items"]),rt(x,{isDialogVisible:ae(n),"onUpdate:isDialogVisible":E[3]||(E[3]=U=>lA(n)?n.value=U:null),persistent:"","confirmation-question":ae(i),"confirm-title":"Deactivated!","confirm-msg":"Your account has been deactivated successfully.","cancel-title":"Cancelled","cancel-msg":"Account Deactivation Cancelled!",onConfirm:ae(m)},null,8,["isDialogVisible","confirmation-question","onConfirm"])],64)}}};export{V2 as default};
